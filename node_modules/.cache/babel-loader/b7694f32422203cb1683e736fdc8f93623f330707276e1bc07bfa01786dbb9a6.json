{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import\"../../../../App.css\";import axios from\"axios\";import Icon from\"../../../../assets/images/users-vector-icon-png_260862.jpg\";import{useSelector}from\"react-redux\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Appointment=()=>{// State to hold the list of doctors and appointments\nconst[doctors,setDoctors]=useState([]);const[appointments,setAppointments]=useState([]);const[loading,setLoading]=useState(true);const userType=useSelector(state=>state.setUserType);const userId=useSelector(state=>state.setUserId);// Fetch data based on userType\nuseEffect(()=>{const fetchData=async()=>{setLoading(true);try{if(userType===1){// Fetch doctors data\nconst response=await axios.get(\"https://consultant-backend-jiwv.onrender.com/public/doctor\");setDoctors(response.data.doctors);// Assuming the response contains a 'doctors' array\n}else if(userType===2){// Fetch appointments data\nconst response=await axios.get(`https://consultant-backend-jiwv.onrender.com/doctor/${userId}/appointments`);setAppointments(response.data.appointments);}}catch(error){console.error(\"Error fetching data:\",error);}finally{setLoading(false);}};fetchData();},[userType]);// Dependency array includes userType to refetch data if userType changes\nconst formatDate=dateString=>{const date=new Date(dateString);return date.toISOString().split(\"T\")[0];// Returns date in YYYY-MM-DD format\n};return/*#__PURE__*/_jsx(\"div\",{className:\"flex row space-x-4 mx-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 bg-white rounded-lg shadow-md w-96 mb-10\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4 border-b py-3\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-semibold\",children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"calendar\",className:\"mr-2\",children:\"\\uD83D\\uDCC5\"}),userType===1?\"Latest Doctors\":\"Latest Appointments\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:userType===1?`${doctors.length} Doctors`:`${appointments.length} Appointments`})]}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"doctor-card-scroll\",children:userType===1?doctors.length>0?doctors.map((doctor,index)=>/*#__PURE__*/_jsx(\"li\",{className:\"flex items-center justify-between py-2 last:border-b-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"img\",{src:Icon// Assuming the doctor object has an 'image' field\n,className:\"w-10 h-10 rounded-full mr-4\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium\",children:[doctor.firstName,\" \",doctor.lastName]}),\" \",/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500 text-sm\",children:[\"Speciality: \",doctor.Departments]}),\" \"]})]})},index)):/*#__PURE__*/_jsx(\"p\",{children:\"No doctors found\"}):userType===2?appointments.length>0?appointments.map((appointment,index)=>/*#__PURE__*/_jsx(\"li\",{className:\"flex items-center justify-between py-2 last:border-b-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium\",children:[\"Appointment with\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-500\",children:appointment.user.name})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500 text-sm\",children:[\"Date: \",formatDate(appointment.date)]})]})})},index)):/*#__PURE__*/_jsx(\"p\",{children:\"No appointments found\"}):null})]})});};export default Appointment;","map":{"version":3,"names":["React","useState","useEffect","axios","Icon","useSelector","jsx","_jsx","jsxs","_jsxs","Appointment","doctors","setDoctors","appointments","setAppointments","loading","setLoading","userType","state","setUserType","userId","setUserId","fetchData","response","get","data","error","console","formatDate","dateString","date","Date","toISOString","split","className","children","role","length","map","doctor","index","src","firstName","lastName","Departments","appointment","user","name"],"sources":["C:/Admin-and-doctor-dashboard/dashboard/src/pages/Dashboard/components/appointment/Appointment.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"../../../../App.css\";\r\nimport axios from \"axios\";\r\nimport Icon from \"../../../../assets/images/users-vector-icon-png_260862.jpg\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst Appointment = () => {\r\n  // State to hold the list of doctors and appointments\r\n  const [doctors, setDoctors] = useState([]);\r\n  const [appointments, setAppointments] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const userType = useSelector((state) => state.setUserType);\r\n  const userId = useSelector((state) => state.setUserId);\r\n\r\n  // Fetch data based on userType\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      setLoading(true);\r\n      try {\r\n        if (userType === 1) {\r\n          // Fetch doctors data\r\n          const response = await axios.get(\r\n            \"https://consultant-backend-jiwv.onrender.com/public/doctor\"\r\n          );\r\n          setDoctors(response.data.doctors); // Assuming the response contains a 'doctors' array\r\n        } else if (userType === 2) {\r\n          // Fetch appointments data\r\n          const response = await axios.get(\r\n            `https://consultant-backend-jiwv.onrender.com/doctor/${userId}/appointments`\r\n          );\r\n          setAppointments(response.data.appointments);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching data:\", error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [userType]); // Dependency array includes userType to refetch data if userType changes\r\n\r\n  const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    return date.toISOString().split(\"T\")[0]; // Returns date in YYYY-MM-DD format\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex row space-x-4 mx-5\">\r\n      <div className=\"p-6 bg-white rounded-lg shadow-md w-96 mb-10\">\r\n        <div className=\"flex justify-between items-center mb-4 border-b py-3\">\r\n          <h2 className=\"text-lg font-semibold\">\r\n            <span role=\"img\" aria-label=\"calendar\" className=\"mr-2\">\r\n              ðŸ“…\r\n            </span>\r\n            {userType === 1 ? \"Latest Doctors\" : \"Latest Appointments\"}\r\n          </h2>\r\n          <span className=\"text-gray-500\">\r\n            {userType === 1\r\n              ? `${doctors.length} Doctors`\r\n              : `${appointments.length} Appointments`}\r\n          </span>\r\n        </div>\r\n        {loading ? (\r\n          <p>Loading...</p>\r\n        ) : (\r\n          <ul className=\"doctor-card-scroll\">\r\n            {userType === 1 ? (\r\n              doctors.length > 0 ? (\r\n                doctors.map((doctor, index) => (\r\n                  <li\r\n                    key={index}\r\n                    className=\"flex items-center justify-between py-2 last:border-b-0\"\r\n                  >\r\n                    <div className=\"flex items-center\">\r\n                      <img\r\n                        src={Icon} // Assuming the doctor object has an 'image' field\r\n                        className=\"w-10 h-10 rounded-full mr-4\"\r\n                      />\r\n                      <div>\r\n                        <p className=\"font-medium\">\r\n                          {doctor.firstName} {doctor.lastName}\r\n                        </p>{\" \"}\r\n                        {/* Doctor name */}\r\n                        <p className=\"text-gray-500 text-sm\">\r\n                          Speciality: {doctor.Departments}\r\n                        </p>{\" \"}\r\n                        {/* Doctor speciality */}\r\n                      </div>\r\n                    </div>\r\n                  </li>\r\n                ))\r\n              ) : (\r\n                <p>No doctors found</p>\r\n              )\r\n            ) : userType === 2 ? (\r\n              appointments.length > 0 ? (\r\n                appointments.map((appointment, index) => (\r\n                  <li\r\n                    key={index}\r\n                    className=\"flex items-center justify-between py-2 last:border-b-0\"\r\n                  >\r\n                    <div className=\"flex items-center\">\r\n                      {/* Customize this section based on your appointment data */}\r\n                      <div>\r\n                        <p className=\"font-medium\">\r\n                          Appointment with{\" \"}\r\n                          <span className=\"text-blue-500\">\r\n                            {appointment.user.name}\r\n                          </span>\r\n                        </p>\r\n                        <p className=\"text-gray-500 text-sm\">\r\n                          Date: {formatDate(appointment.date)}\r\n                        </p>\r\n                        {/* Add more fields as needed */}\r\n                      </div>\r\n                    </div>\r\n                  </li>\r\n                ))\r\n              ) : (\r\n                <p>No appointments found</p>\r\n              )\r\n            ) : null}\r\n          </ul>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Appointment;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}