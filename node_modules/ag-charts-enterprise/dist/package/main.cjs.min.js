"use strict";var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,__export=(t,e)=>{for(var i in e)__defProp(t,i,{get:e[i],enumerable:!0})},__copyProps=(t,e,i,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of __getOwnPropNames(e))!__hasOwnProp.call(t,s)&&s!==i&&__defProp(t,s,{get:()=>e[s],enumerable:!(o=__getOwnPropDesc(e,s))||o.enumerable});return t},__reExport=(t,e,i)=>(__copyProps(t,e,"default"),i&&__copyProps(i,e,"default")),__toCommonJS=t=>__copyProps(__defProp({},"__esModule",{value:!0}),t),__decorateClass=(t,e,i,o)=>{for(var s=o>1?void 0:o?__getOwnPropDesc(e,i):e,a=t.length-1,n;a>=0;a--)(n=t[a])&&(s=(o?n(e,i,s):n(s))||s);return o&&s&&__defProp(e,i,s),s},main_exports={};__export(main_exports,{AgCharts:()=>import_ag_charts_community193.AgCharts,time:()=>import_ag_charts_community193.time}),module.exports=__toCommonJS(main_exports);var import_ag_charts_community193=require("ag-charts-community"),import_ag_charts_community192=require("ag-charts-community"),import_ag_charts_community5=require("ag-charts-community");function loopSymmetrically(t,e,i){const o=(a,n,r,l)=>{let c=t[0];for(let h=a;r>0?h<=n:h>n;h+=r){const d=t[h];if(l(c,d))return!0;c=d}return!1},s=Math.floor(t.length/2);return o(e,s,e,i)?!0:o(t.length-e,s,-e,i)}var import_ag_charts_community=require("ag-charts-community"),{OR,POSITIVE_NUMBER,NAN,AxisInterval,Validate}=import_ag_charts_community._ModuleSupport,AngleAxisInterval=class extends AxisInterval{constructor(){super(...arguments),this.minSpacing=NaN}};__decorateClass([Validate(OR(POSITIVE_NUMBER,NAN))],AngleAxisInterval.prototype,"minSpacing",2);var import_ag_charts_community4=require("ag-charts-community"),import_ag_charts_community3=require("ag-charts-community"),import_ag_charts_community2=require("ag-charts-community"),{BaseProperties,ChartAxisDirection,Layers,ARRAY,BOOLEAN,COLOR_STRING,FONT_STYLE,FONT_WEIGHT,LINE_DASH,NUMBER,OBJECT,POSITIVE_NUMBER:POSITIVE_NUMBER2,RATIO,STRING,UNION,AND,Validate:Validate2,MATCHING_CROSSLINE_TYPE}=import_ag_charts_community2._ModuleSupport,{Group}=import_ag_charts_community2._Scene,{createId}=import_ag_charts_community2._Util,PolarCrossLineLabel=class extends BaseProperties{constructor(){super(...arguments),this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)"}};__decorateClass([Validate2(BOOLEAN,{optional:!0})],PolarCrossLineLabel.prototype,"enabled",2),__decorateClass([Validate2(STRING,{optional:!0})],PolarCrossLineLabel.prototype,"text",2),__decorateClass([Validate2(FONT_STYLE,{optional:!0})],PolarCrossLineLabel.prototype,"fontStyle",2),__decorateClass([Validate2(FONT_WEIGHT,{optional:!0})],PolarCrossLineLabel.prototype,"fontWeight",2),__decorateClass([Validate2(POSITIVE_NUMBER2)],PolarCrossLineLabel.prototype,"fontSize",2),__decorateClass([Validate2(STRING)],PolarCrossLineLabel.prototype,"fontFamily",2),__decorateClass([Validate2(NUMBER)],PolarCrossLineLabel.prototype,"padding",2),__decorateClass([Validate2(COLOR_STRING,{optional:!0})],PolarCrossLineLabel.prototype,"color",2),__decorateClass([Validate2(BOOLEAN,{optional:!0})],PolarCrossLineLabel.prototype,"parallel",2);var _PolarCrossLine=class ut extends BaseProperties{constructor(){super(...arguments),this.id=createId(this),this.shape="polygon",this.label=new PolarCrossLineLabel,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=ChartAxisDirection.X,this.axisInnerRadius=0,this.axisOuterRadius=0,this.group=new Group({name:`${this.id}`,layer:!0,zIndex:ut.LINE_LAYER_ZINDEX}),this.labelGroup=new Group({name:`${this.id}`,layer:!0,zIndex:ut.LABEL_LAYER_ZINDEX})}setSectorNodeProps(e){e.fill=this.fill,e.fillOpacity=this.fillOpacity??1,e.stroke=this.stroke,e.strokeOpacity=this.strokeOpacity??1,e.strokeWidth=this.strokeWidth??1,e.lineDash=this.lineDash}setLabelNodeProps(e,i,o,s,a){const{label:n}=this;e.x=i,e.y=o,e.text=n.text,e.textAlign="center",e.textBaseline=s,e.rotation=a,e.rotationCenterX=i,e.rotationCenterY=o,e.fill=n.color,e.fontFamily=n.fontFamily,e.fontSize=n.fontSize,e.fontStyle=n.fontStyle,e.visible=!0}};_PolarCrossLine.LINE_LAYER_ZINDEX=Layers.SERIES_CROSSLINE_LINE_ZINDEX,_PolarCrossLine.RANGE_LAYER_ZINDEX=Layers.SERIES_CROSSLINE_RANGE_ZINDEX,_PolarCrossLine.LABEL_LAYER_ZINDEX=Layers.SERIES_LABEL_ZINDEX,__decorateClass([Validate2(BOOLEAN,{optional:!0})],_PolarCrossLine.prototype,"enabled",2),__decorateClass([Validate2(UNION(["range","line"],"a crossLine type"),{optional:!0})],_PolarCrossLine.prototype,"type",2),__decorateClass([Validate2(AND(MATCHING_CROSSLINE_TYPE("range"),ARRAY.restrict({length:2})),{optional:!0})],_PolarCrossLine.prototype,"range",2),__decorateClass([Validate2(MATCHING_CROSSLINE_TYPE("value"),{optional:!0})],_PolarCrossLine.prototype,"value",2),__decorateClass([Validate2(COLOR_STRING,{optional:!0})],_PolarCrossLine.prototype,"fill",2),__decorateClass([Validate2(RATIO,{optional:!0})],_PolarCrossLine.prototype,"fillOpacity",2),__decorateClass([Validate2(COLOR_STRING,{optional:!0})],_PolarCrossLine.prototype,"stroke",2),__decorateClass([Validate2(NUMBER,{optional:!0})],_PolarCrossLine.prototype,"strokeWidth",2),__decorateClass([Validate2(RATIO,{optional:!0})],_PolarCrossLine.prototype,"strokeOpacity",2),__decorateClass([Validate2(LINE_DASH,{optional:!0})],_PolarCrossLine.prototype,"lineDash",2),__decorateClass([Validate2(UNION(["polygon","circle"],"a shape"))],_PolarCrossLine.prototype,"shape",2),__decorateClass([Validate2(OBJECT)],_PolarCrossLine.prototype,"label",2);var PolarCrossLine=_PolarCrossLine,{ChartAxisDirection:ChartAxisDirection2,validateCrossLineValues}=import_ag_charts_community3._ModuleSupport,{Path,Sector,Text}=import_ag_charts_community3._Scene,{normalizeAngle360,isNumberEqual}=import_ag_charts_community3._Util,_AngleCrossLine=class lt extends PolarCrossLine{constructor(){super(),this.direction=ChartAxisDirection2.X,this.polygonNode=new Path,this.sectorNode=new Sector,this.lineNode=new Path,this.labelNode=new Text,this.group.append(this.polygonNode),this.group.append(this.sectorNode),this.group.append(this.lineNode),this.labelGroup.append(this.labelNode)}update(e){const{scale:i,shape:o,type:s,value:a,range:n}=this;if(!i||!s||!validateCrossLineValues(s,a,n,i)){this.group.visible=!1,this.labelGroup.visible=!1;return}this.group.visible=e,this.labelGroup.visible=e,s==="line"&&o==="circle"&&i instanceof import_ag_charts_community3._Scale.BandScale&&(this.type="range",this.range=[a,a]),this.updateLineNode(e),this.updatePolygonNode(e),this.updateSectorNode(e),this.updateLabelNode(e)}updateLineNode(e){const{scale:i,type:o,value:s,lineNode:a}=this;let n;if(!e||o!=="line"||!i||isNaN(n=i.convert(s))){a.visible=!1;return}const{axisInnerRadius:r,axisOuterRadius:l}=this;a.visible=!0,a.stroke=this.stroke,a.strokeOpacity=this.strokeOpacity??1,a.strokeWidth=this.strokeWidth??1,a.fill=void 0,a.lineDash=this.lineDash;const c=l*Math.cos(n),h=l*Math.sin(n),d=r*Math.cos(n),u=r*Math.sin(n);a.path.clear(!0),a.path.moveTo(d,u),a.path.lineTo(c,h),this.group.zIndex=lt.LINE_LAYER_ZINDEX}updatePolygonNode(e){const{polygonNode:i,range:o,scale:s,shape:a,type:n}=this;let r;if(!e||n!=="range"||a!=="polygon"||!s||!o||!(r=s.ticks?.())){i.visible=!1;return}const{axisInnerRadius:l,axisOuterRadius:c}=this,h=r.indexOf(o[0]),d=r.indexOf(o[1]),g=(h<=d?r.slice(h,d+1):r.slice(h).concat(r.slice(0,d+1))).map(p=>s.convert(p));i.visible=!0,this.setSectorNodeProps(i);const{path:y}=i;y.clear(!0),g.forEach((p,m)=>{const f=c*Math.cos(p),v=c*Math.sin(p);m===0?y.moveTo(f,v):y.lineTo(f,v)}),l===0?y.lineTo(0,0):g.slice().reverse().forEach(p=>{const m=l*Math.cos(p),f=l*Math.sin(p);y.lineTo(m,f)}),i.path.closePath(),this.group.zIndex=lt.RANGE_LAYER_ZINDEX}updateSectorNode(e){const{sectorNode:i,range:o,scale:s,shape:a,type:n}=this;if(!e||n!=="range"||a!=="circle"||!s||!o){i.visible=!1;return}const{axisInnerRadius:r,axisOuterRadius:l}=this,c=o.map(u=>s.convert(u)),h=s.step??0,d=s instanceof import_ag_charts_community3._Scale.BandScale?h/2:0;i.visible=!0,this.setSectorNodeProps(i),i.centerX=0,i.centerY=0,i.innerRadius=r,i.outerRadius=l,i.startAngle=c[0]-d,i.endAngle=c[1]+d,this.group.zIndex=lt.RANGE_LAYER_ZINDEX}updateLabelNode(e){const{label:i,labelNode:o,range:s,scale:a,type:n}=this;if(!e||i.enabled===!1||!i.text||!a||n==="range"&&!s){o.visible=!0;return}const{axisInnerRadius:r,axisOuterRadius:l}=this;let c,h,d,u;if(n==="line"){const g=normalizeAngle360(a.convert(this.value)),y=1.5*Math.PI,p=isNumberEqual(g,y)||g>y||g<Math.PI/2,m=(r+l)/2*Math.cos(g),f=(r+l)/2*Math.sin(g);c=m+i.padding*Math.cos(g+Math.PI/2),h=f+i.padding*Math.sin(g+Math.PI/2),u=p?"top":"bottom",d=p?g:g-Math.PI}else{const[g,y]=s.map(S=>normalizeAngle360(a.convert(S)));let p=(g+y)/2;g>y&&(p-=Math.PI),p=normalizeAngle360(p);const m=(isNumberEqual(p,0)||p>0)&&p<Math.PI;let f;const v=a.ticks?.()??[];this.shape==="circle"||v.length<3?f=l-i.padding:f=l*Math.cos(Math.PI/v.length)-i.padding,c=f*Math.cos(p),h=f*Math.sin(p),u=m?"bottom":"top",d=m?p-Math.PI/2:p+Math.PI/2}this.setLabelNodeProps(o,c,h,u,d)}};_AngleCrossLine.className="AngleCrossLine";var AngleCrossLine=_AngleCrossLine,{AND:AND2,ChartAxisDirection:ChartAxisDirection3,GREATER_THAN,NUMBER:NUMBER2,UNION:UNION2,ProxyOnWrite,TextWrapper,TextUtils,Validate:Validate3}=import_ag_charts_community4._ModuleSupport,{Path:Path2,Text:Text2}=import_ag_charts_community4._Scene,{angleBetween,isNumberEqual:isNumberEqual2,toRadians,normalizeAngle360:normalizeAngle3602}=import_ag_charts_community4._Util,AngleAxisLabel=class extends import_ag_charts_community4._ModuleSupport.AxisLabel{constructor(){super(...arguments),this.orientation="fixed"}};__decorateClass([Validate3(UNION2(["fixed","parallel","perpendicular"],"a label orientation"))],AngleAxisLabel.prototype,"orientation",2);var AngleAxis=class extends import_ag_charts_community4._ModuleSupport.PolarAxis{constructor(t,e){super(t,e),this.startAngle=0,this.endAngle=void 0,this.labelData=[],this.tickData=[],this.radiusLine=this.axisGroup.appendChild(new Path2),this.computeRange=()=>{const i=normalizeAngle3602(-Math.PI/2+toRadians(this.startAngle));let o=this.endAngle==null?i+Math.PI*2:-Math.PI/2+toRadians(this.endAngle);o<i&&(o+=2*Math.PI),this.range=[i,o]},this.includeInvisibleDomains=!0}get direction(){return ChartAxisDirection3.X}createLabel(){return new AngleAxisLabel}update(){return this.updateScale(),this.updatePosition(),this.updateGridLines(),this.updateTickLines(),this.updateLabels(),this.updateRadiusLine(),this.updateCrossLines(),this.tickData.length}calculateAvailableRange(){const{range:t,gridLength:e}=this;return angleBetween(t[0],t[1])*e}updatePosition(){const{translation:t,axisGroup:e,gridGroup:i,crossLineGroup:o}=this,s=Math.floor(t.x),a=Math.floor(t.y);e.translationX=s,e.translationY=a,i.translationX=s,i.translationY=a,o.translationX=s,o.translationY=a}updateRadiusLine(){const t=this.radiusLine,{path:e}=t;e.clear(!0);const{points:i,closePath:o}=this.getAxisLinePoints();i.forEach(({x:s,y:a,moveTo:n,arc:r,radius:l=0,startAngle:c=0,endAngle:h=0})=>{r?e.arc(s,a,l,c,h):n?e.moveTo(s,a):e.lineTo(s,a)}),o&&e.closePath(),t.visible=this.line.enabled,t.stroke=this.line.stroke,t.strokeWidth=this.line.width,t.fill=void 0}getAxisLinePoints(){const{scale:t,shape:e,gridLength:i}=this,[o,s]=this.range,a=isNumberEqual2(s-o,2*Math.PI),n=[];if(e==="circle")a?(n.push({x:i,y:0,moveTo:!0}),n.push({x:0,y:0,radius:i,startAngle:0,endAngle:2*Math.PI,arc:!0,moveTo:!1})):(n.push({x:i*Math.cos(o),y:i*Math.sin(o),moveTo:!0}),n.push({x:0,y:0,radius:i,startAngle:normalizeAngle3602(o),endAngle:normalizeAngle3602(s),arc:!0,moveTo:!1}));else if(e==="polygon"){const r=(t.ticks?.()??[]).map(l=>t.convert(l));r.length>2&&r.forEach((l,c)=>{const h=i*Math.cos(l),d=i*Math.sin(l),u=c===0;n.push({x:h,y:d,moveTo:u})})}return{points:n,closePath:a}}updateGridLines(){const{scale:t,gridLength:e,gridLine:{enabled:i,style:o,width:s},innerRadiusRatio:a}=this;if(!(o&&e>0))return;const n=this.tickData,r=e*a,l=o.length,c=h=>h.value;this.gridLineGroupSelection.update(i?n:[],void 0,c).each((h,d,u)=>{const{value:g}=d,{stroke:y,lineDash:p}=o[u%l],m=t.convert(g);h.x1=r*Math.cos(m),h.y1=r*Math.sin(m),h.x2=e*Math.cos(m),h.y2=e*Math.sin(m),h.stroke=y,h.strokeWidth=s,h.lineDash=p,h.fill=void 0}),this.gridLineGroupSelection.cleanup()}updateLabels(){const{label:t,tickLabelGroupSelection:e}=this,i=this.tickData;e.update(t.enabled?i:[]).each((o,s,a)=>{const n=this.labelData[a];if(!n||n.hidden){o.visible=!1;return}o.text=n.text,o.setFont(t),o.fill=t.color,o.x=n.x,o.y=n.y,o.textAlign=n.textAlign,o.textBaseline=n.textBaseline,o.visible=!0,n.rotation?(o.rotation=n.rotation,o.rotationCenterX=n.x,o.rotationCenterY=n.y):o.rotation=0})}updateTickLines(){const{scale:t,gridLength:e,tick:i,tickLineGroupSelection:o}=this,s=this.tickData;o.update(i.enabled?s:[]).each((a,n)=>{const{value:r}=n,l=t.convert(r),c=Math.cos(l),h=Math.sin(l);a.x1=e*c,a.y1=e*h,a.x2=(e+i.size)*c,a.y2=(e+i.size)*h,a.stroke=i.stroke,a.strokeWidth=i.width})}createLabelNodeData(t,e,i){const{label:o,gridLength:s,scale:a,tick:n}=this;if(!o.enabled)return[];const r=new Text2,l=i.x-this.translation.x,c=i.x+i.width-this.translation.x,h=t.map((d,u)=>{const{value:g}=d,y=s+o.padding+n.size,p=a.convert(g),m=Math.cos(p),f=Math.sin(p),v=y*m,S=y*f,{textAlign:x,textBaseline:M}=this.getLabelAlign(p),T=u===t.length-1&&g!==t[0]&&isNumberEqual2(normalizeAngle3602(p),normalizeAngle3602(a.convert(t[0]))),b=this.getLabelRotation(p);let I=String(g);if(o.formatter){const{callbackCache:N}=this.moduleCtx;I=N.call(o.formatter,{value:g,index:u})??""}r.text=I,r.x=v,r.y=S,r.setFont(o),r.textAlign=x,r.textBaseline=M,r.rotation=b,b&&(r.rotationCenterX=v,r.rotationCenterY=S);let D=b?r.computeTransformedBBox():r.getBBox();if(D&&e.hideWhenNecessary&&!b){const N=l-D.x,k=D.x+D.width-c,_=1;if(N>_||k>_){const O=D.width-Math.max(N,k);I=TextWrapper.wrapText(I,{maxWidth:O,font:o,textWrap:"never"}),I===TextUtils.EllipsisChar&&(I=""),r.text=I,D=r.getBBox()}}return{text:I,x:v,y:S,textAlign:x,textBaseline:M,hidden:I===""||d.hidden||T,rotation:b,box:D}});return o.avoidCollisions&&this.avoidLabelCollisions(h),h}computeLabelsBBox(t,e){this.tickData=this.generateAngleTicks(),this.labelData=this.createLabelNodeData(this.tickData,t,e);const i=this.labelData.map(({box:o})=>o).filter(o=>o!=null);return!this.label.enabled||i.length===0?null:import_ag_charts_community4._Scene.BBox.merge(i)}getLabelOrientation(){const{label:t}=this;return t instanceof AngleAxisLabel?t.orientation:"fixed"}getLabelRotation(t){let e=toRadians(this.label.rotation??0);t=normalizeAngle3602(t);const i=this.getLabelOrientation();return i==="parallel"?(e+=t,t>=0&&t<Math.PI?e-=Math.PI/2:e+=Math.PI/2):i==="perpendicular"&&(e+=t,t>=Math.PI/2&&t<1.5*Math.PI&&(e+=Math.PI)),e}getLabelAlign(t){const e=Math.cos(t),i=Math.sin(t);let o,s;const a=this.getLabelOrientation(),n=isNumberEqual2(e,0),r=isNumberEqual2(i,0),l=isNumberEqual2(e,1),c=isNumberEqual2(i,-1),h=e>0&&!n,d=i>0&&!r;return a==="parallel"?(o="center",s=l&&r||d?"top":"bottom"):a==="perpendicular"?(o=c||h?"left":"right",s="middle"):(o="right",n?o="center":h&&(o="left"),s="bottom",r?s="middle":d&&(s="top")),{textAlign:o,textBaseline:s}}updateCrossLines(){this.crossLines?.forEach(t=>{if(t instanceof AngleCrossLine){const{shape:e,gridLength:i,innerRadiusRatio:o}=this;t.shape=e,t.axisOuterRadius=i,t.axisInnerRadius=i*o}}),super.updateCrossLines({rotation:0,parallelFlipRotation:0,regularFlipRotation:0})}};AngleAxis.CrossLineConstructor=AngleCrossLine,__decorateClass([ProxyOnWrite("rotation"),Validate3(NUMBER2.restrict({min:0,max:360}))],AngleAxis.prototype,"startAngle",2),__decorateClass([Validate3(AND2(NUMBER2.restrict({min:0,max:720}),GREATER_THAN("startAngle")),{optional:!0})],AngleAxis.prototype,"endAngle",2);var{RATIO:RATIO2,OBJECT:OBJECT2,Validate:Validate4}=import_ag_charts_community5._ModuleSupport,{BandScale}=import_ag_charts_community5._Scale,{isNumberEqual:isNumberEqual3}=import_ag_charts_community5._Util,AngleCategoryAxis=class extends AngleAxis{constructor(t){super(t,new BandScale),this.groupPaddingInner=0,this.paddingInner=0,this.interval=new AngleAxisInterval}generateAngleTicks(){const{scale:t,gridLength:e}=this,{values:i,minSpacing:o}=this.interval,s=i??t.ticks()??[];if(s.length<2||isNaN(o))return s.map(c=>({value:c,visible:!0}));const a=s[0],n=t.convert(a),r=e*Math.cos(n),l=e*Math.sin(n);for(let c=1;c<s.length-1;c++){const h=s[c],d=t.convert(h);if(d-n>Math.PI)break;const u=e*Math.cos(d),g=e*Math.sin(d);if(Math.sqrt((u-r)**2+(g-l)**2)>o){const p=new Set([a]);return loopSymmetrically(s,c,(m,f)=>{p.add(f)}),s.map(m=>{const f=p.has(m);return{value:m,visible:f}})}}return[{value:a,visible:!0}]}avoidLabelCollisions(t){let{minSpacing:e}=this.label;if(Number.isFinite(e)||(e=0),t.length<3)return;const i=(l,c)=>{if(l.hidden||c.hidden)return!1;const h=l.box.clone().grow(e/2),d=c.box.clone().grow(e/2);return h.collidesBBox(d)},o=t[0],s=t.at(-1),a=new Set([o]),n=isNumberEqual3(o.x,s.x)&&isNumberEqual3(o.y,s.y),r=Math.floor(t.length/2);for(let l=1;l<=r;l++){const c=n?t.slice(0,-1):t;if(!loopSymmetrically(c,l,i)){loopSymmetrically(c,l,(d,u)=>{a.add(u)});break}}t.forEach(l=>{a.has(l)||(l.hidden=!0,l.box=void 0)})}};AngleCategoryAxis.className="AngleCategoryAxis",AngleCategoryAxis.type="angle-category",__decorateClass([Validate4(RATIO2)],AngleCategoryAxis.prototype,"groupPaddingInner",2),__decorateClass([Validate4(RATIO2)],AngleCategoryAxis.prototype,"paddingInner",2),__decorateClass([Validate4(OBJECT2)],AngleCategoryAxis.prototype,"interval",2);var AngleCategoryAxisModule={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"angle-category",moduleFactory:t=>new AngleCategoryAxis(t)},import_ag_charts_community7=require("ag-charts-community"),import_ag_charts_community6=require("ag-charts-community"),{LinearScale,Invalidating}=import_ag_charts_community6._Scale,{isNumberEqual:isNumberEqual4,range,isDenseInterval}=import_ag_charts_community6._Util,LinearAngleScale=class extends LinearScale{constructor(){super(...arguments),this.arcLength=0,this.niceTickStep=0}ticks(){if(!this.domain||this.domain.length<2||this.domain.some(s=>!isFinite(s))||this.arcLength<=0)return[];this.refresh();const{interval:t}=this,[e,i]=this.getDomain();if(t){const s=Math.abs(t),a=this.getPixelRange();if(!isDenseInterval((i-e)/s,a))return range(e,i,s)}const o=this.nice&&this.niceTickStep?this.niceTickStep:this.getTickStep(e,i);return range(e,i,o)}hasNiceRange(){const t=this.range.slice().sort((i,o)=>i-o);return[Math.PI,2*Math.PI].some(i=>isNumberEqual4(i,t[1]-t[0]))}getNiceStepAndTickCount(){const[t,e]=this.niceDomain;let i=this.getTickStep(t,e);const o=isNaN(this.maxTickCount)?1/0:this.maxTickCount,s=Math.abs(e-t)/i;let a=Math.pow(2,Math.ceil(Math.log(s)/Math.log(2)));return a>o&&(a/=2,i*=2),{count:a,step:i}}updateNiceDomain(){if(super.updateNiceDomain(),!this.hasNiceRange())return;const t=this.niceDomain[0]>this.niceDomain[1],e=t?this.niceDomain[1]:this.niceDomain[0],{step:i,count:o}=this.getNiceStepAndTickCount(),s=1/i,a=i>=1?Math.ceil(e/i+o)*i:Math.ceil((e+o*i)*s)/s;this.niceDomain=t?[a,e]:[e,a],this.niceTickStep=i}getPixelRange(){return this.arcLength}};__decorateClass([Invalidating],LinearAngleScale.prototype,"arcLength",2);var{AND:AND3,Default,GREATER_THAN:GREATER_THAN2,LESS_THAN,NUMBER_OR_NAN,OBJECT:OBJECT3,Validate:Validate5}=import_ag_charts_community7._ModuleSupport,{angleBetween:angleBetween2,isNumberEqual:isNumberEqual5,normalisedExtentWithMetadata}=import_ag_charts_community7._Util,AngleNumberAxis=class extends AngleAxis{constructor(t){super(t,new LinearAngleScale),this.shape="circle",this.min=NaN,this.max=NaN,this.interval=new AngleAxisInterval}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:o,clipped:s}=normalisedExtentWithMetadata(t,e,i);return{domain:o,clipped:s}}getRangeArcLength(){const{range:t}=this,e=Math.min(...t),i=Math.max(...t),o=angleBetween2(e,i)||2*Math.PI,s=this.gridLength;return o*s}generateAngleTicks(){const t=this.getRangeArcLength(),{scale:e,range:i}=this,{values:o,minSpacing:s,maxSpacing:a}=this.interval,n=a?Math.floor(t/a):1,r=s?Math.floor(t/s):1/0,l=Math.floor(4/Math.PI*Math.abs(i[0]-i[1]));return e.tickCount=Math.max(n,Math.min(r,l)),e.minTickCount=n,e.maxTickCount=r,e.arcLength=t,(o??e.ticks()).map(h=>({value:h,visible:!0}))}avoidLabelCollisions(t){let{minSpacing:e}=this.label;Number.isFinite(e)||(e=0);const i=(a,n)=>{if(a.hidden||n.hidden)return!1;const r=a.box.clone().grow(e/2),l=n.box.clone().grow(e/2);return r.collidesBBox(l)},o=t[0],s=t.at(-1);o!==s&&isNumberEqual5(o.x,s.x)&&isNumberEqual5(o.y,s.y)&&(s.hidden=!0);for(let a=1;a<t.length;a*=2){let n=!1;for(let r=a;r<t.length;r+=a){const l=t[r],c=t[r-a];if(i(c,l)){n=!0;break}}if(!n){t.forEach((r,l)=>{l%a>0&&(r.hidden=!0,r.box=void 0)});return}}t.forEach((a,n)=>{n>0&&(a.hidden=!0,a.box=void 0)})}};AngleNumberAxis.className="AngleNumberAxis",AngleNumberAxis.type="angle-number",__decorateClass([Validate5(AND3(NUMBER_OR_NAN,LESS_THAN("max"))),Default(NaN)],AngleNumberAxis.prototype,"min",2),__decorateClass([Validate5(AND3(NUMBER_OR_NAN,GREATER_THAN2("min"))),Default(NaN)],AngleNumberAxis.prototype,"max",2),__decorateClass([Validate5(OBJECT3)],AngleNumberAxis.prototype,"interval",2);var AngleNumberAxisModule={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"angle-number",moduleFactory:t=>new AngleNumberAxis(t)},import_ag_charts_community8=require("ag-charts-community"),{OrdinalTimeScale}=import_ag_charts_community8._Scale,{dateToNumber}=import_ag_charts_community8._ModuleSupport,OrdinalTimeAxis=class extends import_ag_charts_community8._ModuleSupport.CategoryAxis{constructor(t){super(t,new OrdinalTimeScale)}normaliseDataDomain(t){const e=[],i=new Set;for(let o of t){typeof o=="number"&&(o=new Date(o));const s=dateToNumber(o);i.has(s)||(i.add(s),e.push(o))}return e.sort((o,s)=>dateToNumber(o)-dateToNumber(s)),{domain:e,clipped:!1}}onFormatChange(t,e,i,o){o?super.onFormatChange(t,e,i,o):this.labelFormatter=this.scale.tickFormat({ticks:t,domain:i})}};OrdinalTimeAxis.className="OrdinalTimeAxis",OrdinalTimeAxis.type="ordinal-time";var OrdinalTimeAxisModule={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"ordinal-time",moduleFactory:t=>new OrdinalTimeAxis(t)},import_ag_charts_community11=require("ag-charts-community"),import_ag_charts_community10=require("ag-charts-community"),import_ag_charts_community9=require("ag-charts-community"),{ChartAxisDirection:ChartAxisDirection4,Validate:Validate6,DEGREE,validateCrossLineValues:validateCrossLineValues2}=import_ag_charts_community9._ModuleSupport,{Path:Path3,Sector:Sector2,Text:Text3}=import_ag_charts_community9._Scene,{normalizeAngle360:normalizeAngle3603,toRadians:toRadians2,isNumberEqual:isNumberEqual6}=import_ag_charts_community9._Util,RadiusCrossLineLabel=class extends PolarCrossLineLabel{constructor(){super(...arguments),this.positionAngle=void 0}};__decorateClass([Validate6(DEGREE,{optional:!0})],RadiusCrossLineLabel.prototype,"positionAngle",2);var _RadiusCrossLine=class pt extends PolarCrossLine{constructor(){super(),this.direction=ChartAxisDirection4.Y,this.label=new RadiusCrossLineLabel,this.polygonNode=new Path3,this.sectorNode=new Sector2,this.labelNode=new Text3,this.outerRadius=0,this.innerRadius=0,this.group.append(this.polygonNode),this.group.append(this.sectorNode),this.labelGroup.append(this.labelNode)}update(e){const{scale:i,type:o,value:s,range:a}=this;if(!i||!o||!validateCrossLineValues2(o,s,a,i)){this.group.visible=!1,this.labelGroup.visible=!1;return}o==="line"&&i instanceof import_ag_charts_community9._Scale.BandScale&&(this.type="range",this.range=[s,s]),this.updateRadii();const{innerRadius:n,outerRadius:r}=this;e&&(e=n>=this.axisInnerRadius&&r<=this.axisOuterRadius),this.group.visible=e,this.labelGroup.visible=e,this.updatePolygonNode(e),this.updateSectorNode(e),this.updateLabelNode(e),this.group.zIndex=this.type==="line"?pt.LINE_LAYER_ZINDEX:pt.RANGE_LAYER_ZINDEX}updateRadii(){const{range:e,scale:i,type:o,axisInnerRadius:s,axisOuterRadius:a}=this;if(!i)return{innerRadius:0,outerRadius:0};const n=c=>a+s-c;let r=0,l=0;if(o==="line")r=n(i.convert(this.value)),l=r;else{const c=Math.abs(i?.bandwidth??0),h=e.map(d=>i.convert(d));r=n(Math.max(...h)),l=n(Math.min(...h))+c}this.outerRadius=r,this.innerRadius=l}drawPolygon(e,i,o){i.forEach((s,a)=>{const n=e*Math.cos(s),r=e*Math.sin(s);a===0?o.path.moveTo(n,r):o.path.lineTo(n,r)}),o.path.closePath()}updatePolygonNode(e){const{gridAngles:i,polygonNode:o,scale:s,shape:a,type:n,innerRadius:r,outerRadius:l}=this;if(!e||a!=="polygon"||!s||!i){o.visible=!1;return}o.visible=!0;const c=this.getPadding();o.path.clear(!0),this.drawPolygon(l-c,i,o);const h=i.slice().reverse(),d=n==="line"?l-c:r+c;this.drawPolygon(d,h,o),this.setSectorNodeProps(o)}updateSectorNode(e){const{axisInnerRadius:i,axisOuterRadius:o,scale:s,sectorNode:a,shape:n,innerRadius:r,outerRadius:l}=this;if(!e||n!=="circle"||!s){a.visible=!1;return}a.visible=!0,a.startAngle=0,a.endAngle=2*Math.PI;const c=this.getPadding(),h=import_ag_charts_community9._Util.clamp(i,r+c,o),d=import_ag_charts_community9._Util.clamp(i,l-c,o);a.innerRadius=Math.min(h,d),a.outerRadius=Math.max(h,d),this.setSectorNodeProps(a)}updateLabelNode(e){const{innerRadius:i,label:o,labelNode:s,scale:a,shape:n,type:r}=this;if(!e||o.enabled===!1||!o.text||!a){s.visible=!1;return}const l=normalizeAngle3603(toRadians2((o.positionAngle??0)-90)),c=(isNumberEqual6(l,0)||l>0)&&l<Math.PI,h=c?l-Math.PI/2:l+Math.PI/2;let d=0;const u=this.gridAngles??[];r==="line"?d=i+o.padding:n==="circle"||u.length<3?d=i-o.padding:d=i*Math.cos(Math.PI/u.length)-o.padding;const g=d*Math.cos(l),y=d*Math.sin(l);let p;r==="line"?p=c?"top":"bottom":p=c?"bottom":"top",this.setLabelNodeProps(s,g,y,p,h)}getPadding(){const{scale:e}=this;if(!e)return 0;const i=Math.abs(e.bandwidth??0),o=Math.abs(e.step??0);return e instanceof import_ag_charts_community9._Scale.BandScale?(o-i)/2:0}};_RadiusCrossLine.className="RadiusCrossLine";var RadiusCrossLine=_RadiusCrossLine,{ChartAxisDirection:ChartAxisDirection5,Default:Default2,Layers:Layers2,DEGREE:DEGREE2,BOOLEAN:BOOLEAN2,Validate:Validate7}=import_ag_charts_community10._ModuleSupport,{Caption,Group:Group2,Path:Path4,Selection}=import_ag_charts_community10._Scene,{isNumberEqual:isNumberEqual7,normalizeAngle360:normalizeAngle3604,toRadians:toRadians3}=import_ag_charts_community10._Util,RadiusAxisLabel=class extends import_ag_charts_community10._ModuleSupport.AxisLabel{constructor(){super(...arguments),this.autoRotateAngle=335}};__decorateClass([Validate7(BOOLEAN2,{optional:!0})],RadiusAxisLabel.prototype,"autoRotate",2),__decorateClass([Validate7(DEGREE2)],RadiusAxisLabel.prototype,"autoRotateAngle",2);var RadiusAxis=class extends import_ag_charts_community10._ModuleSupport.PolarAxis{constructor(t,e){super(t,e),this.positionAngle=0,this.gridPathGroup=this.gridGroup.appendChild(new Group2({name:`${this.id}-gridPaths`,zIndex:Layers2.AXIS_GRID_ZINDEX})),this.gridPathSelection=Selection.select(this.gridPathGroup,Path4)}get direction(){return ChartAxisDirection5.Y}getAxisTransform(){const t=this.scale.range[0],{translation:e,positionAngle:i,innerRadiusRatio:o}=this,s=t*o,a=toRadians3(i);return{translationX:e.x,translationY:e.y-t-s,rotation:a,rotationCenterX:0,rotationCenterY:t+s}}updateSelections(t,e,i){super.updateSelections(t,e,i);const{gridLine:{enabled:o,style:s,width:a},shape:n}=this;if(!s)return;const r=this.prepareTickData(e),l=s.length,c=(p,m)=>{const{stroke:f,lineDash:v}=s[m%l];p.stroke=f,p.strokeWidth=a,p.lineDash=v,p.fill=void 0},[h,d]=this.gridRange??[0,2*Math.PI],u=isNumberEqual7(d-h,2*Math.PI),g=(p,m)=>{const{path:f}=p;f.clear(!0);const v=this.getTickRadius(m);u?(f.moveTo(v,0),f.arc(0,0,v,0,2*Math.PI)):(f.moveTo(v*Math.cos(h),v*Math.sin(h)),f.arc(0,0,v,normalizeAngle3604(h),normalizeAngle3604(d))),u&&f.closePath()},y=(p,m)=>{const{path:f}=p,v=this.gridAngles;if(f.clear(!0),!v||v.length<3)return;const S=this.getTickRadius(m);v.forEach((x,M)=>{const T=S*Math.cos(x),b=S*Math.sin(x);M===0?f.moveTo(T,b):f.lineTo(T,b),v.forEach((I,D)=>{const N=S*Math.cos(I),k=S*Math.sin(I);D===0?f.moveTo(N,k):f.lineTo(N,k)}),f.closePath()}),f.closePath()};this.gridPathSelection.update(o?r:[]).each((p,m,f)=>{c(p,f),n==="circle"?g(p,m):y(p,m)})}updateTitle(){const t=l=>l.defaultValue,{title:e,_titleCaption:i,range:o,moduleCtx:{callbackCache:s}}=this,{formatter:a=t}=this.title??{};if(!e){i.enabled=!1;return}i.enabled=e.enabled,i.fontFamily=e.fontFamily,i.fontSize=e.fontSize,i.fontStyle=e.fontStyle,i.fontWeight=e.fontWeight,i.color=e.color,i.wrapping=e.wrapping;let n=!1;const r=i.node;e.enabled&&(n=!0,r.rotation=Math.PI/2,r.x=Math.floor((o[0]+o[1])/2),r.y=-Caption.SMALL_PADDING,r.textAlign="center",r.textBaseline="bottom",r.text=s.call(a,this.getTitleFormatterParams())),r.visible=n}updateCrossLines(){this.crossLines?.forEach(t=>{if(t instanceof RadiusCrossLine){const{shape:e,gridAngles:i,range:o,innerRadiusRatio:s}=this,a=o[0];t.shape=e,t.gridAngles=i,t.axisOuterRadius=a,t.axisInnerRadius=a*s}}),super.updateCrossLines({rotation:0,parallelFlipRotation:0,regularFlipRotation:0})}createLabel(){return new RadiusAxisLabel}};RadiusAxis.CrossLineConstructor=RadiusCrossLine,__decorateClass([Validate7(DEGREE2),Default2(0)],RadiusAxis.prototype,"positionAngle",2);var{RATIO:RATIO3,ProxyPropertyOnWrite,Validate:Validate8}=import_ag_charts_community11._ModuleSupport,{BandScale:BandScale2}=import_ag_charts_community11._Scale,RadiusCategoryAxis=class extends RadiusAxis{constructor(t){super(t,new BandScale2),this.shape="circle",this.groupPaddingInner=0,this.paddingInner=0,this.paddingOuter=0}prepareTickData(t){return t.slice().reverse()}getTickRadius(t){const{scale:e,innerRadiusRatio:i}=this,o=e.range[0],s=o*i;if(e instanceof BandScale2){const a=e.ticks(),n=a.length-1-a.indexOf(t.tickId);return n===0?s:e.inset+e.step*(n-.5)+e.bandwidth/2}else{const a=(o-s)/e.domain.length;return o-t.translationY+s-a/2}}};RadiusCategoryAxis.className="RadiusCategoryAxis",RadiusCategoryAxis.type="radius-category",__decorateClass([Validate8(RATIO3)],RadiusCategoryAxis.prototype,"groupPaddingInner",2),__decorateClass([ProxyPropertyOnWrite("scale","paddingInner"),Validate8(RATIO3)],RadiusCategoryAxis.prototype,"paddingInner",2),__decorateClass([ProxyPropertyOnWrite("scale","paddingOuter"),Validate8(RATIO3)],RadiusCategoryAxis.prototype,"paddingOuter",2);var RadiusCategoryAxisModule={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radius-category",moduleFactory:t=>new RadiusCategoryAxis(t)},import_ag_charts_community12=require("ag-charts-community"),{AND:AND4,Default:Default3,GREATER_THAN:GREATER_THAN3,LESS_THAN:LESS_THAN2,NUMBER_OR_NAN:NUMBER_OR_NAN2,Validate:Validate9}=import_ag_charts_community12._ModuleSupport,{LinearScale:LinearScale2}=import_ag_charts_community12._Scale,{normalisedExtentWithMetadata:normalisedExtentWithMetadata2}=import_ag_charts_community12._Util,RadiusNumberAxis=class extends RadiusAxis{constructor(t){super(t,new LinearScale2),this.shape="polygon",this.min=NaN,this.max=NaN}prepareTickData(t){const{scale:e}=this,i=e.getDomain?.()[1];return t.filter(({tick:o})=>o!==i).sort((o,s)=>s.tick-o.tick)}getTickRadius(t){const{scale:e}=this,i=e.range[0],o=i*this.innerRadiusRatio;return i-t.translationY+o}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:o,clipped:s}=normalisedExtentWithMetadata2(t,e,i);return{domain:o,clipped:s}}};RadiusNumberAxis.className="RadiusNumberAxis",RadiusNumberAxis.type="radius-number",__decorateClass([Validate9(AND4(NUMBER_OR_NAN2,LESS_THAN2("max"))),Default3(NaN)],RadiusNumberAxis.prototype,"min",2),__decorateClass([Validate9(AND4(NUMBER_OR_NAN2,GREATER_THAN3("min"))),Default3(NaN)],RadiusNumberAxis.prototype,"max",2);var RadiusNumberAxisModule={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radius-number",moduleFactory:t=>new RadiusNumberAxis(t)},import_ag_charts_community13=require("ag-charts-community"),{BOOLEAN:BOOLEAN3,POSITIVE_NUMBER:POSITIVE_NUMBER3,ObserveChanges,Validate:Validate10}=import_ag_charts_community13._ModuleSupport,Animation=class extends import_ag_charts_community13._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!0,t.animationManager.skip(!1)}};__decorateClass([ObserveChanges((t,e)=>{t.ctx.animationManager.skip(!e)}),Validate10(BOOLEAN3)],Animation.prototype,"enabled",2),__decorateClass([ObserveChanges((t,e)=>{t.ctx.animationManager.defaultDuration=e}),Validate10(POSITIVE_NUMBER3,{optional:!0})],Animation.prototype,"duration",2);var AnimationModule={type:"root",optionsKey:"animation",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion"],moduleFactory:t=>new Animation(t),themeTemplate:{animation:{enabled:!0}}},import_ag_charts_community61=require("ag-charts-community"),import_ag_charts_community60=require("ag-charts-community"),import_ag_charts_community14=require("ag-charts-community"),{ChartAxisDirection:ChartAxisDirection6}=import_ag_charts_community14._ModuleSupport;function calculateAxisLabelPosition({x:t,y:e,labelBBox:i,bounds:o,axisPosition:s,axisDirection:a,padding:n}){let r;if(a===ChartAxisDirection6.X){const c=-i.width/2,h=s==="bottom"?-4:-i.height+4,d=s==="bottom"?o.y+o.height+n:o.y-n;r={x:t+c,y:d+h}}else{const c=-i.height/2,h=s==="right"?-8:-i.width+8;r={x:(s==="right"?o.x+o.width+n:o.x-n)+h,y:e+c}}return r}function buildBounds(t,e,i){const o=t.clone();return o.x+=e==="left"?-i:0,o.y+=e==="top"?-i:0,o.width+=e==="left"||e==="right"?i:0,o.height+=e==="top"||e==="bottom"?i:0,o}var import_ag_charts_community15=require("ag-charts-community"),colorPickerTemplate_default='<div class="ag-charts-color-picker" role="dialog" data-pointer-capture="exclusive"><div class="ag-charts-color-picker__palette" tabindex="0"></div><input class="ag-charts-color-picker__hue-input" tabindex="0" type="range" min="0" max="360" value="0"> <input class="ag-charts-color-picker__alpha-input" tabindex="0" type="range" min="0" max="1" value="1" step="0.01"> <label class="ag-charts-color-picker__color-field"><span class="ag-charts-color-picker__color-label">Color</span> <input class="ag-charts-color-picker__color-input" tabindex="0" value="#000"></label></div>',{clamp,createElement}=import_ag_charts_community15._ModuleSupport,{Color}=import_ag_charts_community15._Util,moduleId="color-picker",canvasOverlay="canvas-overlay",getHsva=t=>{try{const e=Color.fromString(t),[i,o,s]=e.toHSB();return[i,o,s,e.a]}catch{return}},ColorPicker=class extends import_ag_charts_community15._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.element=t.domManager.addChild(canvasOverlay,moduleId),this.element.role="presentation",this.destroyFns.push(()=>t.domManager.removeChild(canvasOverlay,moduleId))}show(t){let[e,i,o,s]=getHsva(t.color??"#f00")??[0,1,.5,1];s=t.opacity??s;const a=createElement("div");a.role="presentation",a.innerHTML=colorPickerTemplate_default,this.element.replaceChildren(a);const n=a.firstElementChild;n.ariaLabel=this.ctx.localeManager.t("ariaLabelColorPicker");const r=n.querySelector(".ag-charts-color-picker__palette"),l=n.querySelector(".ag-charts-color-picker__hue-input"),c=n.querySelector(".ag-charts-color-picker__alpha-input"),h=n.querySelector(".ag-charts-color-picker__color-input");this.anchor&&this.setAnchor(this.anchor,this.fallbackAnchor);const d=()=>{const y=Color.fromHSB(e,i,o,s).toHexString();n.style.setProperty("--h",`${e}`),n.style.setProperty("--s",`${i}`),n.style.setProperty("--v",`${o}`),n.style.setProperty("--a",`${s}`),n.style.setProperty("--color",y.slice(0,7)),n.style.setProperty("--color-a",y),l.value=`${e}`,c.value=`${s}`,c.classList.toggle("ag-charts-color-picker__alpha-input--opaque",s===1),document.activeElement!==h&&(h.value=y.toUpperCase());const p=Color.fromHSB(e,i,o,1).toHexString();t.onChange?.(y,p,s)};d();const u=g=>{g.preventDefault();const y=g.currentTarget;y.focus();const p=y.getBoundingClientRect(),m=({pageX:f,pageY:v})=>{i=Math.min(Math.max((f-p.left)/p.width,0),1),o=1-Math.min(Math.max((v-p.top)/p.height,0),1),d()};m(g),window.addEventListener("mousemove",m),window.addEventListener("mouseup",()=>window.removeEventListener("mousemove",m),{once:!0})};n.addEventListener("mousedown",g=>{g.stopPropagation()}),n.addEventListener("keydown",g=>{switch(g.stopPropagation(),g.key){case"Enter":case"Escape":t.onClose?.();break;default:return}g.preventDefault()}),r.addEventListener("mousedown",u),r.addEventListener("keydown",g=>{if(g.key==="ArrowLeft")i=Math.min(Math.max(i-.01),1);else if(g.key==="ArrowRight")i=Math.min(Math.max(i+.01),1);else if(g.key==="ArrowUp")o=Math.min(Math.max(o+.01),1);else if(g.key==="ArrowDown")o=Math.min(Math.max(o-.01),1);else return;g.preventDefault(),d()}),l.addEventListener("input",g=>{e=g.currentTarget.valueAsNumber??0,d()}),c.addEventListener("input",g=>{s=g.currentTarget.valueAsNumber??0,d()}),h.addEventListener("input",g=>{const y=getHsva(g.currentTarget.value);y!=null&&([e,i,o,s]=y,d())}),h.addEventListener("blur",()=>d()),h.addEventListener("keydown",g=>{g.key==="Enter"&&(g.currentTarget.blur(),d())})}setAnchor(t,e){this.anchor=t,this.fallbackAnchor=e;const i=this.element.firstElementChild?.firstElementChild;i&&(this.updatePosition(i,t.x,t.y),this.repositionWithinBounds(i,t,e))}hide(){this.element.replaceChildren()}isChildElement(t){return this.ctx.domManager.isManagedChildDOMElement(t,canvasOverlay,moduleId)}updatePosition(t,e,i){t.style.setProperty("top","unset"),t.style.setProperty("bottom","unset"),t.style.setProperty("left",`${e}px`),t.style.setProperty("top",`${i}px`)}repositionWithinBounds(t,e,i){const o=this.ctx.domManager.getBoundingClientRect(),{offsetWidth:s,offsetHeight:a}=t;let n=clamp(0,e.x,o.width-s),r=clamp(0,e.y,o.height-a);n!==e.x&&i?.x!=null&&(n=clamp(0,i.x-s,o.width-s)),r!==e.y&&i?.y!=null&&(r=clamp(0,i.y-a,o.height-a)),this.updatePosition(t,n,r)}},import_ag_charts_community16=require("ag-charts-community"),{createElement:createElement2}=import_ag_charts_community16._ModuleSupport,canvasOverlay2="canvas-overlay",Popover=class extends import_ag_charts_community16._ModuleSupport.BaseModuleInstance{constructor(t,e){super(),this.ctx=t,this.anchor=void 0,this.removeGlobalEventListeners=void 0,this.moduleId=`popover-${e}`,this.element=t.domManager.addChild(canvasOverlay2,this.moduleId),this.element.role="presentation",this.destroyFns.push(()=>t.domManager.removeChild(canvasOverlay2,this.moduleId))}show(t){const{domManager:e}=this.ctx,i=createElement2("div");i.setAttribute("data-pointer-capture","exclusive"),i.setAttribute("tabindex","0"),i.setAttribute("role","menu"),i.className="ag-charts-popover",t.class!=null&&i.classList.add(t.class);const o=t.items.map(r=>{const l=r.value===t.value,c=createElement2("div");if(typeof r.value=="string"&&(c.dataset.popoverId=r.value),c.className="ag-charts-popover__row",c.classList.toggle("ag-charts-popover__row--active",l),c.setAttribute("tabindex","0"),i.setAttribute("role","menuitem"),r.icon!=null){const u=createElement2("span");u.className=`ag-charts-popover__icon ${e.getIconClassNames(r.icon)}`,c.appendChild(u)}const h=createElement2("span");h.textContent=this.ctx.localeManager.t(r.label),h.className="ag-charts-popover__label",c.appendChild(h);const d=()=>{t.onClose(),t.onPress?.(r)};return c.addEventListener("keydown",u=>{u.key==="Enter"&&(d(),u.preventDefault(),u.stopPropagation())}),c.addEventListener("click",u=>{u.button===0&&(d(),u.preventDefault(),u.stopPropagation())}),c.addEventListener("mousemove",()=>{c.focus()}),i.appendChild(c),c});this.element.replaceChildren(i),this.anchor&&this.setAnchor(this.anchor);const s=r=>{const{activeElement:l}=document,c=o.findIndex(d=>d.contains(l)),h=c!==-1?Math.min(Math.max(c+r,0),o.length-1):0;o[h].focus()};i.addEventListener("keydown",r=>{switch(r.key){case"ArrowUp":s(-1);break;case"ArrowDown":s(1);break;case"Escape":case"Enter":t.onClose();break;default:return}r.preventDefault(),r.stopPropagation()});const a=r=>{i.contains(r.target)||i.focus()};window.addEventListener("mousemove",a);const n=r=>{r.button!==0||i.contains(r.target)||t.onClose()};window.addEventListener("mousedown",n),this.removeGlobalEventListeners?.(),this.removeGlobalEventListeners=()=>{window.removeEventListener("mousemove",a),window.removeEventListener("mousedown",n)},i.focus()}setAnchor(t){this.anchor=t;const e=this.element.firstElementChild;e&&this.updatePosition(e,t.x,t.y)}hide(){this.element.replaceChildren(),this.removeGlobalEventListeners?.(),this.removeGlobalEventListeners=void 0}isChildElement(t){return this.ctx.domManager.isManagedChildDOMElement(t,canvasOverlay2,this.moduleId)}updatePosition(t,e,i){t.style.setProperty("top","unset"),t.style.setProperty("bottom","unset"),t.style.setProperty("left",`${e}px`),t.style.setProperty("top",`${i}px`)}},import_ag_charts_community17=require("ag-charts-community"),textInputTemplate_default='<div contenteditable="plaintext-only" class="ag-charts-text-input__textarea" tabindex="0"></div>',{getDocument,getWindow}=import_ag_charts_community17._ModuleSupport,moduleId2="text-input",canvasOverlay3="canvas-overlay",TextInput=class extends import_ag_charts_community17._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.layout={getTextInputCoords:()=>({x:0,y:0}),position:"center",alignment:"center",textAlign:"center"},this.element=t.domManager.addChild(canvasOverlay3,moduleId2),this.element.classList.add("ag-charts-text-input"),this.destroyFns.push(()=>t.domManager.removeChild(canvasOverlay3,moduleId2))}show(t){this.element.innerHTML=textInputTemplate_default;const e=this.element.firstElementChild;if(e.isContentEditable||(e.contentEditable="true"),e.setAttribute("placeholder","Add Text"),t.styles?.placeholderColor&&e.style.setProperty("--ag-charts-text-annotations-placeholder",t.styles?.placeholderColor),e.innerText=t.text??"",e.style.color=t.styles?.color??"inherit",e.style.fontFamily=t.styles?.fontFamily??"inherit",e.style.fontSize=t.styles?.fontSize?`${t.styles.fontSize}px`:"inherit",e.style.fontStyle=t.styles?.fontStyle??"inherit",e.style.fontWeight=typeof t.styles?.fontWeight=="number"?`${t.styles.fontWeight}`:t.styles?.fontWeight??"inherit",e.focus(),e.lastChild?.textContent!=null){const i=getDocument().createRange();i.setStart(e.lastChild,e.lastChild.textContent.length),i.setEnd(e.lastChild,e.lastChild.textContent.length);const o=getWindow().getSelection();o?.removeAllRanges(),o?.addRange(i)}e.addEventListener("input",()=>{this.updatePosition(),t.onChange?.(this.getValue(),this.getBBox())}),t.layout&&(this.layout=t.layout,this.updatePosition()),t.onChange?.(this.getValue(),this.getBBox())}hide(){this.element.innerHTML="",this.layout={getTextInputCoords:()=>({x:0,y:0}),position:"center",alignment:"center",textAlign:"center"}}updateColor(t){this.element.firstElementChild&&(this.element.firstElementChild.style.color=t)}updateFontSize(t){if(this.element.firstElementChild)return this.element.firstElementChild.style.fontSize=`${t}px`,this.updatePosition(),this.getBBox()}getValue(){if(this.element.firstElementChild)return this.element.firstElementChild.innerText.trim()}updatePosition(){const{element:t}=this,e=t.firstElementChild;if(!e)return;const i=this.ctx.domManager.getBoundingClientRect(),{width:o,getTextInputCoords:s,position:a,alignment:n,textAlign:r}=this.layout;t.style.setProperty("width",o?`${o}px`:"unset");const l=e.getBoundingClientRect(),c=s();let h=c.x;n==="center"?h-=(o??l.width)/2:n==="right"&&(h-=o??l.width);let d=c.y;a==="center"?d-=l.height/2:a==="bottom"&&(d-=l.height),t.style.setProperty("top",`${d}px`),t.style.setProperty("left",`${h}px`),t.style.setProperty("max-width",`${i.width-h}px`),t.style.setProperty("text-align",n),e.style.setProperty("text-align",r)}getBBox(){const{left:t,top:e,width:i,height:o}=this.element.getBoundingClientRect();return new import_ag_charts_community17._Scene.BBox(t,e,i,o)}},import_ag_charts_community18=require("ag-charts-community"),AnnotationType=(t=>(t.Line="line",t.HorizontalLine="horizontal-line",t.VerticalLine="vertical-line",t.DisjointChannel="disjoint-channel",t.ParallelChannel="parallel-channel",t.Callout="callout",t.Comment="comment",t.Note="note",t.Text="text",t))(AnnotationType||{}),ANNOTATION_TYPES=Object.values(AnnotationType),ANNOTATION_BUTTONS=["line","horizontal-line","vertical-line","disjoint-channel","parallel-channel","callout","comment","note","text"],ANNOTATION_BUTTON_GROUPS=["line-menu","text-menu"];function stringToAnnotationType(t){for(const e of ANNOTATION_TYPES)if(e===t)return e}var import_ag_charts_community19=require("ag-charts-community"),{Logger}=import_ag_charts_community19._Util;function validateDatumLine(t,e,i){let o=!0;return o&&(o=validateDatumPoint(t,e.start,i&&`${i}[start] `)),o&&(o=validateDatumPoint(t,e.end,i&&`${i}[end] `)),o}function validateDatumValue(t,e,i){const o=e.direction==="horizontal"?t.yAxis:t.xAxis,s=validateDatumPointDirection(e.value,o);return!s&&i&&Logger.warnOnce(`${i}is outside the axis domain, ignoring. - value: [${e.value}]]`),s}function validateDatumPoint(t,e,i){if(e.x==null||e.y==null)return i&&Logger.warnOnce(`${i}requires both an [x] and [y] property, ignoring.`),!1;const o=validateDatumPointDirection(e.x,t.xAxis),s=validateDatumPointDirection(e.y,t.yAxis);if(!o||!s){let a="x & y domains";return o&&(a="y domain"),s&&(a="x domain"),i&&Logger.warnOnce(`${i}is outside the ${a}, ignoring. - x: [${e.x}], y: ${e.y}]`),!1}return!0}function validateDatumPointDirection(t,e){const i=e.scaleDomain();return i&&e.continuous?t>=i[0]&&t<=i.at(-1):!0}function convertLine(t,e){if(t.start==null||t.end==null)return;const i=convertPoint(t.start,e),o=convertPoint(t.end,e);if(!(i==null||o==null))return{x1:i.x,y1:i.y,x2:o.x,y2:o.y}}function convertPoint(t,e){const i=convert(t.x,e.xAxis),o=convert(t.y,e.yAxis);return{x:i,y:o}}function convert(t,e){if(t==null)return 0;const i=(e.scaleBandwidth()??0)/2;return e.scaleConvert(t)+i}function invertCoords(t,e){const i=invert(t.x,e.xAxis),o=invert(t.y,e.yAxis);return{x:i,y:o}}function invert(t,e){const i=(e.scaleBandwidth()??0)/2;return e.continuous?e.scaleInvert(t-i):e.scaleInvertNearest(t-i)}function calculateAxisLabelPadding(t){return t.gridPadding+t.seriesAreaPadding+t.tickSize+t.label.padding}var import_ag_charts_community47=require("ag-charts-community"),import_ag_charts_community22=require("ag-charts-community"),import_ag_charts_community20=require("ag-charts-community"),{BOOLEAN:BOOLEAN4,COLOR_STRING:COLOR_STRING2,DATE,LINE_DASH:LINE_DASH2,NUMBER:NUMBER3,RATIO:RATIO4,STRING:STRING2,OBJECT:OBJECT4,FUNCTION,TEXT_ALIGN,FONT_STYLE:FONT_STYLE2,FONT_WEIGHT:FONT_WEIGHT2,POSITIVE_NUMBER:POSITIVE_NUMBER4,OR:OR2,UNION:UNION3,BaseProperties:BaseProperties2,Validate:Validate11}=import_ag_charts_community20._ModuleSupport,PointProperties=class extends BaseProperties2{};__decorateClass([Validate11(OR2(STRING2,NUMBER3,DATE))],PointProperties.prototype,"x",2),__decorateClass([Validate11(NUMBER3)],PointProperties.prototype,"y",2);var ChannelAnnotationMiddleProperties=class extends Stroke(LineDash(Visible(BaseProperties2))){},AxisLabelProperties=class extends Stroke(LineDash(Fill(Label(Font(BaseProperties2))))){constructor(){super(...arguments),this.cornerRadius=2}};__decorateClass([Validate11(BOOLEAN4)],AxisLabelProperties.prototype,"enabled",2),__decorateClass([Validate11(POSITIVE_NUMBER4)],AxisLabelProperties.prototype,"cornerRadius",2);var BackgroundProperties=class extends Fill(BaseProperties2){},HandleProperties=class extends Stroke(LineDash(Fill(BaseProperties2))){};function Annotation(t){class e extends Lockable(Visible(t)){constructor(){super(...arguments),this.id=import_ag_charts_community20._Util.uuid()}isValidWithContext(o,s){return super.isValid(s)}}return e}function Line(t){class e extends t{constructor(){super(...arguments),this.start=new PointProperties,this.end=new PointProperties}}return __decorateClass([Validate11(OBJECT4)],e.prototype,"start",2),__decorateClass([Validate11(OBJECT4)],e.prototype,"end",2),e}function Point(t){class e extends t{}return __decorateClass([Validate11(OR2(STRING2,NUMBER3,DATE))],e.prototype,"x",2),__decorateClass([Validate11(NUMBER3)],e.prototype,"y",2),e}function Value(t){class e extends t{}return __decorateClass([Validate11(OR2(STRING2,NUMBER3,DATE))],e.prototype,"value",2),e}function Background(t){class e extends t{constructor(){super(...arguments),this.background=new BackgroundProperties}}return __decorateClass([Validate11(OBJECT4,{optional:!0})],e.prototype,"background",2),e}function Handle(t){class e extends t{constructor(){super(...arguments),this.handle=new HandleProperties}}return __decorateClass([Validate11(OBJECT4,{optional:!0})],e.prototype,"handle",2),e}function AxisLabel(t){class e extends t{constructor(){super(...arguments),this.axisLabel=new AxisLabelProperties}}return __decorateClass([Validate11(OBJECT4,{optional:!0})],e.prototype,"axisLabel",2),e}function Label(t){class e extends t{constructor(){super(...arguments),this.textAlign="center"}}return __decorateClass([Validate11(POSITIVE_NUMBER4,{optional:!0})],e.prototype,"padding",2),__decorateClass([Validate11(TEXT_ALIGN,{optional:!0})],e.prototype,"textAlign",2),__decorateClass([Validate11(FUNCTION,{optional:!0})],e.prototype,"formatter",2),e}function Cappable(t){class e extends t{}return __decorateClass([Validate11(UNION3(["arrow","circle"]),{optional:!0})],e.prototype,"startCap",2),__decorateClass([Validate11(UNION3(["arrow","circle"]),{optional:!0})],e.prototype,"endCap",2),e}function Extendable(t){class e extends t{}return __decorateClass([Validate11(BOOLEAN4,{optional:!0})],e.prototype,"extendLeft",2),__decorateClass([Validate11(BOOLEAN4,{optional:!0})],e.prototype,"extendRight",2),e}function Lockable(t){class e extends t{}return __decorateClass([Validate11(BOOLEAN4,{optional:!0})],e.prototype,"locked",2),e}function Visible(t){class e extends t{}return __decorateClass([Validate11(BOOLEAN4,{optional:!0})],e.prototype,"visible",2),e}function Fill(t){class e extends t{}return __decorateClass([Validate11(COLOR_STRING2,{optional:!0})],e.prototype,"fill",2),__decorateClass([Validate11(RATIO4,{optional:!0})],e.prototype,"fillOpacity",2),e}function Stroke(t){class e extends t{}return __decorateClass([Validate11(COLOR_STRING2,{optional:!0})],e.prototype,"stroke",2),__decorateClass([Validate11(RATIO4,{optional:!0})],e.prototype,"strokeOpacity",2),__decorateClass([Validate11(NUMBER3,{optional:!0})],e.prototype,"strokeWidth",2),e}function LineDash(t){class e extends t{}return __decorateClass([Validate11(LINE_DASH2,{optional:!0})],e.prototype,"lineDash",2),__decorateClass([Validate11(NUMBER3,{optional:!0})],e.prototype,"lineDashOffset",2),e}function Font(t){class e extends t{constructor(){super(...arguments),this.fontSize=12,this.fontFamily="Verdana, sans-serif"}}return __decorateClass([Validate11(FONT_STYLE2,{optional:!0})],e.prototype,"fontStyle",2),__decorateClass([Validate11(FONT_WEIGHT2,{optional:!0})],e.prototype,"fontWeight",2),__decorateClass([Validate11(POSITIVE_NUMBER4)],e.prototype,"fontSize",2),__decorateClass([Validate11(STRING2)],e.prototype,"fontFamily",2),__decorateClass([Validate11(COLOR_STRING2,{optional:!0})],e.prototype,"color",2),e}var import_ag_charts_community21=require("ag-charts-community"),{STRING:STRING3,BaseProperties:BaseProperties3,Validate:Validate12}=import_ag_charts_community21._ModuleSupport,TextualStartEndProperties=class extends Annotation(Line(Handle(Label(Font(BaseProperties3))))){constructor(){super(...arguments),this.text="",this.position="top",this.alignment="left",this.placement="inside",this.placeholderText=void 0}isValidWithContext(t,e){return super.isValid(e)}getDefaultColor(t){return this.color}getDefaultOpacity(t){}getPlaceholderColor(){}getPadding(){const{padding:t=0}=this;return{top:t,right:t,bottom:t,left:t}}getTextInputCoords(t){return convertPoint(this.end,t)}};__decorateClass([Validate12(STRING3)],TextualStartEndProperties.prototype,"text",2);var{STRING:STRING4,Validate:Validate13,isObject}=import_ag_charts_community22._ModuleSupport,{Color:Color2}=import_ag_charts_community22._Util,DEFAULT_CALLOUT_PADDING={top:6,right:12,bottom:9,left:12},CalloutProperties=class extends Fill(Stroke(TextualStartEndProperties)){constructor(){super(...arguments),this.type="callout",this.position="bottom",this.alignment="left"}static is(t){return isObject(t)&&t.type==="callout"}getDefaultColor(t){switch(t){case"fill-color":return this.fill;case"line-color":return this.stroke;case"text-color":default:return this.color}}getDefaultOpacity(t){switch(t){case"fill-color":return this.fillOpacity;case"line-color":return this.strokeOpacity;case"text-color":default:return}}getPlaceholderColor(){const{r:t,g:e,b:i}=Color2.fromString(this.color??"#888888");return new Color2(t,e,i,.66).toString()}getPadding(){const{padding:t}=this;return t==null?{...DEFAULT_CALLOUT_PADDING}:{top:t,right:t,bottom:t,left:t}}getTextInputCoords(t){const e=super.getTextInputCoords(t),i=this.getPadding(),o=typeof i=="number"?i:i?.left??0,s=typeof i=="number"?i:i?.bottom??0;return{x:e.x+o,y:e.y-s}}};__decorateClass([Validate13(STRING4)],CalloutProperties.prototype,"type",2);var import_ag_charts_community27=require("ag-charts-community"),import_ag_charts_community24=require("ag-charts-community"),import_ag_charts_community23=require("ag-charts-community"),_Handle=class ft extends import_ag_charts_community23._Scene.Group{constructor(){super(...arguments),this.active=!1,this.locked=!1,this.visible=!1,this.zIndex=1}drag(e){const{handle:i,locked:o}=this;return o?{point:{x:i.x,y:i.y},offset:{x:0,y:0}}:{point:e,offset:{x:e.x-i.x,y:e.y-i.y}}}toggleActive(e){this.active=e,e||(this.handle.strokeWidth=ft.INACTIVE_STROKE_WIDTH)}toggleHovered(e){this.glow.visible=!this.locked&&e,this.glow.dirtyPath=!0}toggleDragging(e){this.locked||(this.handle.visible=!e,this.glow.visible=this.glow.visible&&!e,this.handle.dirtyPath=!0,this.glow.dirtyPath=!0)}toggleLocked(e){this.locked=e}getCursor(){}containsPoint(e,i){return this.handle.containsPoint(e,i)}};_Handle.INACTIVE_STROKE_WIDTH=2;var Handle2=_Handle,_InvariantHandle=class xt extends Handle2{constructor(){super(),this.handle=new import_ag_charts_community23._Scene.Circle,this.glow=new import_ag_charts_community23._Scene.Circle,this.append([this.handle]),this.handle.size=xt.HANDLE_SIZE,this.handle.strokeWidth=Handle2.INACTIVE_STROKE_WIDTH,this.handle.zIndex=2}update(e){this.handle.setProperties({...e,strokeWidth:Handle2.INACTIVE_STROKE_WIDTH})}drag(e){return{point:e,offset:{x:0,y:0}}}};_InvariantHandle.HANDLE_SIZE=7,_InvariantHandle.GLOW_SIZE=9;var InvariantHandle=_InvariantHandle,_UnivariantHandle=class $ extends Handle2{constructor(){super(),this.handle=new import_ag_charts_community23._Scene.Rect,this.glow=new import_ag_charts_community23._Scene.Rect,this.gradient="horizontal",this.append([this.glow,this.handle]),this.handle.cornerRadius=$.CORNER_RADIUS,this.handle.width=$.HANDLE_SIZE,this.handle.height=$.HANDLE_SIZE,this.handle.strokeWidth=Handle2.INACTIVE_STROKE_WIDTH,this.handle.zIndex=2,this.glow.cornerRadius=$.CORNER_RADIUS,this.glow.width=$.GLOW_SIZE,this.glow.height=$.GLOW_SIZE,this.glow.strokeWidth=0,this.glow.fillOpacity=.2,this.glow.zIndex=1,this.glow.visible=!1}toggleLocked(e){if(super.toggleLocked(e),e){const i=($.HANDLE_SIZE-InvariantHandle.HANDLE_SIZE)/2;this.handle.cornerRadius=1,this.handle.fill=this.handle.stroke,this.handle.strokeWidth=0,this.handle.x+=i,this.handle.y+=i,this.handle.width=InvariantHandle.HANDLE_SIZE,this.handle.height=InvariantHandle.HANDLE_SIZE,this.glow.width=InvariantHandle.GLOW_SIZE,this.glow.height=InvariantHandle.GLOW_SIZE}else this.handle.cornerRadius=$.CORNER_RADIUS,this.handle.width=$.HANDLE_SIZE,this.handle.height=$.HANDLE_SIZE,this.glow.width=$.GLOW_SIZE,this.glow.height=$.GLOW_SIZE,this.cachedStyles&&this.handle.setProperties(this.cachedStyles)}update(e){if(this.cachedStyles={...e},this.active||delete e.strokeWidth,this.locked){delete e.fill,delete e.strokeWidth;const i=($.HANDLE_SIZE-InvariantHandle.HANDLE_SIZE)/2;e.x-=i,e.y-=i,this.cachedStyles.x-=i,this.cachedStyles.y-=i}this.handle.setProperties(e),this.glow.setProperties({...e,x:(e.x??this.glow.x)-2,y:(e.y??this.glow.y)-2,strokeWidth:0,fill:e.stroke})}drag(e){return this.locked?{point:e,offset:{x:0,y:0}}:this.gradient==="vertical"?{point:{x:e.x,y:this.handle.y},offset:{x:e.x-this.handle.x,y:0}}:{point:{x:this.handle.x,y:e.y},offset:{x:0,y:e.y-this.handle.y}}}getCursor(){if(!this.locked)return this.gradient==="vertical"?"col-resize":"row-resize"}};_UnivariantHandle.HANDLE_SIZE=12,_UnivariantHandle.GLOW_SIZE=16,_UnivariantHandle.CORNER_RADIUS=4;var UnivariantHandle=_UnivariantHandle,_DivariantHandle=class nt extends Handle2{constructor(){super(),this.handle=new import_ag_charts_community23._Scene.Circle,this.glow=new import_ag_charts_community23._Scene.Circle,this.append([this.glow,this.handle]),this.handle.size=nt.HANDLE_SIZE,this.handle.strokeWidth=Handle2.INACTIVE_STROKE_WIDTH,this.handle.zIndex=2,this.glow.size=nt.GLOW_SIZE,this.glow.strokeWidth=0,this.glow.fillOpacity=.2,this.glow.zIndex=1,this.glow.visible=!1}toggleLocked(e){super.toggleLocked(e),e?(this.handle.fill=this.handle.stroke,this.handle.strokeWidth=0,this.handle.size=InvariantHandle.HANDLE_SIZE,this.glow.size=InvariantHandle.GLOW_SIZE):(this.handle.size=nt.HANDLE_SIZE,this.glow.size=nt.GLOW_SIZE,this.cachedStyles&&this.handle.setProperties(this.cachedStyles))}update(e){this.cachedStyles={...e},this.active||delete e.strokeWidth,this.locked&&(delete e.fill,delete e.strokeWidth),this.handle.setProperties(e),this.glow.setProperties({...e,strokeWidth:0,fill:e.stroke})}};_DivariantHandle.HANDLE_SIZE=11,_DivariantHandle.GLOW_SIZE=17;var DivariantHandle=_DivariantHandle,{Layers:Layers3,isObject:isObject2}=import_ag_charts_community24._ModuleSupport,AnnotationScene=class extends import_ag_charts_community24._Scene.Group{constructor(){super(...arguments),this.zIndex=Layers3.CHART_ANNOTATION_ZINDEX}static isCheck(t,e){return isObject2(t)&&Object.hasOwn(t,"type")&&t.type===e}toggleHovered(t){this.toggleHandles(t)}getCachedBBoxWithoutHandles(){return this.cachedBBoxWithoutHandles??import_ag_charts_community24._Scene.BBox.zero}computeBBoxWithoutHandles(){return this.computeTransformMatrix(),import_ag_charts_community24._Scene.Group.computeBBox(this.children.filter(t=>!(t instanceof Handle2)))}render(t){super.render(t),this.cachedBBoxWithoutHandles=this.computeBBoxWithoutHandles()}},import_ag_charts_community26=require("ag-charts-community"),import_ag_charts_community25=require("ag-charts-community"),{Vec2}=import_ag_charts_community25._Util,LinearScene=class extends AnnotationScene{dragStart(t,e,i){this.dragState={offset:e,start:convertPoint(t.start,i),end:convertPoint(t.end,i)}}drag(t,e,i){t.locked||(this.activeHandle?this.dragHandle(t,e,i):this.dragAll(t,e,i))}dragAll(t,e,i){const{dragState:o}=this;if(!o)return;const{xAxis:s,yAxis:a}=i,n=Vec2.add(o.start,Vec2.sub(e,o.offset)),r=Vec2.add(o.end,Vec2.sub(e,o.offset)),l=invertCoords(n,i),c=invertCoords(r,i),h=(u,g,y)=>g>=u&&g<=y,d=[n,r].concat(...this.getOtherCoords(t,n,r,i));d.every(u=>h(s.bounds.x,u.x,s.bounds.x+s.bounds.width))&&(t.start.x=l.x,t.end.x=c.x),d.every(u=>h(a.bounds.y,u.y,a.bounds.y+a.bounds.height))&&(t.start.y=l.y,t.end.y=c.y)}getOtherCoords(t,e,i,o){return[]}},{CachedTextMeasurerPool,TextWrapper:TextWrapper2}=import_ag_charts_community26._ModuleSupport,{BBox}=import_ag_charts_community26._Scene,{Vec2:Vec22}=import_ag_charts_community26._Util,_TextualStartEndScene=class ct extends LinearScene{constructor(){super(...arguments),this.label=new import_ag_charts_community26._Scene.Text({zIndex:1}),this.start=new DivariantHandle,this.end=new DivariantHandle,this.anchor={x:0,y:0,position:"above-left"}}setTextInputBBox(e){this.textInputBBox=e,this.markDirty(this,import_ag_charts_community26._Scene.RedrawType.MINOR)}update(e,i){const o=convertLine(e,i);if(o==null)return;const s=this.getTextBBox(e,o);this.updateLabel(e,s,o),this.updateHandles(e,s,o),this.updateShape(e,s,o),this.anchor=this.updateAnchor(e,s,i)}getTextBBox(e,i){const{textInputBBox:o}=this,{x2:s,y2:a}=i;if(o)return new BBox(s,a,o.width,o.height);const n=this.wrapText(e,e.width),r=this.getTextOptions(e),{lineMetrics:l,width:c}=CachedTextMeasurerPool.measureLines(n,r),h=l.length*(r.font.fontSize*ct.LineHeight);return new BBox(s,a,c,h)}toggleHandles(e){typeof e=="boolean"&&(e={start:e,end:e}),this.start.visible=e.start??!0,this.end.visible=e.end??!0,this.start.toggleHovered(this.activeHandle==="start"),this.end.toggleHovered(this.activeHandle==="end")}toggleActive(e){this.toggleHandles(e),this.start.toggleActive(e),this.end.toggleActive(e)}dragHandle(e,i,o){const{activeHandle:s,dragState:a}=this;if(!s||!a)return;this[s].toggleDragging(!0);const n=Vec22.add(a.end,Vec22.sub(i,a.offset)),r=invertCoords(n,o);validateDatumPoint(o,r)&&(e[s].x=r.x,e[s].y=r.y)}stopDragging(){this.start.toggleDragging(!1),this.end.toggleDragging(!1)}getAnchor(){return this.anchor}getCursor(){if(this.activeHandle==null)return"pointer"}containsPoint(e,i){const{start:o,end:s,label:a}=this;return this.activeHandle=void 0,o.containsPoint(e,i)?(this.activeHandle="start",!0):s.containsPoint(e,i)?(this.activeHandle="end",!0):a.containsPoint(e,i)}updateLabel(e,i,o){const{x:s,y:a}=this.getLabelCoords(e,i,o);this.label.visible=e.visible??!0,this.label.x=s,this.label.y=a,this.label.textBaseline=e.position=="center"?"middle":e.position;const n=e.text.length>0;this.label.text=this.wrapText(e,i.width),this.label.fill=n?e.color:e.getPlaceholderColor(),this.label.fontFamily=e.fontFamily,this.label.fontSize=e.fontSize,this.label.fontStyle=e.fontStyle,this.label.fontWeight=e.fontWeight,this.label.textAlign=e.textAlign,this.label.lineHeight=e.fontSize*ct.LineHeight}updateHandles(e,i,o){this.start.update({...this.getHandleStyles(e,"start"),...this.getHandleCoords(e,i,o,"start")}),this.end.update({...this.getHandleStyles(e,"end"),...this.getHandleCoords(e,i,o,"end")}),this.start.toggleLocked(e.locked??!1),this.end.toggleLocked(e.locked??!1)}updateAnchor(e,i,o){return{x:i.x+o.seriesRect.x,y:i.y+o.seriesRect.y-i.height,position:this.anchor.position}}updateShape(e,i,o){}getLabelCoords(e,i,o){return{x:o.x2,y:o.y2}}getHandleCoords(e,i,o,s){return{x:s==="start"?o.x1:o.x2,y:s==="start"?o.y1:o.y2}}getHandleStyles(e,i){return{fill:e.handle.fill,stroke:e.handle.stroke??e.color,strokeOpacity:e.handle.strokeOpacity,strokeWidth:e.handle.strokeWidth}}wrapText(e,i){const s=e.text.length>0?e.text:e.placeholderText??"";return i?TextWrapper2.wrapText(s,{...this.getTextOptions(e),avoidOrphans:!1,textWrap:"always",maxWidth:i}):s}getTextOptions(e){return{font:{fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight},textAlign:e.textAlign,textBaseline:e.position=="center"?"middle":e.position,lineHeight:ct.LineHeight}}};_TextualStartEndScene.LineHeight=1.38;var TextualStartEndScene=_TextualStartEndScene,{drawCorner}=import_ag_charts_community27._Scene,CalloutScene=class extends TextualStartEndScene{constructor(){super(),this.type="callout",this.shape=new import_ag_charts_community27._Scene.Path,this.append([this.shape,this.label,this.start,this.end])}static is(t){return AnnotationScene.isCheck(t,"callout")}drag(t,e,i){t.locked||(this.activeHandle==="end"?this.dragHandle(t,e,i):this.dragAll(t,e,i))}getLabelCoords(t,e,i){const o=t.getPadding(),{bodyBounds:s={x:0,y:0,width:0,height:0}}=this.getDimensions(t,e,i)??{};return{x:s.x+o.left,y:s.y-o.bottom}}getHandleStyles(t,e){return e==="start"?{fill:t.handle.fill,stroke:t.handle.stroke??t.stroke,strokeOpacity:t.handle.strokeOpacity,strokeWidth:t.handle.strokeWidth}:{fill:void 0,strokeWidth:0}}updateAnchor(t,e,i){const o=convertLine(t,i);if(!o)return this.anchor;const{bodyBounds:s}=this.getDimensions(t,e,o)??{},a=s??e;return{x:a.x+i.seriesRect.x,y:a.y+i.seriesRect.y-a.height,position:this.anchor.position}}updateShape(t,e,i){const{shape:o}=this;o.fill=t.fill,o.fillOpacity=t.fillOpacity??1,o.stroke=t.stroke,o.strokeWidth=t.strokeWidth??1,o.strokeOpacity=t.strokeOpacity??1;const{tailPoint:s,bodyBounds:a}=this.getDimensions(t,e,i)??{};!s||!a||this.updatePath(s,a)}updatePath(t,e){const{x:i,y:o}=t,{x:s,y:a,width:n,height:r}=e,l=a-r,c=s+n,h=this.calculateCalloutPlacement({x:i,y:o},e),d=8,u=[{coordinates:{x0:s,x1:s+d,y0:l+d,y1:l,cx:h==="topLeft"?i:s+d,cy:h==="topLeft"?o:l+d},type:h==="topLeft"?"calloutCorner":"corner"},{coordinates:{x0:s+d,x1:c-d,y0:l,y1:l,cx:i,cy:o},type:h==="top"?"calloutSide":"side"},{coordinates:{x0:c-d,x1:c,y0:l,y1:l+d,cx:h==="topRight"?i:c-d,cy:h==="topRight"?o:l+d},type:h==="topRight"?"calloutCorner":"corner"},{coordinates:{x0:c,x1:c,y0:l+d,y1:a-d,cx:i,cy:o},type:h==="right"?"calloutSide":"side"},{coordinates:{x0:c,x1:c-d,y0:a-d,y1:a,cx:h==="bottomRight"?i:c-d,cy:h==="bottomRight"?o:a-d},type:h==="bottomRight"?"calloutCorner":"corner"},{coordinates:{x0:c-d,x1:s+d,y0:a,y1:a,cx:i,cy:o},type:h==="bottom"?"calloutSide":"side"},{coordinates:{x0:s+d,x1:s,y0:a,y1:a-d,cx:h==="bottomLeft"?i:s+d,cy:h==="bottomLeft"?o:a-d},type:h==="bottomLeft"?"calloutCorner":"corner"},{coordinates:{x0:s,x1:s,y0:a-d,y1:l+d,cx:i,cy:o},type:h==="left"?"calloutSide":"side"}],{path:g}=this.shape;g.clear(),g.moveTo(s,l+d),u.forEach(({coordinates:y,type:p})=>{this.drawPath(g,y,d,p)}),g.closePath()}drawPath(t,{x0:e,y0:i,x1:o,y1:s,cx:a,cy:n},r,l){switch(l){case"calloutCorner":{t.lineTo(a,n),t.lineTo(o,s);break}case"corner":{drawCorner(t,{x0:e,x1:o,y0:i,y1:s,cx:a,cy:n},r,!1);break}case"calloutSide":{if(e!==o){const h=e>o?-1:1,d=Math.min(e,o)+Math.abs(o-e)/2;t.lineTo(d-6*h,i),t.lineTo(a,n),t.lineTo(d+6*h,i),t.lineTo(o,s)}else{const h=i>s?-1:1,d=Math.min(i,s)+Math.abs(i-s)/2;t.lineTo(e,d-6*h),t.lineTo(a,n),t.lineTo(e,d+6*h),t.lineTo(o,s)}break}case"side":default:{t.lineTo(o,s);break}}}calculateCalloutPlacement(t,e){const i=e.x+e.width,o=e.y-e.height;let s,a;return t.x>i?s="right":t.x<e.x&&(s="left"),t.y>e.y?a="bottom":t.y<o&&(a="top"),s&&a?`${a}${s[0].toUpperCase()}${s.substring(1)}`:a??s}getDimensions(t,e,i){const{fontSize:o}=t,s=t.getPadding(),a=s.left+s.right,n=s.top+s.bottom,r=e.width+a,l=Math.max(e.height+n,o+n);return{tailPoint:{x:i.x1,y:i.y1},bodyBounds:{x:e.x,y:e.y,width:r,height:l}}}getCursor(){if(this.activeHandle==null||this.activeHandle==="end")return"pointer"}containsPoint(t,e){const{start:i,end:o,shape:s}=this;if(this.activeHandle=void 0,i.containsPoint(t,e))return this.activeHandle="start",!0;const a=o.containsPoint(t,e)||s.containsPoint(t,e);return a&&(this.activeHandle="end"),a}},import_ag_charts_community29=require("ag-charts-community"),import_ag_charts_community28=require("ag-charts-community"),{STRING:STRING5,BaseProperties:BaseProperties4,Validate:Validate14}=import_ag_charts_community28._ModuleSupport,TextualPointProperties=class extends Annotation(Point(Handle(Label(Font(BaseProperties4))))){constructor(){super(...arguments),this.text="",this.position="top",this.alignment="left",this.placement="inside",this.placeholderText=void 0}isValidWithContext(t,e){return super.isValid(e)}getDefaultColor(t){return this.color}getDefaultOpacity(t){}getPlaceholderColor(){}getPadding(){const{padding:t=0}=this;return{top:t,right:t,bottom:t,left:t}}getTextInputCoords(t){return convertPoint(this,t)}};__decorateClass([Validate14(STRING5)],TextualPointProperties.prototype,"text",2);var{STRING:STRING6,Validate:Validate15,isObject:isObject3}=import_ag_charts_community29._ModuleSupport,{Color:Color3}=import_ag_charts_community29._Util,DEFAULT_COMMENT_PADDING={top:8,right:14,bottom:8,left:14},CommentProperties=class extends Fill(Stroke(TextualPointProperties)){constructor(){super(...arguments),this.type="comment",this.position="bottom",this.alignment="left"}static is(t){return isObject3(t)&&t.type==="comment"}getDefaultColor(t){switch(t){case"fill-color":return this.fill;case"line-color":return this.stroke;case"text-color":default:return this.color}}getDefaultOpacity(t){switch(t){case"fill-color":return this.fillOpacity;case"line-color":return this.strokeOpacity;case"text-color":default:return}}getPlaceholderColor(){const{r:t,g:e,b:i}=Color3.fromString(this.color??"#888888");return new Color3(t,e,i,.66).toString()}getPadding(){const{padding:t,fontSize:e}=this;return t==null?{top:Math.max(e*.4,DEFAULT_COMMENT_PADDING.top),bottom:Math.max(e*.4,DEFAULT_COMMENT_PADDING.bottom),left:Math.max(e*.8,DEFAULT_COMMENT_PADDING.left),right:Math.max(e*.8,DEFAULT_COMMENT_PADDING.right)}:{top:t,right:t,bottom:t,left:t}}getTextInputCoords(t){const e=super.getTextInputCoords(t),i=this.getPadding();return{x:e.x+i.left,y:e.y-i.bottom}}};__decorateClass([Validate15(STRING6)],CommentProperties.prototype,"type",2);var import_ag_charts_community31=require("ag-charts-community"),import_ag_charts_community30=require("ag-charts-community"),{CachedTextMeasurerPool:CachedTextMeasurerPool2,TextWrapper:TextWrapper3}=import_ag_charts_community30._ModuleSupport,{Vec2:Vec23}=import_ag_charts_community30._Util,_TextualPointScene=class ht extends AnnotationScene{constructor(){super(...arguments),this.label=new import_ag_charts_community30._Scene.Text({zIndex:1}),this.handle=new DivariantHandle,this.anchor={x:0,y:0,position:"above-left"}}setTextInputBBox(e){this.textInputBBox=e,this.markDirty(this,import_ag_charts_community30._Scene.RedrawType.MINOR)}update(e,i){const o=convertPoint(e,i),s=this.getTextBBox(e,o,i);this.updateLabel(e,s),this.updateHandle(e,s,o),this.updateShape(e,s),this.anchor=this.updateAnchor(e,s,i)}dragStart(e,i,o){this.dragState={offset:i,handle:convertPoint(e,o)}}drag(e,i,o){const{dragState:s}=this;if(e.locked||!s)return;const a=Vec23.add(s.handle,Vec23.sub(i,s.offset)),n=invertCoords(a,o);e.x=n.x,e.y=n.y}toggleHandles(e){this.handle.visible=!!e,this.handle.toggleHovered(this.activeHandle==="handle")}toggleActive(e){this.toggleHandles(e),this.handle.toggleActive(e)}stopDragging(){this.handle.toggleDragging(!1)}getAnchor(){return this.anchor}getCursor(){if(this.activeHandle==null)return"pointer"}containsPoint(e,i){const{handle:o,label:s}=this;return this.activeHandle=void 0,o.containsPoint(e,i)?(this.activeHandle="handle",!0):s.visible&&s.containsPoint(e,i)}getTextBBox(e,i,o){const{textInputBBox:s}=this;if(s)return new import_ag_charts_community30._Scene.BBox(i.x,i.y,s.width,s.height);const a=this.wrapText(e,e.width),n=this.getTextOptions(e),{lineMetrics:r,width:l}=CachedTextMeasurerPool2.measureLines(a,n),c=r.length*(n.font.fontSize*ht.LineHeight);return new import_ag_charts_community30._Scene.BBox(i.x,i.y,l,c)}updateLabel(e,i){const{x:o,y:s}=this.getLabelCoords(e,i);this.label.visible=e.visible??!0,this.label.x=o,this.label.y=s,this.label.text=this.wrapText(e,i.width),this.label.fill=e.color,this.label.fontFamily=e.fontFamily,this.label.fontSize=e.fontSize,this.label.fontStyle=e.fontStyle,this.label.fontWeight=e.fontWeight,this.label.textAlign=e.textAlign??e.alignment,this.label.textBaseline=e.position=="center"?"middle":e.position,this.label.lineHeight=e.fontSize*ht.LineHeight}updateHandle(e,i,o){const{x:s,y:a}=this.getHandleCoords(e,i,o),n=this.getHandleStyles(e);this.handle.update({...n,x:s,y:a}),this.handle.toggleLocked(e.locked??!1)}updateShape(e,i){}updateAnchor(e,i,o){return{x:i.x+o.seriesRect.x,y:i.y+o.seriesRect.y-i.height,position:this.anchor.position}}getLabelCoords(e,i){return i}getHandleCoords(e,i,o){return i}getHandleStyles(e){return{fill:e.handle.fill,stroke:e.handle.stroke??e.color,strokeOpacity:e.handle.strokeOpacity,strokeWidth:e.handle.strokeWidth}}wrapText(e,i){const s=e.text.length>0?e.text:e.placeholderText??"";return i?TextWrapper3.wrapText(s,{...this.getTextOptions(e),avoidOrphans:!1,textWrap:"always",maxWidth:i}):s}getTextOptions(e){return{font:{fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight},textAlign:e.textAlign,textBaseline:e.position=="center"?"middle":e.position,lineHeight:ht.LineHeight}}};_TextualPointScene.LineHeight=1.38;var TextualPointScene=_TextualPointScene,{drawCorner:drawCorner2}=import_ag_charts_community31._Scene,CommentScene=class St extends TextualPointScene{constructor(){super(),this.type="comment",this.shape=new import_ag_charts_community31._Scene.Path,this.append([this.shape,this.label,this.handle])}static is(e){return AnnotationScene.isCheck(e,"comment")}updateShape(e,i){const{shape:o}=this;o.fill=e.fill,o.fillOpacity=e.fillOpacity??1,o.stroke=e.stroke??"transparent",o.strokeWidth=e.strokeWidth??1,o.strokeOpacity=e.strokeOpacity??1,this.updatePath(e,i)}getLabelCoords(e,i){const o=e.getPadding();return{x:i.x+o.left,y:i.y-o.bottom}}getHandleStyles(e){return{fill:e.handle.fill,stroke:e.handle.stroke??e.stroke??e.fill,strokeOpacity:e.handle.strokeOpacity,strokeWidth:e.handle.strokeWidth}}updateAnchor(e,i,o){const s=super.updateAnchor(e,i,o),a=e.getPadding();return s.y-=a.bottom+a.top,s}updatePath(e,i){const o=e.getPadding(),{x:s,y:a}=i;let{width:n,height:r}=i;const{fontSize:l}=e,c=o.left+o.right,h=o.top+o.bottom;n=n+c,r=Math.max(r+h,l+h);const d=a-r,u=s+n,g=(l*St.LineHeight+h)/2,{path:y}=this.shape;y.clear(),y.moveTo(s,a),y.lineTo(s,d+g),drawCorner2(y,{x0:s,x1:s+g,y0:d+g,y1:d,cx:s+g,cy:d+g},g,!1),y.lineTo(u-g,d),drawCorner2(y,{x0:u-g,x1:u,y0:d,y1:d+g,cx:u-g,cy:d+g},g,!1),y.lineTo(u,a-g),drawCorner2(y,{x0:u,x1:u-g,y0:a-g,y1:a,cx:u-g,cy:a-g},g,!1),y.closePath()}containsPoint(e,i){return super.containsPoint(e,i)||this.shape.containsPoint(e,i)}},import_ag_charts_community32=require("ag-charts-community"),{STRING:STRING7,BaseProperties:BaseProperties5,Validate:Validate16,isObject:isObject4}=import_ag_charts_community32._ModuleSupport,HorizontalLineProperties=class extends Annotation(Value(Handle(AxisLabel(Cappable(Stroke(LineDash(BaseProperties5))))))){constructor(){super(...arguments),this.direction="horizontal",this.type="horizontal-line"}static is(t){return isObject4(t)&&t.type==="horizontal-line"}isValidWithContext(t,e){return super.isValid(e)&&validateDatumValue(t,this,e)}getDefaultColor(t){return this.stroke}getDefaultOpacity(t){return this.strokeOpacity}};__decorateClass([Validate16(STRING7)],HorizontalLineProperties.prototype,"type",2);var VerticalLineProperties=class extends Annotation(Value(Handle(AxisLabel(Cappable(Stroke(LineDash(BaseProperties5))))))){constructor(){super(...arguments),this.direction="vertical",this.type="vertical-line"}static is(t){return isObject4(t)&&t.type==="vertical-line"}isValidWithContext(t,e){return super.isValid(e)&&validateDatumValue(t,this,e)}getDefaultColor(t){return this.stroke}getDefaultOpacity(t){return this.strokeOpacity}};__decorateClass([Validate16(STRING7)],VerticalLineProperties.prototype,"type",2);var import_ag_charts_community35=require("ag-charts-community"),import_ag_charts_community33=require("ag-charts-community"),{calculateLabelTranslation,ChartAxisDirection:ChartAxisDirection7}=import_ag_charts_community33._ModuleSupport,AxisLabelScene=class extends import_ag_charts_community33._Scene.Group{constructor(){super({name:"AnnotationAxisLabelGroup"}),this.label=new import_ag_charts_community33._Scene.Text({zIndex:1}),this.rect=new import_ag_charts_community33._Scene.Rect;const{label:t}=this;t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.fill="black",t.textBaseline="middle",t.textAlign="center",this.append([this.rect,this.label])}update(t){this.updateLabel(t),this.updateRect(t),this.updatePosition(t)}updateLabel({value:t,styles:e,context:i}){const{label:o}=this,{fontWeight:s,fontSize:a,fontStyle:n,fontFamily:r,textAlign:l,color:c="white",formatter:h}=e;o.setProperties({fontWeight:s,fontSize:a,fontStyle:n,fontFamily:r,textAlign:l,fill:c}),o.text=this.getFormattedValue(t,h??i.scaleValueFormatter())}updateRect({styles:t}){const{rect:e}=this,{cornerRadius:i,fill:o,fillOpacity:s,stroke:a,strokeOpacity:n}=t;e.setProperties({cornerRadius:i,fill:o,fillOpacity:s,stroke:a,strokeOpacity:n})}updatePosition({x:t,y:e,context:i,styles:{padding:o}}){const{label:s,rect:a}=this,n=s.getBBox()?.clone(),r=8,l=5;n.grow(o??r,"horizontal"),n.grow(o??l,"vertical");const c=i.direction===ChartAxisDirection7.X?l/2:r,{xTranslation:h,yTranslation:d}=calculateLabelTranslation({yDirection:!0,padding:i.labelPadding-c,position:i.position??"left",bbox:n}),u=t+h,g=e+d;s.translationX=u,s.translationY=g,a.x=u-n.width/2,a.y=g-n.height/2,a.height=n.height,a.width=n.width}getFormattedValue(t,e){return e?.(t)??String(t)}};AxisLabelScene.className="AxisLabel";var import_ag_charts_community34=require("ag-charts-community"),{Vec2:Vec24}=import_ag_charts_community34._Util,CollidableLine=class extends import_ag_charts_community34._Scene.Line{constructor(){super(...arguments),this.growCollisionBox=9}updateCollisionBBox(){const{growCollisionBox:t,strokeWidth:e,x1:i,y1:o,x2:s,y2:a}=this;let n=e+t;n%2===0&&(n+=1);const r=Vec24.from(i,o-Math.floor(n/2)),l=Vec24.from(s,a),c=Vec24.distance(r,l);this.collisionBBox=new import_ag_charts_community34._Scene.BBox(r.x,r.y,c,n)}isPointInPath(t,e){const{collisionBBox:i,x1:o,y1:s,x2:a,y2:n}=this;if(!i)return!1;const r=Vec24.from(o,s),l=Vec24.from(a,n),c=Vec24.sub(Vec24.from(t,e),r),h=Vec24.sub(l,r),d=Vec24.rotate(c,Vec24.angle(c,h),r);return i.containsPoint(d.x,d.y)??!1}},{Vec2:Vec25}=import_ag_charts_community35._Util,{ChartAxisDirection:ChartAxisDirection8}=import_ag_charts_community35._ModuleSupport,CrossLineScene=class extends AnnotationScene{constructor(){super(),this.type="cross-line",this.line=new CollidableLine,this.middle=new UnivariantHandle,this.isHorizontal=!1,this.append([this.line,this.middle])}static is(t){return AnnotationScene.isCheck(t,"cross-line")}update(t,e){const{line:i,middle:o}=this,{locked:s,visible:a,lineDash:n,lineDashOffset:r,stroke:l,strokeWidth:c,strokeOpacity:h}=t,{seriesRect:d}=e;this.seriesRect=d,this.isHorizontal=HorizontalLineProperties.is(t);const u=this.isHorizontal?e.yAxis:e.xAxis,g=this.convertCrossLine(t,u);if(g==null){this.visible=!1;return}else this.visible=a??!0;const{x1:y,y1:p,x2:m,y2:f}=g;i.setProperties({x1:y,y1:p,x2:m,y2:f,lineDash:n,lineDashOffset:r,stroke:l,strokeWidth:c,strokeOpacity:h,fillOpacity:0}),i.updateCollisionBBox();const v={fill:t.handle.fill,stroke:t.handle.stroke??l,strokeOpacity:t.handle.strokeOpacity??h,strokeWidth:t.handle.strokeWidth??c},S=y+(m-y)/2,x=p+(f-p)/2,{width:M,height:T}=o.handle;o.gradient=this.isHorizontal?"horizontal":"vertical",o.update({...v,x:S-M/2,y:x-T/2}),o.toggleLocked(s??!1),this.updateAxisLabel(t,u,g)}createAxisLabel(t){const e=new AxisLabelScene;return t.attachLabel(e),e}updateAxisLabel(t,e,{x1:i,y1:o,x2:s,y2:a}){this.axisLabel||(this.axisLabel=this.createAxisLabel(e));const{axisLabel:n,seriesRect:r}=this;if(t.axisLabel.enabled){n.visible=this.visible;const[l,c]=e.position==="left"||e.position==="top"?[i,o]:[s,a],h=e.direction===ChartAxisDirection8.X?l:c;if(!e.inRange(h)){n.visible=!1;return}n.update({x:l+(r?.x??0),y:c+(r?.y??0),value:t.value,styles:t.axisLabel,context:e})}else n.visible=!1}toggleHandles(t){this.middle.visible=t,this.middle.toggleHovered(this.activeHandle==="middle")}destroy(){super.destroy(),this.axisLabel?.destroy()}toggleActive(t){this.toggleHandles(t),this.middle.toggleActive(t)}dragStart(t,e,i){const o=HorizontalLineProperties.is(t)?{x:e.x,y:convert(t.value,i.yAxis)}:{x:convert(t.value,i.xAxis),y:e.y};this.dragState={offset:e,middle:o}}drag(t,e,i){const{activeHandle:o,dragState:s}=this;if(t.locked)return;let a;if(o)this[o].toggleDragging(!0),a=this[o].drag(e).point;else if(s)a=Vec25.add(s.middle,Vec25.sub(e,s.offset));else return;const n=invertCoords(a,i),r=HorizontalLineProperties.is(t);t.set({value:r?n.y:n.x})}stopDragging(){this.middle.toggleDragging(!1)}getCursor(){return this.activeHandle==null?"pointer":this[this.activeHandle].getCursor()}containsPoint(t,e){const{middle:i,seriesRect:o,line:s}=this;return this.activeHandle=void 0,i.containsPoint(t,e)?(this.activeHandle="middle",!0):(t-=o?.x??0,e-=o?.y??0,s.isPointInPath(t,e))}getAnchor(){const t=this.computeBBoxWithoutHandles();return this.isHorizontal?{x:t.x+t.width/2,y:t.y}:{x:t.x+t.width,y:t.y+t.height/2,position:"right"}}convertCrossLine(t,e){if(t.value==null)return;let i=0,o=0,s=0,a=0;const{bounds:n,scaleConvert:r,scaleBandwidth:l}=e,c=(l()??0)/2;if(HorizontalLineProperties.is(t)){const h=r(t.value)+c;o=n.width,s=h,a=h}else{const h=r(t.value)+c;i=h,o=h,a=n.height}return{x1:i,y1:s,x2:o,y2:a}}},import_ag_charts_community36=require("ag-charts-community"),{NUMBER:NUMBER4,STRING:STRING8,BaseProperties:BaseProperties6,Validate:Validate17,isObject:isObject5}=import_ag_charts_community36._ModuleSupport,DisjointChannelProperties=class extends Annotation(Background(Line(Handle(Stroke(LineDash(BaseProperties6)))))){constructor(){super(...arguments),this.type="disjoint-channel"}static is(t){return isObject5(t)&&t.type==="disjoint-channel"}get bottom(){const t={start:{x:this.start.x,y:this.start.y},end:{x:this.end.x,y:this.end.y}};return typeof t.start.y=="number"&&typeof t.end.y=="number"?(t.start.y-=this.startHeight,t.end.y-=this.endHeight):import_ag_charts_community36._Util.Logger.warnOnce(`Annotation [${this.type}] can only be used with a numeric y-axis.`),t}isValidWithContext(t,e){return super.isValid(e)&&validateDatumLine(t,this,e)&&validateDatumLine(t,this.bottom,e)}getDefaultColor(t){switch(t){case"fill-color":return this.background.fill;case"line-color":return this.stroke}}getDefaultOpacity(t){switch(t){case"fill-color":return this.background.fillOpacity;case"line-color":return this.strokeOpacity}}};__decorateClass([Validate17(STRING8)],DisjointChannelProperties.prototype,"type",2),__decorateClass([Validate17(NUMBER4)],DisjointChannelProperties.prototype,"startHeight",2),__decorateClass([Validate17(NUMBER4)],DisjointChannelProperties.prototype,"endHeight",2);var import_ag_charts_community38=require("ag-charts-community"),import_ag_charts_community37=require("ag-charts-community"),ChannelScene=class extends LinearScene{constructor(){super(...arguments),this.handles={},this.topLine=new CollidableLine,this.bottomLine=new CollidableLine,this.background=new import_ag_charts_community37._Scene.Path({zIndex:-1})}update(t,e){const{locked:i,visible:o}=t;this.seriesRect=e.seriesRect;const s=convertLine(t,e),a=convertLine(t.bottom,e);if(s==null||a==null){this.visible=!1;return}else this.visible=o??!0;this.updateLines(t,s,a),this.updateHandles(t,s,a),this.updateBackground(t,s,a);for(const n of Object.values(this.handles))n.toggleLocked(i??!1)}toggleActive(t){this.toggleHandles(t);for(const e of Object.values(this.handles))e.toggleActive(t)}stopDragging(){const{activeHandle:t,handles:e}=this;t!=null&&e[t].toggleDragging(!1)}getAnchor(){const t=this.computeBBoxWithoutHandles();return{x:t.x+t.width/2,y:t.y}}getCursor(){return this.activeHandle==null?"pointer":this.handles[this.activeHandle].getCursor()}containsPoint(t,e){const{handles:i,seriesRect:o,topLine:s,bottomLine:a}=this;this.activeHandle=void 0;for(const[n,r]of Object.entries(i))if(r.containsPoint(t,e))return this.activeHandle=n,!0;return t-=o?.x??0,e-=o?.y??0,s.containsPoint(t,e)||a.containsPoint(t,e)}updateBackground(t,e,i){const{background:o}=this;o.path.clear(!0),o.path.moveTo(e.x1,e.y1),o.path.lineTo(e.x2,e.y2),o.path.lineTo(i.x2,i.y2),o.path.lineTo(i.x1,i.y1),o.path.closePath(),o.checkPathDirty(),o.setProperties({fill:t.background.fill,fillOpacity:t.background.fillOpacity})}},{Vec2:Vec26}=import_ag_charts_community38._Util,DisjointChannelScene=class extends ChannelScene{constructor(){super(),this.type="disjoint-channel",this.handles={topLeft:new DivariantHandle,topRight:new DivariantHandle,bottomLeft:new DivariantHandle,bottomRight:new UnivariantHandle},this.append([this.background,this.topLine,this.bottomLine,...Object.values(this.handles)])}static is(t){return AnnotationScene.isCheck(t,"disjoint-channel")}toggleHandles(t){typeof t=="boolean"&&(t={topLeft:t,topRight:t,bottomLeft:t,bottomRight:t});for(const[e,i]of Object.entries(this.handles))i.visible=t[e]??!0,i.toggleHovered(this.activeHandle===e)}toggleActive(t){this.toggleHandles(t);for(const e of Object.values(this.handles))e.toggleActive(t)}dragHandle(t,e,i){const{activeHandle:o,handles:s}=this;if(o==null)return;const{offset:a}=s[o].drag(e);s[o].toggleDragging(!0);const n=l=>invertCoords(l,i),r=t.toJson();switch(o){case"topLeft":case"bottomLeft":{const l=o==="topLeft"?1:-1,c=n({x:s.topLeft.handle.x+a.x,y:s.topLeft.handle.y+a.y*l}),h=n({x:s.bottomLeft.handle.x+a.x,y:s.bottomLeft.handle.y+a.y*-l});if(!c||!h||t.start.y==null)return;const d=t.startHeight+(c.y-t.start.y)*2;t.start.x=c.x,t.start.y=c.y,t.startHeight=d;break}case"topRight":{const l=n({x:s.topRight.handle.x+a.x,y:s.topRight.handle.y+a.y});if(!l||t.end.y==null)return;const c=t.endHeight+(l.y-t.end.y)*2;t.end.x=l.x,t.end.y=l.y,t.endHeight=c;break}case"bottomRight":{const l=n({x:s.bottomLeft.handle.x+a.x,y:s.bottomLeft.handle.y+a.y}),c=n({x:s.bottomRight.handle.x+a.x,y:s.bottomRight.handle.y+a.y});if(!l||!c||t.start.y==null||t.end.y==null)return;const h=t.end.y-c.y,d=t.startHeight-(t.endHeight-h);t.startHeight=d,t.endHeight=h}}t.isValidWithContext(i)||t.set(r)}getOtherCoords(t,e,i,o){const{dragState:s}=this;if(!s)return[];const a=convertPoint(t.bottom.start,o).y-convertPoint(t.start,o).y,n=convertPoint(t.bottom.end,o).y-convertPoint(t.end,o).y,r=Vec26.add(e,Vec26.from(0,a)),l=Vec26.add(i,Vec26.from(0,n));return[r,l]}updateLines(t,e,i){const{topLine:o,bottomLine:s}=this,{lineDash:a,lineDashOffset:n,stroke:r,strokeOpacity:l,strokeWidth:c}=t,h={lineDash:a,lineDashOffset:n,stroke:r,strokeOpacity:l,strokeWidth:c};o.setProperties({x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,...h}),s.setProperties({x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,...h}),o.updateCollisionBBox(),s.updateCollisionBBox()}updateHandles(t,e,i){const{handles:{topLeft:o,topRight:s,bottomLeft:a,bottomRight:n}}=this,r={fill:t.handle.fill,stroke:t.handle.stroke??t.stroke,strokeOpacity:t.handle.strokeOpacity??t.strokeOpacity,strokeWidth:t.handle.strokeWidth??t.strokeWidth};o.update({...r,x:e.x1,y:e.y1}),s.update({...r,x:e.x2,y:e.y2}),a.update({...r,x:i.x1,y:i.y1}),n.update({...r,x:i.x2-n.handle.width/2,y:i.y2-n.handle.height/2})}},import_ag_charts_community39=require("ag-charts-community"),{STRING:STRING9,BaseProperties:BaseProperties7,Validate:Validate18,isObject:isObject6}=import_ag_charts_community39._ModuleSupport,LineProperties=class extends Annotation(Line(Handle(Cappable(Extendable(Stroke(LineDash(BaseProperties7))))))){constructor(){super(...arguments),this.type="line"}static is(t){return isObject6(t)&&t.type==="line"}isValidWithContext(t,e){return super.isValid(e)&&validateDatumLine(t,this,e)}getDefaultColor(t){return this.stroke}getDefaultOpacity(t){return this.strokeOpacity}};__decorateClass([Validate18(STRING9)],LineProperties.prototype,"type",2);var import_ag_charts_community40=require("ag-charts-community"),LineScene=class extends LinearScene{constructor(){super(),this.type="line",this.line=new CollidableLine,this.start=new DivariantHandle,this.end=new DivariantHandle,this.append([this.line,this.start,this.end])}static is(t){return AnnotationScene.isCheck(t,"line")}update(t,e){const{line:i,start:o,end:s}=this,{visible:a,lineDash:n,lineDashOffset:r,stroke:l,strokeWidth:c,strokeOpacity:h}=t,d=t.locked??!1;this.seriesRect=e.seriesRect;const u=convertLine(t,e);if(u==null){this.visible=!1;return}else this.visible=a??!0;const{x1:g,y1:y,x2:p,y2:m}=u;i.setProperties({x1:g,y1:y,x2:p,y2:m,lineDash:n,lineDashOffset:r,stroke:l,strokeWidth:c,strokeOpacity:h,fillOpacity:0}),i.updateCollisionBBox();const f={fill:t.handle.fill,stroke:t.handle.stroke??l,strokeOpacity:t.handle.strokeOpacity??h,strokeWidth:t.handle.strokeWidth??c};o.update({...f,x:g,y}),s.update({...f,x:p,y:m}),o.toggleLocked(d),s.toggleLocked(d)}toggleHandles(t){typeof t=="boolean"&&(t={start:t,end:t}),this.start.visible=t.start??!0,this.end.visible=t.end??!0,this.start.toggleHovered(this.activeHandle==="start"),this.end.toggleHovered(this.activeHandle==="end")}toggleActive(t){this.toggleHandles(t),this.start.toggleActive(t),this.end.toggleActive(t)}dragHandle(t,e,i){const{activeHandle:o}=this;if(!o)return;this[o].toggleDragging(!0);const s=invertCoords(this[o].drag(e).point,i);validateDatumPoint(i,s)&&(t[o].x=s.x,t[o].y=s.y)}stopDragging(){this.start.toggleDragging(!1),this.end.toggleDragging(!1)}getAnchor(){const t=this.computeBBoxWithoutHandles();return{x:t.x+t.width/2,y:t.y}}getCursor(){if(this.activeHandle==null)return"pointer"}containsPoint(t,e){const{start:i,end:o,seriesRect:s,line:a}=this;return this.activeHandle=void 0,i.containsPoint(t,e)?(this.activeHandle="start",!0):o.containsPoint(t,e)?(this.activeHandle="end",!0):(t-=s?.x??0,e-=s?.y??0,a.isPointInPath(t,e))}},import_ag_charts_community42=require("ag-charts-community"),import_ag_charts_community41=require("ag-charts-community"),ICON_HEIGHT=20,ICON_WIDTH=22,ICON_SPACING=10,LABEL_OFFSET=ICON_HEIGHT+ICON_SPACING,{Layers:Layers4,TextWrapper:TextWrapper4}=import_ag_charts_community41._ModuleSupport,{clamp:clamp2}=import_ag_charts_community41._Util,NoteScene=class extends TextualPointScene{constructor(){super(),this.type="note",this.shape=new import_ag_charts_community41._Scene.Rect,this.iconBackground=new import_ag_charts_community41._Scene.SvgPath("M22 1.83333C22 0.820811 21.1792 0 20.1667 0H1.83333C0.820811 0 0 0.82081 0 1.83333V13.9868C0 14.9994 0.820811 15.8202 1.83333 15.8202L5.88971 15.8202C6.44575 15.8202 6.97175 16.0725 7.31971 16.5062L9.57006 19.3112C10.304 20.2259 11.6962 20.2259 12.4301 19.3112L14.6804 16.5062C15.0284 16.0725 15.5544 15.8202 16.1104 15.8202L20.1667 15.8202C21.1792 15.8202 22 14.9994 22 13.9868V1.83333Z"),this.iconLines=new import_ag_charts_community41._Scene.SvgPath("M17.1114 5.75C17.1114 6.16421 16.7756 6.5 16.3614 6.5H5.63916C5.22495 6.5 4.88916 6.16421 4.88916 5.75V5.75C4.88916 5.33579 5.22495 5 5.63916 5H16.3614C16.7756 5 17.1114 5.33579 17.1114 5.75V5.75ZM17.1114 9.25C17.1114 9.66421 16.7756 10 16.3614 10H5.63916C5.22495 10 4.88916 9.66421 4.88916 9.25V9.25C4.88916 8.83579 5.22495 8.5 5.63916 8.5H16.3614C16.7756 8.5 17.1114 8.83579 17.1114 9.25V9.25Z"),this.active=!1,this.shape.visible=!1,this.label.visible=!1,this.iconBackground.fillShadow=new import_ag_charts_community41._Scene.DropShadow,this.append([this.shape,this.label,this.iconLines,this.iconBackground,this.handle])}static is(t){return AnnotationScene.isCheck(t,"note")}update(t,e){this.updateIcon(t,e),super.update(t,e)}getTextBBox(t,e,i){const{seriesRect:o}=i,s=super.getTextBBox(t,e,i);return s.x=clamp2(t.width/2,s.x,o.width-s.width/2),s}updateLabel(t,e){const i=t.visible===!1?!1:this.label.visible;super.updateLabel(t,e),this.label.visible=i,this.label.text=TextWrapper4.wrapText(t.text,{font:{fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight},avoidOrphans:!1,textAlign:t.textAlign,textBaseline:"hanging",textWrap:"always",maxWidth:200})}updateShape(t,e){const{shape:i}=this;i.fill=t.background.fill,i.fillOpacity=t.background.fillOpacity??1,i.stroke=t.background.stroke,i.strokeOpacity=t.background.strokeOpacity??1,i.strokeWidth=t.background.strokeWidth??1,i.cornerRadius=4;const o=t.getPadding().top;i.x=e.x-t.width/2-o,i.width=t.width+o*2,i.height=e.height+o*2,i.y=e.y-i.height-LABEL_OFFSET}updateIcon(t,e){const{active:i,iconBackground:o,iconLines:s}=this,{x:a,y:n}=convertPoint(t,e);o.x=a-ICON_WIDTH/2,o.y=n-ICON_HEIGHT,s.x=o.x,s.y=o.y,o.fill=t.fill,o.fillOpacity=t.fillOpacity??1,o.stroke=t.stroke,o.strokeOpacity=t.strokeOpacity??1,o.strokeWidth=t.strokeWidth??1,s.fill=t.stroke,i?o.fillShadow.color=t.fill??"rgba(0, 0, 0, 0.22)":o.fillShadow.color="rgba(0, 0, 0, 0.22)"}updateAnchor(t,e,i){const o=super.updateAnchor(t,e,i),s=t.getPadding().top;return{x:o.x,y:o.y-s*2-LABEL_OFFSET,position:"above"}}getLabelCoords(t,e){const i=t.getPadding().top;return{x:e.x-t.width/2,y:e.y-LABEL_OFFSET-i}}getHandleCoords(t,e,i){return{x:i.x,y:i.y+DivariantHandle.HANDLE_SIZE/2+4}}getHandleStyles(t){return{fill:t.handle.fill,stroke:t.handle.stroke??t.fill,strokeOpacity:t.handle.strokeOpacity,strokeWidth:t.handle.strokeWidth}}toggleHovered(t){super.toggleHovered(t),this.label.visible=t,this.shape.visible=t,this.zIndex=t?Layers4.CHART_ANNOTATION_FOCUSED_ZINDEX:Layers4.CHART_ANNOTATION_ZINDEX}toggleActive(t){super.toggleActive(t),this.label.visible=t,this.shape.visible=t,this.active=t}containsPoint(t,e){return this.shape.visible&&this.shape.containsPoint(t,e)||this.iconBackground.containsPoint(t,e)?!0:super.containsPoint(t,e)}},{OBJECT:OBJECT5,STRING:STRING10,BaseProperties:BaseProperties8,Validate:Validate19,isObject:isObject7}=import_ag_charts_community42._ModuleSupport,{clamp:clamp3}=import_ag_charts_community42._Util,DEFAULT_NOTE_PADDING=10,NoteBackgroundProperties=class extends Fill(Stroke(BaseProperties8)){},NoteProperties=class extends Fill(Stroke(TextualPointProperties)){constructor(){super(...arguments),this.type="note",this.background=new NoteBackgroundProperties,this.position="bottom",this.alignment="center",this.width=200}static is(t){return isObject7(t)&&t.type==="note"}getDefaultColor(t){switch(t){case"line-color":return this.fill;case"text-color":return this.color}}getDefaultOpacity(t){switch(t){case"line-color":return this.fillOpacity;case"text-color":return}}getPadding(){const t=this.padding??DEFAULT_NOTE_PADDING;return{top:t,right:t,bottom:t,left:t}}getTextInputCoords(t){const{width:e}=this,{seriesRect:i}=t,o=super.getTextInputCoords(t),s=this.getPadding();return o.x=clamp3(e/2,o.x,i.width-e/2),o.y=o.y-s.top-LABEL_OFFSET,o}};__decorateClass([Validate19(STRING10)],NoteProperties.prototype,"type",2),__decorateClass([Validate19(OBJECT5,{optional:!0})],NoteProperties.prototype,"background",2);var import_ag_charts_community43=require("ag-charts-community"),{NUMBER:NUMBER5,STRING:STRING11,OBJECT:OBJECT6,BaseProperties:BaseProperties9,Validate:Validate20,isObject:isObject8}=import_ag_charts_community43._ModuleSupport,ParallelChannelProperties=class extends Annotation(Background(Line(Handle(Extendable(Stroke(LineDash(BaseProperties9))))))){constructor(){super(...arguments),this.type="parallel-channel",this.middle=new ChannelAnnotationMiddleProperties}static is(t){return isObject8(t)&&t.type==="parallel-channel"}get bottom(){const t={start:{x:this.start.x,y:this.start.y},end:{x:this.end.x,y:this.end.y}};return typeof t.start.y=="number"&&typeof t.end.y=="number"?(t.start.y-=this.height,t.end.y-=this.height):import_ag_charts_community43._Util.Logger.warnOnce(`Annotation [${this.type}] can only be used with a numeric y-axis.`),t}isValidWithContext(t,e){return super.isValid(e)&&validateDatumLine(t,this,e)&&validateDatumLine(t,this.bottom,e)}getDefaultColor(t){switch(t){case"fill-color":return this.background.fill;case"line-color":return this.stroke}}getDefaultOpacity(t){switch(t){case"fill-color":return this.background.fillOpacity;case"line-color":return this.strokeOpacity}}};__decorateClass([Validate20(STRING11)],ParallelChannelProperties.prototype,"type",2),__decorateClass([Validate20(NUMBER5)],ParallelChannelProperties.prototype,"height",2),__decorateClass([Validate20(OBJECT6,{optional:!0})],ParallelChannelProperties.prototype,"middle",2);var import_ag_charts_community44=require("ag-charts-community"),{Vec2:Vec27}=import_ag_charts_community44._Util,ParallelChannelScene=class extends ChannelScene{constructor(){super(),this.type="parallel-channel",this.handles={topLeft:new DivariantHandle,topMiddle:new UnivariantHandle,topRight:new DivariantHandle,bottomLeft:new DivariantHandle,bottomMiddle:new UnivariantHandle,bottomRight:new DivariantHandle},this.middleLine=new import_ag_charts_community44._Scene.Line,this.append([this.background,this.topLine,this.middleLine,this.bottomLine,...Object.values(this.handles)])}static is(t){return AnnotationScene.isCheck(t,"parallel-channel")}toggleHandles(t){typeof t=="boolean"&&(t={topLeft:t,topMiddle:t,topRight:t,bottomLeft:t,bottomMiddle:t,bottomRight:t});for(const[e,i]of Object.entries(this.handles))i.visible=t[e]??!0,i.toggleHovered(this.activeHandle===e)}toggleActive(t){this.toggleHandles(t);for(const e of Object.values(this.handles))e.toggleActive(t)}dragHandle(t,e,i){const{activeHandle:o,handles:s}=this;if(o==null)return;const{offset:a}=s[o].drag(e);s[o].toggleDragging(!0);const n=t.toJson();let r=[];switch(o){case"topLeft":case"bottomLeft":r=["topLeft","bottomLeft"];break;case"topMiddle":r=["topLeft","topRight"],a.y-=UnivariantHandle.HANDLE_SIZE/2;break;case"topRight":case"bottomRight":r=["topRight","bottomRight"];break;case"bottomMiddle":r=["bottomLeft","bottomRight"],a.y-=UnivariantHandle.HANDLE_SIZE/2;break}const l=r.map(c=>invertCoords(Vec27.add(s[c].handle,a),i));if(!l.some(c=>!validateDatumPoint(i,c))){if((o==="topMiddle"||o==="bottomMiddle")&&t.start.y!=null){const c=invertCoords(Vec27.add(s.topLeft.handle,a),i);validateDatumPoint(i,c)&&(o==="topMiddle"?t.height+=c.y-t.start.y:t.height-=c.y-t.start.y)}for(const[c,h]of l.entries())switch(r[c]){case"topLeft":t.start.x=h.x,t.start.y=h.y;break;case"topRight":t.end.x=h.x,t.end.y=h.y;break}t.isValidWithContext(i)||t.set(n)}}getOtherCoords(t,e,i,o){const{dragState:s}=this;if(!s)return[];const a=convertPoint(t.bottom.start,o).y-convertPoint(t.start,o).y,n=Vec27.add(e,Vec27.from(0,a)),r=Vec27.add(i,Vec27.from(0,a));return[n,r]}updateLines(t,e,i){const{topLine:o,middleLine:s,bottomLine:a}=this,{lineDash:n,lineDashOffset:r,stroke:l,strokeOpacity:c,strokeWidth:h}=t,d={lineDash:n,lineDashOffset:r,stroke:l,strokeOpacity:c,strokeWidth:h};o.setProperties({x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,...d}),a.setProperties({x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,...d}),o.updateCollisionBBox(),a.updateCollisionBBox(),s.setProperties({x1:e.x1,y1:i.y1+(e.y1-i.y1)/2,x2:e.x2,y2:i.y2+(e.y2-i.y2)/2,lineDash:t.middle.lineDash??n,lineDashOffset:t.middle.lineDashOffset??r,stroke:t.middle.stroke??l,strokeOpacity:t.middle.strokeOpacity??c,strokeWidth:t.middle.strokeWidth??h,visible:t.middle.visible??!0})}updateHandles(t,e,i){const{handles:{topLeft:o,topMiddle:s,topRight:a,bottomLeft:n,bottomMiddle:r,bottomRight:l}}=this,c={fill:t.handle.fill,stroke:t.handle.stroke??t.stroke,strokeOpacity:t.handle.strokeOpacity??t.strokeOpacity,strokeWidth:t.handle.strokeWidth??t.strokeWidth};o.update({...c,x:e.x1,y:e.y1}),a.update({...c,x:e.x2,y:e.y2}),n.update({...c,x:i.x1,y:i.y1}),l.update({...c,x:i.x2,y:i.y2}),s.update({...c,x:e.x1+(e.x2-e.x1)/2-s.handle.width/2,y:e.y1+(e.y2-e.y1)/2-s.handle.height/2}),r.update({...c,x:i.x1+(i.x2-i.x1)/2-r.handle.width/2,y:i.y1+(i.y2-i.y1)/2-r.handle.height/2})}},import_ag_charts_community45=require("ag-charts-community"),{STRING:STRING12,Validate:Validate21,isObject:isObject9}=import_ag_charts_community45._ModuleSupport,TextProperties=class extends TextualPointProperties{constructor(){super(...arguments),this.type="text",this.position="bottom"}static is(t){return isObject9(t)&&t.type==="text"}};__decorateClass([Validate21(STRING12)],TextProperties.prototype,"type",2);var import_ag_charts_community46=require("ag-charts-community"),TextScene=class extends TextualPointScene{constructor(){super(),this.type="text",this.append([this.label,this.handle])}static is(t){return AnnotationScene.isCheck(t,"text")}getHandleCoords(t,e){const i=DivariantHandle.HANDLE_SIZE/2;return{x:e.x+i,y:e.y+2+i}}},annotationDatums={line:LineProperties,"horizontal-line":HorizontalLineProperties,"vertical-line":VerticalLineProperties,"parallel-channel":ParallelChannelProperties,"disjoint-channel":DisjointChannelProperties,callout:CalloutProperties,comment:CommentProperties,note:NoteProperties,text:TextProperties},annotationScenes={line:LineScene,"horizontal-line":CrossLineScene,"vertical-line":CrossLineScene,"disjoint-channel":DisjointChannelScene,"parallel-channel":ParallelChannelScene,callout:CalloutScene,comment:CommentScene,note:NoteScene,text:TextScene};function updateAnnotation(t,e,i){LineProperties.is(e)&&LineScene.is(t)&&t.update(e,i),(HorizontalLineProperties.is(e)||VerticalLineProperties.is(e))&&CrossLineScene.is(t)&&t.update(e,i),DisjointChannelProperties.is(e)&&DisjointChannelScene.is(t)&&t.update(e,i),ParallelChannelProperties.is(e)&&ParallelChannelScene.is(t)&&t.update(e,i),CalloutProperties.is(e)&&CalloutScene.is(t)&&t.update(e,i),CommentProperties.is(e)&&CommentScene.is(t)&&t.update(e,i),NoteProperties.is(e)&&NoteScene.is(t)&&t.update(e,i),TextProperties.is(e)&&TextScene.is(t)&&t.update(e,i)}function getTypedDatum(t){if(LineProperties.is(t)||HorizontalLineProperties.is(t)||VerticalLineProperties.is(t)||DisjointChannelProperties.is(t)||ParallelChannelProperties.is(t)||CalloutProperties.is(t)||CommentProperties.is(t)||NoteProperties.is(t)||TextProperties.is(t))return t}function isLineType(t){return LineProperties.is(t)||HorizontalLineProperties.is(t)||VerticalLineProperties.is(t)}function isChannelType(t){return DisjointChannelProperties.is(t)||ParallelChannelProperties.is(t)}function isTextType(t){return CalloutProperties.is(t)||CommentProperties.is(t)||NoteProperties.is(t)||TextProperties.is(t)}function hasFontSize(t){return isTextType(t)&&!NoteProperties.is(t)}function hasLineColor(t){return isLineType(t)||isChannelType(t)||CalloutProperties.is(t)||NoteProperties.is(t)}function hasFillColor(t){return isChannelType(t)||CalloutProperties.is(t)||CommentProperties.is(t)}function hasTextColor(t){return isTextType(t)&&!NoteProperties.is(t)}function setDefaults({datum:t,defaultColors:e,defaultFontSizes:i}){for(const[o,s]of e)if(t.type===o)for(const[a,[n,r,l]=[]]of s)n&&r&&l!=null&&setColor(t,a,n,r,l);if(isTextType(t))for(const[o,s]of i)s&&setFontsize(t,o,s)}function setFontsize(t,e,i){t.type===e&&"fontSize"in t&&(t.fontSize=i)}function setColor(t,e,i,o,s){switch(e){case"fill-color":{"fill"in t&&(t.fill=o),"fillOpacity"in t&&(t.fillOpacity=s),"background"in t&&(t.background.fill=o,t.background.fillOpacity=s);break}case"line-color":{"stroke"in t&&!NoteProperties.is(t)&&(t.stroke=o),"strokeOpacity"in t&&!NoteProperties.is(t)&&(t.strokeOpacity=s),"axisLabel"in t&&(t.axisLabel.fill=o,t.axisLabel.fillOpacity=s,t.axisLabel.stroke=o,t.axisLabel.strokeOpacity=s),NoteProperties.is(t)&&(t.fill=o,t.fillOpacity=s);break}case"text-color":{"color"in t&&(t.color=i);break}}}var import_ag_charts_community58=require("ag-charts-community"),import_ag_charts_community49=require("ag-charts-community"),import_ag_charts_community48=require("ag-charts-community");function guardCancelAndExit({key:t}){return t==="Escape"}function guardSaveAndExit({key:t,shiftKey:e}){return!e&&t==="Enter"}var{StateMachine}=import_ag_charts_community48._ModuleSupport,TextualStartEndStateMachine=class extends StateMachine{constructor(t){const e=({point:u})=>{const g=this.createDatum();g.set({start:u,end:u,visible:!0}),g.placeholderText="Add Text",t.create(g)},i=()=>{t.node()?.toggleActive(!0),t.showAnnotationOptions()},o=()=>{t.showTextInput();const u=t.datum();u&&(u.visible=!1)},s=()=>{t.hideTextInput();const u=t.datum();u&&(u.visible=!0),t.deselect()},a=u=>{t.node()?.setTextInputBBox(u),t.update()},n=({point:u})=>{t.datum()?.set({end:u}),t.node()?.toggleActive(!0),t.node()?.toggleHandles({end:!1}),t.update()},r=({point:u})=>{const g=t.datum();g&&(g.set({end:u}),g.placeholderText=void 0),t.node()?.toggleHandles({end:!0})},l=({colorPickerType:u,colorOpacity:g,color:y,opacity:p})=>{const m=getTypedDatum(t.datum());m&&(u==="text-color"&&t.updateTextInputColor(y),setColor(m,u,g,y,p),t.update())},c=u=>{const g=t.datum(),y=t.node();!g||!y||!isTextType(g)||(setFontsize(g,g.type,u),t.updateTextInputFontSize(u),t.update())},h=()=>{t.delete()},d=({textInputValue:u})=>{u!=null&&u.length>0?(t.datum()?.set({text:u}),t.update()):t.delete()};super("start",{start:{click:{target:"waiting-first-render",action:e},cancel:StateMachine.parent,reset:StateMachine.parent},"waiting-first-render":{render:{target:"end",action:i}},end:{hover:n,click:{target:"edit",action:r},reset:{target:StateMachine.parent,action:h},cancel:{target:StateMachine.parent,action:h}},edit:{onEnter:o,updateTextInputBBox:a,color:l,fontSize:c,keyDown:[{guard:guardCancelAndExit,target:StateMachine.parent,action:h},{guard:guardSaveAndExit,target:StateMachine.parent,action:d}],click:{target:StateMachine.parent,action:d},onExit:s,cancel:{target:StateMachine.parent,action:h}}}),this.debug=import_ag_charts_community48._Util.Debug.create(!0,"annotations")}},CalloutStateMachine=class extends TextualStartEndStateMachine{createDatum(){return new CalloutProperties}},import_ag_charts_community51=require("ag-charts-community"),import_ag_charts_community50=require("ag-charts-community"),{StateMachine:StateMachine2}=import_ag_charts_community50._ModuleSupport,TextualPointStateMachine=class extends StateMachine2{constructor(t){const e=({point:h})=>{const d=this.createDatum();d.set({x:h.x,y:h.y}),d.placeholderText="Add Text",t.create(d)},i=()=>{t.node()?.toggleActive(!0),t.showAnnotationOptions(),t.update()},o=()=>{t.showTextInput();const h=t.datum();h&&(h.visible=!1)},s=()=>{t.hideTextInput();const h=t.datum();h&&(h.visible=!0),t.deselect()},a=h=>{t.node()?.setTextInputBBox(h),t.update()},n=({colorPickerType:h,colorOpacity:d,color:u,opacity:g})=>{const y=getTypedDatum(t.datum());y&&(h==="text-color"&&t.updateTextInputColor(u),setColor(y,h,d,u,g),t.update())},r=h=>{const d=t.datum(),u=t.node();!d||!u||!isTextType(d)||(setFontsize(d,d.type,h),t.updateTextInputFontSize(h),t.update())},l=()=>{t.delete()},c=({textInputValue:h})=>{if(h!=null&&h.length>0){const d=t.datum();d&&(d.placeholderText=void 0,d.set({text:h})),t.update()}else t.delete()};super("start",{start:{click:{target:"waiting-first-render",action:e},cancel:StateMachine2.parent,reset:StateMachine2.parent},"waiting-first-render":{render:{target:"edit",action:i}},edit:{onEnter:o,updateTextInputBBox:a,color:n,fontSize:r,keyDown:[{guard:guardCancelAndExit,target:StateMachine2.parent,action:l},{guard:guardSaveAndExit,target:StateMachine2.parent,action:c}],click:{target:StateMachine2.parent,action:c},onExit:s,cancel:{target:StateMachine2.parent,action:l}}}),this.debug=import_ag_charts_community50._Util.Debug.create(!0,"annotations")}},CommentStateMachine=class extends TextualPointStateMachine{createDatum(){return new CommentProperties}},import_ag_charts_community52=require("ag-charts-community"),{StateMachine:StateMachine3}=import_ag_charts_community52._ModuleSupport,CrossLineStateMachine=class extends StateMachine3{constructor(t,e){const i=({point:s})=>{const a=t==="horizontal",n=a?new HorizontalLineProperties:new VerticalLineProperties;n.set({value:a?s.y:s.x}),e.create(n)},o=()=>{e.node()?.toggleActive(!0),e.showAnnotationOptions(),e.update()};super("start",{start:{click:{target:"waiting-first-render",action:i},reset:StateMachine3.parent,cancel:StateMachine3.parent},"waiting-first-render":{render:{target:StateMachine3.parent,action:o}}}),this.debug=import_ag_charts_community52._Util.Debug.create(!0,"annotations")}},import_ag_charts_community53=require("ag-charts-community"),{StateMachine:StateMachine4}=import_ag_charts_community53._ModuleSupport,DisjointChannelStateMachine=class extends StateMachine4{constructor(t){const e=({point:r})=>{const l=new DisjointChannelProperties;l.set({start:r,end:r,startHeight:0,endHeight:0}),t.create(l)},i=({point:r})=>{t.guardDragClickDoubleEvent.hover(),t.datum()?.set({end:r}),t.node()?.toggleHandles({topRight:!1,bottomLeft:!1,bottomRight:!1}),t.update()},o=({point:r})=>{t.datum()?.set({end:r})},s=({point:r})=>{const l=t.datum();if(l?.start.y==null||l?.end.y==null)return;const c=l.end.y-(r.y??0),h=(l.start.y-l.end.y)*2+c,d={x:l.start.x,y:l.start.y-h},u={x:l.end.x,y:r.y};t.node()?.toggleHandles({bottomLeft:!1}),!(!t.validatePoint(d)||!t.validatePoint(u))&&(l.set({startHeight:h,endHeight:c}),t.update())},a=({point:r})=>{const l=t.datum();if(l?.start.y==null||l?.end.y==null)return;const c=l.end.y-(r.y??0),h=(l.start.y-l.end.y)*2+c,d={x:l.start.x,y:l.start.y-c},u={x:l.end.x,y:r.y};t.node()?.toggleHandles(!0),!(!t.validatePoint(d)||!t.validatePoint(u))&&(l.set({startHeight:h,endHeight:c}),t.update())},n=()=>t.delete();super("start",{start:{click:{target:"end",action:e},drag:{target:"end",action:e},reset:StateMachine4.parent},end:{hover:i,drag:i,click:{guard:t.guardDragClickDoubleEvent.guard,target:"height",action:o},reset:{target:StateMachine4.parent,action:n},cancel:{target:StateMachine4.parent,action:n},onExit:t.guardDragClickDoubleEvent.reset},height:{hover:s,click:{target:StateMachine4.parent,action:a},reset:{target:StateMachine4.parent,action:n},cancel:{target:StateMachine4.parent,action:n}}}),this.debug=import_ag_charts_community53._Util.Debug.create(!0,"annotations")}},import_ag_charts_community54=require("ag-charts-community"),{StateMachine:StateMachine5}=import_ag_charts_community54._ModuleSupport,LineStateMachine=class extends StateMachine5{constructor(t){const e=({point:a})=>{const n=new LineProperties;n.set({start:a,end:a}),t.create(n)},i=({point:a})=>{t.guardDragClickDoubleEvent.hover(),t.datum()?.set({end:a}),t.node()?.toggleActive(!0),t.node()?.toggleHandles({end:!1}),t.update()},o=({point:a})=>{t.datum()?.set({end:a}),t.node()?.toggleHandles({end:!0})},s=()=>t.delete();super("start",{start:{reset:StateMachine5.parent,click:{target:"end",action:e},drag:{target:"end",action:e}},end:{hover:i,click:{guard:t.guardDragClickDoubleEvent.guard,target:StateMachine5.parent,action:o},drag:i,reset:{target:StateMachine5.parent,action:s},cancel:{target:StateMachine5.parent,action:s},onExit:t.guardDragClickDoubleEvent.reset}}),this.debug=import_ag_charts_community54._Util.Debug.create(!0,"annotations")}},import_ag_charts_community55=require("ag-charts-community"),NoteStateMachine=class extends TextualPointStateMachine{createDatum(){return new NoteProperties}},import_ag_charts_community56=require("ag-charts-community"),{StateMachine:StateMachine6}=import_ag_charts_community56._ModuleSupport,ParallelChannelStateMachine=class extends StateMachine6{constructor(t){const e=({point:r})=>{const l=new ParallelChannelProperties;l.set({start:r,end:r,height:0}),t.create(l)},i=({point:r})=>{t.guardDragClickDoubleEvent.hover(),t.datum()?.set({end:r,height:0}),t.node()?.toggleHandles({topMiddle:!1,topRight:!1,bottomLeft:!1,bottomMiddle:!1,bottomRight:!1}),t.update()},o=({point:r})=>{t.datum()?.set({end:r}),t.node()?.toggleHandles({topMiddle:!1,bottomMiddle:!1}),t.update()},s=({point:r})=>{const l=t.datum();if(l?.start.y==null||l?.end.y==null)return;const c=l.end.y-(r.y??0),h=l.start.y-c;t.node()?.toggleHandles({topMiddle:!1,bottomMiddle:!1}),!(!t.validatePoint({x:l.start.x,y:h})||!t.validatePoint({x:l.end.x,y:r.y}))&&(l.set({height:c}),t.update())},a=({point:r})=>{const l=t.datum();if(l?.start.y==null||l?.end.y==null)return;const c=l.end.y-(r.y??0),h=l.start.y-c;t.node()?.toggleHandles(!0),t.validatePoint({x:l.start.x,y:h})&&t.validatePoint({x:l.end.x,y:r.y})&&l.set({height:c})},n=()=>t.delete();super("start",{start:{click:{target:"end",action:e},drag:{target:"end",action:e},reset:StateMachine6.parent},end:{hover:i,drag:i,click:{guard:t.guardDragClickDoubleEvent.guard,target:"height",action:o},reset:{target:StateMachine6.parent,action:n},cancel:{target:StateMachine6.parent,action:n},onExit:t.guardDragClickDoubleEvent.reset},height:{hover:s,click:{target:StateMachine6.parent,action:a},reset:{target:StateMachine6.parent,action:n},cancel:{target:StateMachine6.parent,action:n}}}),this.debug=import_ag_charts_community56._Util.Debug.create(!0,"annotations")}},import_ag_charts_community57=require("ag-charts-community"),TextStateMachine=class extends TextualPointStateMachine{createDatum(){return new TextProperties}},{StateMachine:StateMachine7}=import_ag_charts_community58._ModuleSupport,AnnotationsStateMachine=class extends StateMachine7{constructor(t){let e=!1,i=0;const o={guard:()=>i>0,hover:()=>{i++},reset:()=>{i=0}},s=p=>()=>{if(this.active==null)return;const m=t.datum(this.active);if(p(m))return m},a=p=>()=>{if(this.active==null)return;const m=t.node(this.active);if(p(m))return m},n=p=>m=>{t.create(p,m),this.active=t.selectLast()},r=()=>{this.active!=null&&t.delete(this.active),this.active=void 0,t.select()},l=(p,m)=>{const f=a(m),v=s(p);return new class extends StateMachine7{constructor(){super("idle",{idle:{dragStart:{target:"dragging",action:({offset:x,context:M})=>{f()?.dragStart(v(),x,M)}}},dragging:{drag:({offset:x,context:M})=>{e=!0,f()?.drag(v(),x,M),t.update()},dragEnd:{target:StateMachine7.parent,action:()=>{f()?.stopDragging(),t.stopInteracting()}}}}),this.debug=import_ag_charts_community58._Util.Debug.create(!0,"annotations")}}},c=(p,m,f)=>({...t,create:n(p),delete:r,datum:s(m),node:a(f),showTextInput:()=>{this.active!=null&&t.showTextInput(this.active)},deselect:()=>{const v=this.active;this.active=void 0,this.hovered=void 0,t.select(this.active,v)},showAnnotationOptions:()=>{this.active!=null&&t.showAnnotationOptions(this.active)}}),h=({colorPickerType:p,colorOpacity:m,color:f,opacity:v})=>{const S=t.datum(this.active);S&&(p==="text-color"&&t.updateTextInputColor(f),setColor(S,p,m,f,v),t.update())},d=p=>{const m=t.datum(this.active),f=t.node(this.active);!m||!f||!isTextType(m)||(setFontsize(m,m.type,p),t.updateTextInputFontSize(p),t.update())},u=p=>{const m=t.node(this.active);!m||!("setTextInputBBox"in m)||(m.setTextInputBBox(p),t.update())},g=()=>this.active!=null,y=()=>this.hovered!=null;super("idle",{idle:{onEnter:()=>{t.resetToIdle(),t.select(this.active)},hover:({offset:p})=>{this.hovered=t.hoverAtCoords(p,this.active)},click:[{guard:()=>{if(this.active==null||this.hovered!==this.active||e)return!1;const p=t.datum(this.active);return p?isTextType(p)&&!p.locked:!1},target:"text-input"},{target:"idle",action:()=>{const p=this.active;this.active=this.hovered,t.select(this.hovered,p),e=!1}}],drag:{guard:y,target:"idle",action:()=>{const p=this.active;this.active=this.hovered,t.select(this.hovered,p)}},dragStart:{guard:y,target:"dragging",action:()=>{e=this.active==null||this.hovered!=this.active;const p=this.active;this.active=this.hovered,t.select(this.hovered,p),t.startInteracting()}},color:{guard:g,target:"idle",action:h},fontSize:{guard:g,target:"idle",action:d},updateTextInputBBox:{guard:g,target:"idle",action:u},reset:()=>{this.active!=null&&t.node(this.active)?.toggleActive(!1),this.hovered=void 0,this.active=void 0,t.resetToIdle()},delete:()=>{this.active!=null&&t.delete(this.active)},deleteAll:()=>{t.deleteAll()},line:new LineStateMachine({...t,create:n("line"),delete:r,datum:s(LineProperties.is),node:a(LineScene.is),guardDragClickDoubleEvent:o}),"horizontal-line":new CrossLineStateMachine("horizontal",{...t,create:n("horizontal-line"),node:a(CrossLineScene.is),showAnnotationOptions:()=>{this.active!=null&&t.showAnnotationOptions(this.active)}}),"vertical-line":new CrossLineStateMachine("vertical",{...t,create:n("vertical-line"),node:a(CrossLineScene.is),showAnnotationOptions:()=>{this.active!=null&&t.showAnnotationOptions(this.active)}}),"disjoint-channel":new DisjointChannelStateMachine({...t,create:n("disjoint-channel"),delete:r,datum:s(DisjointChannelProperties.is),node:a(DisjointChannelScene.is),guardDragClickDoubleEvent:o}),"parallel-channel":new ParallelChannelStateMachine({...t,create:n("parallel-channel"),delete:r,datum:s(ParallelChannelProperties.is),node:a(ParallelChannelScene.is),guardDragClickDoubleEvent:o}),text:new TextStateMachine(c("text",TextProperties.is,TextScene.is)),comment:new CommentStateMachine(c("comment",CommentProperties.is,CommentScene.is)),callout:new CalloutStateMachine(c("callout",CalloutProperties.is,CalloutScene.is)),note:new NoteStateMachine(c("note",NoteProperties.is,NoteScene.is))},dragging:{onEnter:(p,m)=>{if(this.active==null)return;const f=t.getAnnotationType(this.active);f&&(this.transition(f),this.transition("dragStart",m))},line:l(LineProperties.is,LineScene.is),"horizontal-line":l(HorizontalLineProperties.is,CrossLineScene.is),"vertical-line":l(VerticalLineProperties.is,CrossLineScene.is),"parallel-channel":l(ParallelChannelProperties.is,ParallelChannelScene.is),"disjoint-channel":l(DisjointChannelProperties.is,DisjointChannelScene.is),text:l(TextProperties.is,TextScene.is),comment:l(CommentProperties.is,CommentScene.is),callout:l(CalloutProperties.is,CalloutScene.is),note:l(NoteProperties.is,NoteScene.is)},"text-input":{onEnter:()=>{if(this.active==null)return;const p=getTypedDatum(t.datum(this.active));!p||!("getTextInputCoords"in p)||(t.startInteracting(),t.showTextInput(this.active),p.visible=!1,t.update())},updateTextInputBBox:{guard:g,target:"text-input",action:u},click:{target:"idle",action:({textInputValue:p})=>{p!=null&&p.length>0?(t.datum(this.active)?.set({text:p}),t.update()):t.delete(this.active)}},keyDown:[{guard:guardCancelAndExit,target:"idle"},{guard:guardSaveAndExit,target:"idle",action:({textInputValue:p})=>{t.datum(this.active)?.set({text:p}),t.update()}}],color:{guard:g,target:"text-input",action:h},fontSize:{guard:g,target:"text-input",action:d},cancel:"idle",onExit:()=>{t.stopInteracting(),t.hideTextInput();const p=this.active,m=this.active;if(this.active=this.hovered=void 0,t.select(this.active,m),p==null)return;const f=t.datum(p),v=t.node(p);!f||!v||(f.visible=!0,t.updateTextInputBBox(void 0))}}}),this.debug=import_ag_charts_community58._Util.Debug.create(!0,"annotations")}getActive(){return this.active}isActive(t){return t===this.active}},import_ag_charts_community59=require("ag-charts-community"),{BaseModuleInstance,InteractionState,Validate:Validate22,BOOLEAN:BOOLEAN5,createElement:createElement3,REGIONS,ChartAxisDirection:ChartAxisDirection9}=import_ag_charts_community59._ModuleSupport,DEFAULT_ANNOTATION_AXIS_BUTTON_CLASS="ag-charts-annotations__axis-button",AxisButton=class extends BaseModuleInstance{constructor(t,e,i,o){super(),this.ctx=t,this.axisCtx=e,this.onButtonClick=i,this.seriesRect=o,this.enabled=!0,this.snap=!1,this.padding=0;const{button:s,wrapper:a}=this.setup();this.wrapper=a,this.button=s,this.toggleVisibility(!1),this.updateButtonElement(),this.snap=e.scaleBandwidth()>0;const n=this.ctx.regionManager.getRegion(REGIONS.SERIES),r=InteractionState.Default|InteractionState.Annotations;this.destroyFns.push(n.addListener("hover",l=>this.onMouseMove(l),r),n.addListener("drag",l=>this.onMouseMove(l),r),n.addListener("leave",()=>this.onLeave(),r),()=>this.destroyElements(),()=>this.wrapper.remove(),()=>this.button.remove())}update(t,e){this.seriesRect=t,this.padding=e}setup(){const t=this.ctx.domManager.addChild("canvas-overlay",`${DEFAULT_ANNOTATION_AXIS_BUTTON_CLASS}-${this.axisCtx.axisId}`);t.classList.add(`${DEFAULT_ANNOTATION_AXIS_BUTTON_CLASS}-wrapper`);const e=createElement3("button");return e.classList.add(DEFAULT_ANNOTATION_AXIS_BUTTON_CLASS),t.appendChild(e),{wrapper:t,button:e}}destroyElements(){this.ctx.domManager.removeChild("canvas-overlay",DEFAULT_ANNOTATION_AXIS_BUTTON_CLASS)}onMouseMove(t){if(!this.enabled)return;this.toggleVisibility(!0);const e=this.getButtonCoordinates({x:t.offsetX,y:t.offsetY});this.coords=this.getAxisCoordinates(e),this.updatePosition(e)}onLeave(){this.toggleVisibility(!1)}getButtonCoordinates({x:t,y:e}){const{axisCtx:{direction:i,position:o},seriesRect:s,snap:a,axisCtx:n,padding:r}=this,{clientWidth:l,clientHeight:c}=this.button,[h,d]=[s.y,s.y+s.height],[u,g]=[s.x,s.x+s.width];if(a&&(t=convert(invert(t-s.x,n),n)+s.x,e=convert(invert(e-s.y,n),n)+s.y),i===ChartAxisDirection9.X){const p=c-Math.max(0,r-5);t=t-l/2,e=o==="top"?h-c+p:d-p}else{const p=l-Math.max(0,r-9);t=o==="left"?u-l+p:g-p,e=e-c/2}return{x:t,y:e}}getAxisCoordinates(t){const{seriesRect:e}=this,{clientWidth:i,clientHeight:o}=this.button,s=t.x-e.x+i/2,a=t.y-e.y+o/2;return{x:s,y:a}}toggleVisibility(t){const{button:e}=this;if(e==null)return;const i=this.enabled&&t;this.toggleClass("-hidden",!i)}toggleClass(t,e){this.wrapper.classList.toggle(`${DEFAULT_ANNOTATION_AXIS_BUTTON_CLASS}-wrapper-${t}`,e)}updatePosition({x:t,y:e}){this.wrapper.style.transform=`translate(${Math.round(t)}px, ${Math.round(e)}px)`}updateButtonElement(){const{button:t,ctx:e}=this;t.onclick=import_ag_charts_community59._ModuleSupport.makeAccessibleClickListener(t,()=>this.onButtonClick(this.coords)),t.innerHTML=`<span class="${e.domManager.getIconClassNames("zoom-in")} ${DEFAULT_ANNOTATION_AXIS_BUTTON_CLASS}-icon"></span>`}};__decorateClass([Validate22(BOOLEAN5)],AxisButton.prototype,"enabled",2);var{BOOLEAN:BOOLEAN6,ChartUpdateType,Cursor,InteractionState:InteractionState2,PropertiesArray,ToolbarManager,Validate:Validate23,REGIONS:REGIONS2,UNION:UNION4,ChartAxisDirection:ChartAxisDirection10}=import_ag_charts_community60._ModuleSupport,{Vec2:Vec28}=import_ag_charts_community60._Util,AXIS_TYPE=UNION4(["x","y","xy"],"an axis type"),TEXT_SIZE_ITEMS=[{label:"10",value:10},{label:"12",value:12},{label:"14",value:14},{label:"16",value:16},{label:"18",value:18},{label:"22",value:22},{label:"28",value:28},{label:"36",value:36},{label:"46",value:46}],LINE_ANNOTATION_ITEMS=[{label:"toolbarAnnotationsTrendLine",icon:"trend-line-drawing",value:"line"},{label:"toolbarAnnotationsHorizontalLine",icon:"horizontal-line-drawing",value:"horizontal-line"},{label:"toolbarAnnotationsVerticalLine",icon:"vertical-line-drawing",value:"vertical-line"},{label:"toolbarAnnotationsParallelChannel",icon:"parallel-channel-drawing",value:"parallel-channel"},{label:"toolbarAnnotationsDisjointChannel",icon:"disjoint-channel-drawing",value:"disjoint-channel"}],TEXT_ANNOTATION_ITEMS=[{label:"toolbarAnnotationsText",icon:"text-annotation",value:"text"},{label:"toolbarAnnotationsComment",icon:"comment-annotation",value:"comment"},{label:"toolbarAnnotationsCallout",icon:"callout-annotation",value:"callout"},{label:"toolbarAnnotationsNote",icon:"note-annotation",value:"note"}],AxesButtons=class{constructor(){this.enabled=!0,this.axes="y"}};__decorateClass([Validate23(BOOLEAN6)],AxesButtons.prototype,"enabled",2),__decorateClass([Validate23(AXIS_TYPE,{optional:!0})],AxesButtons.prototype,"axes",2);var Annotations=class extends import_ag_charts_community60._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.__hackWasDisabled=!1,this.enabled=!0,this.axesButtons=new AxesButtons,this.annotationData=new PropertiesArray(this.createAnnotationDatum),this.container=new import_ag_charts_community60._Scene.Group({name:"static-annotations"}),this.annotations=new import_ag_charts_community60._Scene.Selection(this.container,this.createAnnotationScene.bind(this)),this.colorPicker=new ColorPicker(this.ctx),this.textSizePopover=new Popover(this.ctx,"annotations"),this.annotationPickerPopover=new Popover(this.ctx,"text"),this.defaultColors=new Map(Object.values(AnnotationType).map(e=>[e,new Map([["line-color",void 0],["fill-color",void 0],["text-color",void 0]])])),this.defaultFontSizes=new Map([["callout",void 0],["comment",void 0],["note",void 0],["text",void 0]]),this.textInput=new TextInput(this.ctx),this.state=this.setupStateMachine(),this.setupListeners()}setupStateMachine(){const{ctx:t}=this;return new AnnotationsStateMachine({resetToIdle:()=>{t.cursorManager.updateCursor("annotations"),t.interactionManager.popState(InteractionState2.Annotations),t.toolbarManager.toggleGroup("annotations","annotationOptions",{visible:!1}),t.tooltipManager.unsuppressTooltip("annotations"),this.hideOverlays(),this.resetToolbarButtonStates(),this.toggleAnnotationOptionsButtons(),this.update()},hoverAtCoords:(e,i)=>{let o;return this.annotations.each((s,a,n)=>{const r=s.containsPoint(e.x,e.y);r&&(o??(o=n)),s.toggleHovered(r||i===n)}),this.ctx.cursorManager.updateCursor("annotations",o==null?void 0:this.annotations.at(o)?.getCursor()),o},select:(e,i)=>{const{annotations:o,ctx:{toolbarManager:s,tooltipManager:a}}=this,n=e!=null?o.at(e):void 0;n?.toggleActive(!0),this.hideOverlays(),i!=null&&i!=e&&o.at(i)?.toggleActive(!1),e==null?a.unsuppressTooltip("annotations"):a.suppressTooltip("annotations"),(e==null||e!=null&&e!==i)&&(t.toolbarManager.updateButton("annotations","line-menu",{icon:void 0}),t.toolbarManager.updateButton("annotations","text-menu",{icon:void 0})),n?(this.toggleAnnotationOptionsButtons(),s.toggleGroup("annotations","annotationOptions",{visible:!0})):s.toggleGroup("annotations","annotationOptions",{visible:!1}),this.update()},selectLast:()=>this.annotationData.length-1,startInteracting:()=>{this.ctx.interactionManager.pushState(InteractionState2.Annotations)},stopInteracting:()=>{this.ctx.interactionManager.popState(InteractionState2.Annotations)},create:(e,i)=>{this.annotationData.push(i);const o=this.ctx.annotationManager.getAnnotationTypeStyles(e);o&&i.set(o),setDefaults({datum:i,defaultColors:this.defaultColors,defaultFontSizes:this.defaultFontSizes}),this.resetToolbarButtonStates(),this.update()},delete:e=>{this.annotationData.splice(e,1)},deleteAll:()=>{this.annotationData.splice(0,this.annotationData.length)},validatePoint:e=>{const i=this.getAnnotationContext(),o=i?validateDatumPoint(i,e):!0;return o||this.ctx.cursorManager.updateCursor("annotations",Cursor.NotAllowed),o},getAnnotationType:e=>stringToAnnotationType(this.annotationData[e].type),datum:e=>this.annotationData.at(e),node:e=>this.annotations.at(e),update:()=>{this.update()},showTextInput:e=>{const i=getTypedDatum(this.annotationData.at(e));if(!this.annotations.at(e)||!i||!("getTextInputCoords"in i))return;const s={color:i.color,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight,placeholderColor:i.getPlaceholderColor()},a=this.getAnnotationContext(),n=()=>Vec28.add(i.getTextInputCoords(a),Vec28.required(this.seriesRect));this.textInput.show({styles:s,layout:{getTextInputCoords:n,position:i.position,alignment:i.alignment,textAlign:i.textAlign,width:i.width},text:i.text,onChange:(r,l)=>{this.state.transition("updateTextInputBBox",l)}})},hideTextInput:()=>{this.textInput.hide()},updateTextInputColor:e=>{this.textInput.updateColor(e)},updateTextInputFontSize:e=>{const i=this.textInput.updateFontSize(e);this.state.transition("updateTextInputBBox",i)},updateTextInputBBox:e=>{this.state.transition("updateTextInputBBox",e)},showAnnotationOptions:e=>{const i=this.annotations.at(e);i&&(t.toolbarManager.changeFloatingAnchor("annotationOptions",i.getAnchor()),this.toggleAnnotationOptionsButtons(),t.toolbarManager.toggleGroup("annotations","annotationOptions",{visible:!0}))}})}setupListeners(){const{ctx:t}=this,{All:e,Default:i,Annotations:o,ZoomDrag:s}=InteractionState2,a=t.regionManager.getRegion(REGIONS2.SERIES),n=Object.values(REGIONS2).filter(r=>![REGIONS2.SERIES,REGIONS2.NAVIGATOR].includes(r)).map(r=>t.regionManager.getRegion(r));this.destroyFns.push(a.addListener("hover",r=>this.onHover(r),e),a.addListener("click",r=>this.onClick(r),e),a.addListener("drag-start",this.onDragStart.bind(this),i|s|o),a.addListener("drag",this.onDrag.bind(this),i|s|o),a.addListener("drag-end",this.onDragEnd.bind(this),e),a.addListener("cancel",this.onCancel.bind(this),e),a.addListener("delete",this.onDelete.bind(this),e),t.interactionManager.addListener("keydown",this.onKeyDown.bind(this),o),...n.map(r=>r.addListener("click",this.onCancel.bind(this),e)),t.annotationManager.addListener("restore-annotations",this.onRestoreAnnotations.bind(this)),t.toolbarManager.addListener("button-pressed",this.onToolbarButtonPress.bind(this)),t.toolbarManager.addListener("button-moved",this.onToolbarButtonMoved.bind(this)),t.toolbarManager.addListener("cancelled",this.onToolbarCancelled.bind(this)),t.layoutService.addListener("layout-complete",this.onLayoutComplete.bind(this)),t.updateService.addListener("pre-scene-render",this.onPreRender.bind(this)),t.annotationManager.attachNode(this.container),()=>this.colorPicker.destroy(),()=>t.domManager.removeStyles(DEFAULT_ANNOTATION_AXIS_BUTTON_CLASS))}createAnnotationScene(t){return new annotationScenes[t.type]}createAnnotationDatum(t){if(t.type in annotationDatums)return new annotationDatums[t.type]().set(t);throw new Error(`AG Charts - Cannot set property of unknown type [${t.type}], expected one of [${Object.keys(annotationDatums)}], ignoring.`)}onRestoreAnnotations(t){this.enabled&&(this.clear(),this.annotationData.set(t.annotations),this.update())}onToolbarButtonPress(t){if(ToolbarManager.isGroup("annotationOptions",t)){this.onToolbarAnnotationOptionButtonPress(t);return}if(!ToolbarManager.isGroup("annotations",t)){this.reset();return}if(t.value==="clear"){this.clear();return}if(t.value==="line-menu"){this.onToolbarButtonPressLineMenu(t);return}if(t.value==="text-menu"){this.onToolbarButtonPressTextMenu(t);return}this.onToolbarButtonPressAnnotation(t)}onToolbarAnnotationOptionButtonPress(t){if(!ToolbarManager.isGroup("annotationOptions",t))return;const{annotationData:e,state:i}=this,o=i.getActive();if(o==null)return;this.hideOverlays();const s=getTypedDatum(e[o]);switch(t.value){case"line-color":case"fill-color":case"text-color":this.colorPicker.show({color:s?.getDefaultColor(t.value),opacity:s?.getDefaultOpacity(t.value),onChange:s!=null?this.onColorPickerChange.bind(this,t.value,s):void 0,onClose:this.onColorPickerClose.bind(this)});break;case"text-size":{const a=s!=null&&"fontSize"in s?s.fontSize:void 0;this.textSizePopover.show({items:TEXT_SIZE_ITEMS,value:a,onPress:n=>this.onTextSizePopoverPress(n,s),onClose:this.onTextSizePopoverClose.bind(this),class:"annotations__text-size"});break}case"delete":this.cancel(),this.delete(),this.reset();break;case"lock":e[o].locked=!0,this.toggleAnnotationOptionsButtons();break;case"unlock":e[o].locked=!1,this.toggleAnnotationOptionsButtons();break}this.update()}onToolbarButtonPressLineMenu(t){const{x:e,y:i,width:o}=t.rect;this.cancel(),this.reset(),this.annotationPickerPopover.setAnchor({x:e+o+6,y:i}),this.annotationPickerPopover.show({items:LINE_ANNOTATION_ITEMS,onPress:this.onAnnotationsPopoverPress.bind(this,t),onClose:this.onAnnotationsPopoverClose.bind(this)})}onToolbarButtonPressTextMenu(t){const{x:e,y:i,width:o}=t.rect;this.cancel(),this.reset(),this.annotationPickerPopover.setAnchor({x:e+o+6,y:i}),this.annotationPickerPopover.show({items:TEXT_ANNOTATION_ITEMS,onPress:this.onAnnotationsPopoverPress.bind(this,t),onClose:this.onAnnotationsPopoverClose.bind(this)})}onToolbarButtonPressAnnotation(t){this.ctx.tooltipManager.suppressTooltip("annotations");const e=stringToAnnotationType(t.value);e?this.beginAnnotationPlacement(e):(import_ag_charts_community60._Util.Logger.errorOnce(`Can not create unknown annotation type [${t.value}], ignoring.`),this.update())}onToolbarButtonMoved(t){const{group:e,rect:i,groupRect:o,value:s}=t;if(e==="annotationOptions")switch(s){case"fill-color":case"line-color":case"text-color":{const a=Vec28.add(o,Vec28.from(0,o.height+4)),n={y:o.y-4};this.colorPicker.setAnchor(a,n);break}case"text-size":{const a={x:i.x,y:i.y+i.height-1};this.textSizePopover.setAnchor(a);break}default:break}}onColorPickerChange(t,e,i,o,s){this.state.transition("color",{colorPickerType:t,colorOpacity:i,color:o,opacity:s}),this.defaultColors.get(e.type)?.set(t,[i,o,s]),this.updateToolbarColorPickerFill(t,i)}updateToolbarColorPickerFill(t,e,i){if(e!=null&&i!=null){const{r:o,g:s,b:a}=import_ag_charts_community60._Util.Color.fromString(e);e=import_ag_charts_community60._Util.Color.fromArray([o,s,a,i]).toHexString()}this.ctx.toolbarManager.updateButton("annotationOptions",t,{fill:e})}updateToolbarFills(){const t=this.state.getActive(),e=t!=null?this.annotationData[t]:void 0,i=getTypedDatum(e);this.updateToolbarColorPickerFill("line-color",i?.getDefaultColor("line-color"),i?.getDefaultOpacity("line-color")),this.updateToolbarColorPickerFill("fill-color",i?.getDefaultColor("fill-color"),i?.getDefaultOpacity("fill-color")),this.updateToolbarColorPickerFill("text-color",i?.getDefaultColor("text-color"),i?.getDefaultOpacity("text-color"))}onColorPickerClose(){this.colorPicker.hide()}updateToolbarFontSize(t){this.ctx.toolbarManager.updateButton("annotationOptions","text-size",{label:t!=null?String(t):void 0})}onTextSizePopoverPress(t,e){const i=t.value;isTextType(e)&&this.defaultFontSizes.set(e.type,i),this.state.transition("fontSize",i),this.updateToolbarFontSize(i)}onTextSizePopoverClose(){this.textSizePopover.hide()}onAnnotationsPopoverPress(t,e){const{toolbarManager:i}=this.ctx;i.toggleButton("annotations",t.id,{active:!0}),i.updateButton("annotations",t.id,{icon:e.icon}),this.beginAnnotationPlacement(e.value),this.onAnnotationsPopoverClose()}onAnnotationsPopoverClose(){this.annotationPickerPopover.hide()}onToolbarCancelled(t){t.group==="annotations"&&(this.cancel(),this.resetToolbarButtonStates(),this.reset(),this.update())}onLayoutComplete(t){const e=t.series.paddedRect;this.seriesRect=e;for(const i of t.axes??[])i.direction===import_ag_charts_community60._ModuleSupport.ChartAxisDirection.X?this.xAxis=this.getAxis(i,e,this.xAxis?.button):this.yAxis=this.getAxis(i,e,this.yAxis?.button)}onPreRender(){this.updateAnnotations(),this.state.transition("render")}getAxis(t,e,i){const o=this.ctx.axisManager.getAxisContext(t.direction)[0],{position:s="bottom",direction:a}=o,n=t.gridPadding+t.seriesAreaPadding,r=buildBounds(new import_ag_charts_community60._Scene.BBox(0,0,e.width,e.height),s,n),l=o.direction===ChartAxisDirection10.X?"vertical":"horizontal",{axesButtons:c}=this;if(this.enabled&&c.enabled&&(c.axes==="xy"||c.axes===a)){i??(i=new AxisButton(this.ctx,o,u=>this.onAxisButtonClick(u,l),e));const d=calculateAxisLabelPadding(t);i.update(e,d)}else i?.destroy(),i=void 0;return{layout:t,context:o,bounds:r,button:i}}updateAnnotations(){const{annotationData:t,annotations:e,seriesRect:i,state:o,ctx:{annotationManager:s,toolbarManager:a}}=this,n=this.getAnnotationContext();!i||!n||(s.updateData(t.toJson()),e.update(t??[],void 0,r=>r.id).each((r,l,c)=>{if(!this.validateDatum(l)){r.visible=!1;return}updateAnnotation(r,l,n),o.isActive(c)&&a.changeFloatingAnchor("annotationOptions",r.getAnchor())}))}validateDatum(t){const e=this.getAnnotationContext();return e?t.isValidWithContext(e,`Annotation [${t.type}] `):!0}getAnnotationContext(){const{seriesRect:t,xAxis:e,yAxis:i}=this;if(t&&e&&i)return{seriesRect:t,xAxis:{...e.context,bounds:e.bounds,labelPadding:calculateAxisLabelPadding(e.layout)},yAxis:{...i.context,bounds:i.bounds,labelPadding:calculateAxisLabelPadding(e.layout)}}}onHover(t){const{seriesRect:e,state:i}=this,o=this.getAnnotationContext();if(!o)return;const s=Vec28.fromOffset(t),a=invertCoords(Vec28.sub(s,Vec28.required(e)),o);i.transition("hover",{offset:s,point:a})}onClick(t){const{seriesRect:e,state:i}=this,o=this.getAnnotationContext();if(!o)return;const s=Vec28.sub(Vec28.fromOffset(t),Vec28.required(e)),a=invertCoords(s,o),n=this.textInput.getValue();i.transition("click",{offset:s,point:a,textInputValue:n})}onAxisButtonClick(t,e){this.cancel(),this.reset();const i=this.getAnnotationContext();if(!this.annotationData||!i)return;const{state:o,ctx:{toolbarManager:s,interactionManager:a}}=this;a.pushState(InteractionState2.Annotations);const n=e==="horizontal";if(o.transition(n?"horizontal-line":"vertical-line"),s.toggleGroup("annotations","annotationOptions",{visible:!1}),!t)return;const r=invertCoords(t,i);validateDatumPoint(i,r)&&(o.transition("click",{point:r}),this.update())}onDragStart(t){const{seriesRect:e,state:i}=this,o=this.getAnnotationContext();if(!o)return;const s=Vec28.sub(Vec28.fromOffset(t),Vec28.required(e));i.transition("dragStart",{context:o,offset:s})}onDrag(t){const{seriesRect:e,state:i}=this,o=this.getAnnotationContext();if(!o)return;const s=Vec28.sub(Vec28.fromOffset(t),Vec28.required(e)),a=invertCoords(s,o);i.transition("drag",{context:o,offset:s,point:a})}onDragEnd(t){this.state.transition("dragEnd")}onCancel(){this.cancel(),this.reset()}onDelete(){this.cancel(),this.delete(),this.reset(),this.update()}onKeyDown(t){const{state:e}=this;if(!this.getAnnotationContext())return;const{key:o,shiftKey:s}=t.sourceEvent,a=this.textInput.getValue();e.transition("keyDown",{key:o,shiftKey:s,textInputValue:a})}beginAnnotationPlacement(t){this.cancel(),this.ctx.interactionManager.pushState(InteractionState2.Annotations),this.state.transition(t),this.update()}toggleAnnotationOptionsButtons(){const{annotationData:t,state:e,ctx:{toolbarManager:i}}=this,o=e.getActive();if(o==null)return;const s=getTypedDatum(t.at(o)),a=s?.locked??!1;this.updateToolbarFontSize(s!=null&&"fontSize"in s?s.fontSize:void 0),this.updateToolbarFills(),i.toggleButton("annotationOptions","line-color",{enabled:!a,visible:hasLineColor(s)}),i.toggleButton("annotationOptions","text-color",{enabled:!a,visible:hasTextColor(s)}),i.toggleButton("annotationOptions","fill-color",{enabled:!a,visible:hasFillColor(s)}),i.toggleButton("annotationOptions","text-size",{enabled:!a,visible:hasFontSize(s)}),i.toggleButton("annotationOptions","delete",{enabled:!a}),i.toggleButton("annotationOptions","lock",{visible:!a}),i.toggleButton("annotationOptions","unlock",{visible:a})}clear(){this.cancel(),this.deleteAll(),this.reset()}reset(){this.state.transition("reset")}cancel(){this.state.transition("cancel")}delete(){this.state.transition("delete")}deleteAll(){this.state.transition("deleteAll")}hideOverlays(){this.colorPicker.hide(),this.textSizePopover.hide(),this.annotationPickerPopover.hide()}resetToolbarButtonStates(){const{ctx:{toolbarManager:t}}=this;for(const e of ANNOTATION_BUTTONS)t.toggleButton("annotations",e,{active:!1});for(const e of ANNOTATION_BUTTON_GROUPS)t.toggleButton("annotations",e,{active:!1})}update(t=ChartUpdateType.PRE_SCENE_RENDER){this.ctx.updateService.update(t,{skipAnimations:!0})}};__decorateClass([import_ag_charts_community60._ModuleSupport.ObserveChanges((t,e)=>{const{ctx:{annotationManager:i,stateManager:o,toolbarManager:s}}=t;s.toggleGroup("annotations","annotations",{visible:!!e}),t.__hackWasDisabled&&e?(o.restoreState(i),t.__hackWasDisabled=!1):e===!1&&(t.__hackWasDisabled=!0,t.clear())}),Validate23(BOOLEAN6)],Annotations.prototype,"enabled",2);var AnnotationsModule={type:"root",optionsKey:"annotations",packageType:"enterprise",chartTypes:["cartesian"],dependencies:["toolbar"],moduleFactory:t=>new Annotations(t),themeTemplate:{annotations:{line:{stroke:import_ag_charts_community61._Theme.DEFAULT_ANNOTATION_COLOR,strokeWidth:2,strokeOpacity:1,handle:{fill:import_ag_charts_community61._Theme.DEFAULT_ANNOTATION_HANDLE_FILL}},"horizontal-line":{stroke:import_ag_charts_community61._Theme.DEFAULT_ANNOTATION_COLOR,strokeWidth:2,strokeOpacity:1,handle:{fill:import_ag_charts_community61._Theme.DEFAULT_ANNOTATION_HANDLE_FILL},axisLabel:{enabled:!0,color:"white",fill:import_ag_charts_community61._Theme.DEFAULT_ANNOTATION_COLOR,fontSize:12,fontFamily:import_ag_charts_community61._Theme.DEFAULT_FONT_FAMILY}},"vertical-line":{stroke:import_ag_charts_community61._Theme.DEFAULT_ANNOTATION_COLOR,strokeWidth:2,strokeOpacity:1,handle:{fill:import_ag_charts_community61._Theme.DEFAULT_ANNOTATION_HANDLE_FILL},axisLabel:{enabled:!0,color:"white",fill:import_ag_charts_community61._Theme.DEFAULT_ANNOTATION_COLOR,fontSize:12,fontFamily:import_ag_charts_community61._Theme.DEFAULT_FONT_FAMILY}},"disjoint-channel":{stroke:import_ag_charts_community61._Theme.DEFAULT_ANNOTATION_COLOR,strokeWidth:2,strokeOpacity:1,background:{fill:import_ag_charts_community61._Theme.DEFAULT_ANNOTATION_BACKGROUND_FILL,fillOpacity:.2},handle:{fill:import_ag_charts_community61._Theme.DEFAULT_ANNOTATION_HANDLE_FILL}},"parallel-channel":{stroke:import_ag_charts_community61._Theme.DEFAULT_ANNOTATION_COLOR,strokeWidth:2,strokeOpacity:1,middle:{lineDash:[6,5],strokeWidth:1},background:{fill:import_ag_charts_community61._Theme.DEFAULT_ANNOTATION_BACKGROUND_FILL,fillOpacity:.2},handle:{fill:import_ag_charts_community61._Theme.DEFAULT_ANNOTATION_HANDLE_FILL}},callout:{color:import_ag_charts_community61._Theme.DEFAULT_LABEL_COLOUR,fontSize:14,fontFamily:import_ag_charts_community61._Theme.DEFAULT_FONT_FAMILY,textAlign:"left",handle:{fill:import_ag_charts_community61._Theme.DEFAULT_ANNOTATION_HANDLE_FILL,strokeWidth:2,strokeOpacity:1},stroke:import_ag_charts_community61._Theme.DEFAULT_ANNOTATION_COLOR,strokeWidth:2,fill:import_ag_charts_community61._Theme.DEFAULT_ANNOTATION_BACKGROUND_FILL,fillOpacity:.2},comment:{color:"white",fontSize:14,fontFamily:import_ag_charts_community61._Theme.DEFAULT_FONT_FAMILY,fontWeight:700,textAlign:"left",handle:{fill:import_ag_charts_community61._Theme.DEFAULT_ANNOTATION_HANDLE_FILL,strokeWidth:2,strokeOpacity:1},fill:import_ag_charts_community61._Theme.PALETTE_NEUTRAL_FILL},note:{color:import_ag_charts_community61._Theme.DEFAULT_TEXTBOX_COLOR,fill:import_ag_charts_community61._Theme.DEFAULT_ANNOTATION_COLOR,stroke:import_ag_charts_community61._Theme.DEFAULT_ANNOTATION_HANDLE_FILL,strokeWidth:1,strokeOpacity:1,fontSize:14,fontFamily:import_ag_charts_community61._Theme.DEFAULT_FONT_FAMILY,textAlign:"left",handle:{fill:import_ag_charts_community61._Theme.DEFAULT_ANNOTATION_HANDLE_FILL,strokeWidth:2,strokeOpacity:1},background:{fill:import_ag_charts_community61._Theme.DEFAULT_TEXTBOX_FILL,stroke:import_ag_charts_community61._Theme.DEFAULT_TEXTBOX_STROKE,strokeWidth:1}},text:{color:import_ag_charts_community61._Theme.DEFAULT_TEXT_ANNOTATION_COLOR,fontSize:14,fontFamily:import_ag_charts_community61._Theme.DEFAULT_FONT_FAMILY,textAlign:"left",handle:{fill:import_ag_charts_community61._Theme.DEFAULT_ANNOTATION_HANDLE_FILL,strokeWidth:2,strokeOpacity:1}}}}},import_ag_charts_community63=require("ag-charts-community"),import_ag_charts_community62=require("ag-charts-community"),{BaseProperties:BaseProperties10,ObserveChanges:ObserveChanges2,ProxyProperty,Validate:Validate24,NUMBER:NUMBER6,POSITIVE_NUMBER:POSITIVE_NUMBER5,RATIO:RATIO5,createElement:createElement4,calculatePlacement}=import_ag_charts_community62._ModuleSupport,Image=class extends BaseProperties10{constructor(){super(),this.opacity=1,this.loadedSynchronously=!0,this.containerWidth=0,this.containerHeight=0,this.onLoad=void 0,this.onImageLoad=()=>{this.loadedSynchronously||(this.node.visible=!1,this.performLayout(this.containerWidth,this.containerHeight),this.onLoad?.())},this.imageElement=createElement4("img"),this.imageElement.onload=this.onImageLoad,this.node=new import_ag_charts_community62._Scene.Image(this.imageElement)}get complete(){return this.imageElement.width>0&&this.imageElement.height>0}performLayout(t,e){this.containerWidth=t,this.containerHeight=e;const i={x:0,y:0,width:t,height:e},o=calculatePlacement(this.imageElement.width,this.imageElement.height,i,this);return this.node.setProperties(this.complete?{visible:!0,opacity:this.opacity,...o}:{visible:!1}),o}};__decorateClass([Validate24(NUMBER6,{optional:!0})],Image.prototype,"top",2),__decorateClass([Validate24(NUMBER6,{optional:!0})],Image.prototype,"right",2),__decorateClass([Validate24(NUMBER6,{optional:!0})],Image.prototype,"bottom",2),__decorateClass([Validate24(NUMBER6,{optional:!0})],Image.prototype,"left",2),__decorateClass([Validate24(POSITIVE_NUMBER5,{optional:!0})],Image.prototype,"width",2),__decorateClass([Validate24(POSITIVE_NUMBER5,{optional:!0})],Image.prototype,"height",2),__decorateClass([Validate24(RATIO5)],Image.prototype,"opacity",2),__decorateClass([ProxyProperty("imageElement.src"),ObserveChanges2(t=>t.loadedSynchronously=t.complete)],Image.prototype,"url",2);var{ActionOnSet,OBJECT:OBJECT7,Validate:Validate25}=import_ag_charts_community63._ModuleSupport,Background2=class extends import_ag_charts_community63._ModuleSupport.Background{constructor(t){super(t),this.ctx=t,this.image=new Image}onLayoutComplete(t){if(super.onLayoutComplete(t),this.image){const{width:e,height:i}=t.chart;this.image.performLayout(e,i)}}onImageLoad(){this.ctx.updateService.update(import_ag_charts_community63._ModuleSupport.ChartUpdateType.SCENE_RENDER)}};__decorateClass([Validate25(OBJECT7,{optional:!0}),ActionOnSet({newValue(t){this.node.appendChild(t.node),t.onLoad=()=>this.onImageLoad()},oldValue(t){this.node.removeChild(t.node),t.onLoad=void 0}})],Background2.prototype,"image",2);var BackgroundModule={type:"root",optionsKey:"background",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion"],moduleFactory:t=>new Background2(t)},import_ag_charts_community65=require("ag-charts-community"),import_ag_charts_community64=require("ag-charts-community"),menuItems=[{label:"toolbarSeriesTypeOHLC",icon:"ohlc-series",value:"ohlc"},{label:"toolbarSeriesTypeCandles",icon:"candlestick-series",value:"candlestick"},{label:"toolbarSeriesTypeHollowCandles",icon:"hollow-candlestick-series",value:"hollow-candlestick"},{label:"toolbarSeriesTypeLine",icon:"line-series",value:"line"},{label:"toolbarSeriesTypeStepLine",icon:"step-line-series",value:"step-line"},{label:"toolbarSeriesTypeHLC",icon:"hlc-series",value:"hlc"},{label:"toolbarSeriesTypeHighLow",icon:"high-low-series",value:"high-low"}],BUTTON_GROUP="seriesType",BUTTON_VALUE="type",ChartToolbar=class extends import_ag_charts_community64._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!1,this.popover=new Popover(this.ctx,"chart-toolbar"),this.anchor=void 0;const{toolbarManager:e}=t;this.destroyFns.push(e.addListener("button-moved",this.toolbarButtonMoved.bind(this)),e.addListener("button-pressed",this.toolbarButtonPressed.bind(this)))}enableChanged(t){this.ctx.toolbarManager.toggleGroup("chart-toolbar",BUTTON_GROUP,{visible:t})}async processData(){if(!this.enabled)return;const{toolbarManager:t}=this.ctx,e=this.getChartType(),i=menuItems.find(o=>o.value===e)?.icon;i!=null&&t.updateButton(BUTTON_GROUP,BUTTON_VALUE,{icon:i})}setAnchor(t){this.anchor=t;const e={x:this.anchor.x+this.anchor.width+6,y:this.anchor.y};this.popover.setAnchor(e)}toolbarButtonMoved(t){t.group===BUTTON_GROUP&&this.setAnchor(t.rect)}toolbarButtonPressed(t){t.group===BUTTON_GROUP&&(this.setAnchor(t.rect),this.popover.show({items:menuItems,value:this.getChartType(),onPress:e=>this.setChartType(e.value),onClose:()=>this.hidePopover()}),this.ctx.toolbarManager.toggleButton(BUTTON_GROUP,BUTTON_VALUE,{active:!0}))}hidePopover(){this.ctx.toolbarManager.toggleButton(BUTTON_GROUP,BUTTON_VALUE,{active:!1}),this.popover.hide()}setChartType(t){const e={chartType:t};this.ctx.chartService.publicApi?.updateDelta(e)}getChartType(){let t=this.ctx.chartService.publicApi?.getOptions()?.chartType;return(t==null||!menuItems.some(e=>e.value===t))&&(t="candlestick"),t}};__decorateClass([import_ag_charts_community64._ModuleSupport.Validate(import_ag_charts_community64._ModuleSupport.BOOLEAN),import_ag_charts_community64._ModuleSupport.ActionOnSet({changeValue:function(t){this.enableChanged(t)}})],ChartToolbar.prototype,"enabled",2);var ChartToolbarModule={type:"root",optionsKey:"chartToolbar",packageType:"enterprise",chartTypes:["cartesian"],dependencies:["toolbar"],moduleFactory:t=>new ChartToolbar(t),themeTemplate:{chartToolbar:{}}},import_ag_charts_community67=require("ag-charts-community"),import_ag_charts_community66=require("ag-charts-community"),DEFAULT_CONTEXT_MENU_CLASS="ag-chart-context-menu",DEFAULT_CONTEXT_MENU_DARK_CLASS="ag-charts-dark-context-menu",{BOOLEAN:BOOLEAN7,Validate:Validate26,createElement:createElement5,initMenuKeyNav,makeAccessibleClickListener,ContextMenuRegistry}=import_ag_charts_community66._ModuleSupport,{Logger:Logger2}=import_ag_charts_community66._Util,moduleId3="context-menu";function getChildrenOfType(t,e){const{children:i}=t??{};if(!i)return[];const o=[];for(let s=0;s<i.length;s++){const a=i[s];a instanceof e&&o.push(a)}return o}var ContextMenu=class extends import_ag_charts_community66._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!0,this.darkTheme=!1,this.extraActions=[],this.extraNodeActions=[],this.extraLegendItemActions=[],this.x=0,this.y=0,this.menuElementDestroyFns=[],this.interactionManager=t.interactionManager,this.registry=t.contextMenuRegistry;const{All:e}=import_ag_charts_community66._ModuleSupport.InteractionState;if(this.destroyFns.push(t.regionManager.listenAll("click",i=>this.onClick(),e)),this.groups={default:[],extra:[],extraSeries:[],extraNode:[],extraLegendItem:[]},this.element=t.domManager.addChild("canvas-overlay",moduleId3),this.element.classList.add(DEFAULT_CONTEXT_MENU_CLASS),this.element.addEventListener("contextmenu",i=>i.preventDefault()),this.destroyFns.push(()=>this.element.parentNode?.removeChild(this.element)),this.hide(),this.destroyFns.push(t.domManager.addListener("hidden",()=>this.hide())),typeof MutationObserver<"u"){const i=new MutationObserver(()=>{this.menuElement&&this.element.contains(this.menuElement)&&this.reposition()});i.observe(this.element,{childList:!0}),this.mutationObserver=i,this.destroyFns.push(()=>i.disconnect())}this.registry.registerDefaultAction({id:"download",type:"all",label:"contextMenuDownload",action:()=>{const i=t.chartService.title;let o="image";i?.enabled&&i?.text!==void 0&&(o=i.text.replace(/\.+/,"")),this.ctx.chartService.publicApi?.download({fileName:o}).catch(s=>{Logger2.error("Unable to download chart",s)})}}),this.destroyFns.push(this.registry.addListener(i=>this.onContext(i)))}isShown(){return this.menuElement!==void 0}onClick(){this.isShown()&&this.hide()}onContext(t){if(!this.enabled)return;t.preventDefault(),this.showEvent=t.sourceEvent,this.x=t.x,this.y=t.y,this.groups.default=this.registry.filterActions(t.type),this.pickedNode=void 0,this.pickedLegendItem=void 0,this.groups.extra=this.extraActions.map(({label:n,action:r})=>({type:"all",label:n,action:r})),ContextMenuRegistry.check("series",t)&&(this.pickedNode=t.context.pickedNode,this.pickedNode&&(this.groups.extraNode=this.extraNodeActions.map(({label:n,action:r})=>({type:"node",label:n,action:r})))),ContextMenuRegistry.check("legend",t)&&(this.pickedLegendItem=t.context.legendItem,this.pickedLegendItem&&(this.groups.extraLegendItem=this.extraLegendItemActions.map(({label:n,action:r})=>({type:"legend",label:n,action:r}))));const{default:e,extra:i,extraNode:o,extraLegendItem:s}=this.groups;[e,i,o,s].reduce((n,r)=>r.length+n,0)!==0&&(this.lastFocus=this.getLastFocus(t),this.show())}getLastFocus(t){if(t.sourceEvent.target instanceof HTMLElement&&"tabindex"in t.sourceEvent.target.attributes)return t.sourceEvent.target}show(){this.interactionManager.pushState(import_ag_charts_community66._ModuleSupport.InteractionState.ContextMenu),this.element.classList.toggle(DEFAULT_CONTEXT_MENU_DARK_CLASS,this.darkTheme);const t=this.renderMenu();this.menuElement?(this.element.replaceChild(t,this.menuElement),this.menuElementDestroyFns.forEach(i=>i())):this.element.appendChild(t),this.menuElement=t,this.element.style.display="block";const e=getChildrenOfType(t,HTMLButtonElement);this.menuElementDestroyFns=initMenuKeyNav({menu:t,buttons:e,orientation:"vertical",onEscape:()=>this.hide()}),t.focus()}hide(){this.interactionManager.popState(import_ag_charts_community66._ModuleSupport.InteractionState.ContextMenu),this.menuElement&&(this.element.removeChild(this.menuElement),this.menuElement=void 0,this.menuElementDestroyFns.forEach(t=>t()),this.menuElementDestroyFns.length=0),this.element.style.display="none",this.lastFocus?.focus(),this.lastFocus=void 0}renderMenu(){const t=createElement5("div");return t.classList.add(`${DEFAULT_CONTEXT_MENU_CLASS}__menu`),t.classList.toggle(DEFAULT_CONTEXT_MENU_DARK_CLASS,this.darkTheme),t.role="menu",this.appendMenuGroup(t,this.groups.default,!1),this.appendMenuGroup(t,this.groups.extra),this.pickedNode&&this.appendMenuGroup(t,this.groups.extraNode),this.pickedLegendItem&&this.appendMenuGroup(t,this.groups.extraLegendItem),t}appendMenuGroup(t,e,i=!0){e.length!==0&&(i&&t.appendChild(this.createDividerElement()),e.forEach(o=>{const s=this.renderItem(o);s&&t.appendChild(s)}))}renderItem(t){if(t&&typeof t=="object"&&t.constructor===Object)return this.createActionElement(t)}createDividerElement(){const t=createElement5("div");return t.classList.add(`${DEFAULT_CONTEXT_MENU_CLASS}__divider`),t.classList.toggle(DEFAULT_CONTEXT_MENU_DARK_CLASS,this.darkTheme),t.role="separator",t}createActionElement({id:t,label:e,type:i,action:o}){const s=!!(t&&this.registry.isDisabled(t));return this.createButtonElement(i,e,o,s)}createButtonOnClick(t,e){return ContextMenuRegistry.checkCallback("legend",t,e)?()=>{if(this.pickedLegendItem){const{seriesId:i,itemId:o,enabled:s}=this.pickedLegendItem;e({type:"contextmenu",seriesId:i,itemId:o,enabled:s}),this.hide()}}:ContextMenuRegistry.checkCallback("node",t,e)?()=>{const{pickedNode:i,showEvent:o}=this,s=i?.series.createNodeContextMenuActionEvent(o,i);s?e(s):import_ag_charts_community66._Util.Logger.error("series node not found"),this.hide()}:()=>{e({type:"contextMenuEvent",event:this.showEvent}),this.hide()}}createButtonElement(t,e,i,o){const s=createElement5("button");return s.classList.add(`${DEFAULT_CONTEXT_MENU_CLASS}__item`),s.classList.toggle(DEFAULT_CONTEXT_MENU_DARK_CLASS,this.darkTheme),s.ariaDisabled=o.toString(),s.textContent=this.ctx.localeManager.t(e),s.role="menuitem",s.onclick=makeAccessibleClickListener(s,this.createButtonOnClick(t,i)),s}reposition(){let{x:t,y:e}=this;this.element.style.top="unset",this.element.style.bottom="unset";const i=this.ctx.domManager.getBoundingClientRect(),{offsetWidth:o,offsetHeight:s}=this.element;t=import_ag_charts_community66._ModuleSupport.clamp(0,t,i.width-o),e=import_ag_charts_community66._ModuleSupport.clamp(0,e,i.height-s),this.element.style.left=`${t}px`,this.element.style.top=`calc(${e}px - 0.5em)`}destroy(){super.destroy(),this.mutationObserver?.disconnect(),this.ctx.domManager.removeStyles(moduleId3),this.ctx.domManager.removeChild("canvas-overlay",moduleId3)}};__decorateClass([Validate26(BOOLEAN7)],ContextMenu.prototype,"enabled",2),__decorateClass([Validate26(BOOLEAN7)],ContextMenu.prototype,"darkTheme",2);var ContextMenuModule={type:"root",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion"],optionsKey:"contextMenu",moduleFactory:t=>new ContextMenu(t),themeTemplate:{contextMenu:{enabled:!0,darkTheme:import_ag_charts_community67._Theme.IS_DARK_THEME}}},import_ag_charts_community70=require("ag-charts-community"),import_ag_charts_community69=require("ag-charts-community"),import_ag_charts_community68=require("ag-charts-community"),{ActionOnSet:ActionOnSet2,BaseProperties:BaseProperties11,BOOLEAN:BOOLEAN8,FUNCTION:FUNCTION2,NUMBER:NUMBER7,STRING:STRING13,Validate:Validate27}=import_ag_charts_community68._ModuleSupport,{setAttribute}=import_ag_charts_community68._Util,DEFAULT_LABEL_CLASS="ag-crosshair-label",CrosshairLabelProperties=class extends import_ag_charts_community68._Scene.ChangeDetectableProperties{constructor(){super(...arguments),this.enabled=!0,this.xOffset=0,this.yOffset=0,this.format=void 0,this.renderer=void 0}};__decorateClass([Validate27(BOOLEAN8)],CrosshairLabelProperties.prototype,"enabled",2),__decorateClass([Validate27(STRING13,{optional:!0})],CrosshairLabelProperties.prototype,"className",2),__decorateClass([Validate27(NUMBER7)],CrosshairLabelProperties.prototype,"xOffset",2),__decorateClass([Validate27(NUMBER7)],CrosshairLabelProperties.prototype,"yOffset",2),__decorateClass([Validate27(STRING13,{optional:!0})],CrosshairLabelProperties.prototype,"format",2),__decorateClass([Validate27(FUNCTION2,{optional:!0})],CrosshairLabelProperties.prototype,"renderer",2);var CrosshairLabel=class extends BaseProperties11{constructor(t){super(),this.domManager=t,this.id=import_ag_charts_community68._Util.createId(this),this.enabled=!0,this.xOffset=0,this.yOffset=0,this.renderer=void 0,this.element=t.addChild("canvas-overlay",`crosshair-label-${this.id}`),this.element.classList.add(DEFAULT_LABEL_CLASS),setAttribute(this.element,"aria-hidden",!0)}show(t){const{element:e}=this,i=t.x+this.xOffset,o=t.y+this.yOffset;e.style.top=`${Math.round(o)}px`,e.style.left=`${Math.round(i)}px`,this.toggle(!0)}setLabelHtml(t){t!==void 0&&(this.element.innerHTML=t)}getBBox(){const{element:t}=this;return new import_ag_charts_community68._Scene.BBox(t.clientLeft,t.clientTop,t.clientWidth,t.clientHeight)}toggle(t){this.element.classList.toggle("ag-crosshair-label-hidden",!t)}destroy(){this.domManager.removeChild("canvas-overlay",`crosshair-label-${this.id}`)}toLabelHtml(t,e){if(typeof t=="string")return t;e=e??{};const{text:i=e.text??"",color:o=e.color,backgroundColor:s=e.backgroundColor,opacity:a=e.opacity??1}=t;return`<div class="ag-crosshair-label-content" style="${`opacity: ${a}; background-color: ${s?.toLowerCase()}; color: ${o}`}">
                    <span>${i}</span>
                </div>`}};__decorateClass([Validate27(BOOLEAN8)],CrosshairLabel.prototype,"enabled",2),__decorateClass([Validate27(STRING13,{optional:!0}),ActionOnSet2({changeValue(t,e){t!==e&&(e&&this.element.classList.remove(e),t&&this.element.classList.add(t))}})],CrosshairLabel.prototype,"className",2),__decorateClass([Validate27(NUMBER7)],CrosshairLabel.prototype,"xOffset",2),__decorateClass([Validate27(NUMBER7)],CrosshairLabel.prototype,"yOffset",2),__decorateClass([Validate27(STRING13,{optional:!0})],CrosshairLabel.prototype,"format",2),__decorateClass([Validate27(FUNCTION2,{optional:!0})],CrosshairLabel.prototype,"renderer",2);var{Group:Group3,Line:Line2,BBox:BBox2}=import_ag_charts_community69._Scene,{createId:createId2}=import_ag_charts_community69._Util,{POSITIVE_NUMBER:POSITIVE_NUMBER6,RATIO:RATIO6,BOOLEAN:BOOLEAN9,COLOR_STRING:COLOR_STRING3,LINE_DASH:LINE_DASH3,OBJECT:OBJECT8,InteractionState:InteractionState3,Validate:Validate28,Layers:Layers5}=import_ag_charts_community69._ModuleSupport,Crosshair=class extends import_ag_charts_community69._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.id=createId2(this),this.enabled=!1,this.stroke="rgb(195, 195, 195)",this.lineDash=[6,3],this.lineDashOffset=0,this.strokeWidth=1,this.strokeOpacity=1,this.snap=!0,this.label=new CrosshairLabelProperties,this.seriesRect=new BBox2(0,0,0,0),this.hoverRect=new BBox2(0,0,0,0),this.bounds=new BBox2(0,0,0,0),this.visible=!1,this.crosshairGroup=new Group3({name:"crosshairs",layer:!0,zIndex:Layers5.SERIES_CROSSHAIR_ZINDEX}),this.lineGroup=this.crosshairGroup.appendChild(new Group3({name:`${this.id}-crosshair-lines`,zIndex:Layers5.SERIES_CROSSHAIR_ZINDEX})),this.lineGroupSelection=import_ag_charts_community69._Scene.Selection.select(this.lineGroup,Line2,!1),this.activeHighlight=void 0,this.axisCtx=t.parent,this.crosshairGroup.visible=!1,this.labels={};const e=t.regionManager.getRegion("series"),i=InteractionState3.Default|InteractionState3.Annotations;this.destroyFns.push(t.scene.attachNode(this.crosshairGroup),e.addListener("hover",o=>this.onMouseMove(o),i),e.addListener("drag",o=>this.onMouseMove(o),i),e.addListener("leave",()=>this.onMouseOut(),i),t.highlightManager.addListener("highlight-change",o=>this.onHighlightChange(o)),t.layoutService.addListener("layout-complete",o=>this.layout(o)),()=>Object.entries(this.labels).forEach(([o,s])=>s.destroy()))}layout({series:{rect:t,paddedRect:e,visible:i},axes:o}){if(!(i&&o&&this.enabled)){this.visible=!1;return}this.visible=!0,this.seriesRect=t,this.hoverRect=e;const{position:s="left",axisId:a}=this.axisCtx,n=o.find(d=>d.id===a);if(!n)return;this.axisLayout=n;const r=n.gridPadding+n.seriesAreaPadding;this.bounds=buildBounds(t,s,r);const{crosshairGroup:l,bounds:c}=this;l.translationX=Math.round(c.x),l.translationY=Math.round(c.y);const h=["pointer",...this.axisCtx.seriesKeyProperties()];this.updateSelections(h),this.updateLines(),this.updateLabels(h)}updateSelections(t){this.lineGroupSelection.update(t,e=>e.append(new Line2),e=>e)}updateLabels(t){const{labels:e,ctx:i}=this;t.forEach(o=>{e[o]??(e[o]=new CrosshairLabel(i.domManager)),this.updateLabel(e[o])}),this.labelFormatter=this.axisCtx.scaleValueFormatter(this.label.format)}updateLabel(t){const{enabled:e,className:i,xOffset:o,yOffset:s,format:a,renderer:n}=this.label;t.enabled=e,t.className=i,t.xOffset=o,t.yOffset=s,t.format=a,t.renderer=n}updateLines(){const{lineGroupSelection:t,bounds:e,stroke:i,strokeWidth:o,strokeOpacity:s,lineDash:a,lineDashOffset:n,axisLayout:r}=this;if(!r)return;const l=this.isVertical();t.each(c=>{c.stroke=i,c.strokeWidth=o,c.strokeOpacity=s,c.lineDash=a,c.lineDashOffset=n,c.y1=0,c.y2=l?e.height:0,c.x1=0,c.x2=l?0:e.width})}isVertical(){return this.axisCtx.direction==="x"}formatValue(t){const{labelFormatter:e,axisLayout:i,ctx:{callbackCache:o}}=this;if(e){const n=o.call(e,t);if(n!==void 0)return n}const s=t%1===0,a=(i?.label.fractionDigits??0)+(s?0:1);return typeof t=="number"?t.toFixed(a):String(t)}onMouseMove(t){if(!this.enabled||this.snap)return;const{crosshairGroup:e,hoverRect:i}=this,{offsetX:o,offsetY:s}=t;if(this.visible&&i.containsPoint(o,s)){e.visible=!0;const a=this.getData(t);this.updatePositions(a)}else this.hideCrosshairs();this.ctx.updateService.update(import_ag_charts_community69._ModuleSupport.ChartUpdateType.SCENE_RENDER)}onMouseOut(){this.hideCrosshairs()}onHighlightChange(t){if(!this.enabled)return;const{crosshairGroup:e,axisCtx:i}=this,{datum:o,series:s}=t.currentHighlight??{},a=o&&(s?.axes.x?.id===i.axisId||s?.axes.y?.id===i.axisId);if(this.activeHighlight=a?t.currentHighlight:void 0,this.snap){if(this.hideCrosshairs(),!this.visible||!this.activeHighlight)return;const n=this.getActiveHighlightData(this.activeHighlight);this.updatePositions(n),e.visible=!0}}isInRange(t){return this.axisCtx.inRange(t)}updatePositions(t){const{seriesRect:e,lineGroupSelection:i}=this;i.each((o,s)=>{const a=t[s];if(!a){o.visible=!1;return}o.visible=!0;const{value:n,position:r}=a;let l=0,c=0;this.isVertical()?(l=r,o.translationX=Math.round(l)):(c=r,o.translationY=Math.round(c)),this.label.enabled?this.showLabel(l+e.x,c+e.y,n,s):this.hideLabel(s)})}getData(t){const{seriesRect:e,axisCtx:i}=this,o="pointer",{datum:s,xKey:a="",yKey:n=""}=this.activeHighlight??{},{offsetX:r,offsetY:l}=t,c=r-e.x,h=l-e.y,d=this.isVertical(),u=d?c:h;return{[o]:{position:u,value:i.continuous?i.scaleInvert(u):s?.[d?a:n]??""}}}getActiveHighlightData(t){const{axisCtx:e}=this,{datum:i,series:o,xKey:s="",aggregatedValue:a,cumulativeValue:n,midPoint:r}=t,l=o.getKeyProperties(e.direction),c=e.scaleBandwidth()/2,h=o.axes[e.direction]?.id===e.axisId,d=l.indexOf("yKey")>-1&&h,u=l.indexOf("xKey")>-1&&h,g=a??n;if(d&&g!==void 0){const p=e.scaleConvert(g)+c;return this.isInRange(p)?{yKey:{value:g,position:p}}:{}}if(u){const p=(this.isVertical()?r?.x:r?.y)??0,m=e.continuous?e.scaleInvert(p):i[s];return this.isInRange(p)?{xKey:{value:m,position:p}}:{}}const y={};return l.forEach(p=>{const m=o.properties[p],f=i[m],v=e.scaleConvert(f)+c;this.isInRange(v)&&(y[p]={value:f,position:v})}),y}getLabelHtml(t,e){const{label:{renderer:i},axisLayout:{label:{fractionDigits:o=0}={}}={}}=this,s={text:this.formatValue(t)};if(i){const a={value:t,fractionDigits:o};return e.toLabelHtml(i(a),s)}return e.toLabelHtml(s)}showLabel(t,e,i,o){const{axisCtx:{position:s,direction:a},bounds:n,axisLayout:r}=this;if(!r)return;const{label:{padding:l},tickSize:c}=r,h=l+c,d=this.labels[o],u=this.getLabelHtml(i,d);d.setLabelHtml(u);const g=d.getBBox(),y=calculateAxisLabelPosition({x:t,y:e,labelBBox:g,bounds:n,axisPosition:s,axisDirection:a,padding:h});d.show(y)}hideCrosshairs(){this.crosshairGroup.visible=!1;for(const t in this.labels)this.hideLabel(t)}hideLabel(t){this.labels[t].toggle(!1)}};__decorateClass([Validate28(BOOLEAN9)],Crosshair.prototype,"enabled",2),__decorateClass([Validate28(COLOR_STRING3,{optional:!0})],Crosshair.prototype,"stroke",2),__decorateClass([Validate28(LINE_DASH3,{optional:!0})],Crosshair.prototype,"lineDash",2),__decorateClass([Validate28(POSITIVE_NUMBER6)],Crosshair.prototype,"lineDashOffset",2),__decorateClass([Validate28(POSITIVE_NUMBER6)],Crosshair.prototype,"strokeWidth",2),__decorateClass([Validate28(RATIO6)],Crosshair.prototype,"strokeOpacity",2),__decorateClass([Validate28(BOOLEAN9)],Crosshair.prototype,"snap",2),__decorateClass([Validate28(OBJECT8)],Crosshair.prototype,"label",2);var CrosshairModule={type:"axis-option",optionsKey:"crosshair",packageType:"enterprise",chartTypes:["cartesian"],axisTypes:["category","ordinal-time","number","log","time"],moduleFactory:t=>new Crosshair(t),themeTemplate:{crosshair:{snap:!0,stroke:import_ag_charts_community70._Theme.DEFAULT_MUTED_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,lineDash:[5,6],lineDashOffset:0,label:{enabled:!0}}}},import_ag_charts_community71=require("ag-charts-community"),{BOOLEAN:BOOLEAN10,FUNCTION:FUNCTION3,ActionOnSet:ActionOnSet3,Validate:Validate29}=import_ag_charts_community71._ModuleSupport,DataSource=class extends import_ag_charts_community71._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.enabled=!1,this.getData=()=>Promise.resolve(),this.dataService=t.dataService}updateCallback(t,e){this.dataService&&(t&&e!=null?this.dataService.updateCallback(e):this.dataService.clearCallback())}};__decorateClass([ActionOnSet3({newValue(t){this.updateCallback(t,this.getData)}}),Validate29(BOOLEAN10)],DataSource.prototype,"enabled",2),__decorateClass([ActionOnSet3({newValue(t){this.updateCallback(this.enabled,t)}}),Validate29(FUNCTION3)],DataSource.prototype,"getData",2),__decorateClass([ActionOnSet3({newValue(t){this.dataService.requestThrottle=t}})],DataSource.prototype,"requestThrottle",2),__decorateClass([ActionOnSet3({newValue(t){this.dataService.dispatchThrottle=t}})],DataSource.prototype,"updateThrottle",2),__decorateClass([ActionOnSet3({newValue(t){this.dataService.dispatchOnlyLatest=!t}})],DataSource.prototype,"updateDuringInteraction",2);var DataSourceModule={type:"root",optionsKey:"dataSource",packageType:"enterprise",chartTypes:["cartesian","hierarchy","polar","topology","flow-proportion"],moduleFactory:t=>new DataSource(t),themeTemplate:{dataSource:{enabled:!1}}},import_ag_charts_community76=require("ag-charts-community"),import_ag_charts_community74=require("ag-charts-community"),import_ag_charts_community72=require("ag-charts-community"),{nearestSquaredInContainer,partialAssign,mergeDefaults}=import_ag_charts_community72._ModuleSupport,{BBox:BBox3}=import_ag_charts_community72._Scene,HierarchicalBBox=class{constructor(t){this.components=t,this.union=BBox3.merge(t)}containsPoint(t,e){if(!this.union.containsPoint(t,e))return!1;for(const i of this.components)if(i.containsPoint(t,e))return!0;return!1}},ErrorBarNode=class extends import_ag_charts_community72._Scene.Group{constructor(){super(),this.capLength=NaN,this._datum=void 0,this.whiskerPath=new import_ag_charts_community72._Scene.Path,this.capsPath=new import_ag_charts_community72._Scene.Path,this.bboxes=new HierarchicalBBox([]),this.append([this.whiskerPath,this.capsPath])}get datum(){return this._datum}set datum(t){this._datum=t}calculateCapLength(t,e){const{lengthRatio:i=1,length:o}=t,{lengthRatioMultiplier:s,lengthMax:a}=e,n=o??i*s;return Math.min(n,a)}getItemStylerParams(t,e,i){const{datum:o}=this;if(o==null||t.itemStyler==null)return;const{xLowerKey:s,xUpperKey:a,yLowerKey:n,yUpperKey:r}=t;return{...e,datum:o.datum,seriesId:o.datum.seriesId,xKey:o.xKey,yKey:o.yKey,xLowerKey:s,xUpperKey:a,yLowerKey:n,yUpperKey:r,highlighted:i}}formatStyles(t,e,i){let{cap:o,...s}=t;const a=this.getItemStylerParams(e,t,i);if(a!=null&&e.itemStyler!=null){const n=e.itemStyler(a);s=mergeDefaults(n,s),o=mergeDefaults(n?.cap,n,o)}return{whiskerStyle:s,capsStyle:o}}applyStyling(t,e){partialAssign(["visible","stroke","strokeWidth","strokeOpacity","lineDash","lineDashOffset"],t,e)}update(t,e,i){if(this.datum===void 0)return;const{whiskerStyle:o,capsStyle:s}=this.formatStyles(t,e,i),{xBar:a,yBar:n,capDefaults:r}=this.datum,l=this.whiskerPath;this.applyStyling(l,o),l.path.clear(),n!==void 0&&(l.path.moveTo(n.lowerPoint.x,n.lowerPoint.y),l.path.lineTo(n.upperPoint.x,n.upperPoint.y)),a!==void 0&&(l.path.moveTo(a.lowerPoint.x,a.lowerPoint.y),l.path.lineTo(a.upperPoint.x,a.upperPoint.y)),l.path.closePath(),l.markDirtyTransform(),this.capLength=this.calculateCapLength(s??{},r);const c=this.capLength/2,h=this.capsPath;this.applyStyling(h,s),h.path.clear(),n!==void 0&&(h.path.moveTo(n.lowerPoint.x-c,n.lowerPoint.y),h.path.lineTo(n.lowerPoint.x+c,n.lowerPoint.y),h.path.moveTo(n.upperPoint.x-c,n.upperPoint.y),h.path.lineTo(n.upperPoint.x+c,n.upperPoint.y)),a!==void 0&&(h.path.moveTo(a.lowerPoint.x,a.lowerPoint.y-c),h.path.lineTo(a.lowerPoint.x,a.lowerPoint.y+c),h.path.moveTo(a.upperPoint.x,a.upperPoint.y-c),h.path.lineTo(a.upperPoint.x,a.upperPoint.y+c)),h.path.closePath(),h.markDirtyTransform()}updateBBoxes(){const{capLength:t,whiskerPath:e,capsPath:i}=this,{yBar:o,xBar:s}=this.datum??{},a=t/2,n=[];if(o!==void 0){const r=o.lowerPoint.y-o.upperPoint.y;n.push(new BBox3(o.lowerPoint.x,o.upperPoint.y,e.strokeWidth,r),new BBox3(o.lowerPoint.x-a,o.lowerPoint.y,t,i.strokeWidth),new BBox3(o.upperPoint.x-a,o.upperPoint.y,t,i.strokeWidth))}if(s!==void 0){const r=s.upperPoint.x-s.lowerPoint.x;n.push(new BBox3(s.lowerPoint.x,s.upperPoint.y,r,e.strokeWidth),new BBox3(s.lowerPoint.x,s.lowerPoint.y-a,i.strokeWidth,t),new BBox3(s.upperPoint.x,s.upperPoint.y-a,i.strokeWidth,t))}this.bboxes.components=n,this.bboxes.union=BBox3.merge(n)}containsPoint(t,e){return this.bboxes.containsPoint(t,e)}pickNode(t,e){return this.containsPoint(t,e)?this:void 0}nearestSquared(t,e,i){const{bboxes:o}=this;if(o.union.distanceSquared(t,e)>i)return{nearest:void 0,distanceSquared:1/0};const{distanceSquared:s}=BBox3.nearestBox(t,e,o.components);return{nearest:this,distanceSquared:s}}},ErrorBarGroup=class extends import_ag_charts_community72._Scene.Group{get children(){return super.children}nearestSquared(t,e){const{nearest:i,distanceSquared:o}=nearestSquaredInContainer(t,e,this);if(i!==void 0&&!isNaN(o))return{datum:i.datum,distanceSquared:o}}},import_ag_charts_community73=require("ag-charts-community"),{BaseProperties:BaseProperties12,Validate:Validate30,BOOLEAN:BOOLEAN11,COLOR_STRING:COLOR_STRING4,FUNCTION:FUNCTION4,LINE_DASH:LINE_DASH4,NUMBER:NUMBER8,OBJECT:OBJECT9,POSITIVE_NUMBER:POSITIVE_NUMBER7,RATIO:RATIO7,STRING:STRING14}=import_ag_charts_community73._ModuleSupport,ErrorBarCap=class extends BaseProperties12{};__decorateClass([Validate30(BOOLEAN11,{optional:!0})],ErrorBarCap.prototype,"visible",2),__decorateClass([Validate30(COLOR_STRING4,{optional:!0})],ErrorBarCap.prototype,"stroke",2),__decorateClass([Validate30(POSITIVE_NUMBER7,{optional:!0})],ErrorBarCap.prototype,"strokeWidth",2),__decorateClass([Validate30(RATIO7,{optional:!0})],ErrorBarCap.prototype,"strokeOpacity",2),__decorateClass([Validate30(LINE_DASH4,{optional:!0})],ErrorBarCap.prototype,"lineDash",2),__decorateClass([Validate30(POSITIVE_NUMBER7,{optional:!0})],ErrorBarCap.prototype,"lineDashOffset",2),__decorateClass([Validate30(NUMBER8,{optional:!0})],ErrorBarCap.prototype,"length",2),__decorateClass([Validate30(RATIO7,{optional:!0})],ErrorBarCap.prototype,"lengthRatio",2);var ErrorBarProperties=class extends BaseProperties12{constructor(){super(...arguments),this.visible=!0,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.cap=new ErrorBarCap}};__decorateClass([Validate30(STRING14,{optional:!0})],ErrorBarProperties.prototype,"yLowerKey",2),__decorateClass([Validate30(STRING14,{optional:!0})],ErrorBarProperties.prototype,"yLowerName",2),__decorateClass([Validate30(STRING14,{optional:!0})],ErrorBarProperties.prototype,"yUpperKey",2),__decorateClass([Validate30(STRING14,{optional:!0})],ErrorBarProperties.prototype,"yUpperName",2),__decorateClass([Validate30(STRING14,{optional:!0})],ErrorBarProperties.prototype,"xLowerKey",2),__decorateClass([Validate30(STRING14,{optional:!0})],ErrorBarProperties.prototype,"xLowerName",2),__decorateClass([Validate30(STRING14,{optional:!0})],ErrorBarProperties.prototype,"xUpperKey",2),__decorateClass([Validate30(STRING14,{optional:!0})],ErrorBarProperties.prototype,"xUpperName",2),__decorateClass([Validate30(BOOLEAN11,{optional:!0})],ErrorBarProperties.prototype,"visible",2),__decorateClass([Validate30(COLOR_STRING4,{optional:!0})],ErrorBarProperties.prototype,"stroke",2),__decorateClass([Validate30(POSITIVE_NUMBER7,{optional:!0})],ErrorBarProperties.prototype,"strokeWidth",2),__decorateClass([Validate30(RATIO7,{optional:!0})],ErrorBarProperties.prototype,"strokeOpacity",2),__decorateClass([Validate30(LINE_DASH4,{optional:!0})],ErrorBarProperties.prototype,"lineDash",2),__decorateClass([Validate30(POSITIVE_NUMBER7,{optional:!0})],ErrorBarProperties.prototype,"lineDashOffset",2),__decorateClass([Validate30(FUNCTION4,{optional:!0})],ErrorBarProperties.prototype,"itemStyler",2),__decorateClass([Validate30(OBJECT9)],ErrorBarProperties.prototype,"cap",2);var{fixNumericExtent,groupAccumulativeValueProperty,isDefined,mergeDefaults:mergeDefaults2,valueProperty,ChartAxisDirection:ChartAxisDirection11}=import_ag_charts_community74._ModuleSupport;function toErrorBoundCartesianSeries(t){for(const e of import_ag_charts_community74.AgErrorBarSupportedSeriesTypes)if(e===t.series.type)return t.series;throw new Error(`AG Charts - unsupported series type '${t.series.type}', error bars supported series types: ${import_ag_charts_community74.AgErrorBarSupportedSeriesTypes.join(", ")}`)}var ErrorBars=class rt extends import_ag_charts_community74._ModuleSupport.BaseModuleInstance{constructor(e){super(),this.properties=new ErrorBarProperties;const i=toErrorBoundCartesianSeries(e),{annotationGroup:o,annotationSelections:s}=i;this.cartesianSeries=i,this.groupNode=new ErrorBarGroup({name:`${o.id}-errorBars`,zIndex:import_ag_charts_community74._ModuleSupport.Layers.SERIES_LAYER_ZINDEX,zIndexSubOrder:i.getGroupZIndexSubOrder("annotation")}),o.appendChild(this.groupNode),this.selection=import_ag_charts_community74._Scene.Selection.select(this.groupNode,()=>this.errorBarFactory()),s.add(this.selection),this.destroyFns.push(i.addListener("data-processed",a=>this.onDataProcessed(a)),i.addListener("data-update",a=>this.onDataUpdate(a)),i.addListener("visibility-changed",a=>this.onToggleSeriesItem(a)),e.highlightManager.addListener("highlight-change",a=>this.onHighlightChange(a)),()=>o.removeChild(this.groupNode),()=>s.delete(this.selection))}hasErrorBars(){const{xLowerKey:e,xUpperKey:i,yLowerKey:o,yUpperKey:s}=this.properties;return isDefined(e)&&isDefined(i)||isDefined(o)&&isDefined(s)}isStacked(){const e=this.cartesianSeries.seriesGrouping?.stackCount;return e==null?!1:e>0}getUnstackPropertyDefinition(e){const i=[],{xLowerKey:o,xUpperKey:s,yLowerKey:a,yUpperKey:n,xErrorsID:r,yErrorsID:l}=this.getMaybeFlippedKeys(),{xScaleType:c,yScaleType:h}=e;return a!=null&&n!=null&&i.push(valueProperty(a,h,{id:`${l}-lower`}),valueProperty(n,h,{id:`${l}-upper`})),o!=null&&s!=null&&i.push(valueProperty(o,c,{id:`${r}-lower`}),valueProperty(s,c,{id:`${r}-upper`})),i}getStackPropertyDefinition(e){const i=[],{cartesianSeries:o}=this,{xLowerKey:s,xUpperKey:a,yLowerKey:n,yUpperKey:r,xErrorsID:l,yErrorsID:c}=this.getMaybeFlippedKeys(),{xScaleType:h,yScaleType:d}=e,u=o.seriesGrouping?.groupIndex??o.id,g={invalidValue:null,missingValue:0,separateNegative:!0,...o.visible?{}:{forceValue:0}},y=(m,f,v,S)=>groupAccumulativeValueProperty(m,"normal","current",{id:`${f}-${v}`,groupId:`errorGroup-${u}-${v}`,...g},S),p=(m,f,v,S)=>{i.push(...y(m,v,"lower",S),...y(f,v,"upper",S))};return n!=null&&r!=null&&p(n,r,c,d),s!=null&&a!=null&&p(s,a,l,h),i}getPropertyDefinitions(e){return this.isStacked()?this.getStackPropertyDefinition(e):this.getUnstackPropertyDefinition(e)}onDataProcessed(e){this.dataModel=e.dataModel,this.processedData=e.processedData}getDomain(e){const{xLowerKey:i,xUpperKey:o,xErrorsID:s,yLowerKey:a,yUpperKey:n,yErrorsID:r}=this.getMaybeFlippedKeys();if(e===ChartAxisDirection11.X?isDefined(i)&&isDefined(o):isDefined(a)&&isDefined(n)){const{dataModel:c,processedData:h,cartesianSeries:d}=this;if(c!=null&&h!=null){const u=d.axes[e],g={x:s,y:r}[e],y=c.getDomain(d,`${g}-lower`,"value",h),p=c.getDomain(d,`${g}-upper`,"value",h),m=[Math.min(...y,...p),Math.max(...y,...p)];return fixNumericExtent(m,u)}}return[]}onDataUpdate(e){this.dataModel=e.dataModel,this.processedData=e.processedData,isDefined(e.dataModel)&&isDefined(e.processedData)&&(this.createNodeData(),this.update())}getNodeData(){return this.cartesianSeries.contextNodeData?.nodeData}createNodeData(){const e=this.getNodeData(),i=this.cartesianSeries.axes[ChartAxisDirection11.X]?.scale,o=this.cartesianSeries.axes[ChartAxisDirection11.Y]?.scale;if(!(!this.hasErrorBars()||!i||!o||!e))for(let s=0;s<e.length;s++){const{midPoint:a,xLower:n,xUpper:r,yLower:l,yUpper:c}=this.getDatum(e,s);if(a!=null){let h,d;isDefined(n)&&isDefined(r)&&(h={lowerPoint:{x:this.convert(i,n),y:a.y},upperPoint:{x:this.convert(i,r),y:a.y}}),isDefined(l)&&isDefined(c)&&(d={lowerPoint:{x:a.x,y:this.convert(o,l)},upperPoint:{x:a.x,y:this.convert(o,c)}}),e[s].xBar=h,e[s].yBar=d}}}getMaybeFlippedKeys(){let{xLowerKey:e,xUpperKey:i,yLowerKey:o,yUpperKey:s}=this.properties,[a,n]=["xValue-errors","yValue-errors"];return this.cartesianSeries.shouldFlipXY()&&([e,o]=[o,e],[i,s]=[s,i],[a,n]=[n,a]),{xLowerKey:e,xUpperKey:i,xErrorsID:a,yLowerKey:o,yUpperKey:s,yErrorsID:n}}static getDatumKey(e,i,o){if(i==null)return;const s=e.datum[i];if(s!=null){if(typeof s!="number"){import_ag_charts_community74._Util.Logger.warnOnce(`Found [${i}] error value of type ${typeof s}. Expected number type`);return}return s+o}}getDatum(e,i){const{xLowerKey:o,xUpperKey:s,yLowerKey:a,yUpperKey:n}=this.getMaybeFlippedKeys(),r=e[i],l=r.cumulativeValue==null||!this.isStacked()?0:r.cumulativeValue-r.yValue,[c,h]=this.cartesianSeries.shouldFlipXY()?[l,0]:[0,l];return{midPoint:r.midPoint,xLower:rt.getDatumKey(r,o,c),xUpper:rt.getDatumKey(r,s,c),yLower:rt.getDatumKey(r,a,h),yUpper:rt.getDatumKey(r,n,h)}}convert(e,i){const o=(e.bandwidth??0)/2;return e.convert(i)+o}update(){const e=this.getNodeData();e!=null&&(this.selection.update(e),this.selection.each((i,o,s)=>this.updateNode(i,o,s)))}updateNode(e,i,o){e.datum=i,e.update(this.getDefaultStyle(),this.properties,!1),e.updateBBoxes()}pickNodeExact(e){const{x:i,y:o}=this.groupNode.transformPoint(e.x,e.y),s=this.groupNode.pickNode(i,o);if(s!=null)return{datum:s.datum,distanceSquared:0}}pickNodeNearest(e){return this.groupNode.nearestSquared(e.x,e.y)}pickNodeMainAxisFirst(e){return this.groupNode.nearestSquared(e.x,e.y)}getTooltipParams(){const{xLowerKey:e,xUpperKey:i,yLowerKey:o,yUpperKey:s,xLowerName:a=e,xUpperName:n=i,yLowerName:r=o,yUpperName:l=s}=this.properties;return{xLowerKey:e,xLowerName:a,xUpperKey:i,xUpperName:n,yLowerKey:o,yLowerName:r,yUpperKey:s,yUpperName:l}}onToggleSeriesItem(e){this.groupNode.visible=e.enabled}makeStyle(e){return{visible:e.visible,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,stroke:e.stroke,strokeWidth:e.strokeWidth,strokeOpacity:e.strokeOpacity,cap:mergeDefaults2(this.properties.cap,e)}}getDefaultStyle(){return this.makeStyle(this.getWhiskerProperties())}getHighlightStyle(){return this.makeStyle(this.getWhiskerProperties())}restyleHighlightChange(e,i,o){const s=this.getNodeData();if(s!=null){for(let a=0;a<s.length;a++)if(e===s[a]){this.selection.at(a)?.update(i,this.properties,o);break}}}onHighlightChange(e){const{previousHighlight:i,currentHighlight:o}=e;o?.series===this.cartesianSeries&&this.restyleHighlightChange(o,this.getHighlightStyle(),!0),i?.series===this.cartesianSeries&&this.restyleHighlightChange(i,this.getDefaultStyle(),!1),this.groupNode.opacity=this.cartesianSeries.getOpacity()}errorBarFactory(){return new ErrorBarNode}getWhiskerProperties(){const{stroke:e,strokeWidth:i,visible:o,strokeOpacity:s,lineDash:a,lineDashOffset:n}=this.properties;return{stroke:e,strokeWidth:i,visible:o,strokeOpacity:s,lineDash:a,lineDashOffset:n}}},import_ag_charts_community75=require("ag-charts-community"),ERROR_BARS_THEME={series:{errorBar:{visible:!0,stroke:import_ag_charts_community75._Theme.DEFAULT_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,cap:{length:void 0,lengthRatio:void 0}}}},ErrorBarsModule={type:"series-option",identifier:"error-bars",optionsKey:"errorBar",packageType:"enterprise",chartTypes:["cartesian"],seriesTypes:import_ag_charts_community76.AgErrorBarSupportedSeriesTypes,moduleFactory:t=>new ErrorBars(t),themeTemplate:ERROR_BARS_THEME},import_ag_charts_community77=require("ag-charts-community"),{Layers:Layers6,ActionOnSet:ActionOnSet4,Validate:Validate31,ProxyPropertyOnWrite:ProxyPropertyOnWrite2,OBJECT:OBJECT10,RATIO:RATIO8,COLOR_STRING:COLOR_STRING5}=import_ag_charts_community77._ModuleSupport,Foreground=class extends import_ag_charts_community77._ModuleSupport.Background{constructor(t){super(t,Layers6.FOREGROUND_ZINDEX,!0),this.ctx=t,this.image=new Image,this.fill="transparent",this.fillOpacity=void 0}onLayoutComplete(t){super.onLayoutComplete(t);const{width:e,height:i}=t.chart;let o={x:0,y:0,width:e,height:i};this.image&&(o=this.image.performLayout(e,i)),this.text&&this.updateTextNode(o)}onImageLoad(){this.ctx.updateService.update(import_ag_charts_community77._ModuleSupport.ChartUpdateType.SCENE_RENDER)}updateTextNode(t){const{textNode:e}=this;e.fontWeight="bold",e.fontFamily="Impact, sans-serif",e.fontSize=19,e.opacity=.7,e.fill="#9b9b9b",e.textBaseline="top";const i=this.textNode.getBBox(),o=10;e.x=t.x+t.width/2-i.width/2,e.y=t.y+t.height+o}};__decorateClass([Validate31(OBJECT10,{optional:!0}),ActionOnSet4({newValue(t){this.node.appendChild(t.node),t.onLoad=()=>this.onImageLoad()},oldValue(t){this.node.removeChild(t.node),t.onLoad=void 0}})],Foreground.prototype,"image",2),__decorateClass([Validate31(COLOR_STRING5,{optional:!0}),ProxyPropertyOnWrite2("rectNode","fill")],Foreground.prototype,"fill",2),__decorateClass([Validate31(RATIO8,{optional:!0}),ProxyPropertyOnWrite2("rectNode","fillOpacity")],Foreground.prototype,"fillOpacity",2);var ForegroundModule={type:"root",optionsKey:"foreground",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion"],moduleFactory:t=>new Foreground(t)},import_ag_charts_community80=require("ag-charts-community"),import_ag_charts_community79=require("ag-charts-community"),import_ag_charts_community78=require("ag-charts-community"),{Validate:Validate32,BOOLEAN:BOOLEAN12,POSITIVE_NUMBER:POSITIVE_NUMBER8,Layers:Layers7,ActionOnSet:ActionOnSet5,CategoryAxis,GroupedCategoryAxis,TextUtils:TextUtils2}=import_ag_charts_community78._ModuleSupport,{Padding,Logger:Logger3}=import_ag_charts_community78._Util,{Group:Group4,BBox:BBox4}=import_ag_charts_community78._Scene,MiniChartPadding=class{constructor(){this.top=0,this.bottom=0}};__decorateClass([Validate32(POSITIVE_NUMBER8)],MiniChartPadding.prototype,"top",2),__decorateClass([Validate32(POSITIVE_NUMBER8)],MiniChartPadding.prototype,"bottom",2);var MiniChart=class extends import_ag_charts_community78._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!1,this.padding=new MiniChartPadding,this.root=new Group4({name:"root"}),this.seriesRoot=this.root.appendChild(new Group4({name:"Series-root",layer:!0,zIndex:Layers7.SERIES_LAYER_ZINDEX})),this.axisGridGroup=this.root.appendChild(new Group4({name:"Axes-Grids",layer:!0,zIndex:Layers7.AXIS_GRID_ZINDEX})),this.axisGroup=this.root.appendChild(new Group4({name:"Axes-Grids",layer:!0,zIndex:Layers7.AXIS_GRID_ZINDEX})),this.data=[],this._destroyed=!1,this.miniChartAnimationPhase="initial",this.axes=[],this.series=[]}destroy(){this._destroyed||(this.destroySeries(this.series),this.axes.forEach(t=>t.destroy()),this.axes=[],this._destroyed=!0)}onSeriesChange(t,e){const i=e?.filter(o=>!t.includes(o))??[];this.destroySeries(i);for(const o of t){if(e?.includes(o))continue;o.rootGroup.parent==null&&this.seriesRoot.appendChild(o.rootGroup);const s=this;o.chart={get mode(){return"standalone"},get isMiniChart(){return!0},get seriesRect(){return s.seriesRect},placeLabels(){return new Map}},o.resetAnimation(this.miniChartAnimationPhase==="initial"?"initial":"disabled")}}destroySeries(t){t?.forEach(e=>{e.destroy(),e.rootGroup!=null&&this.seriesRoot.removeChild(e.rootGroup),e.chart=void 0})}assignSeriesToAxes(){this.axes.forEach(t=>{t.boundSeries=this.series.filter(e=>e.axes[t.direction]===t)})}assignAxesToSeries(){const t={};this.axes.forEach(e=>{const i=e.direction;(t[i]??(t[i]=[])).push(e)}),this.series.forEach(e=>{e.directions.forEach(i=>{const o=t[i];if(!o){Logger3.warnOnce(`no available axis for direction [${i}]; check series and axes configuration.`);return}const s=e.getKeys(i),a=this.findMatchingAxis(o,s);if(!a){Logger3.warnOnce(`no matching axis for direction [${i}] and keys [${s}]; check series and axes configuration.`);return}e.axes[i]=a})})}findMatchingAxis(t,e){for(const i of t){if(!i.keys.length)return i;if(e){for(const o of e)if(i.keys.includes(o))return i}}}async updateData(t){this.series.forEach(e=>e.setChartData(t.data)),this.miniChartAnimationPhase==="initial"&&this.ctx.animationManager.onBatchStop(()=>{this.miniChartAnimationPhase="ready",this.series.forEach(e=>e.resetAnimation("disabled"))})}async processData(t){this.series.some(i=>i.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes());const e=this.series.map(i=>i.processData(t.dataController));await Promise.all(e)}computeAxisPadding(){const t=new Padding;return this.enabled&&this.axes.forEach(({position:e,thickness:i=0,line:o,label:s})=>{if(e==null)return;let a;i>0?a=i:a=(o.enabled?o.width:0)+(s.enabled?TextUtils2.getLineHeight(s.fontSize??0)+s.padding+5:0),t[e]=Math.ceil(a)}),t}async layout(t,e){const{padding:i}=this,o=this.seriesRect!=null,s=new BBox4(0,0,t,e-(i.top+i.bottom));this.seriesRect=s,this.seriesRoot.translationY=i.top,this.seriesRoot.setClipRectInGroupCoordinateSpace(this.seriesRoot.inverseTransformBBox(new BBox4(0,-i.top,t,e)));const a=n=>n instanceof CategoryAxis||n instanceof GroupedCategoryAxis?[0,s.height]:[s.height,0];this.axes.forEach(n=>{const{position:r="left"}=n;switch(r){case"top":case"bottom":n.range=[0,s.width],n.gridLength=s.height;break;case"right":case"left":n.range=a(n),n.gridLength=s.width;break}switch(r){case"top":case"left":n.translation.x=0,n.translation.y=0;break;case"bottom":n.translation.x=0,n.translation.y=e;break;case"right":n.translation.x=t,n.translation.y=0;break}n.gridPadding=0,n.calculateLayout(),n.updatePosition(),n.update(void 0,o)}),await Promise.all(this.series.map(n=>n.update({seriesRect:s})))}};__decorateClass([Validate32(BOOLEAN12)],MiniChart.prototype,"enabled",2),__decorateClass([ActionOnSet5({changeValue(t,e=[]){for(const i of e)t.includes(i)||(i.detachAxis(this.axisGroup,this.axisGridGroup),i.destroy());for(const i of t)e?.includes(i)||i.attachAxis(this.axisGroup,this.axisGridGroup)}})],MiniChart.prototype,"axes",2),__decorateClass([ActionOnSet5({changeValue(t,e){this.onSeriesChange(t,e)}})],MiniChart.prototype,"series",2);var{ObserveChanges:ObserveChanges3}=import_ag_charts_community79._ModuleSupport,Navigator=class extends import_ag_charts_community79._ModuleSupport.Navigator{constructor(t){super(t),this.miniChart=new MiniChart(t)}async updateData(t){await this.miniChart.updateData(t)}async processData(t){await this.miniChart.processData(t)}async performLayout(t){const{shrinkRect:e}=await super.performLayout(t);if(this.enabled){const{top:i,bottom:o}=this.miniChart.computeAxisPadding();e.shrink(i+o,"bottom"),this.y-=o}return{...t,shrinkRect:e}}async performCartesianLayout(t){await super.performCartesianLayout(t),await this.miniChart.layout(this.width,this.height)}};__decorateClass([ObserveChanges3((t,e,i)=>{t.updateBackground(i?.root,e?.root)})],Navigator.prototype,"miniChart",2);var NavigatorModule={type:"root",optionsKey:"navigator",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new Navigator(t),themeTemplate:{...import_ag_charts_community80._ModuleSupport.NavigatorModule.themeTemplate,navigator:{...import_ag_charts_community80._ModuleSupport.NavigatorModule.themeTemplate?.navigator,miniChart:{enabled:!1,label:{color:import_ag_charts_community80._Theme.DEFAULT_LABEL_COLOUR,fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:import_ag_charts_community80._Theme.DEFAULT_FONT_FAMILY,formatter:void 0,padding:0},padding:{top:0,bottom:0}}}}},import_ag_charts_community82=require("ag-charts-community"),import_ag_charts_community81=require("ag-charts-community"),{CachedTextMeasurerPool:CachedTextMeasurerPool3,Validate:Validate33,OBJECT:OBJECT11,BOOLEAN:BOOLEAN13,STRING:STRING15,valueProperty:valueProperty2}=import_ag_charts_community81._ModuleSupport,{Label:Label2,Text:Text4,Group:Group5}=import_ag_charts_community81._Scene,chartConfigurations={ohlc:62,candlestick:62,"hollow-candlestick":62,line:96,"step-line":96,"range-area":30,hlc:184,"high-low":800},itemIdMap={up:"positive",down:"negative"},neutralColourMap={hlc:"altNeutral"},StatusBar=class extends import_ag_charts_community81._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!1,this.openKey=void 0,this.highKey=void 0,this.lowKey=void 0,this.closeKey=void 0,this.volumeKey=void 0,this.title=new Label2,this.positive=new Label2,this.negative=new Label2,this.neutral=new Label2,this.altNeutral=new Label2,this.layoutStyle="block",this.id="status-bar",this.data=void 0,this.labelGroup=new Group5({name:"StatusBar"}),this.labels=[{label:"O",configuration:2,title:this.labelGroup.appendChild(new Text4),value:this.labelGroup.appendChild(new Text4),id:"openValue",key:"openKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"H",configuration:16,title:this.labelGroup.appendChild(new Text4),value:this.labelGroup.appendChild(new Text4),id:"highValue",key:"highKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"H",configuration:256,title:this.labelGroup.appendChild(new Text4),value:this.labelGroup.appendChild(new Text4),style:"neutral",id:"highValue",key:"highKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"L",configuration:8,title:this.labelGroup.appendChild(new Text4),value:this.labelGroup.appendChild(new Text4),id:"lowValue",key:"lowKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"L",configuration:512,title:this.labelGroup.appendChild(new Text4),value:this.labelGroup.appendChild(new Text4),style:"neutral",id:"lowValue",key:"lowKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"C",configuration:4,title:this.labelGroup.appendChild(new Text4),value:this.labelGroup.appendChild(new Text4),id:"closeValue",key:"closeKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"C",configuration:128,title:this.labelGroup.appendChild(new Text4),value:this.labelGroup.appendChild(new Text4),id:"closeValue",key:"closeKey",style:"neutral",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"",configuration:64,title:this.labelGroup.appendChild(new Text4),value:this.labelGroup.appendChild(new Text4),style:"neutral",id:"closeValue",key:"closeKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{notation:"compact",minimumFractionDigits:2,maximumFractionDigits:2})},{label:"Vol",configuration:32,title:this.labelGroup.appendChild(new Text4),value:this.labelGroup.appendChild(new Text4),id:"volumeValue",key:"volumeKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{notation:"compact",minimumFractionDigits:2,maximumFractionDigits:2})}],this.highlightManager=t.highlightManager,this.labelGroup.visible=!1,this.destroyFns.push(t.scene.attachNode(this.labelGroup,"titles"),t.layoutService.addListener("before-series",e=>this.startPerformLayout(e)),t.highlightManager.addListener("highlight-change",()=>this.updateHighlight()))}async processData(t){if(!this.enabled)return;const e=[];for(const a of this.labels){const{id:n,key:r}=a,l=this[r];l==null?a.domain=void 0:e.push(valueProperty2(l,"number",{id:n}))}if(e.length===0||this.data==null)return;const{dataController:i}=t,{processedData:o,dataModel:s}=await i.request(this.id,this.data,{props:e});for(const a of this.labels){const{id:n,key:r}=a;this[r]!=null&&(a.domain=s.getDomain(this,n,"value",o))}}startPerformLayout(t){const{shrinkRect:e}=t,i=4,o=12,s=0,a=8;if(this.labelGroup.translationX=0,this.labelGroup.translationY=0,!this.enabled)return{...t,shrinkRect:e};this.labelGroup.translationY=e.y+s;const n=Math.max(this.title.fontSize,this.positive.fontSize,this.negative.fontSize),r=n*Text4.defaultLineHeightRatio,l=chartConfigurations[this.getChartType()]??0;let c=0,h,d="alphabetic";if(this.layoutStyle==="block")e.shrink(s+r+a,"top"),h=n+(r-n)/2;else{const{title:u}=t.positions,{title:g=0}=t.padding;c=(u?.x??0)+(u?.width??0)+(u?o:g),d="top",h=s+g}for(const{label:u,configuration:g,title:y,value:p,domain:m,formatter:f}of this.labels){if(m==null||!(l&g)){y.visible=!1,p.visible=!1;continue}const v=Math.max(CachedTextMeasurerPool3.measureText(f.format(m[0]),{font:this.positive.getFont(),textBaseline:d,textAlign:"left"}).width,CachedTextMeasurerPool3.measureText(f.format(m[1]),{font:this.positive.getFont(),textBaseline:d,textAlign:"left"}).width,CachedTextMeasurerPool3.measureText(f.format(m[0]),{font:this.negative.getFont(),textBaseline:d,textAlign:"left"}).width,CachedTextMeasurerPool3.measureText(f.format(m[1]),{font:this.negative.getFont(),textBaseline:d,textAlign:"left"}).width);y.visible=!0,p.visible=!0;const S=CachedTextMeasurerPool3.measureText(u,{font:this.title.getFont(),textBaseline:d,textAlign:"left"});y.setFont(this.title),y.fill=this.title.color,y.text=u,y.textBaseline=d,y.translationY=h,y.translationX=c,c+=S.width+i,p.textBaseline=d,p.translationY=h,p.translationX=c,c+=v+o}return{...t,shrinkRect:e}}async performCartesianLayout(t){this.labelGroup.translationX=t.seriesRect.x}updateHighlight(){if(!this.enabled)return;const t=this.highlightManager.getActiveHighlight();if(t==null){this.labelGroup.visible=!1;return}this.labelGroup.visible=!0;const e=t.datum;let i=itemIdMap[t.itemId];i==null&&this.openKey!=null&&this.closeKey!=null&&(e[this.openKey]<e[this.closeKey]?i="positive":i="negative");for(const{domain:o,value:s,key:a,formatter:n,style:r}of this.labels){if(o==null)continue;let l=r??i;l==="neutral"&&(l=neutralColourMap[this.getChartType()]??l);const c=this[a],h=c!=null?e?.[c]:void 0;s.setFont(this[l]),s.fill=this[l].color,s.text=typeof h=="number"?n.format(h):""}}getChartType(){let t=this.ctx.chartService.publicApi?.getOptions()?.chartType;return(t==null||chartConfigurations[t]==null)&&(t="candlestick"),t}};__decorateClass([Validate33(BOOLEAN13)],StatusBar.prototype,"enabled",2),__decorateClass([Validate33(STRING15,{optional:!0})],StatusBar.prototype,"openKey",2),__decorateClass([Validate33(STRING15,{optional:!0})],StatusBar.prototype,"highKey",2),__decorateClass([Validate33(STRING15,{optional:!0})],StatusBar.prototype,"lowKey",2),__decorateClass([Validate33(STRING15,{optional:!0})],StatusBar.prototype,"closeKey",2),__decorateClass([Validate33(STRING15,{optional:!0})],StatusBar.prototype,"volumeKey",2),__decorateClass([Validate33(OBJECT11)],StatusBar.prototype,"title",2),__decorateClass([Validate33(OBJECT11)],StatusBar.prototype,"positive",2),__decorateClass([Validate33(OBJECT11)],StatusBar.prototype,"negative",2),__decorateClass([Validate33(OBJECT11)],StatusBar.prototype,"neutral",2),__decorateClass([Validate33(OBJECT11)],StatusBar.prototype,"altNeutral",2),__decorateClass([Validate33(STRING15)],StatusBar.prototype,"layoutStyle",2);var StatusBarModule={type:"root",identifier:"status-bar",optionsKey:"statusBar",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new StatusBar(t),themeTemplate:{statusBar:{enabled:!1,openKey:void 0,highKey:void 0,lowKey:void 0,closeKey:void 0,volumeKey:void 0,layoutStyle:import_ag_charts_community82._Theme.DEFAULT_CAPTION_LAYOUT_STYLE,title:{color:import_ag_charts_community82._Theme.DEFAULT_LABEL_COLOUR},positive:{color:import_ag_charts_community82._Theme.PALETTE_UP_STROKE},negative:{color:import_ag_charts_community82._Theme.PALETTE_DOWN_STROKE},neutral:{color:import_ag_charts_community82._Theme.PALETTE_NEUTRAL_STROKE},altNeutral:{color:"gray"}}}},import_ag_charts_community83=require("ag-charts-community"),{BOOLEAN:BOOLEAN14,STRING:STRING16,UNION:UNION5,BaseProperties:BaseProperties13,CartesianAxis,ChartUpdateType:ChartUpdateType2,arraysEqual,isDate,isDefined:isDefined2,isFiniteNumber,ObserveChanges:ObserveChanges4,TooltipManager,Validate:Validate34}=import_ag_charts_community83._ModuleSupport,{Logger:Logger4}=import_ag_charts_community83._Util,ChartSync=class extends BaseProperties13{constructor(t){super(),this.moduleContext=t,this.enabled=!1,this.axes="x",this.nodeInteraction=!0,this.zoom=!0}updateChart(t,e=ChartUpdateType2.UPDATE_DATA){t.ctx.updateService.update(e,{skipSync:!0})}updateSiblings(t){const{syncManager:e}=this.moduleContext;(async()=>{for(const o of e.getGroupSiblings(t))await o.waitForDataProcess(120),this.updateChart(o)})().catch(o=>{Logger4.warnOnce("Error updating sibling chart",o)})}enabledZoomSync(){const{syncManager:t,zoomManager:e}=this.moduleContext;this.disableZoomSync=e.addListener("zoom-change",()=>{for(const i of t.getGroupSiblings(this.groupId))i.modulesManager.getModule("sync")?.zoom&&i.ctx.zoomManager.updateZoom("sync",this.mergeZoom(i))})}enabledNodeInteractionSync(){const{highlightManager:t,syncManager:e}=this.moduleContext;this.disableNodeInteractionSync=t.addListener("highlight-change",i=>{for(const o of e.getGroupSiblings(this.groupId))if(o.modulesManager.getModule("sync")?.nodeInteraction){if(!i.currentHighlight?.datum){o.ctx.highlightManager.updateHighlight(o.id),o.ctx.tooltipManager.removeTooltip(o.id);continue}for(const s of o.axes){const a=this.axes==="xy"?"x":this.axes;if(!CartesianAxis.is(s)||s.direction!==a)continue;const n=o.series.map(r=>{const l=r.getKeys(s.direction);if(s.keys.length&&!s.keys.some(y=>l.includes(y)))return;const{nodeData:c}=r.contextNodeData;if(!c?.length)return;const h=c[0][`${s.direction}Key`];let d=i.currentHighlight.datum[h];const u=isDate(d);u&&(d=d.getTime());const g=c.find(y=>{const p=y.datum[h];return u?p.getTime()===d:p===d});return g?{series:r,nodeDatum:g}:null}).filter(isDefined2);if(n.length<2&&n[0]?.nodeDatum!==o.ctx.highlightManager.getActiveHighlight()){const{series:r,nodeDatum:l}=n[0]??{};if(o.ctx.highlightManager.updateHighlight(o.id,l),l){const c=l.midPoint?.x??l.point?.x??0,h=l.midPoint?.y??l.point?.y??0,d=TooltipManager.makeTooltipMeta({type:"hover",offsetX:c,offsetY:h},l);delete d.lastPointerEvent,o.ctx.tooltipManager.updateTooltip(o.id,d,r.getTooltipHtml(l))}else o.ctx.tooltipManager.removeTooltip(o.id);this.updateChart(o,ChartUpdateType2.SERIES_UPDATE)}}}})}syncAxes(t=!1){const{syncManager:e}=this.moduleContext,i=e.getChart(),o=e.getGroup(this.groupId),s=o.flatMap(r=>r.series),a=o[0].axes;let n=!1;i.axes.forEach(r=>{if(!CartesianAxis.is(r)||this.axes!=="xy"&&this.axes!==r.direction){r.boundSeries=i.series.filter(y=>y.axes[r.direction]===r);return}const{direction:l,min:c,max:h,nice:d,reverse:u}=r;for(const y of a)if(l===y.direction&&(d!==y.nice||u!==y.reverse||c!==y.min&&(isFiniteNumber(c)||isFiniteNumber(y.min))||h!==y.max&&(isFiniteNumber(h)||isFiniteNumber(y.max)))){Logger4.warnOnce("To allow synchronization, ensure that all charts have matching min, max, nice, and reverse properties on the synchronized axes."),r.boundSeries=i.series.filter(p=>p.axes[r.direction]===r),this.enabled=!1;return}const g=s.filter(y=>{if(y.visible){const p=y.getKeys(r.direction);return r.keys.length?r.keys.some(m=>p.includes(m)):!0}});arraysEqual(r.boundSeries,g)||(r.boundSeries=g,n=!0)}),n&&!t&&this.updateSiblings(this.groupId)}mergeZoom(t){const{zoomManager:e}=this.moduleContext;if(this.axes==="xy")return e.getZoom();const i=t.zoomManager.getZoom()??{};return i[this.axes]=e.getZoom()?.[this.axes],i}onEnabledChange(){const{syncManager:t}=this.moduleContext;this.enabled?t.subscribe(this.groupId):t.unsubscribe(this.groupId),this.updateSiblings(this.groupId),this.onNodeInteractionChange(),this.onZoomChange()}onGroupIdChange(t,e){if(!this.enabled||t===e)return;const{syncManager:i}=this.moduleContext;i.unsubscribe(e),i.subscribe(t),this.updateSiblings(e),this.updateSiblings(t)}onAxesChange(){if(!this.enabled)return;const{syncManager:t}=this.moduleContext;this.updateChart(t.getChart())}onNodeInteractionChange(){this.enabled&&this.nodeInteraction?this.enabledNodeInteractionSync():this.disableNodeInteractionSync?.()}onZoomChange(){this.enabled&&this.zoom?this.enabledZoomSync():this.disableZoomSync?.()}destroy(){const{syncManager:t}=this.moduleContext;t.unsubscribe(this.groupId),this.updateSiblings(this.groupId),this.disableZoomSync?.()}};ChartSync.className="Sync",__decorateClass([Validate34(BOOLEAN14),ObserveChanges4(t=>t.onEnabledChange())],ChartSync.prototype,"enabled",2),__decorateClass([Validate34(STRING16,{optional:!0}),ObserveChanges4((t,e,i)=>t.onGroupIdChange(e,i))],ChartSync.prototype,"groupId",2),__decorateClass([Validate34(UNION5(["x","y","xy"],"an axis")),ObserveChanges4(t=>t.onAxesChange())],ChartSync.prototype,"axes",2),__decorateClass([Validate34(BOOLEAN14),ObserveChanges4(t=>t.onNodeInteractionChange())],ChartSync.prototype,"nodeInteraction",2),__decorateClass([Validate34(BOOLEAN14),ObserveChanges4(t=>t.onZoomChange())],ChartSync.prototype,"zoom",2);var SyncModule={type:"root",optionsKey:"sync",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new ChartSync(t),themeTemplate:{sync:{enabled:!1}}},import_ag_charts_community93=require("ag-charts-community"),import_ag_charts_community84=require("ag-charts-community"),{COLOR_STRING:COLOR_STRING6,RATIO:RATIO9,Validate:Validate35}=import_ag_charts_community84._ModuleSupport,ZoomRect=class extends import_ag_charts_community84._Scene.Rect{constructor(){super(...arguments),this.fill="rgb(33, 150, 243)",this.fillOpacity=.2}};ZoomRect.className="ZoomRect",__decorateClass([Validate35(COLOR_STRING6)],ZoomRect.prototype,"fill",2),__decorateClass([Validate35(RATIO9)],ZoomRect.prototype,"fillOpacity",2);var import_ag_charts_community86=require("ag-charts-community"),import_ag_charts_community85=require("ag-charts-community"),{clamp:clamp4,isEqual,round}=import_ag_charts_community85._ModuleSupport,UNIT={min:0,max:1},DEFAULT_ANCHOR_POINT_X="end",DEFAULT_ANCHOR_POINT_Y="middle",constrain=(t,e=UNIT.min,i=UNIT.max)=>clamp4(e,t,i);function unitZoomState(){return{x:{...UNIT},y:{...UNIT}}}function dx(t){return t.x.max-t.x.min}function dy(t){return t.y.max-t.y.min}function isZoomRangeEqual(t,e,i=1e-10){return isEqual(t.min,e.min,i)&&isEqual(t.max,e.max,i)}function isZoomEqual(t,e,i){return isZoomRangeEqual(t.x,e.x,i)&&isZoomRangeEqual(t.y,e.y,i)}function isZoomLess(t,e,i){const o=round(dx(t),10)<=e,s=round(dy(t),10)<=i;return o||s}function definedZoomState(t){return{x:{min:t?.x?.min??UNIT.min,max:t?.x?.max??UNIT.max},y:{min:t?.y?.min??UNIT.min,max:t?.y?.max??UNIT.max}}}function pointToRatio(t,e,i){if(!t)return{x:0,y:0};const o=constrain(e-t.x,0,t.x+t.width),s=constrain(i-t.y,0,t.y+t.height),a=1/t.width*o,n=1-1/t.height*s;return{x:constrain(a),y:constrain(n)}}function translateZoom(t,e,i){return{x:{min:t.x.min+e,max:t.x.max+e},y:{min:t.y.min+i,max:t.y.max+i}}}function scaleZoom(t,e,i){return{x:{min:t.x.min,max:t.x.min+dx(t)*e},y:{min:t.y.min,max:t.y.min+dy(t)*i}}}function scaleZoomCenter(t,e,i){const o=dx(t),s=dy(t),a=t.x.min+o/2,n=t.y.min+s/2;return{x:{min:a-o*e/2,max:a+o*e/2},y:{min:n-s*i/2,max:n+s*i/2}}}function scaleZoomAxisWithAnchor(t,e,i,o){const{min:s,max:a}=e,n=s+(a-s)/2,r=t.max-t.min;switch(i){case"start":return{min:s,max:e.min+r};case"end":return{min:e.max-r,max:a};case"middle":return{min:n-r/2,max:n+r/2};case"pointer":return scaleZoomAxisWithPoint(t,e,o??n);default:return{min:s,max:a}}}function scaleZoomAxisWithPoint(t,e,i){const o=t.max-t.min,s=e.max-e.min,a=i*(1-(s-o)),n=i-a,r=t.min+n,l=t.max+n;return{min:r,max:l}}function multiplyZoom(t,e,i){return{x:{min:t.x.min*e,max:t.x.max*e},y:{min:t.y.min*i,max:t.y.max*i}}}function constrainZoom(t){const e=unitZoomState();return e.x=constrainAxis(t.x),e.y=constrainAxis(t.y),e}function constrainAxis(t){const e=t.max-t.min;let i=t.max>UNIT.max?UNIT.max-e:t.min,o=t.min<UNIT.min?e:t.max;return i=Math.max(UNIT.min,i),o=Math.min(UNIT.max,o),{min:i,max:o}}function constrainAxisWithOld({min:t,max:e},i,o){if(e===i.max)t=e-o;else if(t===i.min)e=t+o;else{const s=i.min+(i.max-i.min)/2;t=s-o/2,e=s+o/2}return{min:t,max:e}}var ZoomAxisDragger=class{update(t,e,i,o,s,a){return this.oldZoom??(this.oldZoom=definedZoomState(e===import_ag_charts_community86._ModuleSupport.ChartAxisDirection.X?{...s,x:a}:{...s,y:a})),this.updateCoords(t.offsetX,t.offsetY),this.updateZoom(e,i,o)}stop(){this.coords=void 0,this.oldZoom=void 0}updateCoords(t,e){this.coords?(this.coords.x2=t,this.coords.y2=e):this.coords={x1:t,y1:e,x2:t,y2:e}}updateZoom(t,e,i){const{coords:o,oldZoom:s}=this;let a=definedZoomState(s);if(!o||!s)return t===import_ag_charts_community86._ModuleSupport.ChartAxisDirection.X?a.x:a.y;const n=pointToRatio(i,o.x1,o.y1),r=pointToRatio(i,o.x2,o.y2);if(t===import_ag_charts_community86._ModuleSupport.ChartAxisDirection.X){const c=(r.x-n.x)*dx(s);return a.x.max+=c,a.x=scaleZoomAxisWithAnchor(a.x,s.x,e,n.x),a=constrainZoom(a),a.x}const l=(r.y-n.y)*dy(s);return a.y.max-=l,a.y=scaleZoomAxisWithAnchor(a.y,s.y,e,n.y),a=constrainZoom(a),a.y}},CONTEXT_ZOOM_ACTION_ID="zoom-action",CONTEXT_PAN_ACTION_ID="pan-action",ZoomContextMenu=class{constructor(t,e,i,o,s){this.contextMenuRegistry=t,this.zoomManager=e,this.getModuleProperties=i,this.getRect=o,this.updateZoom=s}registerActions(t,e){if(!t)return;const{contextMenuRegistry:i}=this;i.registerDefaultAction({id:CONTEXT_ZOOM_ACTION_ID,type:"series",label:"contextMenuZoomToCursor",action:this.onZoomToHere.bind(this)}),i.registerDefaultAction({id:CONTEXT_PAN_ACTION_ID,type:"series",label:"contextMenuPanToCursor",action:this.onPanToHere.bind(this)}),this.toggleActions(e)}toggleActions(t){const{contextMenuRegistry:e}=this,{minRatioX:i,minRatioY:o}=this.getModuleProperties();isZoomLess(t,i,o)?e.disableAction(CONTEXT_ZOOM_ACTION_ID):e.enableAction(CONTEXT_ZOOM_ACTION_ID),isZoomEqual(t,unitZoomState())?e.disableAction(CONTEXT_PAN_ACTION_ID):e.enableAction(CONTEXT_PAN_ACTION_ID)}onZoomToHere({event:t}){const e=this.getRect(),{enabled:i,isScalingX:o,isScalingY:s,minRatioX:a,minRatioY:n}=this.getModuleProperties();if(!i||!e||!t||!t.target||!(t instanceof MouseEvent))return;const r=definedZoomState(this.zoomManager.getZoom()),l=pointToRatio(e,t.offsetX,t.offsetX),c=l.x*dx(r),h=l.y*dy(r),d=UNIT.max-UNIT.min,u=d/2;let g={x:{min:l.x-u,max:l.x+u},y:{min:l.y-u,max:l.y+u}};g=scaleZoomCenter(g,o?a:d,s?n:d),g=translateZoom(g,r.x.min-l.x+c,r.y.min-l.y+h),this.updateZoom(constrainZoom(g))}onPanToHere({event:t}){const e=this.getRect(),{enabled:i}=this.getModuleProperties();if(!i||!e||!t||!t.target||!(t instanceof MouseEvent))return;const o=definedZoomState(this.zoomManager.getZoom()),s=pointToRatio(e,t.offsetX,t.offsetY),a=dx(o),n=dy(o),r=s.x*a,l=s.y*n,c=(UNIT.max-UNIT.min)/2;let h={x:{min:s.x-c,max:s.x+c},y:{min:s.y-c,max:s.y+c}};h=scaleZoomCenter(h,a,n),h=translateZoom(h,o.x.min-s.x+r,o.y.min-s.y+l),this.updateZoom(constrainZoom(h))}},import_ag_charts_community87=require("ag-charts-community"),maxZoomCoords=16,decelerationValues={off:1,short:.01,long:.002},ZoomPanner=class{constructor(){this.deceleration=1,this.zoomCoordsHistoryIndex=0,this.coordsHistory=[]}get decelerationValue(){const{deceleration:t}=this;return Math.max(typeof t=="number"?t:decelerationValues[t]??1,1e-4)}addListener(t,e){return this.onUpdate=e,()=>{this.onUpdate=void 0}}stopInteractions(){this.inertiaHandle!=null&&(cancelAnimationFrame(this.inertiaHandle),this.inertiaHandle=void 0)}update(t){this.updateCoords(t.offsetX,t.offsetY);const{x1:e=0,y1:i=0,x2:o=0,y2:s=0}=this.coords??{};this.onUpdate?.({type:"update",deltaX:e-o,deltaY:i-s})}start(){this.coordsMonitorTimeout=setInterval(this.recordCurrentZoomCoords.bind(this),16)}stop(){const{coordsHistory:t}=this;let e=0,i=0,o=0;if(t.length>0){const s=this.zoomCoordsHistoryIndex%maxZoomCoords;let a=s-1;a<0&&(a=t.length-1);let n=s;n>=t.length&&(n=0);const r=t[a],l=t[n];e=r.x-l.x,i=r.y-l.y,o=r.t-l.t}if(this.coords=void 0,clearInterval(this.coordsMonitorTimeout),this.coordsMonitorTimeout=void 0,this.zoomCoordsHistoryIndex=0,this.coordsHistory.length=0,o>0&&this.decelerationValue<1){const s=e/o,a=i/o,n=Math.hypot(s,a),r=Math.atan2(a,s),l=performance.now();this.inertiaHandle=requestAnimationFrame(c=>{this.animateInertia(c,c,l,n,r)})}}recordCurrentZoomCoords(){const{coords:t,coordsHistory:e,zoomCoordsHistoryIndex:i}=this;if(!t)return;const{x2:o,y2:s}=t,a=Date.now();e[i%maxZoomCoords]={x:o,y:s,t:a},this.zoomCoordsHistoryIndex+=1}animateInertia(t,e,i,o,s){const a=1-this.decelerationValue,n=-o/Math.log(a),r=o*(a**(e-i)-1)/Math.log(a),l=o*(a**(t-i)-1)/Math.log(a);this.onUpdate?.({type:"update",deltaX:-Math.cos(s)*(l-r),deltaY:-Math.sin(s)*(l-r)}),!(l>=n-1)&&(this.inertiaHandle=requestAnimationFrame(c=>{this.animateInertia(c,t,i,o,s)}))}updateCoords(t,e){this.coords?this.coords={x1:this.coords.x2,y1:this.coords.y2,x2:t,y2:e}:this.coords={x1:t,y1:e,x2:t,y2:e}}translateZooms(t,e,i,o){const s=pointToRatio(t,t.x+Math.abs(i),t.y+t.height-Math.abs(o)),a=Math.sign(i)*s.x,n=-Math.sign(o)*s.y,r={};for(const[l,{direction:c,zoom:h}]of Object.entries(e)){let d;c===import_ag_charts_community87._ModuleSupport.ChartAxisDirection.X?d=definedZoomState({x:h}):d=definedZoomState({y:h}),d=constrainZoom(translateZoom(d,a*dx(d),n*dy(d))),c===import_ag_charts_community87._ModuleSupport.ChartAxisDirection.X?r[l]={direction:c,zoom:d.x}:r[l]={direction:c,zoom:d.y}}return r}},import_ag_charts_community88=require("ag-charts-community"),{AND:AND5,DATE:DATE2,NUMBER:NUMBER9,OR:OR3,ActionOnSet:ActionOnSet6,isFiniteNumber:isFiniteNumber2,isValidDate,Validate:Validate36,arraysEqual:arraysEqual2}=import_ag_charts_community88._ModuleSupport,ZoomRange=class{constructor(t){this.onChange=t}getRange(){return this.getRangeWithValues(this.start,this.end)}getInitialRange(){return this.getRangeWithValues(this.initialStart,this.initialEnd)}extendToEnd(t){return this.extendWith(e=>Number(e)-t)}extendWith(t){if(!this.domain)return;const[,e]=this.domain;if(e==null)return;const i=t(e),o=this.start!==i||this.end!==e;return this.end=e,this.start=i,o||this.onChange?.(this.axisId,this.getRange()),{start:i,end:e}}updateWith(t){if(!this.domain)return;let[e,i]=this.domain;[e,i]=t(e,i);const o=this.start!==e||this.end!==i;return this.end=i,this.start=e,o||this.onChange?.(this.axisId,this.getRange()),{start:e,end:i}}extendAll(){if(!this.domain)return;const[t,e]=this.domain,i=this.start!==t||this.end!==e;this.start=t,this.end=e,i||this.onChange?.(this.axisId,this.getRange())}updateAxis(t){const e=t.find(({domain:s})=>{const a=!isFiniteNumber2(s[0])||!isFiniteNumber2(s.at(-1)),n=!isValidDate(s[0])||!isValidDate(s.at(-1));return a||n});if(!e)return this.domain!=null;this.axisId=e.id;let i=e.domain;i!=null&&(i=[i[0],i.at(-1)],i[0]instanceof Date&&i[1]instanceof Date&&(i=[i[0].getTime(),i[1].getTime()]));const o=this.domain==null||!arraysEqual2(this.domain,i);return o&&(this.domain=i),o}getRangeWithValues(t,e){let[i,o]=this.domain??[];if(t==null&&e==null||i==null||o==null)return;i=Number(i),o=Number(o);let s=0,a=1;return t!=null&&(s=(Number(t)-i)/(o-i)),e!=null&&(a=(Number(e)-i)/(o-i)),{min:s,max:a}}};__decorateClass([ActionOnSet6({changeValue(t){this.initialStart??(this.initialStart=t),this.onChange?.(this.axisId,this.getRangeWithValues(t,this.end))}}),Validate36(AND5(OR3(DATE2,NUMBER9)),{optional:!0})],ZoomRange.prototype,"start",2),__decorateClass([ActionOnSet6({changeValue(t){this.initialEnd??(this.initialEnd=t),this.onChange?.(this.axisId,this.getRangeWithValues(this.start,t))}}),Validate36(AND5(OR3(DATE2,NUMBER9)),{optional:!0})],ZoomRange.prototype,"end",2);var import_ag_charts_community89=require("ag-charts-community"),{AND:AND6,GREATER_THAN:GREATER_THAN4,LESS_THAN:LESS_THAN3,RATIO:RATIO10,ActionOnSet:ActionOnSet7,Validate:Validate37}=import_ag_charts_community89._ModuleSupport,ZoomRatio=class{constructor(t){this.onChange=t}getRatio(){return this.getRatioWithValues(this.start,this.end)}getInitialRatio(){return this.getRatioWithValues(this.initialStart,this.initialEnd)}getRatioWithValues(t,e){if(!(t==null&&e==null))return{min:t??UNIT.min,max:e??UNIT.max}}};__decorateClass([ActionOnSet7({changeValue(t){this.initialStart??(this.initialStart=t),this.onChange?.(this.getRatioWithValues(t,this.end))}}),Validate37(AND6(RATIO10,LESS_THAN3("end")),{optional:!0})],ZoomRatio.prototype,"start",2),__decorateClass([ActionOnSet7({changeValue(t){this.initialEnd??(this.initialEnd=t),this.onChange?.(this.getRatioWithValues(this.start,t))}}),Validate37(AND6(RATIO10,GREATER_THAN4("start")),{optional:!0})],ZoomRatio.prototype,"end",2);var import_ag_charts_community90=require("ag-charts-community"),DELTA_SCALE=200,ZoomScrollPanner=class{update(t,e,i,o){const s=t.deltaX*e*DELTA_SCALE;return this.translateZooms(i,o,s)}translateZooms(t,e,i){const o={},s=pointToRatio(t,t.x+Math.abs(i),0),a=i<0?-s.x:s.x;for(const[n,{direction:r,zoom:l}]of Object.entries(e)){if(r!==import_ag_charts_community90._ModuleSupport.ChartAxisDirection.X)continue;let c=definedZoomState({x:l});c=constrainZoom(translateZoom(c,a*dx(c),0)),o[n]={direction:r,zoom:c.x}}return o}},import_ag_charts_community91=require("ag-charts-community"),ZoomScroller=class{updateAxes(t,e,i,o){const s=t.sourceEvent,a={},{anchorPointX:n,anchorPointY:r,isScalingX:l,isScalingY:c,scrollingStep:h}=e,d=pointToRatio(i,s.offsetX??s.clientX,s.offsetY??s.clientY);for(const[u,{direction:g,zoom:y}]of Object.entries(o)){if(y==null)continue;let p={...y};const m=h*t.deltaY*(y.max-y.min);if(g===import_ag_charts_community91._ModuleSupport.ChartAxisDirection.X&&l)p.max+=m,p=scaleZoomAxisWithAnchor(p,y,n,d.x);else if(g===import_ag_charts_community91._ModuleSupport.ChartAxisDirection.Y&&c)p.max+=m,p=scaleZoomAxisWithAnchor(p,y,r,d.y);else continue;a[u]={direction:g,zoom:constrainAxis(p)}}return a}update(t,e,i,o){const s=t.sourceEvent,{anchorPointX:a,anchorPointY:n,isScalingX:r,isScalingY:l,scrollingStep:c}=e,h=pointToRatio(i,s.offsetX??s.clientX,s.offsetY??s.clientY),d=t.deltaY;let u=definedZoomState(o);return u.x.max+=r?c*d*dx(o):0,u.y.max+=l?c*d*dy(o):0,r&&(u.x=scaleZoomAxisWithAnchor(u.x,o.x,a,h.x)),l&&(u.y=scaleZoomAxisWithAnchor(u.y,o.y,n,h.y)),u=constrainZoom(u),u}updateDelta(t,e,i){const{anchorPointX:o,anchorPointY:s,isScalingX:a,isScalingY:n,scrollingStep:r}=e;let l=definedZoomState(i);return l.x.max+=a?r*-t*dx(i):0,l.y.max+=n?r*-t*dy(i):0,a&&(l.x=scaleZoomAxisWithAnchor(l.x,i.x,o)),n&&(l.y=scaleZoomAxisWithAnchor(l.y,i.y,s)),l=constrainZoom(l),l}},ZoomSelector=class{constructor(t){this.rect=t,this.rect.visible=!1}update(t,e,i,o){this.rect.visible=!0,this.updateCoords(t.offsetX,t.offsetY,e,i,o),this.updateRect(i)}stop(t,e,i){let o=definedZoomState();if(!t||!e)return o;this.coords&&(o=this.createZoomFromCoords(e,i));const s=e.width/t.width,a=e.height/t.height;return o=constrainZoom(multiplyZoom(o,s,a)),this.reset(),o}reset(){this.coords=void 0,this.rect.visible=!1}didUpdate(){return this.rect.visible}updateCoords(t,e,i,o,s){if(!this.coords){this.coords={x1:t,y1:e,x2:t,y2:e};return}if(this.coords.x2=t,this.coords.y2=e,!o)return;const{isScalingX:a,isScalingY:n,minRatioX:r,minRatioY:l}=i,c=definedZoomState(s),h=this.getNormalisedDimensions(),d=o.width/o.height,u=c.x.max-c.x.min,g=c.y.max-c.y.min,y=r/u,p=l/g;h.width/o.width<y&&(this.coords.x2<this.coords.x1?this.coords.x2=this.coords.x1-o.width*y:this.coords.x2=this.coords.x1+o.width*y),n&&!a?h.height/o.height<p&&(this.coords.y2<this.coords.y1?this.coords.y2=this.coords.y1-o.width*y:this.coords.y2=this.coords.y1+o.height*p):this.coords.y2<this.coords.y1?this.coords.y2=Math.min(this.coords.y1-h.width/d,this.coords.y1-o.height*p):this.coords.y2=Math.max(this.coords.y1+h.width/d,this.coords.y1+o.height*p),a||(this.coords.x1=o.x,this.coords.x2=o.x+o.width),n||(this.coords.y1=o.y,this.coords.y2=o.y+o.height)}updateRect(t){if(!t)return;const{rect:e}=this,i=this.getNormalisedDimensions(),{width:o,height:s}=i;let{x:a,y:n}=i;a=Math.max(a,t.x),a-=Math.max(0,a+o-(t.x+t.width)),n=Math.max(n,t.y),n-=Math.max(0,n+s-(t.y+t.height)),e.x=a,e.y=n,e.width=o,e.height=s}createZoomFromCoords(t,e){const i=definedZoomState(e),o=this.getNormalisedDimensions(),s=pointToRatio(t,o.x,o.y+o.height),a=o.width/t.width,n=o.height/t.height;let r=scaleZoom(i,a,n);const l=s.x*(i.x.max-i.x.min),c=s.y*(i.y.max-i.y.min);return r=translateZoom(r,l,c),r=constrainZoom(r),r}getNormalisedDimensions(){const{x1:t=0,y1:e=0,x2:i=0,y2:o=0}=this.coords??{},s=t<=i?t:i,a=e<=o?e:o,n=t<=i?i-t:t-i,r=e<=o?o-e:e-o;return{x:s,y:a,width:n,height:r}}},import_ag_charts_community92=require("ag-charts-community"),{ChartAxisDirection:ChartAxisDirection12,ToolbarManager:ToolbarManager2}=import_ag_charts_community92._ModuleSupport,ZoomToolbar=class{constructor(t,e,i,o,s){this.toolbarManager=t,this.zoomManager=e,this.getResetZoom=i,this.updateZoom=o,this.updateAxisZoom=s,this.selectedZoom=void 0,this.destroyFns=[],this.destroyFns.push(e.addListener("zoom-change",this.onZoomChanged.bind(this)))}destroy(){for(const t of this.destroyFns)t()}toggle(t,e,i){this.toggleGroups(t),t&&this.toggleButtons(e,i)}toggleButtons(t,e){const{toolbarManager:i}=this,o=isZoomEqual(t,unitZoomState()),s=isZoomLess(t,e.minRatioX,e.minRatioY),a=isZoomEqual(t,this.getResetZoom());i.toggleButton("zoom","pan-start",{enabled:t.x.min>UNIT.min}),i.toggleButton("zoom","pan-end",{enabled:t.x.max<UNIT.max}),i.toggleButton("zoom","pan-left",{enabled:t.x.min>UNIT.min}),i.toggleButton("zoom","pan-right",{enabled:t.x.max<UNIT.max}),i.toggleButton("zoom","zoom-out",{enabled:!o}),i.toggleButton("zoom","zoom-in",{enabled:!s}),i.toggleButton("zoom","reset",{enabled:!a})}onButtonPress(t,e){this.onButtonPressRanges(t,e),this.onButtonPressZoom(t,e)}toggleGroups(t){this.toolbarManager?.toggleGroup("zoom","ranges",{visible:!!t}),this.toolbarManager?.toggleGroup("zoom","zoom",{visible:!!t})}onButtonPressRanges(t,e){if(!ToolbarManager2.isGroup("ranges",t))return;const{id:i}=t,{rangeX:o}=e,s=t.value;typeof s=="number"?o.extendToEnd(s):Array.isArray(s)?o.updateWith(()=>s):typeof s=="function"&&o.updateWith(s);const a=o.getRange();this.selectedZoom=a!=null?{id:i,range:a}:void 0,this.toolbarManager.toggleGroup("zoom-toolbar","ranges",{active:!1}),this.toolbarManager.toggleButton("ranges",i,{active:!0})}onZoomChanged(t){const{selectedZoom:e}=this,{x:i}=t;this.toolbarManager.toggleGroup("zoom-toolbar","ranges",{active:!1}),e!=null&&i!=null&&isZoomRangeEqual(e.range,i)?this.toolbarManager.toggleButton("ranges",e.id,{active:!0}):this.selectedZoom=void 0}onButtonPressZoom(t,e){if(ToolbarManager2.isGroup("zoom",t))if(e.independentAxes&&t.value!=="reset"){const i=this.zoomManager.getAxisZooms();for(const[o,{direction:s,zoom:a}]of Object.entries(i))a!=null&&this.onButtonPressZoomAxis(t,e,o,s,a)}else this.onButtonPressZoomUnified(t,e)}onButtonPressZoomAxis(t,e,i,o,s){if(!ToolbarManager2.isGroup("zoom",t))return;const{anchorPointX:a,anchorPointY:n,isScalingX:r,isScalingY:l,scrollingStep:c}=e;let h={...s};const d=s.max-s.min;switch(t.value){case"pan-start":h.max=d,h.min=0;break;case"pan-end":h.min=h.max-d,h.max=UNIT.max;break;case"pan-left":h.min-=d*c,h.max-=d*c;break;case"pan-right":h.min+=d*c,h.max+=d*c;break;case"zoom-in":case"zoom-out":{const u=o===ChartAxisDirection12.X,g=u&&r||!u&&l;let y=t.value==="zoom-in"?1-c:1+c;g||(y=1);const f=u?a==="pointer"?DEFAULT_ANCHOR_POINT_X:a:n==="pointer"?DEFAULT_ANCHOR_POINT_Y:n;h.max=h.min+(h.max-h.min)*y,h=scaleZoomAxisWithAnchor(h,s,f);break}}this.updateAxisZoom(i,o,constrainAxis(h))}onButtonPressZoomUnified(t,e){if(!ToolbarManager2.isGroup("zoom",t))return;const{anchorPointX:i,anchorPointY:o,isScalingX:s,isScalingY:a,scrollingStep:n}=e,r=definedZoomState(this.zoomManager.getZoom());let l=definedZoomState(r);switch(t.value){case"reset":l=this.getResetZoom();break;case"pan-start":l.x.max=dx(l),l.x.min=0;break;case"pan-end":l.x.min=UNIT.max-dx(l),l.x.max=UNIT.max;break;case"pan-left":l=translateZoom(l,-dx(l)*n,0);break;case"pan-right":l=translateZoom(l,dx(l)*n,0);break;case"zoom-in":case"zoom-out":{const c=t.value==="zoom-in"?1-n:1+n,h=i==="pointer"?DEFAULT_ANCHOR_POINT_X:i,d=o==="pointer"?DEFAULT_ANCHOR_POINT_Y:o;l=scaleZoom(l,s?c:1,a?c:1),l.x=scaleZoomAxisWithAnchor(l.x,r.x,h),l.y=scaleZoomAxisWithAnchor(l.y,r.y,d);break}}this.updateZoom(constrainZoom(l))}},{ARRAY:ARRAY2,BOOLEAN:BOOLEAN15,NUMBER:NUMBER10,RATIO:RATIO11,STRING:STRING17,UNION:UNION6,OR:OR4,ActionOnSet:ActionOnSet8,ChartAxisDirection:ChartAxisDirection13,ChartUpdateType:ChartUpdateType3,Validate:Validate38,ProxyProperty:ProxyProperty2,round:sharedRound,REGIONS:REGIONS3}=import_ag_charts_community93._ModuleSupport,round2=t=>sharedRound(t,10),ANCHOR_POINT=UNION6(["pointer","start","middle","end"],"an anchor cord"),CURSOR_ID="zoom-cursor",TOOLTIP_ID="zoom-tooltip",ZoomButtonsProperties=class extends import_ag_charts_community93._ModuleSupport.BaseProperties{constructor(t){super(),this.onChange=t,this.enabled=!1,this.position="floating-bottom",this.size="small",this.align="center"}};__decorateClass([import_ag_charts_community93._ModuleSupport.ObserveChanges(t=>{t.onChange()}),Validate38(BOOLEAN15)],ZoomButtonsProperties.prototype,"enabled",2),__decorateClass([import_ag_charts_community93._ModuleSupport.ObserveChanges(t=>{t.onChange()}),Validate38(ARRAY2,{optional:!0})],ZoomButtonsProperties.prototype,"buttons",2),__decorateClass([Validate38(STRING17)],ZoomButtonsProperties.prototype,"position",2),__decorateClass([Validate38(STRING17)],ZoomButtonsProperties.prototype,"size",2),__decorateClass([Validate38(STRING17)],ZoomButtonsProperties.prototype,"align",2);var Zoom=class extends import_ag_charts_community93._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!1,this.enableAxisDragging=!0,this.buttons=new ZoomButtonsProperties(()=>this.onZoomButtonsChange(this.enabled)),this.enableDoubleClickToReset=!0,this.enablePanning=!0,this.enableScrolling=!0,this.enableSelecting=!1,this.panKey="alt",this.axes="x",this.scrollingStep=(UNIT.max-UNIT.min)/10,this.minVisibleItemsX=2,this.minVisibleItemsY=2,this.anchorPointX=DEFAULT_ANCHOR_POINT_X,this.anchorPointY=DEFAULT_ANCHOR_POINT_Y,this.rangeX=new ZoomRange(this.onRangeChange.bind(this,ChartAxisDirection13.X)),this.rangeY=new ZoomRange(this.onRangeChange.bind(this,ChartAxisDirection13.Y)),this.ratioX=new ZoomRatio(this.onRatioChange.bind(this,ChartAxisDirection13.X)),this.ratioY=new ZoomRatio(this.onRatioChange.bind(this,ChartAxisDirection13.Y)),this.axisDragger=new ZoomAxisDragger,this.panner=new ZoomPanner,this.scroller=new ZoomScroller,this.scrollPanner=new ZoomScrollPanner,this.deceleration="short",this.dragState=0,this.minRatioX=0,this.minRatioY=0;const e=new ZoomRect;this.selector=new ZoomSelector(e),this.contextMenu=new ZoomContextMenu(t.contextMenuRegistry,t.zoomManager,this.getModuleProperties.bind(this),()=>this.paddedRect,this.updateZoom.bind(this)),this.toolbar=new ZoomToolbar(t.toolbarManager,t.zoomManager,this.getResetZoom.bind(this),this.updateZoom.bind(this),this.updateAxisZoom.bind(this));const{Default:i,ZoomDrag:o,Animation:s}=import_ag_charts_community93._ModuleSupport.InteractionState,a=i|s|o,n=i|s,r=t.regionManager.getRegion(REGIONS3.SERIES),l=t.regionManager.getRegion(REGIONS3.HORIZONTAL_AXES),c=t.regionManager.getRegion(REGIONS3.VERTICAL_AXES),h="drag-start";this.destroyFns.push(t.scene.attachNode(e),t.regionManager.listenAll("dblclick",d=>this.onDoubleClick(d),n),t.regionManager.listenAll("nav-zoom",d=>this.onNavZoom(d)),r.addListener("drag",d=>this.onDrag(d),a),r.addListener(h,d=>this.onDragStart(d),a),r.addListener("drag-end",d=>this.onDragEnd(d),a),c.addListener("drag",d=>this.onDrag(d),a),c.addListener(h,d=>this.onDragStart(d),a),c.addListener("drag-end",d=>this.onDragEnd(d),a),c.addListener("leave",()=>this.onAxisLeave(),n),c.addListener("hover",d=>this.onAxisHover(d,ChartAxisDirection13.Y)),l.addListener("drag",d=>this.onDrag(d),a),l.addListener(h,d=>this.onDragStart(d),a),l.addListener("drag-end",d=>this.onDragEnd(d),a),l.addListener("leave",()=>this.onAxisLeave(),n),l.addListener("hover",d=>this.onAxisHover(d,ChartAxisDirection13.X)),r.addListener("wheel",d=>this.onWheel(d),n),t.gestureDetector.addListener("pinch-move",d=>this.onPinchMove(d)),t.toolbarManager.addListener("button-pressed",d=>this.toolbar.onButtonPress(d,this.getModuleProperties())),t.layoutService.addListener("layout-complete",d=>this.onLayoutComplete(d)),t.updateService.addListener("update-complete",d=>this.onUpdateComplete(d)),t.zoomManager.addListener("zoom-change",d=>this.onZoomChange(d)),t.zoomManager.addListener("zoom-pan-start",d=>this.onZoomPanStart(d)),this.panner.addListener("update",d=>this.onPanUpdate(d)),()=>this.toolbar.destroy())}onEnabledChange(t){if(!this.contextMenu||!this.toolbar)return;const e=this.getZoom(),i=this.getModuleProperties({enabled:t});this.contextMenu.registerActions(t,e),this.onZoomButtonsChange(t),this.toolbar.toggle(t,e,i)}onZoomButtonsChange(t){if(!this.buttons)return;const e=this.buttons.toJson();e.enabled&&(e.enabled=t),this.ctx.toolbarManager.proxyGroupOptions("zoom","zoom",e)}onRangeChange(t,e,i){!e||!i||this.updateAxisZoom(e,t,i)}onRatioChange(t,e){if(!e)return;let i=this.ratioX.getRatio(),o=this.ratioY.getRatio();t===ChartAxisDirection13.X?i=e:o=e;const s=constrainZoom(definedZoomState({x:i,y:o}));this.updateZoom(s)}onDoubleClick(t){const{enabled:e,enableDoubleClickToReset:i,hoveredAxis:o,paddedRect:s}=this;if(!e||!i)return;const{x:a,y:n}=this.getResetZoom();if(o){const{id:r,direction:l}=o,c=l===ChartAxisDirection13.X?a:n;this.updateAxisZoom(r,l,c)}else s?.containsPoint(t.offsetX,t.offsetY)&&!t.preventZoomDblClick&&this.updateZoom({x:a,y:n})}onDragStart(t){const{enabled:e,enableAxisDragging:i,enablePanning:o,enableSelecting:s,hoveredAxis:a,paddedRect:n,ctx:{cursorManager:r,zoomManager:l}}=this;if(!e||!n||t.button!==0)return;this.panner.stopInteractions();let c=0;if(i&&a)c=1;else if(n.containsPoint(t.offsetX,t.offsetY)){const h=this.isPanningKeyPressed(t.sourceEvent);o&&(!s||h)?(r.updateCursor(CURSOR_ID,"grabbing"),c=2,this.panner.start()):s&&!this.isMinZoom(this.getZoom())&&!h&&(c=3)}(this.dragState=c)!==0&&l.fireZoomPanStartEvent("zoom")}onDrag(t){const{anchorPointX:e,anchorPointY:i,axisDragger:o,dragState:s,enabled:a,paddedRect:n,panner:r,selector:l,seriesRect:c,hoveredAxis:h,ctx:{interactionManager:d,tooltipManager:u,updateService:g,zoomManager:y}}=this;if(!a||!n||!c)return;d.pushState(import_ag_charts_community93._ModuleSupport.InteractionState.ZoomDrag);const p=this.getZoom();switch(s){case 1:if(!h)break;const{id:m,direction:f}=h,v=f===import_ag_charts_community93._ModuleSupport.ChartAxisDirection.X?e:i,S=y.getAxisZoom(m),x=o.update(t,f,v,c,p,S);this.updateAxisZoom(m,f,x);break;case 2:r.update(t);break;case 3:l.update(t,this.getModuleProperties(),n,p);break;case 0:return}u.updateTooltip(TOOLTIP_ID),g.update(ChartUpdateType3.PERFORM_LAYOUT,{skipAnimations:!0})}onDragEnd(t){const{axisDragger:e,dragState:i,enabled:o,panner:s,selector:a,ctx:{cursorManager:n,interactionManager:r,tooltipManager:l}}=this;if(r.popState(import_ag_charts_community93._ModuleSupport.InteractionState.ZoomDrag),!(!o||i===0)){switch(i){case 1:e.stop();break;case 2:s.stop();break;case 3:if(!a.didUpdate())break;const c=this.getZoom();if(this.isMinZoom(c))break;const h=a.stop(this.seriesRect,this.paddedRect,c);this.updateZoom(h);break}this.dragState=0,n.updateCursor(CURSOR_ID),l.removeTooltip(TOOLTIP_ID)}}onNavZoom(t){const{enabled:e,enableScrolling:i,scroller:o}=this;!e||!i||(t.preventDefault(),this.updateZoom(o.updateDelta(t.delta,this.getModuleProperties(),this.getZoom())))}onWheel(t){const{enabled:e,enableAxisDragging:i,enablePanning:o,enableScrolling:s,hoveredAxis:a,paddedRect:n}=this;if(!e||!s||!n)return;const r=n.containsPoint(t.offsetX,t.offsetY),l=i&&a!=null,c=t.sourceEvent,{deltaX:h,deltaY:d}=c,u=h!=null&&d!=null&&Math.abs(h)>Math.abs(d);o&&u?this.onWheelPanning(t):(r||l)&&this.onWheelScrolling(t)}onWheelPanning(t){const{scrollingStep:e,scrollPanner:i,seriesRect:o,ctx:{zoomManager:s}}=this;if(!o)return;t.preventDefault();const a=i.update(t,e,o,s.getAxisZooms());for(const[n,{direction:r,zoom:l}]of Object.entries(a))this.updateAxisZoom(n,r,l)}onWheelScrolling(t){const{enableAxisDragging:e,enableIndependentAxes:i,hoveredAxis:o,scroller:s,seriesRect:a,ctx:{zoomManager:n}}=this;if(!a)return;t.preventDefault();const r=e&&o!=null;let l=this.isScalingX(),c=this.isScalingY();r&&(l=o.direction===import_ag_charts_community93._ModuleSupport.ChartAxisDirection.X,c=!l);const h=this.getModuleProperties({isScalingX:l,isScalingY:c});if(i===!0){const d=s.updateAxes(t,h,a,n.getAxisZooms());for(const[u,{direction:g,zoom:y}]of Object.entries(d))r&&o.id!==u||this.updateAxisZoom(u,g,y)}else{const d=s.update(t,h,a,this.getZoom());this.updateZoom(d)}}onAxisLeave(){const{enabled:t,ctx:{cursorManager:e}}=this;t&&(this.hoveredAxis=void 0,e.updateCursor(CURSOR_ID))}onAxisHover(t,e){const{enabled:i,enableAxisDragging:o,ctx:{cursorManager:s}}=this;i&&(this.hoveredAxis={id:t.bboxProviderId??"unknown",direction:e},o&&s.updateCursor(CURSOR_ID,e===ChartAxisDirection13.X?"ew-resize":"ns-resize"))}onPinchMove(t){const{enabled:e,enableScrolling:i,paddedRect:o,seriesRect:s}=this;if(!e||!i||!o||!s)return;const a=this.getZoom(),n=this.getZoom(),r=t.deltaDistance*-.01,l=pointToRatio(s,t.origin.x,t.origin.y);this.isScalingX()&&(n.x.max+=r*dx(a),n.x=scaleZoomAxisWithPoint(n.x,a.x,l.x)),this.isScalingY()&&(n.y.max+=r*(a.y.max-a.y.min),n.y=scaleZoomAxisWithPoint(n.y,a.y,l.y)),this.updateZoom(constrainZoom(n)),t.preventDefault()}onLayoutComplete(t){const{enabled:e,rangeX:i,rangeY:o}=this;if(!e)return;const{series:{rect:s,paddedRect:a,shouldFlipXY:n},axes:r}=t;if(this.seriesRect=s,this.paddedRect=a,this.shouldFlipXY=n,!r)return;const[l,c]=import_ag_charts_community93._Util.bifurcate(g=>g.direction===ChartAxisDirection13.X,r),h=i.updateAxis(l),d=o.updateAxis(c);if(!h&&!d)return;const u={};u.x=i.getRange(),u.y=o.getRange(),(u.x!=null||u.y!=null)&&this.updateZoom(constrainZoom(definedZoomState(u)))}onUpdateComplete(t){const{minRect:e,minVisibleRect:i}=t,{enabled:o,minVisibleItemsX:s,minVisibleItemsY:a,paddedRect:n,shouldFlipXY:r}=this;if(!o||!n||!e||!i)return;const l=this.getZoom(),c=r?a:s,h=r?s:a,d=i.width*c/n.width,u=i.height*h/n.height,g=round2(d*dx(l)),y=round2(u*dy(l));this.isScalingX()&&(this.minRatioX=Math.min(1,g)),this.isScalingY()&&(this.minRatioY=Math.min(1,y)),this.minRatioX||(this.minRatioX=this.minRatioY||0),this.minRatioY||(this.minRatioY=this.minRatioX||0)}onZoomChange(t){t.callerId!=="zoom"&&this.panner.stopInteractions();const e=this.getZoom(),i=this.getModuleProperties();this.contextMenu.toggleActions(e),this.toolbar.toggleButtons(e,i)}onZoomPanStart(t){t.callerId==="zoom"&&this.panner.stopInteractions()}onPanUpdate(t){const{panner:e,seriesRect:i,ctx:{tooltipManager:o,updateService:s,zoomManager:a}}=this;if(!i)return;const n=e.translateZooms(i,a.getAxisZooms(),t.deltaX,t.deltaY);for(const[r,{direction:l,zoom:c}]of Object.entries(n))this.updateAxisZoom(r,l,c);o.updateTooltip(TOOLTIP_ID),s.update(ChartUpdateType3.PERFORM_LAYOUT,{skipAnimations:!0})}isPanningKeyPressed(t){switch(this.panKey){case"alt":return t.altKey;case"ctrl":return t.ctrlKey;case"shift":return t.shiftKey;case"meta":return t.metaKey}}isScalingX(){return this.axes==="xy"?!0:this.shouldFlipXY?this.axes==="y":this.axes==="x"}isScalingY(){return this.axes==="xy"?!0:this.shouldFlipXY?this.axes==="x":this.axes==="y"}getAnchorPointX(){return this.shouldFlipXY?this.anchorPointY:this.anchorPointX}getAnchorPointY(){return this.shouldFlipXY?this.anchorPointX:this.anchorPointY}isMinZoom(t){return isZoomLess(t,this.minRatioX,this.minRatioY)}updateZoom(t){const{minRatioX:e,minRatioY:i,ctx:{zoomManager:o}}=this,s=dx(t),a=dy(t),n=this.getZoom(),r=s<=dx(n)&&s<e,l=a<=dy(n)&&a<i;r&&(t.x=constrainAxisWithOld(t.x,n.x,e)),l&&(t.y=constrainAxisWithOld(t.y,n.y,i)),o.updateZoom("zoom",t)}updateAxisZoom(t,e,i){const{enableIndependentAxes:o,minRatioX:s,minRatioY:a,ctx:{zoomManager:n}}=this;if(!i)return;const r=this.getZoom();if(o!==!0){r[e]=i,this.updateZoom(r);return}const l=i.max-i.min,c=r[e].max-r[e].min,h=e===ChartAxisDirection13.X?s:a;l<=c&&l<h||n.updateAxisZoom("zoom",t,i)}getZoom(){return definedZoomState(this.ctx.zoomManager.getZoom())}getResetZoom(){const t=this.rangeX.getInitialRange()??this.ratioX.getInitialRatio()??UNIT,e=this.rangeY.getInitialRange()??this.ratioY.getInitialRatio()??UNIT;return{x:t,y:e}}getModuleProperties(t){return{anchorPointX:t?.anchorPointX??this.getAnchorPointX(),anchorPointY:t?.anchorPointY??this.getAnchorPointY(),enabled:t?.enabled??this.enabled,independentAxes:t?.independentAxes??this.enableIndependentAxes===!0,isScalingX:t?.isScalingX??this.isScalingX(),isScalingY:t?.isScalingY??this.isScalingY(),minRatioX:t?.minRatioX??this.minRatioX,minRatioY:t?.minRatioY??this.minRatioY,rangeX:t?.rangeX??this.rangeX,scrollingStep:t?.scrollingStep??this.scrollingStep}}};__decorateClass([ActionOnSet8({newValue(t){this.onEnabledChange(t)}}),Validate38(BOOLEAN15)],Zoom.prototype,"enabled",2),__decorateClass([Validate38(BOOLEAN15)],Zoom.prototype,"enableAxisDragging",2),__decorateClass([Validate38(BOOLEAN15)],Zoom.prototype,"enableDoubleClickToReset",2),__decorateClass([Validate38(BOOLEAN15,{optional:!0})],Zoom.prototype,"enableIndependentAxes",2),__decorateClass([Validate38(BOOLEAN15)],Zoom.prototype,"enablePanning",2),__decorateClass([Validate38(BOOLEAN15)],Zoom.prototype,"enableScrolling",2),__decorateClass([Validate38(BOOLEAN15)],Zoom.prototype,"enableSelecting",2),__decorateClass([Validate38(UNION6(["alt","ctrl","meta","shift"],"a pan key"))],Zoom.prototype,"panKey",2),__decorateClass([Validate38(UNION6(["x","y","xy"],"an axis"))],Zoom.prototype,"axes",2),__decorateClass([Validate38(RATIO11)],Zoom.prototype,"scrollingStep",2),__decorateClass([Validate38(NUMBER10.restrict({min:1}))],Zoom.prototype,"minVisibleItemsX",2),__decorateClass([Validate38(NUMBER10.restrict({min:1}))],Zoom.prototype,"minVisibleItemsY",2),__decorateClass([Validate38(ANCHOR_POINT)],Zoom.prototype,"anchorPointX",2),__decorateClass([Validate38(ANCHOR_POINT)],Zoom.prototype,"anchorPointY",2),__decorateClass([ProxyProperty2("panner.deceleration"),Validate38(OR4(RATIO11,UNION6(["off","short","long"],"a deceleration")))],Zoom.prototype,"deceleration",2);var buttons={enabled:!0,buttons:[{icon:"zoom-out",tooltip:"toolbarZoomZoomOut",value:"zoom-out",section:"scale"},{icon:"zoom-in",tooltip:"toolbarZoomZoomIn",value:"zoom-in",section:"scale"},{icon:"pan-left",tooltip:"toolbarZoomPanLeft",value:"pan-left",section:"pan"},{icon:"pan-right",tooltip:"toolbarZoomPanRight",value:"pan-right",section:"pan"},{icon:"reset",tooltip:"toolbarZoomReset",value:"reset",section:"reset"}]},ZoomModule={type:"root",optionsKey:"zoom",packageType:"enterprise",chartTypes:["cartesian","topology"],dependencies:["toolbar"],moduleFactory:t=>new Zoom(t),themeTemplate:{zoom:{anchorPointX:"end",anchorPointY:"middle",axes:"x",buttons,enabled:!1,enableAxisDragging:!0,enableDoubleClickToReset:!0,enablePanning:!0,enableScrolling:!0,enableSelecting:!1,deceleration:"short",minVisibleItemsX:2,minVisibleItemsY:2,panKey:"alt",scrollingStep:.1}}},import_ag_charts_community95=require("ag-charts-community"),import_ag_charts_community94=require("ag-charts-community"),{BOOLEAN:BOOLEAN16,OBJECT:OBJECT12,POSITION,POSITIVE_NUMBER:POSITIVE_NUMBER9,BaseProperties:BaseProperties14,AxisTicks,Layers:Layers8,ProxyProperty:ProxyProperty3,Validate:Validate39}=import_ag_charts_community94._ModuleSupport,{Group:Group6,Rect,LinearGradientFill,Triangle}=import_ag_charts_community94._Scene,{createId:createId3}=import_ag_charts_community94._Util,GradientBar=class extends BaseProperties14{constructor(){super(...arguments),this.thickness=16,this.preferredLength=100}};__decorateClass([Validate39(POSITIVE_NUMBER9)],GradientBar.prototype,"thickness",2),__decorateClass([Validate39(POSITIVE_NUMBER9)],GradientBar.prototype,"preferredLength",2);var GradientLegendScale=class{constructor(t){this.axisTicks=t}};__decorateClass([ProxyProperty3("axisTicks.label")],GradientLegendScale.prototype,"label",2),__decorateClass([ProxyProperty3("axisTicks.interval")],GradientLegendScale.prototype,"interval",2),__decorateClass([ProxyProperty3("axisTicks.padding")],GradientLegendScale.prototype,"padding",2);var GradientLegend=class{constructor(t){this.ctx=t,this.id=createId3(this),this.legendGroup=new Group6({name:"legend",layer:!0,zIndex:Layers8.LEGEND_ZINDEX}),this.gradientRect=new Rect,this.gradientFill=new LinearGradientFill,this.arrow=new Triangle,this.ticksGroup=new Group6({name:"legend-axis-group"}),this.destroyFns=[],this.enabled=!1,this.position="bottom",this.reverseOrder=!1,this.gradient=new GradientBar,this.spacing=20,this.data=[],this.highlightManager=t.highlightManager,this.gradientFill.mask=this.gradientRect,this.axisTicks=new AxisTicks,this.axisTicks.attachAxis(this.ticksGroup),this.scale=new GradientLegendScale(this.axisTicks),this.legendGroup.append([this.gradientFill,this.arrow,this.ticksGroup]),this.destroyFns.push(t.highlightManager.addListener("highlight-change",()=>this.onChartHoverChange()),t.layoutService.addListener("start-layout",e=>this.onStartLayout(e)),()=>this.legendGroup.parent?.removeChild(this.legendGroup))}isVertical(){return this.position==="right"||this.position==="left"}destroy(){this.destroyFns.forEach(t=>t())}attachLegend(t){t.appendChild(this.legendGroup)}onStartLayout(t){const[e]=this.data;if(!this.enabled||!e?.enabled)return this.legendGroup.visible=!1,t;const{colorRange:i}=this.normalizeColorArrays(e);this.updateGradientRect(t.shrinkRect,i);const o=this.updateAxis(e),{left:s,top:a}=this.getMeasurements(t.shrinkRect,o);return this.updateArrow(),this.legendGroup.visible=!0,this.legendGroup.translationX=s,this.legendGroup.translationY=a,t}normalizeColorArrays(t){let e=t.colorDomain.slice();const i=t.colorRange.slice();if(e.length===i.length)return{colorDomain:e,colorRange:i};e.length>i.length&&i.splice(e.length);const[o,s]=e,a=i.length;return e=i.map((n,r)=>r===0?o:r===a-1?s:o+(s-o)*r/(a-1)),{colorDomain:e,colorRange:i}}updateGradientRect(t,e){const{reverseOrder:i,gradientFill:o,gradientRect:s}=this,{preferredLength:a,thickness:n}=this.gradient;o.stops=e,this.isVertical()?(s.width=n,s.height=Math.min(t.height,a),o.direction=i?"to-bottom":"to-top"):(s.width=Math.min(t.width,a),s.height=n,o.direction=i?"to-left":"to-right"),s.markDirty(s)}updateAxis(t){const{axisTicks:e}=this,i=this.isVertical(),o=this.reverseOrder!==i;return e.position=this.position,e.translationX=i?this.gradient.thickness:0,e.translationY=i?0:this.gradient.thickness,e.scale.domain=o?t.colorDomain.slice().reverse():t.colorDomain,e.scale.range=i?[0,this.gradientRect.height]:[0,this.gradientRect.width],e.calculateLayout()}updateArrow(){const t=this.highlightManager.getActiveHighlight(),{arrow:e}=this;if(t?.colorValue==null){e.visible=!1;return}const{scale:i,label:o}=this.axisTicks,s=o.fontSize??0,a=i.convert(t.colorValue);let{x:n,y:r}=this.gradientRect,l=Math.PI;this.isVertical()?(n-=s/2,r+=a,l/=2):(n+=a,r-=s/2),e.visible=!0,e.fill=o.color,e.rotation=l,e.size=s,e.translationX=n,e.translationY=r}getMeasurements(t,e){let{x:i,y:o}=t,{width:s,height:a}=this.gradientRect;switch(this.isVertical()?s+=e.width+5:a+=e.height+5,this.position){case"left":o+=t.height/2-a/2,t.shrink(s+this.spacing,"left");break;case"right":i+=t.width-s,o+=t.height/2-a/2,t.shrink(s+this.spacing,"right");break;case"top":i+=t.width/2-s/2,t.shrink(a+this.spacing,"top");break;case"bottom":i+=t.width/2-s/2,o+=t.height-a,t.shrink(a+this.spacing,"bottom")}return{top:o,left:i}}onChartHoverChange(){this.enabled&&this.updateArrow()}};GradientLegend.className="GradientLegend",__decorateClass([Validate39(BOOLEAN16)],GradientLegend.prototype,"enabled",2),__decorateClass([Validate39(POSITION)],GradientLegend.prototype,"position",2),__decorateClass([Validate39(BOOLEAN16)],GradientLegend.prototype,"reverseOrder",2),__decorateClass([Validate39(OBJECT12)],GradientLegend.prototype,"gradient",2),__decorateClass([Validate39(POSITIVE_NUMBER9)],GradientLegend.prototype,"spacing",2);var GradientLegendModule={type:"legend",optionsKey:"gradientLegend",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion"],identifier:"gradient",moduleFactory:t=>new GradientLegend(t),themeTemplate:{enabled:!1,position:"bottom",spacing:20,scale:{padding:13,label:{color:import_ag_charts_community95._Theme.DEFAULT_LABEL_COLOUR,fontSize:import_ag_charts_community95._Theme.FONT_SIZE.SMALL,fontFamily:import_ag_charts_community95._Theme.DEFAULT_FONT_FAMILY},interval:{minSpacing:1}},gradient:{preferredLength:100,thickness:16},reverseOrder:!1}},MD5=class{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility=this.md5("hello")!="5d41402abc4b2a76b9719d911017c592"}md5cycle(t,e){let i=t[0],o=t[1],s=t[2],a=t[3];i=this.ff(i,o,s,a,e[0],7,-680876936),a=this.ff(a,i,o,s,e[1],12,-389564586),s=this.ff(s,a,i,o,e[2],17,606105819),o=this.ff(o,s,a,i,e[3],22,-1044525330),i=this.ff(i,o,s,a,e[4],7,-176418897),a=this.ff(a,i,o,s,e[5],12,1200080426),s=this.ff(s,a,i,o,e[6],17,-1473231341),o=this.ff(o,s,a,i,e[7],22,-45705983),i=this.ff(i,o,s,a,e[8],7,1770035416),a=this.ff(a,i,o,s,e[9],12,-1958414417),s=this.ff(s,a,i,o,e[10],17,-42063),o=this.ff(o,s,a,i,e[11],22,-1990404162),i=this.ff(i,o,s,a,e[12],7,1804603682),a=this.ff(a,i,o,s,e[13],12,-40341101),s=this.ff(s,a,i,o,e[14],17,-1502002290),o=this.ff(o,s,a,i,e[15],22,1236535329),i=this.gg(i,o,s,a,e[1],5,-165796510),a=this.gg(a,i,o,s,e[6],9,-1069501632),s=this.gg(s,a,i,o,e[11],14,643717713),o=this.gg(o,s,a,i,e[0],20,-373897302),i=this.gg(i,o,s,a,e[5],5,-701558691),a=this.gg(a,i,o,s,e[10],9,38016083),s=this.gg(s,a,i,o,e[15],14,-660478335),o=this.gg(o,s,a,i,e[4],20,-405537848),i=this.gg(i,o,s,a,e[9],5,568446438),a=this.gg(a,i,o,s,e[14],9,-1019803690),s=this.gg(s,a,i,o,e[3],14,-187363961),o=this.gg(o,s,a,i,e[8],20,1163531501),i=this.gg(i,o,s,a,e[13],5,-1444681467),a=this.gg(a,i,o,s,e[2],9,-51403784),s=this.gg(s,a,i,o,e[7],14,1735328473),o=this.gg(o,s,a,i,e[12],20,-1926607734),i=this.hh(i,o,s,a,e[5],4,-378558),a=this.hh(a,i,o,s,e[8],11,-2022574463),s=this.hh(s,a,i,o,e[11],16,1839030562),o=this.hh(o,s,a,i,e[14],23,-35309556),i=this.hh(i,o,s,a,e[1],4,-1530992060),a=this.hh(a,i,o,s,e[4],11,1272893353),s=this.hh(s,a,i,o,e[7],16,-155497632),o=this.hh(o,s,a,i,e[10],23,-1094730640),i=this.hh(i,o,s,a,e[13],4,681279174),a=this.hh(a,i,o,s,e[0],11,-358537222),s=this.hh(s,a,i,o,e[3],16,-722521979),o=this.hh(o,s,a,i,e[6],23,76029189),i=this.hh(i,o,s,a,e[9],4,-640364487),a=this.hh(a,i,o,s,e[12],11,-421815835),s=this.hh(s,a,i,o,e[15],16,530742520),o=this.hh(o,s,a,i,e[2],23,-995338651),i=this.ii(i,o,s,a,e[0],6,-198630844),a=this.ii(a,i,o,s,e[7],10,1126891415),s=this.ii(s,a,i,o,e[14],15,-1416354905),o=this.ii(o,s,a,i,e[5],21,-57434055),i=this.ii(i,o,s,a,e[12],6,1700485571),a=this.ii(a,i,o,s,e[3],10,-1894986606),s=this.ii(s,a,i,o,e[10],15,-1051523),o=this.ii(o,s,a,i,e[1],21,-2054922799),i=this.ii(i,o,s,a,e[8],6,1873313359),a=this.ii(a,i,o,s,e[15],10,-30611744),s=this.ii(s,a,i,o,e[6],15,-1560198380),o=this.ii(o,s,a,i,e[13],21,1309151649),i=this.ii(i,o,s,a,e[4],6,-145523070),a=this.ii(a,i,o,s,e[11],10,-1120210379),s=this.ii(s,a,i,o,e[2],15,718787259),o=this.ii(o,s,a,i,e[9],21,-343485551),t[0]=this.add32(i,t[0]),t[1]=this.add32(o,t[1]),t[2]=this.add32(s,t[2]),t[3]=this.add32(a,t[3])}cmn(t,e,i,o,s,a){return e=this.add32(this.add32(e,t),this.add32(o,a)),this.add32(e<<s|e>>>32-s,i)}ff(t,e,i,o,s,a,n){return this.cmn(e&i|~e&o,t,e,s,a,n)}gg(t,e,i,o,s,a,n){return this.cmn(e&o|i&~o,t,e,s,a,n)}hh(t,e,i,o,s,a,n){return this.cmn(e^i^o,t,e,s,a,n)}ii(t,e,i,o,s,a,n){return this.cmn(i^(e|~o),t,e,s,a,n)}md51(t){const e=t.length,i=[1732584193,-271733879,-1732584194,271733878];let o;for(o=64;o<=t.length;o+=64)this.md5cycle(i,this.md5blk(t.substring(o-64,o)));t=t.substring(o-64);const s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(o=0;o<t.length;o++)s[o>>2]|=t.charCodeAt(o)<<(o%4<<3);if(s[o>>2]|=128<<(o%4<<3),o>55)for(this.md5cycle(i,s),o=0;o<16;o++)s[o]=0;return s[14]=e*8,this.md5cycle(i,s),i}md5blk(t){const e=[];for(let i=0;i<64;i+=4)e[i>>2]=t.charCodeAt(i)+(t.charCodeAt(i+1)<<8)+(t.charCodeAt(i+2)<<16)+(t.charCodeAt(i+3)<<24);return e}rhex(t){const e="0123456789abcdef".split("");let i="",o=0;for(;o<4;o++)i+=e[t>>o*8+4&15]+e[t>>o*8&15];return i}hex(t){for(let e=0;e<t.length;e++)t[e]=this.rhex(t[e]);return t.join("")}md5(t){return this.hex(this.md51(t))}add32(t,e){return this.ieCompatibility?this.add32Compat(t,e):this.add32Std(t,e)}add32Std(t,e){return t+e&4294967295}add32Compat(t,e){const i=(t&65535)+(e&65535);return(t>>16)+(e>>16)+(i>>16)<<16|i&65535}};function missingOrEmpty(t){return t==null||t.length===0}var LICENSE_TYPES={"01":"GRID","02":"CHARTS","0102":"BOTH"},LICENSING_HELP_URL="https://charts.ag-grid.com/licensing/",_LicenseManager=class et{constructor(e){this.gridContext=!1,this.watermarkMessage=void 0,this.totalMessageLength=124,this.document=e,this.md5=new MD5,this.md5.init()}validateLicense(){const e=this.getLicenseDetails(this.licenseKey,this.gridContext),i=`AG ${e.currentLicenseType==="BOTH"?"Grid and ":""}Charts Enterprise`,o=e.suppliedLicenseType===void 0?"":`AG ${e.suppliedLicenseType==="BOTH"?"Grid and AG Charts":e.suppliedLicenseType==="GRID"?"Grid":"Charts"} Enterprise`;if(e.missing)(!this.isWebsiteUrl()||this.isForceWatermark())&&this.outputMissingLicenseKey(i);else if(e.expired){const s=et.getChartsReleaseDate(),a=et.formatDate(s);this.outputExpiredKey(e.expiry,a,o)}else e.valid?e.isTrial&&e.trialExpired&&this.outputExpiredTrialKey(e.expiry,i,o):this.outputInvalidLicenseKey(!!e.incorrectLicenseType,i,o)}static extractExpiry(e){const i=e.substring(e.lastIndexOf("_")+1,e.length);return new Date(parseInt(et.decode(i),10))}static extractLicenseComponents(e){let i=e.replace(/[\u200B-\u200D\uFEFF]/g,"");if(i=i.replace(/\r?\n|\r/g,""),e.length<=32)return{md5:null,license:e,version:null,isTrial:null};const o=i.length-32,s=i.substring(o),a=i.substring(0,o),[n,r,l]=et.extractBracketedInformation(i);return{md5:s,license:a,version:n,isTrial:r,type:l}}getLicenseDetails(e,i=!1){const o="CHARTS";if(missingOrEmpty(e))return{licenseKey:e,valid:!1,missing:!0,currentLicenseType:o};const s=et.getChartsReleaseDate(),{md5:a,license:n,version:r,isTrial:l,type:c}=et.extractLicenseComponents(e);let h=a===this.md5.md5(n)&&e.indexOf("For_Trialing_ag-Grid_Only")===-1,d,u,g=null,y=!1,p;function m(){d=g<new Date,u=void 0}if(h&&(g=et.extractExpiry(n),h=!isNaN(g.getTime()),h))switch(u=s>g,r){case"legacy":case"2":{h=!1;break}case"3":missingOrEmpty(c)?h=!1:(p=c,c!==LICENSE_TYPES["02"]&&c!==LICENSE_TYPES["0102"]?(h=!1,y=!0):l&&m())}return h?{licenseKey:e,valid:h,expiry:et.formatDate(g),expired:u,version:r,isTrial:l,trialExpired:d,invalidLicenseTypeForCombo:i?p!=="BOTH":void 0,incorrectLicenseType:y,currentLicenseType:o,suppliedLicenseType:p}:{licenseKey:e,valid:h,incorrectLicenseType:y,currentLicenseType:o,suppliedLicenseType:p}}isDisplayWatermark(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!missingOrEmpty(this.watermarkMessage)}getWatermarkMessage(){return this.watermarkMessage||""}getHostname(){if(!this.document)return"localhost";const e=this.document.defaultView||window;if(!e)return"localhost";const i=e.location,{hostname:o=""}=i;return o}isForceWatermark(){if(!this.document)return!1;const e=this.document?.defaultView??typeof window<"u"?window:void 0;if(!e)return!1;const{pathname:i}=e.location;return i?i.indexOf("forceWatermark")!==-1:!1}isWebsiteUrl(){return this.getHostname().match(/^((?:[\w-]+\.)?ag-grid\.com)$/)!==null}isLocalhost(){return this.getHostname().match(/^(?:127\.0\.0\.1|localhost)$/)!==null}static formatDate(e){const i=["January","February","March","April","May","June","July","August","September","October","November","December"],o=e.getDate(),s=e.getMonth(),a=e.getFullYear();return o+" "+i[s]+" "+a}static getChartsReleaseDate(){return new Date(parseInt(et.decode(et.RELEASE_INFORMATION),10))}static decode(e){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let o="",s,a,n,r,l,c,h,d=0;const u=e.replace(/[^A-Za-z0-9+/=]/g,"");for(;d<u.length;)r=i.indexOf(u.charAt(d++)),l=i.indexOf(u.charAt(d++)),c=i.indexOf(u.charAt(d++)),h=i.indexOf(u.charAt(d++)),s=r<<2|l>>4,a=(l&15)<<4|c>>2,n=(c&3)<<6|h,o=o+String.fromCharCode(s),c!=64&&(o=o+String.fromCharCode(a)),h!=64&&(o=o+String.fromCharCode(n));return o=et.utf8_decode(o),o}static utf8_decode(e){e=e.replace(/rn/g,"n");let i="";for(let o=0;o<e.length;o++){const s=e.charCodeAt(o);s<128?i+=String.fromCharCode(s):s>127&&s<2048?(i+=String.fromCharCode(s>>6|192),i+=String.fromCharCode(s&63|128)):(i+=String.fromCharCode(s>>12|224),i+=String.fromCharCode(s>>6&63|128),i+=String.fromCharCode(s&63|128))}return i}setLicenseKey(e,i=!1){this.gridContext=i,this.licenseKey=e}static extractBracketedInformation(e){if(!e.includes("["))return["legacy",!1,void 0];const i=e.match(/\[(.*?)\]/g).map(r=>r.replace("[","").replace("]",""));if(!i||i.length===0)return["legacy",!1,void 0];const o=i.filter(r=>r==="TRIAL").length===1,s=i.filter(r=>r.indexOf("v")===0)[0],a=s?s.replace("v",""):"legacy",n=LICENSE_TYPES[i.filter(r=>LICENSE_TYPES[r])[0]];return[a,o,n]}centerPadAndOutput(e){const i=this.totalMessageLength-e.length;console.error(e.padStart(i/2+e.length,"*").padEnd(this.totalMessageLength,"*"))}padAndOutput(e,i="*",o=""){console.error(e.padEnd(this.totalMessageLength-o.length,i)+o)}outputInvalidLicenseKey(e,i,o){this.gridContext||(e?(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Incompatible License Key "),this.padAndOutput(`* Your license key is for ${o} only and does not cover you for ${i}.`," ","*"),this.padAndOutput(`* To troubleshoot your license key visit ${LICENSING_HELP_URL}.`," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")):(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Invalid License Key "),this.padAndOutput("* Your license key is not valid."," ","*"),this.padAndOutput(`* To troubleshoot your license key visit ${LICENSING_HELP_URL}.`," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""))),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(e,i,o){this.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Trial Period Expired. "),this.padAndOutput(`* Your trial only license for ${o} expired on ${e}.`," ","*"),this.padAndOutput("* Please email info@ag-grid.com to purchase a license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(e){this.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${e} License `),this.centerPadAndOutput(" License Key Not Found "),this.padAndOutput(`* All ${e} features are unlocked for trial.`," ","*"),this.padAndOutput("* If you want to hide the watermark please email info@ag-grid.com for a trial license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="For Trial Use Only"}outputExpiredKey(e,i,o){this.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${o} License `),this.centerPadAndOutput(" Incompatible Software Version "),this.padAndOutput(`* Your license key works with versions of ${o} released before ${e}.`," ","*"),this.padAndOutput(`* The version you are trying to use was released on ${i}.`," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to renew your license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="License Expired"}};_LicenseManager.RELEASE_INFORMATION="MTcyMjc4MzE2MDg0MQ==";var LicenseManager=_LicenseManager,import_ag_charts_community96=require("ag-charts-community"),{createElement:createElement6}=import_ag_charts_community96._ModuleSupport;function injectWatermark(t,e){const i=t.addChild("canvas-overlay","watermark"),o=createElement6("span");o.innerText=e,i.addEventListener("animationend",()=>{t.removeChild("canvas-overlay","watermark"),t.removeStyles("watermark")}),i.classList.add("ag-watermark"),i.appendChild(o)}var import_ag_charts_community101=require("ag-charts-community"),import_ag_charts_community99=require("ag-charts-community");function prepareBoxPlotFromTo(t){return{from:t?{scalingX:1,scalingY:0}:{scalingX:0,scalingY:1},to:{scalingX:1,scalingY:1}}}function resetBoxPlotSelectionsScalingCenterFn(t){return(e,i)=>t?{scalingCenterY:i.scaledValues.medianValue}:{scalingCenterX:i.scaledValues.medianValue}}var import_ag_charts_community97=require("ag-charts-community"),{Group:Group7,Rect:Rect2,Line:Line3,BBox:BBox5,Selection:Selection2}=import_ag_charts_community97._Scene,{Logger:Logger5}=import_ag_charts_community97._Util,BoxPlotGroup=class extends Group7{constructor(){super(),this.append([new Rect2({tag:0}),new Rect2({tag:0}),new Rect2({tag:2}),new Rect2({tag:1}),new Line3({tag:3}),new Line3({tag:3}),new Line3({tag:4}),new Line3({tag:4})])}updateDatumStyles(t,e,i,o){const{bandwidth:s,scaledValues:{xValue:a,medianValue:n}}=t;let{minValue:r,q1Value:l,q3Value:c,maxValue:h}=t.scaledValues;(i&&!o||!i&&o)&&([h,c,l,r]=[r,l,c,h]);const d=(w,z,B,F)=>i?{y:w,x:z,width:F,height:B}:{x:w,y:z,width:B,height:F},u=(w,z,B)=>i?{y1:w,y2:z,x:B}:{x1:w,x2:z,y:B},g=(w,z,B)=>i?{x1:z,x2:B,y:w}:{x:w,y1:z,y2:B},y=(w,z,B,F)=>({x:w,y:z,width:B,height:F}=d(w,z,B,F),new BBox5(w,z,B,F)),{fill:p,fillOpacity:m,stroke:f,strokeWidth:v,strokeOpacity:S,lineDash:x,lineDashOffset:M,cornerRadius:T,cap:b,whisker:I}=e,D=Selection2.select(this,Rect2),N=D.selectByTag(0),[k]=D.selectByTag(2),[_]=D.selectByTag(1),O=D.selectByTag(3),A=D.selectByTag(4);I.strokeWidth>s&&(I.strokeWidth=s);const L=d(l,a,c-l,s);k.setProperties(L),N[0].setProperties(L),N[0].setProperties({cornerRadius:T,clipBBox:y(l,a,Math.round(n-l+v/2),s)}),N[1].setProperties(L),N[1].setProperties({cornerRadius:T,clipBBox:y(Math.round(n-v/2),a,Math.floor(c-n+v/2),s)});const E=Math.max(Math.round(n-v/2),l+v),C=Math.min(Math.round(n+v/2),c-v);_.setProperties(L),_.setProperties({visible:E<C,cornerRadius:T,clipBBox:y(E,a+v,C-E,Math.max(0,s-v*2))});const R=Math.floor(a+s*(1-b.lengthRatio)/2),P=Math.ceil(a+s*(1+b.lengthRatio)/2);A[0].setProperties(g(r,R,P)),A[1].setProperties(g(h,R,P)),O[0].setProperties(u(Math.round(r+I.strokeWidth/2),l,Math.floor(a+s/2))),O[1].setProperties(u(c,Math.round(h-I.strokeWidth/2),Math.floor(a+s/2)));for(const w of N)w.setProperties({fill:p,fillOpacity:m,strokeWidth:v*2,strokeOpacity:0});_.setProperties({fill:f,fillOpacity:S,strokeWidth:0});for(const w of[...O,...A])w.setProperties(I);k.setProperties({stroke:f,strokeWidth:v,strokeOpacity:S,lineDash:x,lineDashOffset:M,cornerRadius:T,fillOpacity:0})}distanceSquared(t,e){const i=Selection2.selectByClass(this,Rect2,Line3);return import_ag_charts_community97._ModuleSupport.nearestSquared(t,e,i).distanceSquared}get midPoint(){const t=this.datum;return t.midPoint===void 0?(Logger5.error("BoxPlotGroup.datum.midPoint is undefined"),{x:NaN,y:NaN}):t.midPoint}},import_ag_charts_community98=require("ag-charts-community"),{BaseProperties:BaseProperties15,AbstractBarSeriesProperties,SeriesTooltip,Validate:Validate40,COLOR_STRING:COLOR_STRING7,FUNCTION:FUNCTION5,LINE_DASH:LINE_DASH5,OBJECT:OBJECT13,POSITIVE_NUMBER:POSITIVE_NUMBER10,RATIO:RATIO12,STRING:STRING18,mergeDefaults:mergeDefaults3}=import_ag_charts_community98._ModuleSupport,BoxPlotSeriesCap=class extends BaseProperties15{constructor(){super(...arguments),this.lengthRatio=.5}};__decorateClass([Validate40(RATIO12)],BoxPlotSeriesCap.prototype,"lengthRatio",2);var BoxPlotSeriesWhisker=class extends BaseProperties15{};__decorateClass([Validate40(COLOR_STRING7,{optional:!0})],BoxPlotSeriesWhisker.prototype,"stroke",2),__decorateClass([Validate40(POSITIVE_NUMBER10)],BoxPlotSeriesWhisker.prototype,"strokeWidth",2),__decorateClass([Validate40(RATIO12)],BoxPlotSeriesWhisker.prototype,"strokeOpacity",2),__decorateClass([Validate40(LINE_DASH5,{optional:!0})],BoxPlotSeriesWhisker.prototype,"lineDash",2),__decorateClass([Validate40(POSITIVE_NUMBER10)],BoxPlotSeriesWhisker.prototype,"lineDashOffset",2);var BoxPlotSeriesProperties=class extends AbstractBarSeriesProperties{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.cap=new BoxPlotSeriesCap,this.whisker=new BoxPlotSeriesWhisker,this.tooltip=new SeriesTooltip,this.backgroundFill="white"}toJson(){const{stroke:t,strokeWidth:e,strokeOpacity:i,lineDash:o,lineDashOffset:s}=this,a=super.toJson();return a.whisker=mergeDefaults3(a.whisker,{stroke:t,strokeWidth:e,strokeOpacity:i,lineDash:o,lineDashOffset:s}),a}};__decorateClass([Validate40(STRING18)],BoxPlotSeriesProperties.prototype,"xKey",2),__decorateClass([Validate40(STRING18)],BoxPlotSeriesProperties.prototype,"minKey",2),__decorateClass([Validate40(STRING18)],BoxPlotSeriesProperties.prototype,"q1Key",2),__decorateClass([Validate40(STRING18)],BoxPlotSeriesProperties.prototype,"medianKey",2),__decorateClass([Validate40(STRING18)],BoxPlotSeriesProperties.prototype,"q3Key",2),__decorateClass([Validate40(STRING18)],BoxPlotSeriesProperties.prototype,"maxKey",2),__decorateClass([Validate40(STRING18,{optional:!0})],BoxPlotSeriesProperties.prototype,"xName",2),__decorateClass([Validate40(STRING18,{optional:!0})],BoxPlotSeriesProperties.prototype,"yName",2),__decorateClass([Validate40(STRING18,{optional:!0})],BoxPlotSeriesProperties.prototype,"minName",2),__decorateClass([Validate40(STRING18,{optional:!0})],BoxPlotSeriesProperties.prototype,"q1Name",2),__decorateClass([Validate40(STRING18,{optional:!0})],BoxPlotSeriesProperties.prototype,"medianName",2),__decorateClass([Validate40(STRING18,{optional:!0})],BoxPlotSeriesProperties.prototype,"q3Name",2),__decorateClass([Validate40(STRING18,{optional:!0})],BoxPlotSeriesProperties.prototype,"maxName",2),__decorateClass([Validate40(COLOR_STRING7,{optional:!0})],BoxPlotSeriesProperties.prototype,"fill",2),__decorateClass([Validate40(RATIO12)],BoxPlotSeriesProperties.prototype,"fillOpacity",2),__decorateClass([Validate40(COLOR_STRING7)],BoxPlotSeriesProperties.prototype,"stroke",2),__decorateClass([Validate40(POSITIVE_NUMBER10)],BoxPlotSeriesProperties.prototype,"strokeWidth",2),__decorateClass([Validate40(RATIO12)],BoxPlotSeriesProperties.prototype,"strokeOpacity",2),__decorateClass([Validate40(LINE_DASH5)],BoxPlotSeriesProperties.prototype,"lineDash",2),__decorateClass([Validate40(POSITIVE_NUMBER10)],BoxPlotSeriesProperties.prototype,"lineDashOffset",2),__decorateClass([Validate40(POSITIVE_NUMBER10)],BoxPlotSeriesProperties.prototype,"cornerRadius",2),__decorateClass([Validate40(FUNCTION5,{optional:!0})],BoxPlotSeriesProperties.prototype,"itemStyler",2),__decorateClass([Validate40(OBJECT13)],BoxPlotSeriesProperties.prototype,"cap",2),__decorateClass([Validate40(OBJECT13)],BoxPlotSeriesProperties.prototype,"whisker",2),__decorateClass([Validate40(OBJECT13)],BoxPlotSeriesProperties.prototype,"tooltip",2),__decorateClass([Validate40(COLOR_STRING7)],BoxPlotSeriesProperties.prototype,"backgroundFill",2);var{extent,extractDecoratedProperties,fixNumericExtent:fixNumericExtent2,keyProperty,mergeDefaults:mergeDefaults4,SeriesNodePickMode,SMALLEST_KEY_INTERVAL,valueProperty:valueProperty3,diff,animationValidation,convertValuesToScaleByDefs,isFiniteNumber:isFiniteNumber3,computeBarFocusBounds}=import_ag_charts_community99._ModuleSupport,{motion}=import_ag_charts_community99._Scene,{ContinuousScale}=import_ag_charts_community99._Scale,{Color:Color4}=import_ag_charts_community99._Util,BoxPlotSeriesNodeEvent=class extends import_ag_charts_community99._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.xKey=o.properties.xKey,this.minKey=o.properties.minKey,this.q1Key=o.properties.q1Key,this.medianKey=o.properties.medianKey,this.q3Key=o.properties.q3Key,this.maxKey=o.properties.maxKey}},BoxPlotSeries=class extends import_ag_charts_community99._ModuleSupport.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[SeriesNodePickMode.NEAREST_NODE,SeriesNodePickMode.EXACT_SHAPE_MATCH],directionKeys:{x:["xKey"],y:["medianKey","q1Key","q3Key","minKey","maxKey"]},directionNames:{x:["xName"],y:["medianName","q1Name","q3Name","minName","maxName"]},pathsPerSeries:[],hasHighlightedLabels:!0}),this.properties=new BoxPlotSeriesProperties,this.NodeEvent=BoxPlotSeriesNodeEvent}async processData(t){if(!this.properties.isValid()||!this.visible)return;const{xKey:e,minKey:i,q1Key:o,medianKey:s,q3Key:a,maxKey:n}=this.properties,r=!this.ctx.animationManager.isSkipped(),l=this.getCategoryAxis()?.scale,c=this.getValueAxis()?.scale,{isContinuousX:h,xScaleType:d,yScaleType:u}=this.getScaleInformation({xScale:l,yScale:c}),g=[];r&&this.processedData&&g.push(diff(this.processedData)),r&&g.push(animationValidation());const{processedData:y}=await this.requestDataModel(t,this.data,{props:[keyProperty(e,d,{id:"xValue"}),valueProperty3(i,u,{id:"minValue"}),valueProperty3(o,u,{id:"q1Value"}),valueProperty3(s,u,{id:"medianValue"}),valueProperty3(a,u,{id:"q3Value"}),valueProperty3(n,u,{id:"maxValue"}),...h?[SMALLEST_KEY_INTERVAL]:[],...g]});this.smallestDataInterval=y.reduced?.smallestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(t){const{processedData:e,dataModel:i,smallestDataInterval:o}=this;if(!(e&&i))return[];if(t===this.getBarDirection()){const u=i.getDomain(this,"minValue","value",e),g=i.getDomain(this,"maxValue","value",e);return fixNumericExtent2([Math.min(...u),Math.max(...g)],this.getValueAxis())}const{index:s,def:a}=i.resolveProcessedDataDefById(this,"xValue"),n=e.domain.keys[s];if(a.type==="key"&&a.valueType==="category")return n;const r=this.getCategoryAxis(),l=extent(n)??[NaN,NaN],c=isFiniteNumber3(o)?o*.5:0,h=l[0]+-c,d=l[1]+c;return fixNumericExtent2([h,d],r)}async createNodeData(){const{visible:t,dataModel:e}=this,i=this.getCategoryAxis(),o=this.getValueAxis();if(!(e&&i&&o))return;const{xKey:s,fill:a,fillOpacity:n,stroke:r,strokeWidth:l,strokeOpacity:c,lineDash:h,lineDashOffset:d,cap:u,whisker:g}=this.properties,y=[],p=e.resolveProcessedDataDefsByIds(this,["xValue","minValue","q1Value","medianValue","q3Value","maxValue"]),{barWidth:m,groupIndex:f}=this.updateGroupScale(i),v=ContinuousScale.is(i.scale)?m*-.5:0,{groupScale:S,processedData:x}=this,M=this.isVertical(),T={itemId:s,nodeData:y,labelData:[],scales:this.calculateScaling(),visible:this.visible};return t&&x?.data.forEach(({datum:b,keys:I,values:D})=>{const{xValue:N,minValue:k,q1Value:_,medianValue:O,q3Value:A,maxValue:L}=e.resolveProcessedDataDefsValues(p,{keys:I,values:D});if([k,_,O,A,L].some(F=>typeof F!="number")||k>_||_>O||O>A||A>L)return;const E=convertValuesToScaleByDefs({defs:p,values:{xValue:N,minValue:k,q1Value:_,medianValue:O,q3Value:A,maxValue:L},xAxis:i,yAxis:o});E.xValue+=Math.round(S.convert(String(f)))+v;const C=Math.round(m),R=Math.abs(E.q3Value-E.q1Value),P=E.xValue+C/2,w=Math.min(E.q3Value,E.q1Value)+R/2,z={x:M?P:w,y:M?w:P};let B;M?B={x:z.x-C/2,y:E.minValue,width:C,height:E.maxValue-E.minValue}:B={x:E.minValue,y:z.y-C/2,width:E.maxValue-E.minValue,height:C},y.push({series:this,itemId:N,datum:b,xKey:s,bandwidth:C,scaledValues:E,cap:u,whisker:g,fill:a,fillOpacity:n,stroke:r,strokeWidth:l,strokeOpacity:c,lineDash:h,lineDashOffset:d,midPoint:z,focusRect:B})}),T}getLegendData(t){const{id:e,data:i}=this,{xKey:o,yName:s,fill:a,fillOpacity:n,stroke:r,strokeWidth:l,strokeOpacity:c,showInLegend:h,legendItemName:d,visible:u}=this.properties;return!h||!i?.length||!o||t!=="category"?[]:[{legendType:"category",id:e,itemId:e,seriesId:e,enabled:u,label:{text:d??s??e},symbols:[{marker:{fill:a,fillOpacity:n,stroke:r,strokeOpacity:c,strokeWidth:l}}],legendItemName:d}]}getTooltipHtml(t){const{xKey:e,minKey:i,q1Key:o,medianKey:s,q3Key:a,maxKey:n,xName:r,yName:l,minName:c,q1Name:h,medianName:d,q3Name:u,maxName:g,tooltip:y,fill:p}=this.properties,{datum:m,itemId:f}=t,v=this.getCategoryAxis(),S=this.getValueAxis();if(!v||!S||!this.properties.isValid())return import_ag_charts_community99._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const x=import_ag_charts_community99._Util.sanitizeHtml(l),T=[[e,r,v],[i,c,S],[o,h,S],[s,d,S],[a,u,S],[n,g,S]].map(([I,D,N])=>import_ag_charts_community99._Util.sanitizeHtml(`${D??I}: ${N.formatDatum(m[I])}`)).join(x?"<br/>":", "),{fill:b}=this.getFormattedStyles(t);return y.toTooltipHtml({title:x,content:T,backgroundColor:p},{seriesId:this.id,itemId:f,datum:m,fill:p,xKey:e,minKey:i,q1Key:o,medianKey:s,q3Key:a,maxKey:n,xName:r,minName:c,q1Name:h,medianName:d,q3Name:u,maxName:g,yName:l,title:x,color:p??b})}animateEmptyUpdateReady({datumSelection:t}){const e=this.isVertical(),{from:i,to:o}=prepareBoxPlotFromTo(e);motion.resetMotion([t],resetBoxPlotSelectionsScalingCenterFn(e)),motion.staticFromToMotion(this.id,"datums",this.ctx.animationManager,[t],i,o,{phase:"initial"})}isLabelEnabled(){return!1}async updateDatumSelection(t){const e=t.nodeData??[];return t.datumSelection.update(e)}async updateDatumNodes({datumSelection:t,isHighlight:e}){const i=this.isVertical(),o=this.getValueAxis()?.isReversed();t.each((s,a)=>{let n=this.getFormattedStyles(a,e);e&&(n=mergeDefaults4(this.properties.highlightStyle.item,n));const{stroke:r,strokeWidth:l,strokeOpacity:c,lineDash:h,lineDashOffset:d}=n;n.whisker=mergeDefaults4(n.whisker,{stroke:r,strokeWidth:l,strokeOpacity:c,lineDash:h,lineDashOffset:d}),s.updateDatumStyles(a,n,i,o)})}async updateLabelNodes(t){}async updateLabelSelection(t){const{labelData:e,labelSelection:i}=t;return i.update(e)}nodeFactory(){return new BoxPlotGroup}getFormattedStyles(t,e=!1){const{id:i,ctx:{callbackCache:o},properties:s}=this,{xKey:a,minKey:n,q1Key:r,medianKey:l,q3Key:c,maxKey:h,itemStyler:d,backgroundFill:u,cornerRadius:g}=s,{datum:y,stroke:p,strokeWidth:m,strokeOpacity:f,lineDash:v,lineDashOffset:S,cap:x,whisker:M}=t;let T,b;if(!0)T=t.fill,b=s.fillOpacity;else{try{T=Color4.mix(Color4.fromString(u),Color4.fromString(t.fill),s.fillOpacity).toString()}catch{T=t.fill}b=void 0}const D={fill:T,fillOpacity:b,stroke:p,strokeWidth:m,strokeOpacity:f,lineDash:v,lineDashOffset:S,cornerRadius:g,cap:extractDecoratedProperties(x),whisker:extractDecoratedProperties(M)};if(d){const N=o.call(d,{datum:y,seriesId:i,highlighted:e,...D,xKey:a,minKey:n,q1Key:r,medianKey:l,q3Key:c,maxKey:h});if(N)return mergeDefaults4(N,D)}return D}computeFocusBounds({datumIndex:t,seriesRect:e}){return computeBarFocusBounds(this.contextNodeData?.nodeData[t].focusRect,this.contentGroup,e)}};BoxPlotSeries.className="BoxPlotSeries",BoxPlotSeries.type="box-plot";var import_ag_charts_community100=require("ag-charts-community"),BOX_PLOT_SERIES_THEME={series:{direction:"vertical",strokeWidth:2},axes:{[import_ag_charts_community100._Theme.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{snap:!1}},[import_ag_charts_community100._Theme.CARTESIAN_AXIS_TYPE.CATEGORY]:{groupPaddingInner:.2,crosshair:{enabled:!1,snap:!1}}}},{Color:Color5}=import_ag_charts_community101._Util,BoxPlotModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"box-plot",moduleFactory:t=>new BoxPlotSeries(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:import_ag_charts_community101._Theme.CARTESIAN_AXIS_TYPE.NUMBER,position:import_ag_charts_community101._Theme.POSITION.LEFT},{type:import_ag_charts_community101._Theme.CARTESIAN_AXIS_TYPE.CATEGORY,position:import_ag_charts_community101._Theme.POSITION.BOTTOM}],themeTemplate:BOX_PLOT_SERIES_THEME,groupable:!0,paletteFactory:({takeColors:t,themeTemplateParameters:e})=>{const i=e.get(import_ag_charts_community101._Theme.DEFAULT_BACKGROUND_COLOUR),o=(Array.isArray(i)?i[0]:i)??"white",{fills:[s],strokes:[a]}=t(1);let n;try{n=Color5.mix(Color5.fromString(o),Color5.fromString(s),.3).toString()}catch{n=s}return{fill:n,stroke:a,backgroundFill:o}},swapDefaultAxesCondition:({direction:t})=>t==="horizontal"},import_ag_charts_community105=require("ag-charts-community"),import_ag_charts_community103=require("ag-charts-community"),import_ag_charts_community102=require("ag-charts-community"),{AbstractBarSeriesProperties:AbstractBarSeriesProperties2,BaseProperties:BaseProperties16,PropertiesArray:PropertiesArray2,SeriesTooltip:SeriesTooltip2,Validate:Validate41,ARRAY:ARRAY3,COLOR_STRING:COLOR_STRING8,LINE_DASH:LINE_DASH6,OBJECT:OBJECT14,POSITIVE_NUMBER:POSITIVE_NUMBER11,RATIO:RATIO13,STRING:STRING19}=import_ag_charts_community102._ModuleSupport,TargetStyle=class extends BaseProperties16{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.lengthRatio=.75}};__decorateClass([Validate41(COLOR_STRING8)],TargetStyle.prototype,"fill",2),__decorateClass([Validate41(RATIO13)],TargetStyle.prototype,"fillOpacity",2),__decorateClass([Validate41(COLOR_STRING8)],TargetStyle.prototype,"stroke",2),__decorateClass([Validate41(POSITIVE_NUMBER11)],TargetStyle.prototype,"strokeWidth",2),__decorateClass([Validate41(RATIO13)],TargetStyle.prototype,"strokeOpacity",2),__decorateClass([Validate41(LINE_DASH6)],TargetStyle.prototype,"lineDash",2),__decorateClass([Validate41(POSITIVE_NUMBER11)],TargetStyle.prototype,"lineDashOffset",2),__decorateClass([Validate41(RATIO13)],TargetStyle.prototype,"lengthRatio",2);var BulletScale=class extends BaseProperties16{};__decorateClass([Validate41(POSITIVE_NUMBER11,{optional:!0})],BulletScale.prototype,"max",2);var BulletColorRange=class extends BaseProperties16{constructor(){super(...arguments),this.color="lightgrey"}};__decorateClass([Validate41(COLOR_STRING8)],BulletColorRange.prototype,"color",2),__decorateClass([Validate41(POSITIVE_NUMBER11,{optional:!0})],BulletColorRange.prototype,"stop",2);var BulletSeriesProperties=class extends AbstractBarSeriesProperties2{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.widthRatio=.5,this.colorRanges=new PropertiesArray2(BulletColorRange),this.target=new TargetStyle,this.scale=new BulletScale,this.tooltip=new SeriesTooltip2,this.backgroundFill="white"}};__decorateClass([Validate41(STRING19)],BulletSeriesProperties.prototype,"valueKey",2),__decorateClass([Validate41(STRING19,{optional:!0})],BulletSeriesProperties.prototype,"valueName",2),__decorateClass([Validate41(STRING19,{optional:!0})],BulletSeriesProperties.prototype,"targetKey",2),__decorateClass([Validate41(STRING19,{optional:!0})],BulletSeriesProperties.prototype,"targetName",2),__decorateClass([Validate41(COLOR_STRING8)],BulletSeriesProperties.prototype,"fill",2),__decorateClass([Validate41(RATIO13)],BulletSeriesProperties.prototype,"fillOpacity",2),__decorateClass([Validate41(COLOR_STRING8)],BulletSeriesProperties.prototype,"stroke",2),__decorateClass([Validate41(POSITIVE_NUMBER11)],BulletSeriesProperties.prototype,"strokeWidth",2),__decorateClass([Validate41(RATIO13)],BulletSeriesProperties.prototype,"strokeOpacity",2),__decorateClass([Validate41(LINE_DASH6)],BulletSeriesProperties.prototype,"lineDash",2),__decorateClass([Validate41(POSITIVE_NUMBER11)],BulletSeriesProperties.prototype,"lineDashOffset",2),__decorateClass([Validate41(RATIO13)],BulletSeriesProperties.prototype,"widthRatio",2),__decorateClass([Validate41(ARRAY3.restrict({minLength:0}))],BulletSeriesProperties.prototype,"colorRanges",2),__decorateClass([Validate41(OBJECT14)],BulletSeriesProperties.prototype,"target",2),__decorateClass([Validate41(OBJECT14)],BulletSeriesProperties.prototype,"scale",2),__decorateClass([Validate41(OBJECT14)],BulletSeriesProperties.prototype,"tooltip",2),__decorateClass([Validate41(COLOR_STRING8)],BulletSeriesProperties.prototype,"backgroundFill",2);var{animationValidation:animationValidation2,collapsedStartingBarPosition,diff:diff2,keyProperty:keyProperty2,partialAssign:partialAssign2,prepareBarAnimationFunctions,resetBarSelectionsFn,seriesLabelFadeInAnimation,valueProperty:valueProperty4,createDatumId,computeBarFocusBounds:computeBarFocusBounds2}=import_ag_charts_community103._ModuleSupport,{fromToMotion}=import_ag_charts_community103._Scene.motion,{sanitizeHtml,Color:Color6}=import_ag_charts_community103._Util,STYLING_KEYS=["fill","fillOpacity","stroke","strokeWidth","strokeOpacity","lineDash","lineDashOffset"],BulletSeries=class extends import_ag_charts_community103._ModuleSupport.AbstractBarSeries{constructor(t){super({moduleCtx:t,directionKeys:{y:["targetKey","valueKey"]},directionNames:{y:["targetName","valueName"]},pickModes:[import_ag_charts_community103._ModuleSupport.SeriesNodePickMode.NEAREST_NODE,import_ag_charts_community103._ModuleSupport.SeriesNodePickMode.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,animationResetFns:{datum:resetBarSelectionsFn}}),this.properties=new BulletSeriesProperties,this.normalizedColorRanges=[],this.colorRangesGroup=new import_ag_charts_community103._Scene.Group({name:`${this.id}-colorRanges`}),this.colorRangesSelection=import_ag_charts_community103._Scene.Selection.select(this.colorRangesGroup,import_ag_charts_community103._Scene.Rect,!1),this.rootGroup.append(this.colorRangesGroup),this.targetLinesSelection=import_ag_charts_community103._Scene.Selection.select(this.annotationGroup,import_ag_charts_community103._Scene.Line,!1)}destroy(){this.rootGroup.removeChild(this.colorRangesGroup),super.destroy()}async processData(t){if(!this.properties.isValid()||!this.data||!this.visible)return;const{valueKey:e,targetKey:i}=this.properties,o=this.getCategoryAxis()?.scale,s=this.getValueAxis()?.scale,{xScaleType:a,yScaleType:n}=this.getScaleInformation({xScale:o,yScale:s}),r=[];i!==void 0&&r.push(valueProperty4(i,n,{id:"target"})),this.ctx.animationManager.isSkipped()||(this.processedData!==void 0&&r.push(diff2(this.processedData)),r.push(animationValidation2())),await this.requestDataModel(t,this.data.slice(0,1),{props:[keyProperty2(e,a,{id:"xValue"}),valueProperty4(e,n,{id:"value"}),...r],groupByKeys:!0}),this.animationState.transition("updateData")}getBandScalePadding(){return{inner:0,outer:0}}getMaxValue(){return Math.max(...this.getValueAxis()?.dataDomain.domain??[0])}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!e||!i)return[];const{valueKey:o,targetKey:s,valueName:a,scale:n}=this.properties;if(t===this.getCategoryDirection())return[a??o];if(t==this.getValueAxis()?.direction){const r=e.getDomain(this,"value","value",i),l=s===void 0?[]:e.getDomain(this,"target","value",i);return[0,n.max??Math.max(...r,...l)]}throw new Error(`unknown direction ${t}`)}getKeys(t){return t===this.getBarDirection()?[this.properties.valueKey]:super.getKeys(t)}async createNodeData(){const{dataModel:t,processedData:e}=this,{valueKey:i,targetKey:o,widthRatio:s,target:{lengthRatio:a}}=this.properties,n=this.getCategoryAxis()?.scale,r=this.getValueAxis()?.scale;if(!i||!t||!e||!n||!r||s===void 0||a===void 0)return;const l=n.bandwidth??NaN,c=this.getMaxValue(),h=t.resolveProcessedDataIndexById(this,"value"),d=o===void 0?NaN:t.resolveProcessedDataIndexById(this,"target"),u={itemId:i,nodeData:[],labelData:[],scales:this.calculateScaling(),visible:this.visible};if(!this.visible)return u;for(const{datum:p,values:m}of e.data){if(!Array.isArray(p)||p.length<1)continue;m[0][h]<0&&import_ag_charts_community103._Util.Logger.warnOnce("negative values are not supported, clipping to 0.");const f=this.properties.valueName??this.properties.valueKey,v=Math.min(c,Math.max(0,m[0][h])),S=r.convert(v),x=s*l,M=r.convert(0),T=this.getBarDirection()===import_ag_charts_community103._ModuleSupport.ChartAxisDirection.X,b={x:l*(1-s)/2,y:Math.min(S,M),width:x,height:Math.abs(M-S)};T&&([b.x,b.y,b.width,b.height]=[b.y,b.x,b.height,b.width]);let I;if(m[0][d]<0&&import_ag_charts_community103._Util.Logger.warnOnce("negative targets are not supported, ignoring."),this.properties.targetKey&&m[0][d]>=0){const N=a*l,k=Math.min(c,m[0][d]);if(!isNaN(k)&&k!==void 0){const _=r.convert(k);let O=l*(1-a)/2,A=O+N,[L,E]=[_,_];T&&([O,A,L,E]=[L,E,O,A]),I={value:k,x1:O,x2:A,y1:L,y2:E}}}const D={series:this,datum:p[0],xKey:i,xValue:f,yKey:i,yValue:v,cumulativeValue:v,target:I,...b,midPoint:{x:b.x+b.width/2,y:b.y+b.height/2},opacity:1};u.nodeData.push(D)}const g=[...this.getColorRanges()].sort((p,m)=>(p.stop??c)-(m.stop??c));let y=0;return this.normalizedColorRanges=g.map(p=>{const m=Math.min(c,p.stop??1/0),f={color:p.color,start:y,stop:m};return y=m,f}),u}getColorRanges(){const{colorRanges:t,fill:e,backgroundFill:i}=this.properties;if(t!==void 0&&t.length>0)return t;const o=new BulletColorRange;try{o.color=Color6.mix(Color6.fromString(e),Color6.fromString(i),.7).toString()}catch{o.color=e}return[o]}getLegendData(t){return[]}getTooltipHtml(t){const{valueKey:e,valueName:i,targetKey:o,targetName:s}=this.properties,a=this.getValueAxis(),{yValue:n,target:{value:r}={value:void 0},datum:l,itemId:c}=t;if(e===void 0||n===void 0||a===void 0)return import_ag_charts_community103._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const h=(g,y,p)=>{const m=sanitizeHtml(y??g),f=sanitizeHtml(a.formatDatum(p));return`<b>${m}</b>: ${f}`},d=void 0,u=o===void 0||r===void 0?h(e,i,n):`${h(e,i,n)}<br/>${h(o,s,r)}`;return this.properties.tooltip.toTooltipHtml({title:d,content:u,backgroundColor:this.properties.fill},{datum:l,itemId:c,title:d,seriesId:this.id,valueKey:e,valueName:i,targetKey:o,targetName:s,color:void 0})}isLabelEnabled(){return!1}nodeFactory(){return new import_ag_charts_community103._Scene.Rect}async updateDatumSelection(t){return this.targetLinesSelection.update(t.nodeData,void 0,void 0),t.datumSelection.update(t.nodeData,void 0,void 0)}async updateDatumNodes(t){for(const{node:e}of t.datumSelection){const i=this.properties;partialAssign2(STYLING_KEYS,e,i)}for(const{node:e,datum:i}of this.targetLinesSelection)if(i.target===void 0)e.visible=!1;else{const o=this.properties.target;partialAssign2(["x1","x2","y1","y2"],e,i.target),partialAssign2(STYLING_KEYS,e,o)}}async updateColorRanges(){const t=this.getValueAxis(),e=this.getCategoryAxis();if(!t||!e)return;const[i,o]=[0,Math.max(...e.scale.range)],s=this.getBarDirection()===import_ag_charts_community103._ModuleSupport.ChartAxisDirection.Y?(a,n)=>{a.x=i,a.y=t.scale.convert(n.stop),a.height=t.scale.convert(n.start)-a.y,a.width=o}:(a,n)=>{a.x=t.scale.convert(n.start),a.y=i,a.height=o,a.width=t.scale.convert(n.stop)-a.x};this.colorRangesSelection.update(this.normalizedColorRanges);for(const{node:a,datum:n}of this.colorRangesSelection)s(a,n),a.fill=n.color}async updateNodes(t,e,i){await super.updateNodes(t,e,i),await this.updateColorRanges()}async updateLabelSelection(t){return t.labelSelection}async updateLabelNodes(t){}animateEmptyUpdateReady(t){const{datumSelection:e,annotationSelections:i}=t,o=prepareBarAnimationFunctions(collapsedStartingBarPosition(this.isVertical(),this.axes,"normal"));fromToMotion(this.id,"nodes",this.ctx.animationManager,[e],o),seriesLabelFadeInAnimation(this,"annotations",this.ctx.animationManager,...i)}animateWaitingUpdateReady(t){const{datumSelection:e,annotationSelections:i}=t;this.ctx.animationManager.stopByAnimationGroupId(this.id);const o=this.processedData?.reduced?.diff,s=prepareBarAnimationFunctions(collapsedStartingBarPosition(this.isVertical(),this.axes,"normal"));fromToMotion(this.id,"nodes",this.ctx.animationManager,[e],s,(n,r)=>createDatumId(r.xValue),o),(o?.changed??!0)&&seriesLabelFadeInAnimation(this,"annotations",this.ctx.animationManager,...i)}computeFocusBounds({datumIndex:t,seriesRect:e}){return computeBarFocusBounds2(this.contextNodeData?.nodeData[t],this.contentGroup,e)}},import_ag_charts_community104=require("ag-charts-community"),BULLET_SERIES_THEME={series:{direction:"vertical",strokeWidth:0,strokeOpacity:1,fillOpacity:1,widthRatio:.5,target:{strokeWidth:3,strokeOpacity:1,lengthRatio:.75}},axes:{[import_ag_charts_community104._Theme.CARTESIAN_AXIS_TYPE.NUMBER]:{nice:!1,crosshair:{enabled:!1}}}},BulletModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"bullet",solo:!0,moduleFactory:t=>new BulletSeries(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:import_ag_charts_community105._Theme.CARTESIAN_AXIS_TYPE.NUMBER,position:import_ag_charts_community105._Theme.POSITION.LEFT},{type:import_ag_charts_community105._Theme.CARTESIAN_AXIS_TYPE.CATEGORY,position:import_ag_charts_community105._Theme.POSITION.BOTTOM}],themeTemplate:BULLET_SERIES_THEME,swapDefaultAxesCondition:t=>t?.direction==="horizontal",paletteFactory:({takeColors:t,colorsCount:e,themeTemplateParameters:i})=>{const{fills:[o],strokes:[s]}=t(e),a=i.get(import_ag_charts_community105._Theme.DEFAULT_BACKGROUND_COLOUR),n=(Array.isArray(a)?a[0]:a)??"white",r=i.get(import_ag_charts_community105._Theme.DEFAULT_CROSS_LINES_COLOUR);return{fill:o,stroke:s,target:{stroke:r},backgroundFill:n}}},import_ag_charts_community112=require("ag-charts-community"),import_ag_charts_community110=require("ag-charts-community"),import_ag_charts_community107=require("ag-charts-community"),import_ag_charts_community106=require("ag-charts-community"),{computeBarFocusBounds:computeBarFocusBounds3,NODE_UPDATE_STATE_TO_PHASE_MAPPING}=import_ag_charts_community106._ModuleSupport;function resetCandlestickSelectionsFn(t,e){return getCoordinates(e)}function prepareCandlestickAnimationFunctions(t){return{toFn:(o,s,a)=>{if(a==="removed"){const{x:n,yLow:r,yHigh:l,width:c}=getCoordinates(s),h=s.itemId==="up"?r:l;return{x:n,y:h,yBottom:h,yHigh:h,yLow:h,width:c,height:0}}return getCoordinates(s)},fromFn:(o,s,a)=>{const n=t?"initial":NODE_UPDATE_STATE_TO_PHASE_MAPPING[a];if(a==="unknown"||a==="added"&&s!=null){const{x:r,y:l,yLow:c,yHigh:h,width:d,height:u}=getCoordinates(s);let g=s.itemId==="up"?c:h;return a==="unknown"&&(g=l+u/2),{x:r,y:g,yBottom:g,yHigh:g,yLow:g,width:d,height:0,phase:n}}return{x:o.x,y:o.y,yBottom:o.yBottom,yHigh:o.yHigh,yLow:o.yLow,width:o.width,height:o.height,phase:n}}}}function getCoordinates(t){const{bandwidth:e,scaledValues:{xValue:i,openValue:o,closeValue:s,highValue:a,lowValue:n}}=t,r=Math.min(o,s),l=isNaN(o)?s:Math.max(o,s),c=Math.min(a,n),h=Math.max(a,n);return{x:i,y:r,yBottom:l,yHigh:c,yLow:h,width:e,height:Math.max(l-r,.001)}}function computeCandleFocusBounds(t,e){const i=t.getNodeData()?.at(e.datumIndex),o=i?{x:i.scaledValues.xValue,y:i.scaledValues.highValue,width:i.bandwidth,height:i.scaledValues.lowValue-i.scaledValues.highValue}:void 0;return computeBarFocusBounds3(o,t.contentGroup,e.seriesRect)}var{motion:motion2}=import_ag_charts_community107._Scene,{extent:extent2,fixNumericExtent:fixNumericExtent3,keyProperty:keyProperty3,SeriesNodePickMode:SeriesNodePickMode2,SMALLEST_KEY_INTERVAL:SMALLEST_KEY_INTERVAL2,valueProperty:valueProperty5,diff:diff3,animationValidation:animationValidation3,convertValuesToScaleByDefs:convertValuesToScaleByDefs2,isFiniteNumber:isFiniteNumber4}=import_ag_charts_community107._ModuleSupport,{sanitizeHtml:sanitizeHtml2,Logger:Logger6}=import_ag_charts_community107._Util,{ContinuousScale:ContinuousScale2}=import_ag_charts_community107._Scale,CandlestickSeriesNodeEvent=class extends import_ag_charts_community107._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.xKey=o.properties.xKey,this.openKey=o.properties.openKey,this.closeKey=o.properties.closeKey,this.highKey=o.properties.highKey,this.lowKey=o.properties.lowKey}},OhlcSeriesBase=class extends import_ag_charts_community107._ModuleSupport.AbstractBarSeries{constructor(t,e){super({moduleCtx:t,pickModes:[SeriesNodePickMode2.NEAREST_BY_MAIN_AXIS_FIRST,SeriesNodePickMode2.EXACT_SHAPE_MATCH],directionKeys:{x:["xKey"],y:["lowKey","highKey","openKey","closeKey"]},directionNames:{x:["xName"],y:["lowName","highName","openName","closeName"]},pathsPerSeries:[],datumSelectionGarbageCollection:!1,animationAlwaysUpdateSelections:!0,animationResetFns:{datum:e}}),this.NodeEvent=CandlestickSeriesNodeEvent}animateEmptyUpdateReady({datumSelection:t}){const e=prepareCandlestickAnimationFunctions(!0);motion2.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],e)}animateWaitingUpdateReady({datumSelection:t}){const{processedData:e}=this,i=e?.reduced?.diff,o=prepareCandlestickAnimationFunctions(!1);motion2.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],o,(s,a)=>String(a.xValue),i)}async processData(t){if(!this.properties.isValid()||!this.visible)return;const{xKey:e,openKey:i,closeKey:o,highKey:s,lowKey:a}=this.properties,n=!this.ctx.animationManager.isSkipped(),r=this.getCategoryAxis()?.scale,l=this.getValueAxis()?.scale,{isContinuousX:c,xScaleType:h,yScaleType:d}=this.getScaleInformation({xScale:r,yScale:l}),u=[];n&&(this.processedData&&u.push(diff3(this.processedData)),u.push(animationValidation3())),i&&u.push(valueProperty5(i,d,{id:"openValue",invalidValue:void 0,missingValue:void 0}));const{processedData:g}=await this.requestDataModel(t,this.data,{props:[keyProperty3(e,h,{id:"xValue"}),valueProperty5(o,d,{id:"closeValue"}),valueProperty5(s,d,{id:"highValue"}),valueProperty5(a,d,{id:"lowValue"}),...c?[SMALLEST_KEY_INTERVAL2]:[],...u]});this.smallestDataInterval=g.reduced?.smallestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(t){const{processedData:e,dataModel:i,smallestDataInterval:o}=this;if(!(e&&i))return[];const{openKey:s}=this.properties;if(t===this.getBarDirection()){const g=i.getDomain(this,"lowValue","value",e),y=i.getDomain(this,"highValue","value",e),p=s?i.getDomain(this,"openValue","value",e):[],m=i.getDomain(this,"closeValue","value",e);return fixNumericExtent3([Math.min(...g,...y,...p,...m),Math.max(...y,...g,...p,...m)],this.getValueAxis())}const{index:a,def:n}=i.resolveProcessedDataDefById(this,"xValue"),r=e.domain.keys[a];if(n.type==="key"&&n.valueType==="category")return r;const l=this.getCategoryAxis(),c=extent2(r)??[NaN,NaN],h=isFiniteNumber4(o)?o:0,d=c[0]+-h,u=c[1]+h;return fixNumericExtent3([d,u],l)}createBaseNodeData(){const{visible:t,dataModel:e}=this,i=this.getCategoryAxis(),o=this.getValueAxis();if(!(e&&i&&o))return;const s=[],{xKey:a,highKey:n,lowKey:r}=this.properties,l=e.resolveProcessedDataDefsByIds(this,["xValue","openValue","closeValue","highValue","lowValue"]),{barWidth:c,groupIndex:h}=this.updateGroupScale(i),d=ContinuousScale2.is(i.scale)?c*-.5:0,{groupScale:u,processedData:g}=this,y={itemId:a,nodeData:s,labelData:[],scales:this.calculateScaling(),visible:this.visible};return t&&g?.data.forEach(({datum:p,keys:m,values:f})=>{const{xValue:v,openValue:S,closeValue:x,highValue:M,lowValue:T}=e.resolveProcessedDataDefsValues(l,{keys:m,values:f}),b=T!=null&&T<=S&&T<=x,I=M!=null&&M>=S&&M>=x;if(!b){Logger6.warnOnce(`invalid low value for key [${r}] in data element, low value cannot be higher than datum open or close values`);return}if(!I){Logger6.warnOnce(`invalid high value for key [${n}] in data element, high value cannot be lower than datum open or close values.`);return}const D=convertValuesToScaleByDefs2({defs:l,values:{xValue:v,openValue:S,closeValue:x,highValue:M,lowValue:T},xAxis:i,yAxis:o});D.xValue+=Math.round(u.convert(String(h)))+d;const N=x>S,k=this.getSeriesItemType(N),[_,O]=N?[D.openValue,D.closeValue]:[D.closeValue,D.openValue],A=O-_,L={x:D.xValue+Math.round(c)/2,y:_+A/2};s.push({series:this,itemId:k,datum:p,xKey:a,xValue:v,openValue:S,closeValue:x,highValue:M,lowValue:T,bandwidth:c>=1?c:u.rawBandwidth,scaledValues:D,midPoint:L,aggregatedValue:x})}),y}getSeriesItemType(t){return t?"up":"down"}getItemConfig(t){return this.properties.item[t]}getLegendData(t){const{id:e,data:i}=this,{xKey:o,yName:s,item:{up:a,down:n},showInLegend:r,legendItemName:l,visible:c}=this.properties;return!r||!i?.length||!o||t!=="category"?[]:[{legendType:"category",id:e,itemId:e,seriesId:e,enabled:c,label:{text:l??s??e},symbols:[{marker:{fill:a.fill??a.stroke,fillOpacity:a.fillOpacity??1,stroke:a.stroke,strokeWidth:a.strokeWidth??1,strokeOpacity:a.strokeOpacity??1,padding:0}},{marker:{fill:n.fill??n.stroke,fillOpacity:n.fillOpacity??1,stroke:n.stroke,strokeWidth:n.strokeWidth??1,strokeOpacity:n.strokeOpacity??1}}],legendItemName:l}]}getTooltipHtml(t){const{xKey:e,openKey:i,closeKey:o,highKey:s,lowKey:a,xName:n,yName:r,openName:l,closeName:c,highName:h,lowName:d,tooltip:u}=this.properties,{datum:g,itemId:y}=t,p=this.getCategoryAxis(),m=this.getValueAxis();if(!p||!m||!this.properties.isValid())return import_ag_charts_community107._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const f=T=>T.charAt(0).toUpperCase()+T.substring(1),v=sanitizeHtml2(r),x=[[e,n,p],[i,l,m],[s,h,m],[a,d,m],[o,c,m]].map(([T,b,I])=>sanitizeHtml2(`${b??f(T)}: ${I.formatDatum(g[T])}`)).join("<br/>"),M=this.getFormattedStyles(t);return u.toTooltipHtml({title:v,content:x,backgroundColor:M.stroke},{seriesId:this.id,highlighted:!1,datum:g,...M,xKey:e,openKey:i,closeKey:o,highKey:s,lowKey:a,xName:n,yName:r,openName:l,closeName:c,highName:h,lowName:d,title:v,color:M.fill,fill:M.fill,itemId:y})}isVertical(){return!0}isLabelEnabled(){return!1}async updateDatumSelection(t){const e=t.nodeData??[];return t.datumSelection.update(e)}async updateDatumNodes({datumSelection:t,isHighlight:e}){t.each((i,o)=>{const s=this.getActiveStyles(o,e);i.updateDatumStyles(o,s)})}async updateLabelNodes(t){}async updateLabelSelection(t){const{labelData:e,labelSelection:i}=t;return i.update(e)}},import_ag_charts_community108=require("ag-charts-community"),{SceneChangeDetection,BBox:BBox6,RedrawType}=import_ag_charts_community108._Scene,CandlestickBaseGroup=class extends import_ag_charts_community108._Scene.Group{constructor(){super(...arguments),this.x=0,this.y=0,this.yBottom=0,this.yHigh=0,this.yLow=0,this.width=0,this.height=0}distanceSquared(t,e){const i=import_ag_charts_community108._Scene.Selection.selectByClass(this,import_ag_charts_community108._Scene.Rect,import_ag_charts_community108._Scene.Line);return import_ag_charts_community108._ModuleSupport.nearestSquared(t,e,i).distanceSquared}get midPoint(){const t=this.datum;return t.midPoint===void 0?(import_ag_charts_community108._Util.Logger.error("CandlestickBaseGroup.datum.midPoint is undefined"),{x:NaN,y:NaN}):t.midPoint}render(t){this.updateCoordinates(),super.render(t)}};__decorateClass([SceneChangeDetection({redraw:RedrawType.MAJOR})],CandlestickBaseGroup.prototype,"x",2),__decorateClass([SceneChangeDetection({redraw:RedrawType.MAJOR})],CandlestickBaseGroup.prototype,"y",2),__decorateClass([SceneChangeDetection({redraw:RedrawType.MAJOR})],CandlestickBaseGroup.prototype,"yBottom",2),__decorateClass([SceneChangeDetection({redraw:RedrawType.MAJOR})],CandlestickBaseGroup.prototype,"yHigh",2),__decorateClass([SceneChangeDetection({redraw:RedrawType.MAJOR})],CandlestickBaseGroup.prototype,"yLow",2),__decorateClass([SceneChangeDetection({redraw:RedrawType.MAJOR})],CandlestickBaseGroup.prototype,"width",2),__decorateClass([SceneChangeDetection({redraw:RedrawType.MAJOR})],CandlestickBaseGroup.prototype,"height",2);var CandlestickGroup=class extends CandlestickBaseGroup{constructor(){super(),this.append([new import_ag_charts_community108._Scene.Rect({tag:0}),new import_ag_charts_community108._Scene.Line({tag:1}),new import_ag_charts_community108._Scene.Line({tag:2})])}updateCoordinates(){const{x:t,y:e,yBottom:i,yHigh:o,yLow:s,width:a,height:n}=this,r=import_ag_charts_community108._Scene.Selection.select(this,import_ag_charts_community108._Scene.Rect),[l]=r.selectByTag(0),[c]=r.selectByTag(1),[h]=r.selectByTag(2);if(a===0||n===0){l.visible=!1,c.visible=!1,h.visible=!1;return}l.visible=!0,c.visible=!0,h.visible=!0,l.setProperties({x:t,y:e,width:a,height:n,crisp:!0,clipBBox:new BBox6(t,e,a,n)});const d=a/2;c.setProperties({y1:Math.round(s+c.strokeWidth/2),y2:i,x:t+d}),h.setProperties({y1:Math.round(o+h.strokeWidth/2),y2:e,x:t+d})}updateDatumStyles(t,e){const{bandwidth:i}=t,{fill:o,fillOpacity:s,stroke:a,strokeWidth:n,strokeOpacity:r,lineDash:l,lineDashOffset:c,wick:h={},cornerRadius:d}=e;h.strokeWidth??(h.strokeWidth=1);const u=import_ag_charts_community108._Scene.Selection.select(this,import_ag_charts_community108._Scene.Rect),[g]=u.selectByTag(0),[y]=u.selectByTag(1),[p]=u.selectByTag(2);h.strokeWidth>i&&(h.strokeWidth=i),g.setProperties({fill:o,fillOpacity:s,strokeWidth:n,strokeOpacity:r,stroke:a,lineDash:l,lineDashOffset:c,cornerRadius:d}),y.setProperties(h),p.setProperties(h)}},import_ag_charts_community109=require("ag-charts-community"),{BaseProperties:BaseProperties17,AbstractBarSeriesProperties:AbstractBarSeriesProperties3,SeriesTooltip:SeriesTooltip3,Validate:Validate42,COLOR_STRING:COLOR_STRING9,FUNCTION:FUNCTION6,LINE_DASH:LINE_DASH7,OBJECT:OBJECT15,POSITIVE_NUMBER:POSITIVE_NUMBER12,RATIO:RATIO14,STRING:STRING20}=import_ag_charts_community109._ModuleSupport,CandlestickSeriesWick=class extends BaseProperties17{};__decorateClass([Validate42(COLOR_STRING9,{optional:!0})],CandlestickSeriesWick.prototype,"stroke",2),__decorateClass([Validate42(POSITIVE_NUMBER12)],CandlestickSeriesWick.prototype,"strokeWidth",2),__decorateClass([Validate42(RATIO14)],CandlestickSeriesWick.prototype,"strokeOpacity",2),__decorateClass([Validate42(LINE_DASH7,{optional:!0})],CandlestickSeriesWick.prototype,"lineDash",2),__decorateClass([Validate42(POSITIVE_NUMBER12)],CandlestickSeriesWick.prototype,"lineDashOffset",2);var CandlestickSeriesItem=class extends BaseProperties17{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.wick=new CandlestickSeriesWick}};__decorateClass([Validate42(COLOR_STRING9,{optional:!0})],CandlestickSeriesItem.prototype,"fill",2),__decorateClass([Validate42(RATIO14)],CandlestickSeriesItem.prototype,"fillOpacity",2),__decorateClass([Validate42(COLOR_STRING9)],CandlestickSeriesItem.prototype,"stroke",2),__decorateClass([Validate42(POSITIVE_NUMBER12)],CandlestickSeriesItem.prototype,"strokeWidth",2),__decorateClass([Validate42(RATIO14)],CandlestickSeriesItem.prototype,"strokeOpacity",2),__decorateClass([Validate42(LINE_DASH7)],CandlestickSeriesItem.prototype,"lineDash",2),__decorateClass([Validate42(POSITIVE_NUMBER12)],CandlestickSeriesItem.prototype,"lineDashOffset",2),__decorateClass([Validate42(POSITIVE_NUMBER12)],CandlestickSeriesItem.prototype,"cornerRadius",2),__decorateClass([Validate42(OBJECT15)],CandlestickSeriesItem.prototype,"wick",2);var CandlestickSeriesItems=class extends BaseProperties17{constructor(){super(...arguments),this.up=new CandlestickSeriesItem,this.down=new CandlestickSeriesItem}};__decorateClass([Validate42(OBJECT15)],CandlestickSeriesItems.prototype,"up",2),__decorateClass([Validate42(OBJECT15)],CandlestickSeriesItems.prototype,"down",2);var CandlestickSeriesProperties=class extends AbstractBarSeriesProperties3{constructor(){super(...arguments),this.tooltip=new SeriesTooltip3,this.item=new CandlestickSeriesItems}};__decorateClass([Validate42(STRING20)],CandlestickSeriesProperties.prototype,"xKey",2),__decorateClass([Validate42(STRING20)],CandlestickSeriesProperties.prototype,"openKey",2),__decorateClass([Validate42(STRING20)],CandlestickSeriesProperties.prototype,"closeKey",2),__decorateClass([Validate42(STRING20)],CandlestickSeriesProperties.prototype,"highKey",2),__decorateClass([Validate42(STRING20)],CandlestickSeriesProperties.prototype,"lowKey",2),__decorateClass([Validate42(STRING20,{optional:!0})],CandlestickSeriesProperties.prototype,"xName",2),__decorateClass([Validate42(STRING20,{optional:!0})],CandlestickSeriesProperties.prototype,"yName",2),__decorateClass([Validate42(STRING20,{optional:!0})],CandlestickSeriesProperties.prototype,"openName",2),__decorateClass([Validate42(STRING20,{optional:!0})],CandlestickSeriesProperties.prototype,"closeName",2),__decorateClass([Validate42(STRING20,{optional:!0})],CandlestickSeriesProperties.prototype,"highName",2),__decorateClass([Validate42(STRING20,{optional:!0})],CandlestickSeriesProperties.prototype,"lowName",2),__decorateClass([Validate42(OBJECT15)],CandlestickSeriesProperties.prototype,"tooltip",2),__decorateClass([Validate42(OBJECT15)],CandlestickSeriesProperties.prototype,"item",2),__decorateClass([Validate42(FUNCTION6,{optional:!0})],CandlestickSeriesProperties.prototype,"itemStyler",2);var{extractDecoratedProperties:extractDecoratedProperties2,mergeDefaults:mergeDefaults5}=import_ag_charts_community110._ModuleSupport,CandlestickSeries=class extends OhlcSeriesBase{constructor(t){super(t,resetCandlestickSelectionsFn),this.properties=new CandlestickSeriesProperties}async createNodeData(){const t=this.createBaseNodeData();if(!t)return;const e=t.nodeData.map(i=>{const{fill:o,fillOpacity:s,stroke:a,strokeWidth:n,strokeOpacity:r,lineDash:l,lineDashOffset:c,wick:h,cornerRadius:d}=this.getItemConfig(i.itemId);return{...i,fill:o,fillOpacity:s,stroke:a,strokeWidth:n,strokeOpacity:r,lineDash:l,lineDashOffset:c,wick:h,cornerRadius:d}});return{...t,nodeData:e}}getFormattedStyles(t,e=!1){const{id:i,ctx:{callbackCache:o}}=this,{xKey:s,openKey:a,closeKey:n,highKey:r,lowKey:l,itemStyler:c}=this.properties,{fill:h,fillOpacity:d,stroke:u,strokeWidth:g,strokeOpacity:y,lineDash:p,lineDashOffset:m}=this.getItemConfig(t.itemId);if(c){const f=o.call(c,{datum:t.datum,itemId:t.itemId,seriesId:i,highlighted:e,xKey:s,openKey:a,closeKey:n,highKey:r,lowKey:l,fill:h,fillOpacity:d,stroke:u,strokeWidth:g,strokeOpacity:y,lineDash:p,lineDashOffset:m});if(f)return mergeDefaults5(f,this.getSeriesStyles(t))}return this.getSeriesStyles(t)}nodeFactory(){return new CandlestickGroup}getSeriesStyles(t){const{fill:e,fillOpacity:i,stroke:o,strokeWidth:s,strokeOpacity:a,lineDash:n,lineDashOffset:r,wick:l,cornerRadius:c}=t;return{fill:e,fillOpacity:i,stroke:o,strokeWidth:s,strokeOpacity:a,lineDash:n,lineDashOffset:r,wick:extractDecoratedProperties2(l),cornerRadius:c}}getActiveStyles(t,e){let i=this.getFormattedStyles(t,e);e&&(i=mergeDefaults5(this.properties.highlightStyle.item,i));const{stroke:o,strokeWidth:s,strokeOpacity:a,lineDash:n,lineDashOffset:r}=i;return i.wick=mergeDefaults5(i.wick,{stroke:o,strokeWidth:s,strokeOpacity:a,lineDash:n,lineDashOffset:r}),i}computeFocusBounds(t){return computeCandleFocusBounds(this,t)}};CandlestickSeries.className="CandleStickSeries",CandlestickSeries.type="candlestick";var import_ag_charts_community111=require("ag-charts-community"),CANDLESTICK_SERIES_THEME={series:{highlightStyle:{item:{strokeWidth:3}}},animation:{enabled:!1},axes:{[import_ag_charts_community111._Theme.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{snap:!1}},[import_ag_charts_community111._Theme.CARTESIAN_AXIS_TYPE.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},CandlestickModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"candlestick",moduleFactory:t=>new CandlestickSeries(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:import_ag_charts_community112._Theme.CARTESIAN_AXIS_TYPE.NUMBER,position:import_ag_charts_community112._Theme.POSITION.LEFT},{type:import_ag_charts_community112._Theme.CARTESIAN_AXIS_TYPE.ORDINAL_TIME,position:import_ag_charts_community112._Theme.POSITION.BOTTOM}],themeTemplate:CANDLESTICK_SERIES_THEME,groupable:!1,paletteFactory:({takeColors:t,colorsCount:e,userPalette:i,palette:o})=>{if(i==="user-indexed"){const{fills:s,strokes:a}=t(e);return{item:{up:{fill:"transparent",stroke:a[0]},down:{fill:s[0],stroke:a[0]}}}}return{item:{up:o.up,down:o.down}}}},import_ag_charts_community118=require("ag-charts-community"),import_ag_charts_community117=require("ag-charts-community"),import_ag_charts_community114=require("ag-charts-community"),import_ag_charts_community113=require("ag-charts-community"),{Logger:Logger7}=import_ag_charts_community113._Util;function computeNodeGraph(t,e,i){i||(e=removeCircularLinks(e));const o=new Map;for(const a of t)o.set(a.id,{datum:a,linksBefore:[],linksAfter:[],maxPathLengthBefore:-1,maxPathLengthAfter:-1});let s=0;return o.forEach((a,n)=>{s=Math.max(s,computePathLength(o,e,a,n,-1,[])+computePathLength(o,e,a,n,1,[])+1)}),{links:e,nodeGraph:o,maxPathLength:s}}function findCircularLinks(t,e,i,o){const s=o.indexOf(e);if(s!==-1){for(let n=s;n<o.length;n+=1)i.add(o[n]);return}o.push(e);const{toNode:a}=e;for(const n of t)n.fromNode===a&&findCircularLinks(t,n,i,o);o.pop()}function removeCircularLinks(t){const e=new Set;for(const i of t)findCircularLinks(t,i,e,[]);return e.size!==0&&Logger7.warnOnce("Some links formed circular references. These will be removed from the output."),e.size===0?t:t.filter(i=>!e.has(i))}function computePathLength(t,e,i,o,s,a){if(a.includes(o))return 1/0;let n=s===-1?i.maxPathLengthBefore:i.maxPathLengthAfter;if(n===-1){n=0;const r=s===-1?i.linksBefore:i.linksAfter;for(const l of e){const{fromNode:c,toNode:h}=l,d=s===-1?h.id:c.id,u=s===-1?c.id:h.id,g=o===d?t.get(u):void 0;g!=null&&(r.push({node:g,link:l}),a?.push(o),n=Math.max(n,computePathLength(t,e,g,u,s,a)+1),a?.pop())}s===-1?i.maxPathLengthBefore=n:i.maxPathLengthAfter=n}return n}var{DataModelSeries,DataController,Validate:Validate43,ARRAY:ARRAY4,keyProperty:keyProperty4,valueProperty:valueProperty6}=import_ag_charts_community114._ModuleSupport,{Selection:Selection3,Group:Group8,Text:Text5}=import_ag_charts_community114._Scene,FlowProportionSeries=class extends DataModelSeries{constructor(){super(...arguments),this._chartNodes=void 0,this.nodeCount=0,this.linkCount=0,this.nodesDataController=new DataController("standalone"),this.nodesDataModel=void 0,this.nodesProcessedData=void 0,this.processedNodes=new Map,this.linkGroup=this.contentGroup.appendChild(new Group8({name:"linkGroup"})),this.nodeGroup=this.contentGroup.appendChild(new Group8({name:"nodeGroup"})),this.focusLinkGroup=this.highlightNode.appendChild(new Group8({name:"linkGroup"})),this.focusNodeGroup=this.highlightNode.appendChild(new Group8({name:"nodeGroup"})),this.highlightLinkGroup=this.highlightNode.appendChild(new Group8({name:"linkGroup"})),this.highlightNodeGroup=this.highlightNode.appendChild(new Group8({name:"nodeGroup"})),this.labelSelection=Selection3.select(this.labelGroup,Text5),this.linkSelection=Selection3.select(this.linkGroup,()=>this.linkFactory()),this.nodeSelection=Selection3.select(this.nodeGroup,()=>this.nodeFactory()),this.focusLinkSelection=Selection3.select(this.focusLinkGroup,()=>this.linkFactory()),this.focusNodeSelection=Selection3.select(this.focusNodeGroup,()=>this.nodeFactory()),this.highlightLinkSelection=Selection3.select(this.highlightLinkGroup,()=>this.linkFactory()),this.highlightNodeSelection=Selection3.select(this.highlightNodeGroup,()=>this.nodeFactory())}get nodes(){return this.properties.nodes??this._chartNodes}setChartNodes(t){this._chartNodes=t,this.nodes===t&&(this.nodeDataRefresh=!0)}getNodeData(){return this.contextNodeData?.nodeData}async processData(t){const{nodesDataController:e,data:i,nodes:o}=this;if(i==null||!this.properties.isValid())return;const{fromKey:s,toKey:a,sizeKey:n,idKey:r,labelKey:l}=this.properties,c=o!=null?e.request(this.id,o,{props:[keyProperty4(r,void 0,{id:"idValue",includeProperty:!1}),...l!=null?[valueProperty6(l,void 0,{id:"labelValue",includeProperty:!1})]:[]],groupByKeys:!0}):null,h=this.requestDataModel(t,i,{props:[valueProperty6(s,void 0,{id:"fromValue",includeProperty:!1}),valueProperty6(a,void 0,{id:"toValue",includeProperty:!1}),...n!=null?[valueProperty6(n,void 0,{id:"sizeValue",includeProperty:!1,missingValue:0})]:[]],groupByKeys:!1});o!=null&&e.execute();const[d,u]=await Promise.all([c,h]);this.nodesDataModel=d?.dataModel,this.nodesProcessedData=d?.processedData;const{fills:g,strokes:y}=this.properties,p=new Map;if(d==null){const m=u.dataModel.resolveProcessedDataIndexById(this,"fromValue"),f=u.dataModel.resolveProcessedDataIndexById(this,"toValue"),v=S=>{const x=p.size,M=S,T=g[x%g.length],b=y[x%y.length];return{series:this,itemId:void 0,datum:{},type:1,index:x,id:S,label:M,fill:T,stroke:b}};u.processedData.data.forEach(({values:S})=>{const x=S[m],M=S[f];x==null||M==null||(p.has(x)||p.set(x,v(x)),p.has(M)||p.set(M,v(M)))})}else{const m=d.dataModel.resolveProcessedDataIndexById(this,"idValue"),f=l!=null?d.dataModel.resolveProcessedDataIndexById(this,"labelValue"):void 0;d.processedData.data.forEach(({datum:v,keys:S,values:x},M)=>{const T=x[0],b=S[m],I=f!=null?T[f]:void 0,D=g[M%g.length],N=y[M%y.length];p.set(b,{series:this,itemId:void 0,datum:v,type:1,index:M,id:b,label:I,fill:D,stroke:N})})}this.processedNodes=p}getNodeGraph(t,e,{includeCircularReferences:i}){const{dataModel:o,processedData:s}=this;if(o==null||s==null){const{links:y,nodeGraph:p,maxPathLength:m}=computeNodeGraph(new Map().values(),[],i);return this.nodeCount=0,this.linkCount=0,{nodeGraph:p,links:y,maxPathLength:m}}const{sizeKey:a}=this.properties,n=o.resolveProcessedDataIndexById(this,"fromValue"),r=o.resolveProcessedDataIndexById(this,"toValue"),l=a!=null?o.resolveProcessedDataIndexById(this,"sizeValue"):void 0,c=new Map;this.processedNodes.forEach(y=>{const p=t(y);c.set(y.id,p)});const h=[];s.data.forEach(({datum:y,values:p},m)=>{const f=p[n],v=p[r],S=l!=null?p[l]:1,x=c.get(f),M=c.get(v);if(S<=0||x==null||M==null)return;const T=e({series:this,itemId:void 0,datum:y,type:0,index:m,fromNode:x,toNode:M,size:S});h.push(T)});const{links:d,nodeGraph:u,maxPathLength:g}=computeNodeGraph(c.values(),h,i);return this.nodeCount=u.size,this.linkCount=d.length,{nodeGraph:u,links:d,maxPathLength:g}}async updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=await this.createNodeData(),this.nodeDataRefresh=!1)}async update(t){const{seriesRect:e}=t,i={seriesRectWidth:e?.width??0,seriesRectHeight:e?.height??0};(this._nodeDataDependencies==null||this._nodeDataDependencies.seriesRectWidth!==i.seriesRectWidth||this._nodeDataDependencies.seriesRectHeight!==i.seriesRectHeight)&&(this._nodeDataDependencies=i),await this.updateSelections();const o=this.contextNodeData?.nodeData??[],s=this.contextNodeData?.labelData??[];let a=this.ctx.highlightManager?.getActiveHighlight();if(a?.series===this&&a.type==null){const{itemId:h}=a;a=h!=null?o.find(d=>d.type===1&&d.id===h):void 0}else a?.series!==this&&(a=void 0);this.contentGroup.visible=this.visible,this.contentGroup.opacity=a!=null?this.properties.highlightStyle.series.dimOpacity??1:1,this.labelSelection=await this.updateLabelSelection({labelData:s,labelSelection:this.labelSelection}),await this.updateLabelNodes({labelSelection:this.labelSelection}),this.linkSelection=await this.updateLinkSelection({nodeData:o.filter(h=>h.type===0),datumSelection:this.linkSelection}),await this.updateLinkNodes({datumSelection:this.linkSelection,isHighlight:!1}),this.nodeSelection=await this.updateNodeSelection({nodeData:o.filter(h=>h.type===1),datumSelection:this.nodeSelection}),await this.updateNodeNodes({datumSelection:this.nodeSelection,isHighlight:!1});let n,r,l,c;a?.type===1?(n=o.filter(h=>h.type===0&&(h.toNode===a||h.fromNode===a)),r=n.map(h=>h.fromNode===a?h.toNode:h.fromNode),r.push(a),l=[],c=[a]):a?.type===0?(n=[a],r=[a.fromNode,a.toNode],l=[a],c=[]):(n=[],r=[],l=[],c=[]),this.focusLinkSelection=await this.updateLinkSelection({nodeData:n,datumSelection:this.focusLinkSelection}),await this.updateLinkNodes({datumSelection:this.focusLinkSelection,isHighlight:!1}),this.focusNodeSelection=await this.updateNodeSelection({nodeData:r,datumSelection:this.focusNodeSelection}),await this.updateNodeNodes({datumSelection:this.focusNodeSelection,isHighlight:!1}),this.highlightLinkSelection=await this.updateLinkSelection({nodeData:l,datumSelection:this.highlightLinkSelection}),await this.updateLinkNodes({datumSelection:this.highlightLinkSelection,isHighlight:!0}),this.highlightNodeSelection=await this.updateNodeSelection({nodeData:c,datumSelection:this.highlightNodeSelection}),await this.updateNodeNodes({datumSelection:this.highlightNodeSelection,isHighlight:!0})}resetAnimation(t){}getSeriesDomain(t){return[]}getLegendData(t){return t!=="category"?[]:Array.from(this.processedNodes.values(),({id:e,label:i,fill:o,stroke:s})=>({legendType:"category",id:this.id,itemId:e,seriesId:this.id,enabled:!0,label:{text:i??e},symbols:[{marker:{fill:o,fillOpacity:1,stroke:s,strokeWidth:0,strokeOpacity:1}}]}))}pickNodeClosestDatum({x:t,y:e}){let i=1/0,o;return this.linkSelection.each((s,a)=>{const n=s.containsPoint(t,e)?0:1/0;n<i&&(i=n,o=a)}),this.nodeSelection.each((s,a)=>{const n=s.distanceSquared(t,e);n<i&&(i=n,o=a)}),o!=null?{datum:o,distance:Math.sqrt(i)}:void 0}getDatumAriaText(t,e){if(t.type===0)return this.ctx.localeManager.t("ariaAnnounceFlowProportionLink",{index:t.index+1,count:this.linkCount,from:t.fromNode.id,to:t.toNode.id,size:t.size,sizeName:this.properties.sizeName??this.properties.sizeKey});if(t.type===1)return this.ctx.localeManager.t("ariaAnnounceFlowProportionNode",{index:t.index+1,count:this.nodeCount,description:e})}};__decorateClass([Validate43(ARRAY4,{optional:!0,property:"nodes"})],FlowProportionSeries.prototype,"_chartNodes",2);var import_ag_charts_community115=require("ag-charts-community"),{BBox:BBox7,Path:Path5,ScenePathChangeDetection}=import_ag_charts_community115._Scene;function bezierControlPoints({radius:t,startAngle:e,endAngle:i,tension:o}){const s=t*Math.cos(e),a=t*Math.sin(e),n=t*Math.cos(i),r=t*Math.sin(i),l=s*o,c=a*o,h=n*o,d=r*o;return{x:[s,l,h,n],y:[a,c,d,r]}}var ChordLink=class extends Path5{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.radius=0,this.startAngle1=0,this.endAngle1=0,this.startAngle2=0,this.endAngle2=0,this.tension=1}computeBBox(){const{centerX:t,centerY:e,radius:i,startAngle1:o,endAngle1:s,startAngle2:a,endAngle2:n,tension:r}=this,l=bezierControlPoints({radius:i,startAngle:o,endAngle:n,tension:r}),c=bezierControlPoints({radius:i,startAngle:a,endAngle:s,tension:r}),h=Math.min(...l.x,...c.x),d=Math.max(...l.x,...c.x)-h,u=Math.min(...l.y,...c.y),g=Math.max(...l.y,...c.y)-u;return new BBox7(t+h,e+u,d,g)}tensionedCurveTo(t,e,i,o,s,a,n,r){const{path:l,tension:c}=this,h=1-c;l.cubicCurveTo((i-t)*h+t,(o-e)*h+e,(s-n)*h+n,(a-r)*h+r,n,r)}updatePath(){const{path:t,centerX:e,centerY:i,radius:o}=this;let{startAngle1:s,endAngle1:a,startAngle2:n,endAngle2:r}=this;s>n&&([s,n]=[n,s],[a,r]=[r,a]),t.clear();const l=e+o*Math.cos(s),c=i+o*Math.sin(s);t.moveTo(l,c),this.tensionedCurveTo(l,c,e,i,e,i,e+o*Math.cos(r),i+o*Math.sin(r)),t.arc(e,i,o,r,n,!0),this.tensionedCurveTo(e+o*Math.cos(n),i+o*Math.sin(n),e,i,e,i,e+o*Math.cos(a),i+o*Math.sin(a)),t.arc(e,i,o,a,s,!0),t.closePath()}};__decorateClass([ScenePathChangeDetection()],ChordLink.prototype,"centerX",2),__decorateClass([ScenePathChangeDetection()],ChordLink.prototype,"centerY",2),__decorateClass([ScenePathChangeDetection()],ChordLink.prototype,"radius",2),__decorateClass([ScenePathChangeDetection()],ChordLink.prototype,"startAngle1",2),__decorateClass([ScenePathChangeDetection()],ChordLink.prototype,"endAngle1",2),__decorateClass([ScenePathChangeDetection()],ChordLink.prototype,"startAngle2",2),__decorateClass([ScenePathChangeDetection()],ChordLink.prototype,"endAngle2",2),__decorateClass([ScenePathChangeDetection()],ChordLink.prototype,"tension",2);var import_ag_charts_community116=require("ag-charts-community"),{BaseProperties:BaseProperties18,SeriesTooltip:SeriesTooltip4,SeriesProperties,ARRAY:ARRAY5,COLOR_STRING:COLOR_STRING10,COLOR_STRING_ARRAY,FUNCTION:FUNCTION7,LINE_DASH:LINE_DASH8,OBJECT:OBJECT16,POSITIVE_NUMBER:POSITIVE_NUMBER13,RATIO:RATIO15,STRING:STRING21,Validate:Validate44}=import_ag_charts_community116._ModuleSupport,{Label:Label3}=import_ag_charts_community116._Scene,ChordSeriesLabelProperties=class extends Label3{constructor(){super(...arguments),this.spacing=1,this.maxWidth=1}};__decorateClass([Validate44(POSITIVE_NUMBER13)],ChordSeriesLabelProperties.prototype,"spacing",2),__decorateClass([Validate44(POSITIVE_NUMBER13)],ChordSeriesLabelProperties.prototype,"maxWidth",2);var ChordSeriesLinkProperties=class extends BaseProperties18{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0,this.tension=0}};__decorateClass([Validate44(COLOR_STRING10,{optional:!0})],ChordSeriesLinkProperties.prototype,"fill",2),__decorateClass([Validate44(RATIO15)],ChordSeriesLinkProperties.prototype,"fillOpacity",2),__decorateClass([Validate44(COLOR_STRING10,{optional:!0})],ChordSeriesLinkProperties.prototype,"stroke",2),__decorateClass([Validate44(RATIO15)],ChordSeriesLinkProperties.prototype,"strokeOpacity",2),__decorateClass([Validate44(POSITIVE_NUMBER13)],ChordSeriesLinkProperties.prototype,"strokeWidth",2),__decorateClass([Validate44(LINE_DASH8)],ChordSeriesLinkProperties.prototype,"lineDash",2),__decorateClass([Validate44(POSITIVE_NUMBER13)],ChordSeriesLinkProperties.prototype,"lineDashOffset",2),__decorateClass([Validate44(RATIO15)],ChordSeriesLinkProperties.prototype,"tension",2),__decorateClass([Validate44(FUNCTION7,{optional:!0})],ChordSeriesLinkProperties.prototype,"itemStyler",2);var ChordSeriesNodeProperties=class extends BaseProperties18{constructor(){super(...arguments),this.spacing=1,this.width=1,this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};__decorateClass([Validate44(POSITIVE_NUMBER13)],ChordSeriesNodeProperties.prototype,"spacing",2),__decorateClass([Validate44(POSITIVE_NUMBER13)],ChordSeriesNodeProperties.prototype,"width",2),__decorateClass([Validate44(COLOR_STRING10,{optional:!0})],ChordSeriesNodeProperties.prototype,"fill",2),__decorateClass([Validate44(RATIO15)],ChordSeriesNodeProperties.prototype,"fillOpacity",2),__decorateClass([Validate44(COLOR_STRING10,{optional:!0})],ChordSeriesNodeProperties.prototype,"stroke",2),__decorateClass([Validate44(RATIO15)],ChordSeriesNodeProperties.prototype,"strokeOpacity",2),__decorateClass([Validate44(POSITIVE_NUMBER13)],ChordSeriesNodeProperties.prototype,"strokeWidth",2),__decorateClass([Validate44(LINE_DASH8)],ChordSeriesNodeProperties.prototype,"lineDash",2),__decorateClass([Validate44(POSITIVE_NUMBER13)],ChordSeriesNodeProperties.prototype,"lineDashOffset",2),__decorateClass([Validate44(FUNCTION7,{optional:!0})],ChordSeriesNodeProperties.prototype,"itemStyler",2);var ChordSeriesProperties=class extends SeriesProperties{constructor(){super(...arguments),this.idKey="",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.sizeKey=void 0,this.sizeName=void 0,this.nodes=void 0,this.fills=[],this.strokes=[],this.label=new ChordSeriesLabelProperties,this.link=new ChordSeriesLinkProperties,this.node=new ChordSeriesNodeProperties,this.tooltip=new SeriesTooltip4}};__decorateClass([Validate44(STRING21)],ChordSeriesProperties.prototype,"fromKey",2),__decorateClass([Validate44(STRING21)],ChordSeriesProperties.prototype,"toKey",2),__decorateClass([Validate44(STRING21)],ChordSeriesProperties.prototype,"idKey",2),__decorateClass([Validate44(STRING21,{optional:!0})],ChordSeriesProperties.prototype,"idName",2),__decorateClass([Validate44(STRING21,{optional:!0})],ChordSeriesProperties.prototype,"labelKey",2),__decorateClass([Validate44(STRING21,{optional:!0})],ChordSeriesProperties.prototype,"labelName",2),__decorateClass([Validate44(STRING21,{optional:!0})],ChordSeriesProperties.prototype,"sizeKey",2),__decorateClass([Validate44(STRING21,{optional:!0})],ChordSeriesProperties.prototype,"sizeName",2),__decorateClass([Validate44(ARRAY5,{optional:!0})],ChordSeriesProperties.prototype,"nodes",2),__decorateClass([Validate44(COLOR_STRING_ARRAY)],ChordSeriesProperties.prototype,"fills",2),__decorateClass([Validate44(COLOR_STRING_ARRAY)],ChordSeriesProperties.prototype,"strokes",2),__decorateClass([Validate44(OBJECT16)],ChordSeriesProperties.prototype,"label",2),__decorateClass([Validate44(OBJECT16)],ChordSeriesProperties.prototype,"link",2),__decorateClass([Validate44(OBJECT16)],ChordSeriesProperties.prototype,"node",2),__decorateClass([Validate44(OBJECT16)],ChordSeriesProperties.prototype,"tooltip",2);var{SeriesNodePickMode:SeriesNodePickMode3,CachedTextMeasurerPool:CachedTextMeasurerPool4,TextWrapper:TextWrapper5,createDatumId:createDatumId2,EMPTY_TOOLTIP_CONTENT}=import_ag_charts_community117._ModuleSupport,{angleBetween:angleBetween3,normalizeAngle360:normalizeAngle3605,isBetweenAngles,sanitizeHtml:sanitizeHtml3,Logger:Logger8}=import_ag_charts_community117._Util,{Sector:Sector3,Text:Text6,evaluateBezier}=import_ag_charts_community117._Scene,nodeMidAngle=t=>t.startAngle+angleBetween3(t.startAngle,t.endAngle)/2,ChordSeries=class extends FlowProportionSeries{constructor(t){super({moduleCtx:t,contentGroupVirtual:!1,pickModes:[SeriesNodePickMode3.NEAREST_NODE,SeriesNodePickMode3.EXACT_SHAPE_MATCH]}),this.properties=new ChordSeriesProperties}isLabelEnabled(){return(this.properties.labelKey!=null||this.nodes==null)&&this.properties.label.enabled}linkFactory(){return new ChordLink}nodeFactory(){return new Sector3}async createNodeData(){const{id:t,_nodeDataDependencies:{seriesRectWidth:e,seriesRectHeight:i}={seriesRectWidth:0,seriesRectHeight:0}}=this,{fromKey:o,toKey:s,sizeKey:a,label:{spacing:n,maxWidth:r,fontSize:l},node:{width:c,spacing:h}}=this.properties,d=e/2,u=i/2;let g=[];const y=A=>String(A),{nodeGraph:p,links:m}=this.getNodeGraph(A=>{const L=this.getLabelText(this.properties.label,{datum:A.datum,value:A.label,fromKey:o,toKey:s,sizeKey:a},y);return{...A,label:L,size:0,centerX:d,centerY:u,innerRadius:NaN,outerRadius:NaN,startAngle:NaN,endAngle:NaN}},A=>({...A,centerX:d,centerY:u,radius:NaN,startAngle1:NaN,endAngle1:NaN,startAngle2:NaN,endAngle2:NaN}),{includeCircularReferences:!0});let f=0;p.forEach(({datum:A,linksBefore:L,linksAfter:E},C)=>{const R=L.reduce((P,{link:w})=>P+w.size,0)+E.reduce((P,{link:w})=>P+w.size,0);R===0?p.delete(C):(A.size=R,f+=A.size)});let v=0;if(this.isLabelEnabled()){const A=this.properties.label.getFont();let L=0;p.forEach(({datum:E})=>{const{id:C,label:R}=E;if(R==null)return;const P=TextWrapper5.wrapText(R,{maxWidth:r,font:this.properties.label,textWrap:"never"}),{width:w}=CachedTextMeasurerPool4.measureText(P,{font:A,textAlign:"left",textBaseline:"middle"});L=Math.max(w,L),g.push({id:C,text:P,centerX:d,centerY:u,angle:NaN,radius:NaN})}),v=L+n}const S=p.size;let x=Math.min(e,i)/2-c-v,M=h/x;if(v!==0&&(S*M>=1.5*Math.PI||x<=0)&&(g=[],x=Math.min(e,i)/2-c,M=h/x),S*M>=2*Math.PI||x<=0)return Logger8.warnOnce("There was insufficient space to display the Chord Series."),{itemId:this.id,nodeData:[],labelData:[]};const T=x,b=x+c,I=Math.max((2*Math.PI-S*M)/f,0);let D=0;p.forEach(({datum:A})=>{A.innerRadius=T,A.outerRadius=b,A.startAngle=D,A.endAngle=D+A.size*I,D=A.endAngle+M;const L=(A.innerRadius+A.outerRadius)/2,E=nodeMidAngle(A);A.midPoint={x:A.centerX+L*Math.cos(E),y:A.centerY+L*Math.sin(E)}});const N=[];p.forEach(({datum:A,linksBefore:L,linksAfter:E})=>{const C=nodeMidAngle(A),R=[...L.map(w=>({link:w.link,distance:angleBetween3(nodeMidAngle(w.node.datum),C),after:!1})),...E.map(w=>({link:w.link,distance:angleBetween3(nodeMidAngle(w.node.datum),C),after:!0}))];let P=A.startAngle;R.sort((w,z)=>w.distance-z.distance).forEach(({link:w,after:z})=>{const B=w.size*I;z?(w.startAngle1=P,w.endAngle1=P+B):(w.startAngle2=P,w.endAngle2=P+B),P+=w.size*I}),N.push(A)});const{tension:k}=this.properties.link;m.forEach(A=>{A.radius=x;const L=bezierControlPoints({radius:x,startAngle:A.startAngle1,endAngle:A.endAngle2,tension:k}),E=bezierControlPoints({radius:x,startAngle:A.startAngle2,endAngle:A.endAngle1,tension:k}),C=evaluateBezier(...L.x,.5),R=evaluateBezier(...L.y,.5),P=evaluateBezier(...E.x,.5),w=evaluateBezier(...E.y,.5);A.midPoint={x:A.centerX+(C+P)/2,y:A.centerY+(R+w)/2},N.push(A)}),g.forEach(A=>{const L=p.get(A.id)?.datum;L!=null&&(A.radius=b+n,A.angle=normalizeAngle3605(L.startAngle+angleBetween3(L.startAngle,L.endAngle)/2))}),g.sort((A,L)=>A.angle-L.angle);let _=1/0,O=-1/0;return g=g.filter(A=>{const L=l*Text6.defaultLineHeightRatio,E=Math.atan2(L/2,A.radius),C=A.angle-E,R=A.angle+E;return isBetweenAngles(_,C,R)||isBetweenAngles(O,C,R)?!1:(_=Math.min(C,_),O=Math.max(R,O),!0)}),{itemId:t,nodeData:N,labelData:g}}async updateLabelSelection(t){const e=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(e)}async updateLabelNodes(t){const{labelSelection:e}=t,{color:i,fontStyle:o,fontWeight:s,fontSize:a,fontFamily:n}=this.properties.label;e.each((r,{text:l,centerX:c,centerY:h,radius:d,angle:u})=>{r.visible=!0,r.translationX=c+d*Math.cos(u),r.translationY=h+d*Math.sin(u),r.text=l,r.fill=i,r.fontStyle=o,r.fontWeight=s,r.fontSize=a,r.fontFamily=n,r.textBaseline="middle",Math.cos(u)>=0?(r.textAlign="left",r.rotation=u):(r.textAlign="right",r.rotation=u-Math.PI)})}async updateNodeSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>createDatumId2([e.type,e.id]))}async updateNodeNodes(t){const{datumSelection:e,isHighlight:i}=t,{id:o,properties:s,ctx:{callbackCache:a}}=this,{fromKey:n,toKey:r,sizeKey:l}=this.properties,{fill:c,fillOpacity:h,stroke:d,strokeOpacity:u,lineDash:g,lineDashOffset:y,itemStyler:p}=s.node,m=i?s.highlightStyle.item:void 0,f=this.getStrokeWidth(s.node.strokeWidth);e.each((v,S)=>{const x=c??S.fill,M=d??S.stroke;let T;if(p!=null){const{label:b,size:I}=S;T=a.call(p,{seriesId:o,datum:S.datum,label:b,size:I,fromKey:n,toKey:r,sizeKey:l,fill:x,fillOpacity:h,strokeOpacity:u,stroke:M,strokeWidth:f,lineDash:g,lineDashOffset:y,highlighted:i})}v.centerX=S.centerX,v.centerY=S.centerY,v.innerRadius=S.innerRadius,v.outerRadius=S.outerRadius,v.startAngle=S.startAngle,v.endAngle=S.endAngle,v.fill=m?.fill??T?.fill??x,v.fillOpacity=m?.fillOpacity??T?.fillOpacity??h,v.stroke=m?.stroke??T?.stroke??M,v.strokeOpacity=m?.strokeOpacity??T?.strokeOpacity??u,v.strokeWidth=m?.strokeWidth??T?.strokeWidth??f,v.lineDash=m?.lineDash??T?.lineDash??g,v.lineDashOffset=m?.lineDashOffset??T?.lineDashOffset??y,v.inset=v.strokeWidth/2})}async updateLinkSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>createDatumId2([e.type,e.index,e.fromNode.id,e.toNode.id]))}async updateLinkNodes(t){const{datumSelection:e,isHighlight:i}=t,{id:o,properties:s,ctx:{callbackCache:a}}=this,{fromKey:n,toKey:r,sizeKey:l}=s,{fill:c,fillOpacity:h,stroke:d,strokeOpacity:u,lineDash:g,lineDashOffset:y,tension:p,itemStyler:m}=s.link,f=i?s.highlightStyle.item:void 0,v=this.getStrokeWidth(s.link.strokeWidth);e.each((S,x)=>{const M=c??x.fromNode.fill,T=d??x.fromNode.stroke;let b;m!=null&&(b=a.call(m,{seriesId:o,datum:x.datum,fromKey:n,toKey:r,sizeKey:l,fill:M,fillOpacity:h,strokeOpacity:u,stroke:T,strokeWidth:v,lineDash:g,lineDashOffset:y,tension:p,highlighted:i})),S.centerX=x.centerX,S.centerY=x.centerY,S.radius=x.radius,S.startAngle1=x.startAngle1,S.endAngle1=x.endAngle1,S.startAngle2=x.startAngle2,S.endAngle2=x.endAngle2,S.fill=f?.fill??b?.fill??M,S.fillOpacity=f?.fillOpacity??b?.fillOpacity??h,S.stroke=f?.stroke??b?.stroke??T,S.strokeOpacity=f?.strokeOpacity??b?.strokeOpacity??u,S.strokeWidth=f?.strokeWidth??b?.strokeWidth??v,S.lineDash=f?.lineDash??b?.lineDash??g,S.lineDashOffset=f?.lineDashOffset??b?.lineDashOffset??y,S.tension=b?.tension??p})}resetAnimation(t){}getTooltipHtml(t){const{id:e,processedData:i,ctx:{callbackCache:o},properties:s}=this;if(!i||!s.isValid())return EMPTY_TOOLTIP_CONTENT;const{fromKey:a,toKey:n,sizeKey:r,sizeName:l,tooltip:c}=s,{datum:h,itemId:d}=t;let u;const g=[];let y;if(t.type===0){const{fillOpacity:f,strokeOpacity:v,strokeWidth:S,lineDash:x,lineDashOffset:M,tension:T,itemStyler:b}=s.link,{fromNode:I,toNode:D,size:N}=t;u=`${I.label??I.id} - ${D.label??D.id}`,r!=null&&g.push(sanitizeHtml3(`${l??r}: `+N)),y=s.link.fill??I.fill;const k=s.link.stroke??I.stroke;let _;b!=null&&(_=o.call(b,{seriesId:e,datum:h.datum,fromKey:a,toKey:n,sizeKey:r,fill:y,fillOpacity:f,strokeOpacity:v,stroke:k,strokeWidth:S,lineDash:x,lineDashOffset:M,tension:T,highlighted:!0})),y=_?.fill??y}else{const{fillOpacity:f,strokeOpacity:v,strokeWidth:S,lineDash:x,lineDashOffset:M,itemStyler:T}=s.node,{id:b,label:I,size:D}=t;u=I??b,r!=null&&g.push(sanitizeHtml3(`${l??r}: `+D)),y=s.link.fill??t.fill;const N=s.link.stroke??t.stroke;let k;T!=null&&(k=o.call(T,{seriesId:e,datum:h.datum,label:I,size:D,fromKey:a,toKey:n,sizeKey:r,fill:y,fillOpacity:f,strokeOpacity:v,stroke:N,strokeWidth:S,lineDash:x,lineDashOffset:M,highlighted:!0})),y=k?.fill??t.fill}const p=g.join("<br>"),m=y;return c.toTooltipHtml({title:u,content:p,backgroundColor:m},{seriesId:e,datum:h,title:u,color:m,itemId:d,fromKey:a,toKey:n,sizeKey:r,sizeName:l,...this.getModuleTooltipParams()})}getLabelData(){return[]}computeFocusBounds({datumIndex:t}){const e=this.contextNodeData?.nodeData[t];if(e?.type===1){for(const i of this.nodeSelection)if(i.datum===e)return i.node;return}else if(e?.type===0){for(const i of this.linkSelection)if(i.datum===e)return i.node;return}}};ChordSeries.className="ChordSeries",ChordSeries.type="chord";var{DEFAULT_FONT_FAMILY,DEFAULT_LABEL_COLOUR}=import_ag_charts_community118._Theme,ChordModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["flow-proportion"],solo:!0,identifier:"chord",tooltipDefaults:{range:"exact"},moduleFactory:t=>new ChordSeries(t),themeTemplate:{series:{highlightStyle:{series:{dimOpacity:.2}},label:{fontFamily:DEFAULT_FONT_FAMILY,color:DEFAULT_LABEL_COLOUR,spacing:5,maxWidth:100},node:{spacing:8,width:10,strokeWidth:0},link:{fillOpacity:.5,strokeWidth:0,tension:.4}},legend:{enabled:!1,toggleSeries:!1}},paletteFactory({takeColors:t,colorsCount:e}){const{fills:i,strokes:o}=t(e);return{fills:i,strokes:o}}},import_ag_charts_community124=require("ag-charts-community"),import_ag_charts_community122=require("ag-charts-community"),import_ag_charts_community119=require("ag-charts-community"),{CachedTextMeasurerPool:CachedTextMeasurerPool5,TextUtils:TextUtils3,TextWrapper:TextWrapper6,findMaxValue}=import_ag_charts_community119._ModuleSupport,{Logger:Logger9}=import_ag_charts_community119._Util;function generateLabelSecondaryLabelFontSizeCandidates(t,e){const{fontSize:i,minimumFontSize:o=i}=t,{fontSize:s,minimumFontSize:a=s}=e,n=i-o,r=s-a;let l=t.fontSize,c=e.fontSize;const h=[{labelFontSize:i,secondaryLabelFontSize:s}];for(;l>o||c>a;){const d=n>0?(l-o)/n:-1,u=r>0?(c-a)/r:-1;d>u?l--:c--,h.push({labelFontSize:l,secondaryLabelFontSize:c})}return h.reverse(),h}function formatStackedLabels(t,e,i,o,{padding:s},a){const{spacing:n=0}=e,r=2*s,l=2*s+n,c=(e.minimumFontSize??e.fontSize)+(o.minimumFontSize??o.fontSize);if(c>a(c+l,!1).height-l)return;const h=generateLabelSecondaryLabelFontSizeCandidates(e,o),d={fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight},u={fontFamily:o.fontFamily,fontSize:o.fontSize,fontStyle:o.fontStyle,fontWeight:o.fontWeight};let g,y;return findMaxValue(0,h.length-1,p=>{const{labelFontSize:m,secondaryLabelFontSize:f}=h[p],v=p===0,S=TextUtils3.getLineHeight(m),x=TextUtils3.getLineHeight(f),M=a(S+x+l,v),T=M.width-r,b=M.height-l;if(S+x>b||((g==null||g.fontSize!==m)&&(d.fontSize=m,g=wrapLabel(t,T,b,d,e.wrapping,v?e.overflowStrategy:"hide")),g==null||g.width>T||g.height>b)||((y==null||y.fontSize!==f)&&(u.fontSize=f,y=wrapLabel(i,T,b,u,o.wrapping,v?o.overflowStrategy:"hide")),y==null))return;const I=g.height+y.height;if(!(y.width>T||I>b))return{width:Math.max(g.width,y.width),height:I+n,meta:M.meta,label:g,secondaryLabel:y}})}function formatSingleLabel(t,e,{padding:i},o){const s=2*i,a=Math.min(e.minimumFontSize??e.fontSize,e.fontSize),n={fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight};return findMaxValue(a,e.fontSize,r=>{const l=TextUtils3.getLineHeight(r),c=r===a,h=o(l+s,c),d=h.width-s,u=h.height-s;if(l>u)return;n.fontSize=r;const g=TextWrapper6.wrapLines(t,{maxWidth:d,maxHeight:u,font:n,textWrap:e.wrapping,overflow:c?e.overflowStrategy:"hide"});if(!g.length)return;const y=clipLines(g,{lineHeight:l,font:n,maxWidth:d,maxHeight:u});if(y)return[{fontSize:r,lineHeight:l,...y},h.meta]})}function hasInvalidFontSize(t){return t?.minimumFontSize!=null&&t?.fontSize&&t?.minimumFontSize>t?.fontSize}function formatLabels(t,e,i,o,s,a){const n=e.enabled?t:void 0,r=o.enabled?i:void 0;(hasInvalidFontSize(e)||hasInvalidFontSize(o))&&Logger9.warnOnce("minimumFontSize should be set to a value less than or equal to the font size");let l;n!=null&&r!=null&&(l=formatStackedLabels(n,e,r,o,s,a));let c;if(l==null&&n!=null&&(c=formatSingleLabel(n,e,s,a)),c!=null){const[d,u]=c;l={width:d.width,height:d.height,meta:u,label:d,secondaryLabel:void 0}}let h;if(l==null&&n==null&&r!=null&&(h=formatSingleLabel(r,o,s,a)),h!=null){const[d,u]=h;l={width:d.width,height:d.height,meta:u,label:void 0,secondaryLabel:d}}return l}function wrapLabel(t,e,i,o,s,a){const n=TextWrapper6.wrapLines(t,{maxWidth:e,maxHeight:i,font:o,textWrap:s,overflow:a});if(!n.length)return;const r=TextUtils3.getLineHeight(o.fontSize),{width:l}=CachedTextMeasurerPool5.measureLines(n,{font:o});return{width:l,lineHeight:r,text:n.join(`
`),height:n.length*r,fontSize:o.fontSize}}function clipLines(t,{font:e,lineHeight:i=TextUtils3.defaultLineHeight,maxWidth:o,maxHeight:s=1/0}){let a=i*t.length;for(;a>s;){if(t.length===1)return;t.pop(),t[t.length-1]=TextWrapper6.appendEllipsis(t.at(-1)),a=i*t.length}const n=CachedTextMeasurerPool5.measureLines(t,{font:e});let r,l;if(n.width>o){const c=[];l=0;for(const h of n.lineMetrics){if(h.width>o){if(!c.length)return;break}c.push(h.text),l=Math.max(l,h.width)}r=TextWrapper6.appendEllipsis(c.join(`
`))}else r=t.join(`
`),l=n.width;return{text:r,width:l,height:a}}var import_ag_charts_community121=require("ag-charts-community"),import_ag_charts_community120=require("ag-charts-community"),{Validate:Validate45,NUMBER:NUMBER11,TEXT_WRAP,OVERFLOW_STRATEGY}=import_ag_charts_community120._ModuleSupport,BaseAutoSizedLabel=class extends import_ag_charts_community120._Scene.Label{constructor(){super(...arguments),this.wrapping="on-space",this.overflowStrategy="ellipsis"}};__decorateClass([Validate45(TEXT_WRAP)],BaseAutoSizedLabel.prototype,"wrapping",2),__decorateClass([Validate45(OVERFLOW_STRATEGY)],BaseAutoSizedLabel.prototype,"overflowStrategy",2),__decorateClass([Validate45(NUMBER11,{optional:!0})],BaseAutoSizedLabel.prototype,"minimumFontSize",2);var AutoSizedLabel=class extends BaseAutoSizedLabel{constructor(){super(...arguments),this.spacing=0}};__decorateClass([Validate45(NUMBER11)],AutoSizedLabel.prototype,"spacing",2);var AutoSizeableSecondaryLabel=class extends BaseAutoSizedLabel{},{CartesianSeriesProperties,SeriesTooltip:SeriesTooltip5,Validate:Validate46,AND:AND7,ARRAY:ARRAY6,COLOR_STRING:COLOR_STRING11,COLOR_STRING_ARRAY:COLOR_STRING_ARRAY2,FUNCTION:FUNCTION8,OBJECT:OBJECT17,POSITIVE_NUMBER:POSITIVE_NUMBER14,RATIO:RATIO16,STRING:STRING22,TEXT_ALIGN:TEXT_ALIGN2,VERTICAL_ALIGN}=import_ag_charts_community121._ModuleSupport,HeatmapSeriesProperties=class extends CartesianSeriesProperties{constructor(){super(...arguments),this.colorRange=["black","black"],this.stroke="black",this.strokeWidth=0,this.textAlign="center",this.verticalAlign="middle",this.itemPadding=0,this.label=new AutoSizedLabel,this.tooltip=new SeriesTooltip5}};__decorateClass([Validate46(STRING22,{optional:!0})],HeatmapSeriesProperties.prototype,"title",2),__decorateClass([Validate46(STRING22)],HeatmapSeriesProperties.prototype,"xKey",2),__decorateClass([Validate46(STRING22)],HeatmapSeriesProperties.prototype,"yKey",2),__decorateClass([Validate46(STRING22,{optional:!0})],HeatmapSeriesProperties.prototype,"colorKey",2),__decorateClass([Validate46(STRING22,{optional:!0})],HeatmapSeriesProperties.prototype,"xName",2),__decorateClass([Validate46(STRING22,{optional:!0})],HeatmapSeriesProperties.prototype,"yName",2),__decorateClass([Validate46(STRING22,{optional:!0})],HeatmapSeriesProperties.prototype,"colorName",2),__decorateClass([Validate46(AND7(COLOR_STRING_ARRAY2,ARRAY6.restrict({minLength:1})))],HeatmapSeriesProperties.prototype,"colorRange",2),__decorateClass([Validate46(COLOR_STRING11,{optional:!0})],HeatmapSeriesProperties.prototype,"stroke",2),__decorateClass([Validate46(RATIO16,{optional:!0})],HeatmapSeriesProperties.prototype,"strokeOpacity",2),__decorateClass([Validate46(POSITIVE_NUMBER14,{optional:!0})],HeatmapSeriesProperties.prototype,"strokeWidth",2),__decorateClass([Validate46(TEXT_ALIGN2)],HeatmapSeriesProperties.prototype,"textAlign",2),__decorateClass([Validate46(VERTICAL_ALIGN)],HeatmapSeriesProperties.prototype,"verticalAlign",2),__decorateClass([Validate46(POSITIVE_NUMBER14)],HeatmapSeriesProperties.prototype,"itemPadding",2),__decorateClass([Validate46(FUNCTION8,{optional:!0})],HeatmapSeriesProperties.prototype,"itemStyler",2),__decorateClass([Validate46(OBJECT17)],HeatmapSeriesProperties.prototype,"label",2),__decorateClass([Validate46(OBJECT17)],HeatmapSeriesProperties.prototype,"tooltip",2);var{SeriesNodePickMode:SeriesNodePickMode4,computeBarFocusBounds:computeBarFocusBounds4,getMissCount,valueProperty:valueProperty7,ChartAxisDirection:ChartAxisDirection14,DEFAULT_CARTESIAN_DIRECTION_KEYS,DEFAULT_CARTESIAN_DIRECTION_NAMES}=import_ag_charts_community122._ModuleSupport,{Rect:Rect3,PointerEvents}=import_ag_charts_community122._Scene,{ColorScale}=import_ag_charts_community122._Scale,{sanitizeHtml:sanitizeHtml4,Logger:Logger10}=import_ag_charts_community122._Util,HeatmapSeriesNodeEvent=class extends import_ag_charts_community122._ModuleSupport.CartesianSeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.colorKey=o.properties.colorKey}},textAlignFactors={left:-.5,center:0,right:-.5},verticalAlignFactors={top:-.5,middle:0,bottom:-.5},HeatmapSeries=class extends import_ag_charts_community122._ModuleSupport.CartesianSeries{constructor(t){super({moduleCtx:t,directionKeys:DEFAULT_CARTESIAN_DIRECTION_KEYS,directionNames:DEFAULT_CARTESIAN_DIRECTION_NAMES,pickModes:[SeriesNodePickMode4.NEAREST_NODE,SeriesNodePickMode4.EXACT_SHAPE_MATCH],pathsPerSeries:[],hasMarkers:!1,hasHighlightedLabels:!0}),this.properties=new HeatmapSeriesProperties,this.NodeEvent=HeatmapSeriesNodeEvent,this.colorScale=new ColorScale}async processData(t){const e=this.axes[ChartAxisDirection14.X],i=this.axes[ChartAxisDirection14.Y];if(!e||!i||!this.properties.isValid()||!this.data?.length)return;const{xKey:o,yKey:s,colorRange:a,colorKey:n}=this.properties,r=this.axes[ChartAxisDirection14.X]?.scale,l=this.axes[ChartAxisDirection14.Y]?.scale,{xScaleType:c,yScaleType:h}=this.getScaleInformation({xScale:r,yScale:l}),d=this.colorScale.type,{dataModel:u,processedData:g}=await this.requestDataModel(t,this.data,{props:[valueProperty7(o,c,{id:"xValue"}),valueProperty7(s,h,{id:"yValue"}),...n?[valueProperty7(n,d,{id:"colorValue"})]:[]]});if(this.isColorScaleValid()){const y=u.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=g.domain.values[y],this.colorScale.range=a,this.colorScale.update()}}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const o=e.resolveProcessedDataIndexById(this,"colorValue"),s=i.data.length,a=getMissCount(this,i.defs.values[o].missing);return!(s===0||s===a)}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;return!e||!i?[]:t===ChartAxisDirection14.X?e.getDomain(this,"xValue","value",i):e.getDomain(this,"yValue","value",i)}async createNodeData(){const{data:t,visible:e,axes:i,dataModel:o}=this,s=i[ChartAxisDirection14.X],a=i[ChartAxisDirection14.Y];if(!(t&&o&&e&&s&&a))return;if(s.type!=="category"||a.type!=="category"){Logger10.warnOnce(`Heatmap series expected axes to have "category" type, but received "${s.type}" and "${a.type}" instead.`);return}const{xKey:n,xName:r,yKey:l,yName:c,colorKey:h,colorName:d,textAlign:u,verticalAlign:g,itemPadding:y,colorRange:p,label:m}=this.properties,f=o.resolveProcessedDataIndexById(this,"xValue"),v=o.resolveProcessedDataIndexById(this,"yValue"),S=h?o.resolveProcessedDataIndexById(this,"colorValue"):void 0,x=s.scale,M=a.scale,T=(x.bandwidth??0)/2,b=(M.bandwidth??0)/2,I=this.isColorScaleValid(),D=[],N=[],k=x.bandwidth??10,_=M.bandwidth??10,O=(k-2*y)*textAlignFactors[u],A=(_-2*y)*verticalAlignFactors[g],L=()=>({width:k,height:_,meta:null});for(const{values:E,datum:C}of this.processedData?.data??[]){const R=E[f],P=E[v],w=x.convert(R)+T,z=M.convert(P)+b,B=E[S??-1],F=I&&B!=null?this.colorScale.convert(B):p[0],W=B==null?void 0:this.getLabelText(m,{value:B,datum:C,colorKey:h,colorName:d,xKey:n,yKey:l,xName:r,yName:c}),V=formatLabels(W,this.properties.label,void 0,this.properties.label,{padding:y},L),H={x:w,y:z,size:0};if(D.push({series:this,itemId:l,yKey:l,xKey:n,xValue:R,yValue:P,colorValue:B,datum:C,point:H,width:k,height:_,fill:F,midPoint:{x:w,y:z},missing:B==null}),V?.label!=null){const{text:U,fontSize:K,lineHeight:q,height:j}=V.label,{fontStyle:Y,fontFamily:X,fontWeight:J,color:Q}=this.properties.label,Z=H.x+O*(k-2*y),G=H.y+A*(_-2*y)-(V.height-j)*.5;N.push({series:this,itemId:l,datum:C,text:U,fontSize:K,lineHeight:q,fontStyle:Y,fontFamily:X,fontWeight:J,color:Q,textAlign:u,verticalAlign:g,x:Z,y:G})}}return{itemId:this.properties.yKey??this.id,nodeData:D,labelData:N,scales:this.calculateScaling(),visible:this.visible}}nodeFactory(){return new Rect3}async updateDatumSelection(t){const{nodeData:e,datumSelection:i}=t,o=e??[];return i.update(o)}async updateDatumNodes(t){const{isHighlight:e}=t,{id:i,ctx:{callbackCache:o},properties:s}=this,{xKey:a,yKey:n,colorKey:r,itemStyler:l}=s,c=e?s.highlightStyle.item:void 0,h=c?.fillOpacity??1,d=c?.stroke??s.stroke,u=c?.strokeWidth??this.getStrokeWidth(s.strokeWidth),g=c?.strokeOpacity??s.strokeOpacity??1,y=this.axes[ChartAxisDirection14.X],[p,m]=y?.visibleRange??[],v=!(p!==0||m!==1);t.datumSelection.each((S,x)=>{const{datum:M,point:T,width:b,height:I}=x,D=c?.fill??x.fill;let N;l&&(N=o.call(l,{datum:M,fill:D,fillOpacity:h,stroke:d,strokeOpacity:g,strokeWidth:u,highlighted:e,xKey:a,yKey:n,colorKey:r,seriesId:i})),S.crisp=v,S.x=Math.floor(T.x-b/2),S.y=Math.floor(T.y-I/2),S.width=Math.ceil(b),S.height=Math.ceil(I),S.fill=N?.fill??D,S.fillOpacity=N?.fillOpacity??h,S.stroke=N?.stroke??d,S.strokeWidth=N?.strokeWidth??u,S.strokeOpacity=N?.strokeOpacity??g})}async updateLabelSelection(t){const{labelData:e,labelSelection:i}=t,{enabled:o}=this.properties.label,s=o?e:[];return i.update(s)}async updateLabelNodes(t){t.labelSelection.each((e,i)=>{e.text=i.text,e.fontSize=i.fontSize,e.lineHeight=i.lineHeight,e.fontStyle=i.fontStyle,e.fontFamily=i.fontFamily,e.fontWeight=i.fontWeight,e.fill=i.color,e.textAlign=i.textAlign,e.textBaseline=i.verticalAlign,e.x=i.x,e.y=i.y,e.pointerEvents=PointerEvents.None})}getTooltipHtml(t){const e=this.axes[ChartAxisDirection14.X],i=this.axes[ChartAxisDirection14.Y];if(!this.properties.isValid()||!e||!i)return import_ag_charts_community122._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const{xKey:o,yKey:s,colorKey:a,xName:n,yName:r,colorName:l,stroke:c,strokeWidth:h,strokeOpacity:d=1,colorRange:u,itemStyler:g,tooltip:y}=this.properties,{colorScale:p,id:m,ctx:{callbackCache:f}}=this,{datum:v,xValue:S,yValue:x,colorValue:M,itemId:T}=t,b=this.isColorScaleValid()?p.convert(M):u[0];let I;g&&(I=f.call(g,{datum:v,xKey:o,yKey:s,colorKey:a,fill:b,fillOpacity:1,stroke:c,strokeWidth:h,strokeOpacity:d,highlighted:!1,seriesId:m}));const D=I?.fill??b??"gray",N=this.properties.title??r,k=sanitizeHtml4(e.formatDatum(S)),_=sanitizeHtml4(i.formatDatum(x));let O=`<b>${sanitizeHtml4(n??o)}</b>: ${k}<br><b>${sanitizeHtml4(r??s)}</b>: ${_}`;return a&&(O=`<b>${sanitizeHtml4(l??a)}</b>: ${sanitizeHtml4(M)}<br>`+O),y.toTooltipHtml({title:N,content:O,backgroundColor:D},{seriesId:m,datum:v,xKey:o,yKey:s,xName:n,yName:r,title:N,color:D,colorKey:a,colorName:l,itemId:T})}getLegendData(t){return t!=="gradient"||!this.data?.length||!this.properties.isValid()||!this.isColorScaleValid()||!this.dataModel?[]:[{legendType:"gradient",enabled:this.visible,seriesId:this.id,colorName:this.properties.colorName,colorDomain:this.processedData.domain.values[this.dataModel.resolveProcessedDataIndexById(this,"colorValue")],colorRange:this.properties.colorRange}]}isLabelEnabled(){return this.properties.label.enabled&&!!this.properties.colorKey}getBandScalePadding(){return{inner:0,outer:0}}computeFocusBounds({datumIndex:t,seriesRect:e}){const i=this.contextNodeData?.nodeData[t];if(i===void 0)return;const{width:o,height:s,midPoint:a}=i,n={x:a.x-o/2,y:a.y-s/2,width:o,height:s};return computeBarFocusBounds4(n,this.contentGroup,e)}};HeatmapSeries.className="HeatmapSeries",HeatmapSeries.type="heatmap";var import_ag_charts_community123=require("ag-charts-community"),HEATMAP_SERIES_THEME={series:{label:{enabled:!1,color:import_ag_charts_community123._Theme.DEFAULT_LABEL_COLOUR,fontSize:import_ag_charts_community123._Theme.FONT_SIZE.SMALL,fontFamily:import_ag_charts_community123._Theme.DEFAULT_FONT_FAMILY,wrapping:"on-space",overflowStrategy:"ellipsis"},itemPadding:3},gradientLegend:{enabled:!0}},HeatmapModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"heatmap",moduleFactory:t=>new HeatmapSeries(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:import_ag_charts_community124._Theme.CARTESIAN_AXIS_TYPE.CATEGORY,position:import_ag_charts_community124._Theme.POSITION.LEFT},{type:import_ag_charts_community124._Theme.CARTESIAN_AXIS_TYPE.CATEGORY,position:import_ag_charts_community124._Theme.POSITION.BOTTOM}],themeTemplate:HEATMAP_SERIES_THEME,paletteFactory:({takeColors:t,colorsCount:e,userPalette:i,themeTemplateParameters:o})=>{const s=o.get(import_ag_charts_community124._Theme.DEFAULT_DIVERGING_SERIES_COLOUR_RANGE),a=o.get(import_ag_charts_community124._Theme.DEFAULT_BACKGROUND_COLOUR),n=(Array.isArray(a)?a[0]:a)??"white",{fills:r,strokes:l}=t(e);return{stroke:i==="inbuilt"?n:l[0],colorRange:i==="inbuilt"?s:[r[0],r[1]]}}},import_ag_charts_community130=require("ag-charts-community"),MAP_THEME_DEFAULTS={zoom:{axes:"xy",anchorPointX:"pointer",anchorPointY:"pointer"},legend:{enabled:!1},gradientLegend:{enabled:!1},tooltip:{range:"exact"}},import_ag_charts_community129=require("ag-charts-community"),import_ag_charts_community126=require("ag-charts-community"),delta=1e-9;function lineSegmentDistanceToPointSquared(t,e,i,o){const[s,a]=t,[n,r]=e,l=n-s,c=r-a,h=l*l+c*c;let d,u;if(Math.abs(h)<delta)d=s,u=a;else{let p=((i-s)*l+(o-a)*c)/h;p=Math.max(0,Math.min(1,p)),d=s+p*(n-s),u=a+p*(r-a)}const g=i-d,y=o-u;return g*g+y*y}function lineStringDistance(t,e,i){let o=1/0,s=t[t.length-1];for(const a of t)o=Math.min(o,lineSegmentDistanceToPointSquared(s,a,e,i)),s=a;return Math.sqrt(o)}function lineStringLength(t){let[e,i]=t[0],o=0;for(let s=1;s<t.length;s+=1){const[a,n]=t[s],r=Math.hypot(a-e,n-i);o+=r,e=a,i=n}return o}function lineStringCenter(t){if(t.length===0)return;const e=lineStringLength(t)/2;let[i,o]=t[0],s=0;for(let a=1;a<t.length;a+=1){const[n,r]=t[a],l=Math.hypot(n-i,r-o),c=s+l;if(c>e){const h=(e-s)/l,d=[i+(n-i)*h,o+(r-o)*h],u=Math.atan2(r-o,n-i);return{point:d,angle:u}}s=c,i=n,o=r}}var import_ag_charts_community125=require("ag-charts-community"),{LonLatBBox}=import_ag_charts_community125._ModuleSupport;function extendBbox(t,e,i,o,s){return t==null?t=new LonLatBBox(e,i,o,s):(t.lon0=Math.min(t.lon0,e),t.lat0=Math.min(t.lat0,i),t.lon1=Math.max(t.lon1,o),t.lat1=Math.max(t.lat1,s)),t}var insertManySorted=(t,e,i)=>{let o=t,s=o;for(const a of e)if(o==null||i(o.value,a)>0)o={value:a,next:o},s=o;else{for(s=s;s.next!=null&&i(s.next.value,a)<=0;)s=s.next;s.next={value:a,next:s.next}}return o};function polygonBbox(t,e){return t.forEach(i=>{const[o,s]=i;e=extendBbox(e,o,s,o,s)}),e}function polygonCentroid(t){if(t.length===0)return;let e=0,i=0,o=0,[s,a]=t[t.length-1];for(const[n,r]of t){const l=s*r-n*a;o+=l,e+=(s+n)*l,i+=(a+r)*l,s=n,a=r}return o*=3,[e/o,i/o]}function polygonDistance(t,e,i){let o=!1,s=1/0;for(const a of t){let n=a[a.length-1],[r,l]=n;for(const c of a){const[h,d]=c;d>i!=l>i&&e<(r-h)*(i-d)/(l-d)+h&&(o=!o),s=Math.min(s,lineSegmentDistanceToPointSquared(n,c,e,i)),n=c,r=h,l=d}}return(o?-1:1)*Math.sqrt(s)}var{Path:Path6,ExtendedPath2D,BBox:BBox8,ScenePathChangeDetection:ScenePathChangeDetection2}=import_ag_charts_community126._Scene,GeoGeometry=class extends Path6{constructor(){super(...arguments),this.projectedGeometry=void 0,this.renderMode=3,this.strokePath=new ExtendedPath2D}computeBBox(){return(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.bbox?.clone()}updatePath(){const{projectedGeometry:t}=this;this.strokePath.clear(),this.path.clear(),this.bbox=t!=null?this.drawGeometry(t,void 0):void 0}drawPath(t){super.drawPath(t),this.renderStroke(t,this.strokePath.getPath2D())}containsPoint(t,e){const{projectedGeometry:i}=this;return i==null||({x:t,y:e}=this.transformPoint(t,e),!this.getBBox().containsPoint(t,e))?!1:this.geometryDistance(i,t,e)<=0}distanceToPoint(t,e){const{projectedGeometry:i}=this;return{x:t,y:e}=this.transformPoint(t,e),i!=null?this.geometryDistance(i,t,e):1/0}geometryDistance(t,e,i){const{renderMode:o,strokeWidth:s}=this,a=(o&1)!==0,n=(o&2)!==0,r=Math.max(s/2,1)+1;switch(t.type){case"GeometryCollection":return t.geometries.reduce((l,c)=>Math.min(l,this.geometryDistance(c,e,i)),1/0);case"MultiPolygon":return a?t.coordinates.reduce((l,c)=>Math.min(l,Math.max(polygonDistance(c,e,i),0)),1/0):1/0;case"Polygon":return a?Math.max(polygonDistance(t.coordinates,e,i),0):1/0;case"MultiLineString":return n?t.coordinates.reduce((l,c)=>Math.min(l,Math.max(lineStringDistance(c,e,i)-r,0)),1/0):1/0;case"LineString":return n?Math.max(lineStringDistance(t.coordinates,e,i)-r,0):1/0;case"MultiPoint":case"Point":default:return 1/0}}drawGeometry(t,e){const{renderMode:i,path:o,strokePath:s}=this,a=(i&1)!==0,n=(i&2)!==0;switch(t.type){case"GeometryCollection":t.geometries.forEach(r=>{e=this.drawGeometry(r,e)});break;case"MultiPolygon":a&&t.coordinates.forEach(r=>{e=this.drawPolygon(o,r,e)});break;case"Polygon":a&&(e=this.drawPolygon(o,t.coordinates,e));break;case"LineString":n&&(e=this.drawLineString(s,t.coordinates,e,!1));break;case"MultiLineString":n&&t.coordinates.forEach(r=>{e=this.drawLineString(s,r,e,!1)});break;case"Point":case"MultiPoint":break}return e}drawPolygon(t,e,i){if(e.length<1)return i;i=this.drawLineString(t,e[0],i,!0);for(let o=1;o<e.length;o+=1){const s=e[o];this.drawLineString(t,s,void 0,!0)}return i}drawLineString(t,e,i,o){if(e.length<2)return i;const s=o?e.length-1:e.length;for(let a=0;a<s;a+=1){const[n,r]=e[a];if(a===0?t.moveTo(n,r):t.lineTo(n,r),i==null)i=new BBox8(n,r,0,0);else{const{x:l,y:c}=i,h=l+i.width,d=c+i.height;i.x=Math.min(l,n),i.y=Math.min(c,r),i.width=Math.max(h,n)-i.x,i.height=Math.max(d,r)-i.y}}return o&&t.closePath(),i}};__decorateClass([ScenePathChangeDetection2()],GeoGeometry.prototype,"projectedGeometry",2),__decorateClass([ScenePathChangeDetection2()],GeoGeometry.prototype,"renderMode",2);function geometryBbox(t,e){if(t.bbox!=null){const[i,o,s,a]=t.bbox;return e=extendBbox(e,i,o,s,a),e}switch(t.type){case"GeometryCollection":t.geometries.forEach(i=>{e=geometryBbox(i,e)});break;case"MultiPolygon":t.coordinates.forEach(i=>{i.length>0&&(e=polygonBbox(i[0],e))});break;case"Polygon":t.coordinates.length>0&&(e=polygonBbox(t.coordinates[0],e));break;case"MultiLineString":t.coordinates.forEach(i=>{e=polygonBbox(i,e)});break;case"LineString":e=polygonBbox(t.coordinates,e);break;case"MultiPoint":t.coordinates.forEach(i=>{const[o,s]=i;e=extendBbox(e,o,s,o,s)});break;case"Point":{const[i,o]=t.coordinates;e=extendBbox(e,i,o,i,o);break}}return e}function largestPolygon(t){switch(t.type){case"GeometryCollection":{let e,i;return t.geometries.map(o=>{const s=largestPolygon(o);if(s==null)return;const a=polygonBbox(s[0],void 0);if(a==null)return;const n=Math.abs(a.lat1-a.lat0)*Math.abs(a.lon1-a.lon0);(e==null||n>e)&&(e=n,i=s)}),i}case"MultiPolygon":{let e,i;return t.coordinates.forEach(o=>{const s=polygonBbox(o[0],void 0);if(s==null)return;const a=Math.abs(s.lat1-s.lat0)*Math.abs(s.lon1-s.lon0);(e==null||a>e)&&(e=a,i=o)}),i}case"Polygon":return t.coordinates;case"MultiLineString":case"LineString":case"MultiPoint":case"Point":return}}function largestLineString(t){switch(t.type){case"GeometryCollection":{let e,i;return t.geometries.map(o=>{const s=largestLineString(o);if(s==null)return;const a=lineStringLength(s);a!=null&&(e==null||a>e)&&(e=a,i=s)}),i}case"MultiLineString":{let e=0,i;return t.coordinates.forEach(o=>{const s=lineStringLength(o);s>e&&(e=s,i=o)}),i}case"LineString":return t.coordinates;case"MultiPolygon":case"Polygon":case"MultiPoint":case"Point":return}}function containsType(t,e){if(t==null)return!1;switch(t.type){case"GeometryCollection":return t.geometries.some(i=>containsType(i,e));case"MultiPolygon":case"Polygon":return(e&1)!==0;case"MultiLineString":case"LineString":return(e&2)!==0;case"MultiPoint":case"Point":return(e&4)!==0}}function projectGeometry(t,e){switch(t.type){case"GeometryCollection":return{type:"GeometryCollection",geometries:t.geometries.map(i=>projectGeometry(i,e))};case"Polygon":return{type:"Polygon",coordinates:projectPolygon(t.coordinates,e)};case"MultiPolygon":return{type:"MultiPolygon",coordinates:projectMultiPolygon(t.coordinates,e)};case"MultiLineString":return{type:"MultiLineString",coordinates:projectPolygon(t.coordinates,e)};case"LineString":return{type:"LineString",coordinates:projectLineString(t.coordinates,e)};case"MultiPoint":return{type:"MultiPoint",coordinates:projectLineString(t.coordinates,e)};case"Point":return{type:"Point",coordinates:e.convert(t.coordinates)}}}function projectMultiPolygon(t,e){return t.map(i=>projectPolygon(i,e))}function projectPolygon(t,e){return t.map(i=>projectLineString(i,e))}function projectLineString(t,e){return t.map(i=>e.convert(i))}var import_ag_charts_community127=require("ag-charts-community");function isValidCoordinate(t){return Array.isArray(t)&&t.length>=2&&t.every(import_ag_charts_community127._ModuleSupport.isFiniteNumber)}function isValidCoordinates(t){return Array.isArray(t)&&t.length>=2&&t.every(isValidCoordinate)}var delta2=.001;function hasSameStartEndPoint(t){return Math.abs(t[0][0]-t[t.length-1][0])<delta2&&Math.abs(t[0][1]-t[t.length-1][1])<delta2}function isValidPolygon(t){return Array.isArray(t)&&t.every(isValidCoordinates)&&t.every(hasSameStartEndPoint)}function isValidGeometry(t){if(t===null)return!0;if(typeof t!="object"||t.type==null)return!1;const{type:e,coordinates:i}=t;switch(e){case"GeometryCollection":return Array.isArray(t.geometries)&&t.geometries.every(isValidGeometry);case"MultiPolygon":return Array.isArray(i)&&i.every(isValidPolygon);case"Polygon":return isValidPolygon(i);case"MultiLineString":return Array.isArray(i)&&i.every(isValidCoordinates);case"LineString":return isValidCoordinates(i);case"MultiPoint":return isValidCoordinates(i);case"Point":return isValidCoordinate(i)}}function isValidFeature(t){return t!==null&&typeof t=="object"&&t.type==="Feature"&&isValidGeometry(t.geometry)}function isValidFeatureCollection(t){return t!==null&&typeof t=="object"&&t.type==="FeatureCollection"&&Array.isArray(t.features)&&t.features.every(isValidFeature)}var GEOJSON_OBJECT=import_ag_charts_community127._ModuleSupport.predicateWithMessage(isValidFeatureCollection,"a GeoJSON object"),import_ag_charts_community128=require("ag-charts-community"),{COLOR_STRING:COLOR_STRING12,LINE_DASH:LINE_DASH9,OBJECT:OBJECT18,POSITIVE_NUMBER:POSITIVE_NUMBER15,RATIO:RATIO17,Validate:Validate47,SeriesProperties:SeriesProperties2,SeriesTooltip:SeriesTooltip6}=import_ag_charts_community128._ModuleSupport,MapLineBackgroundSeriesProperties=class extends SeriesProperties2{constructor(){super(...arguments),this.topology=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=new SeriesTooltip6}};__decorateClass([Validate47(GEOJSON_OBJECT,{optional:!0})],MapLineBackgroundSeriesProperties.prototype,"topology",2),__decorateClass([Validate47(COLOR_STRING12)],MapLineBackgroundSeriesProperties.prototype,"stroke",2),__decorateClass([Validate47(RATIO17)],MapLineBackgroundSeriesProperties.prototype,"strokeOpacity",2),__decorateClass([Validate47(POSITIVE_NUMBER15)],MapLineBackgroundSeriesProperties.prototype,"strokeWidth",2),__decorateClass([Validate47(LINE_DASH9)],MapLineBackgroundSeriesProperties.prototype,"lineDash",2),__decorateClass([Validate47(POSITIVE_NUMBER15)],MapLineBackgroundSeriesProperties.prototype,"lineDashOffset",2),__decorateClass([Validate47(OBJECT18)],MapLineBackgroundSeriesProperties.prototype,"tooltip",2);var{createDatumId:createDatumId3,DataModelSeries:DataModelSeries2,SeriesNodePickMode:SeriesNodePickMode5,Validate:Validate48}=import_ag_charts_community129._ModuleSupport,{Group:Group9,Selection:Selection4,PointerEvents:PointerEvents2}=import_ag_charts_community129._Scene,{Logger:Logger11}=import_ag_charts_community129._Util,MapLineBackgroundSeries=class extends DataModelSeries2{constructor(t){super({moduleCtx:t,contentGroupVirtual:!1,useLabelLayer:!0,pickModes:[SeriesNodePickMode5.EXACT_SHAPE_MATCH]}),this.properties=new MapLineBackgroundSeriesProperties,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new Group9({name:"itemGroup"})),this.datumSelection=Selection4.select(this.itemGroup,()=>this.nodeFactory())}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}setOptionsData(){}setChartData(){}get hasData(){return!1}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}nodeFactory(){const t=new GeoGeometry;return t.renderMode=2,t.lineJoin="round",t.lineCap="round",t.pointerEvents=PointerEvents2.None,t}async processData(){const{topology:t}=this;this.topologyBounds=t?.features.reduce((e,i)=>{const o=i.geometry;return o==null?e:geometryBbox(o,e)},void 0),t==null&&Logger11.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")}async createNodeData(){const{id:t,topology:e,scale:i}=this;if(e==null)return;const o=[],s=[];return e.features.forEach((a,n)=>{const{geometry:r}=a,l=r!=null&&i!=null?projectGeometry(r,i):void 0;l!=null&&o.push({series:this,itemId:n,datum:a,index:n,projectedGeometry:l})}),{itemId:t,nodeData:o,labelData:s}}async updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=await this.createNodeData(),this.nodeDataRefresh=!1)}async update(){const{datumSelection:t}=this;await this.updateSelections(),this.contentGroup.visible=this.visible;const{nodeData:e=[]}=this.contextNodeData??{};this.datumSelection=await this.updateDatumSelection({nodeData:e,datumSelection:t}),await this.updateDatumNodes({datumSelection:t})}async updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>createDatumId3(e.index))}async updateDatumNodes(t){const{properties:e}=this,{datumSelection:i}=t,{stroke:o,strokeOpacity:s,lineDash:a,lineDashOffset:n}=e,r=this.getStrokeWidth(e.strokeWidth);i.each((l,c)=>{const{projectedGeometry:h}=c;if(h==null){l.visible=!1,l.projectedGeometry=void 0;return}l.visible=!0,l.projectedGeometry=h,l.stroke=o,l.strokeWidth=r,l.strokeOpacity=s,l.lineDash=a,l.lineDashOffset=n})}resetAnimation(){}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(){return[]}getTooltipHtml(){return import_ag_charts_community129._ModuleSupport.EMPTY_TOOLTIP_CONTENT}computeFocusBounds(t){}};MapLineBackgroundSeries.className="MapLineBackgroundSeries",MapLineBackgroundSeries.type="map-line-background",__decorateClass([Validate48(GEOJSON_OBJECT,{optional:!0,property:"topology"})],MapLineBackgroundSeries.prototype,"_chartTopology",2);var{DEFAULT_HIERARCHY_STROKES}=import_ag_charts_community130._Theme,MapLineBackgroundModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line-background",moduleFactory:t=>new MapLineBackgroundSeries(t),tooltipDefaults:{range:"exact"},themeTemplate:{...MAP_THEME_DEFAULTS,series:{strokeWidth:1,lineDash:[0],lineDashOffset:0}},paletteFactory:({themeTemplateParameters:t})=>({stroke:t.get(DEFAULT_HIERARCHY_STROKES)?.[1]})},import_ag_charts_community133=require("ag-charts-community"),import_ag_charts_community132=require("ag-charts-community");function prepareMapMarkerAnimationFunctions(){return{fromFn:(i,o,s)=>s==="removed"?{scalingX:1,scalingY:1}:i.previousDatum==null?{scalingX:0,scalingY:0}:{scalingX:i.scalingX,scalingY:i.scalingY},toFn:(i,o,s)=>s==="removed"?{scalingX:0,scalingY:0}:{scalingX:1,scalingY:1}}}function findFocusedGeoGeometry(t,e){const i=t.contextNodeData?.nodeData[e.datumIndex];if(i!==void 0){for(const o of t.datumSelection.nodes())if(o.datum===i)return o}}var import_ag_charts_community131=require("ag-charts-community"),{AND:AND8,ARRAY:ARRAY7,COLOR_STRING:COLOR_STRING13,COLOR_STRING_ARRAY:COLOR_STRING_ARRAY3,FUNCTION:FUNCTION9,LINE_DASH:LINE_DASH10,NUMBER_ARRAY,OBJECT:OBJECT19,POSITIVE_NUMBER:POSITIVE_NUMBER16,RATIO:RATIO18,STRING:STRING23,Validate:Validate49,SeriesProperties:SeriesProperties3,SeriesTooltip:SeriesTooltip7}=import_ag_charts_community131._ModuleSupport,{Label:Label4}=import_ag_charts_community131._Scene,MapLineSeriesProperties=class extends SeriesProperties3{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.topologyIdKey="name",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.maxStrokeWidth=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.label=new Label4,this.tooltip=new SeriesTooltip7}};__decorateClass([Validate49(GEOJSON_OBJECT,{optional:!0})],MapLineSeriesProperties.prototype,"topology",2),__decorateClass([Validate49(STRING23,{optional:!0})],MapLineSeriesProperties.prototype,"title",2),__decorateClass([Validate49(STRING23,{optional:!0})],MapLineSeriesProperties.prototype,"legendItemName",2),__decorateClass([Validate49(STRING23)],MapLineSeriesProperties.prototype,"idKey",2),__decorateClass([Validate49(STRING23)],MapLineSeriesProperties.prototype,"topologyIdKey",2),__decorateClass([Validate49(STRING23,{optional:!0})],MapLineSeriesProperties.prototype,"idName",2),__decorateClass([Validate49(STRING23,{optional:!0})],MapLineSeriesProperties.prototype,"labelKey",2),__decorateClass([Validate49(STRING23,{optional:!0})],MapLineSeriesProperties.prototype,"labelName",2),__decorateClass([Validate49(STRING23,{optional:!0})],MapLineSeriesProperties.prototype,"sizeKey",2),__decorateClass([Validate49(STRING23,{optional:!0})],MapLineSeriesProperties.prototype,"sizeName",2),__decorateClass([Validate49(STRING23,{optional:!0})],MapLineSeriesProperties.prototype,"colorKey",2),__decorateClass([Validate49(STRING23,{optional:!0})],MapLineSeriesProperties.prototype,"colorName",2),__decorateClass([Validate49(NUMBER_ARRAY,{optional:!0})],MapLineSeriesProperties.prototype,"sizeDomain",2),__decorateClass([Validate49(AND8(COLOR_STRING_ARRAY3,ARRAY7.restrict({minLength:1})),{optional:!0})],MapLineSeriesProperties.prototype,"colorRange",2),__decorateClass([Validate49(POSITIVE_NUMBER16,{optional:!0})],MapLineSeriesProperties.prototype,"maxStrokeWidth",2),__decorateClass([Validate49(COLOR_STRING13)],MapLineSeriesProperties.prototype,"stroke",2),__decorateClass([Validate49(RATIO18)],MapLineSeriesProperties.prototype,"strokeOpacity",2),__decorateClass([Validate49(POSITIVE_NUMBER16)],MapLineSeriesProperties.prototype,"strokeWidth",2),__decorateClass([Validate49(LINE_DASH10)],MapLineSeriesProperties.prototype,"lineDash",2),__decorateClass([Validate49(POSITIVE_NUMBER16)],MapLineSeriesProperties.prototype,"lineDashOffset",2),__decorateClass([Validate49(FUNCTION9,{optional:!0})],MapLineSeriesProperties.prototype,"itemStyler",2),__decorateClass([Validate49(OBJECT19)],MapLineSeriesProperties.prototype,"label",2),__decorateClass([Validate49(OBJECT19)],MapLineSeriesProperties.prototype,"tooltip",2);var{getMissCount:getMissCount2,createDatumId:createDatumId4,DataModelSeries:DataModelSeries3,SeriesNodePickMode:SeriesNodePickMode6,valueProperty:valueProperty8,CachedTextMeasurerPool:CachedTextMeasurerPool6,Validate:Validate50}=import_ag_charts_community132._ModuleSupport,{ColorScale:ColorScale2,LinearScale:LinearScale3}=import_ag_charts_community132._Scale,{Selection:Selection5,Text:Text7}=import_ag_charts_community132._Scene,{sanitizeHtml:sanitizeHtml5,Logger:Logger12}=import_ag_charts_community132._Util,MapLineSeries=class extends DataModelSeries3{constructor(t){super({moduleCtx:t,contentGroupVirtual:!1,useLabelLayer:!0,pickModes:[SeriesNodePickMode6.EXACT_SHAPE_MATCH,SeriesNodePickMode6.NEAREST_NODE]}),this.properties=new MapLineSeriesProperties,this._chartTopology=void 0,this.colorScale=new ColorScale2,this.sizeScale=new LinearScale3,this.datumSelection=Selection5.select(this.contentGroup,()=>this.nodeFactory()),this.labelSelection=Selection5.select(this.labelGroup,Text7),this.highlightDatumSelection=Selection5.select(this.highlightNode,()=>this.nodeFactory()),this._previousDatumMidPoint=void 0}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){return super.hasData&&this.topology!=null}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",t=>{this.onLegendItemClick(t)}),this.ctx.chartEventManager.addListener("legend-item-double-click",t=>{this.onLegendItemDoubleClick(t)}))}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}nodeFactory(){const t=new GeoGeometry;return t.renderMode=2,t.lineJoin="round",t.lineCap="round",t}async processData(t){if(this.data==null||!this.properties.isValid())return;const{data:e,topology:i,sizeScale:o,colorScale:s}=this,{topologyIdKey:a,idKey:n,sizeKey:r,colorKey:l,labelKey:c,sizeDomain:h,colorRange:d}=this.properties,u=new Map;i?.features.forEach(S=>{const x=S.properties?.[a];x==null||!containsType(S.geometry,2)||u.set(x,S)});const g=this.sizeScale.type,y=this.colorScale.type,p=this.scale?.type,{dataModel:m,processedData:f}=await this.requestDataModel(t,e,{props:[valueProperty8(n,p,{id:"idValue",includeProperty:!1}),valueProperty8(n,p,{id:"featureValue",includeProperty:!1,processor:()=>S=>u.get(S)}),...c!=null?[valueProperty8(c,"band",{id:"labelValue"})]:[],...r!=null?[valueProperty8(r,g,{id:"sizeValue"})]:[],...l!=null?[valueProperty8(l,y,{id:"colorValue"})]:[]]}),v=m.resolveProcessedDataIndexById(this,"featureValue");if(this.topologyBounds=f.data.reduce((S,{values:x})=>{const T=x[v]?.geometry;return T==null?S:geometryBbox(T,S)},void 0),r!=null){const S=m.resolveProcessedDataIndexById(this,"sizeValue"),x=f.domain.values[S]??[];o.domain=h??x}if(d!=null&&this.isColorScaleValid()){const S=m.resolveProcessedDataIndexById(this,"colorValue");s.domain=f.domain.values[S],s.range=d,s.update()}i==null&&Logger12.warnOnce("no topology was provided for [MapLineSeries]; nothing will be rendered.")}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const o=e.resolveProcessedDataIndexById(this,"colorValue"),s=i.data.length,a=getMissCount2(this,i.defs.values[o].missing);return!(s===0||s===a)}getLabelDatum(t,e,i,o){if(e==null||i==null)return;const s=largestLineString(i);if(s==null)return;const{idKey:a,idName:n,sizeKey:r,sizeName:l,colorKey:c,colorName:h,labelKey:d,labelName:u,label:g}=this.properties,y=this.getLabelText(g,{value:e,datum:t,idKey:a,idName:n,sizeKey:r,sizeName:l,colorKey:c,colorName:h,labelKey:d,labelName:u});if(y==null)return;const p=CachedTextMeasurerPool6.measureText(String(y),{font:o}),m=lineStringCenter(s);if(m==null)return;const[f,v]=m.point,{width:S,height:x}=p;return{point:{x:f,y:v,size:0},label:{width:S,height:x,text:y},marker:void 0,placement:void 0}}async createNodeData(){const{id:t,dataModel:e,processedData:i,sizeScale:o,colorScale:s,properties:a,scale:n}=this,{idKey:r,sizeKey:l,colorKey:c,labelKey:h,label:d}=a;if(e==null||i==null)return;const u=this.isColorScaleValid(),g=e.resolveProcessedDataIndexById(this,"idValue"),y=e.resolveProcessedDataIndexById(this,"featureValue"),p=h!=null?e.resolveProcessedDataIndexById(this,"labelValue"):void 0,m=l!=null?e.resolveProcessedDataIndexById(this,"sizeValue"):void 0,f=c!=null?e.resolveProcessedDataIndexById(this,"colorValue"):void 0,v=a.maxStrokeWidth??a.strokeWidth;o.range=[Math.min(a.strokeWidth,v),v];const S=d.getFont(),x=new Map;i.data.forEach(({values:D})=>{const N=D[g],k=D[y]?.geometry,_=k!=null&&n!=null?projectGeometry(k,n):void 0;N!=null&&_!=null&&x.set(N,_)});const M=[],T=[],b=[];i.data.forEach(({datum:D,values:N})=>{const k=N[g],_=f!=null?N[f]:void 0,O=m!=null?N[m]:void 0,A=p!=null?N[p]:void 0,L=u&&_!=null?s.convert(_):void 0,E=O!=null?o.convert(O,{clampMode:"clamped"}):void 0,C=x.get(k);C==null&&b.push(k);const R=this.getLabelDatum(D,A,C,S);R!=null&&T.push(R),M.push({series:this,itemId:r,datum:D,stroke:L,strokeWidth:E,idValue:k,labelValue:A,colorValue:_,sizeValue:O,projectedGeometry:C})});const I=10;if(b.length>I){const D=b.length-I;b.length=I,b.push(`(+${D} more)`)}return b.length>0&&Logger12.warnOnce("some data items do not have matches in the provided topology",b),{itemId:t,nodeData:M,labelData:T}}async updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=await this.createNodeData(),this.nodeDataRefresh=!1)}async update(){const{datumSelection:t,labelSelection:e,highlightDatumSelection:i}=this;await this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let o=this.ctx.highlightManager?.getActiveHighlight();o!=null&&(o.series!==this||o.datum==null)&&(o=void 0);const s=this.contextNodeData?.nodeData??[];this.datumSelection=await this.updateDatumSelection({nodeData:s,datumSelection:t}),await this.updateDatumNodes({datumSelection:t,isHighlight:!1}),this.labelSelection=await this.updateLabelSelection({labelSelection:e}),await this.updateLabelNodes({labelSelection:e}),this.highlightDatumSelection=await this.updateDatumSelection({nodeData:o!=null?[o]:[],datumSelection:i}),await this.updateDatumNodes({datumSelection:i,isHighlight:!0})}async updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>createDatumId4(e.idValue))}async updateDatumNodes(t){const{id:e,properties:i,ctx:{callbackCache:o}}=this,{datumSelection:s,isHighlight:a}=t,{idKey:n,labelKey:r,sizeKey:l,colorKey:c,stroke:h,strokeOpacity:d,lineDash:u,lineDashOffset:g,itemStyler:y}=i,p=a?i.highlightStyle.item:void 0,m=this.getStrokeWidth(i.strokeWidth);s.each((f,v)=>{const{projectedGeometry:S}=v;if(S==null){f.visible=!1,f.projectedGeometry=void 0;return}let x;y!=null&&(x=o.call(y,{seriesId:e,datum:v.datum,idKey:n,labelKey:r,sizeKey:l,colorKey:c,strokeOpacity:d,stroke:h,strokeWidth:m,lineDash:u,lineDashOffset:g,highlighted:a})),f.visible=!0,f.projectedGeometry=S,f.stroke=p?.stroke??x?.stroke??v.stroke??h,f.strokeWidth=Math.max(p?.strokeWidth??0,x?.strokeWidth??v.strokeWidth??m),f.strokeOpacity=p?.strokeOpacity??x?.strokeOpacity??d,f.lineDash=p?.lineDash??x?.lineDash??u,f.lineDashOffset=p?.lineDashOffset??x?.lineDashOffset??g})}async updateLabelSelection(t){const e=(this.isLabelEnabled()?this.chart?.placeLabels().get(this):void 0)??[];return t.labelSelection.update(e)}async updateLabelNodes(t){const{labelSelection:e}=t,{color:i,fontStyle:o,fontWeight:s,fontSize:a,fontFamily:n}=this.properties.label;e.each((r,{x:l,y:c,width:h,height:d,text:u})=>{r.visible=!0,r.x=l+h/2,r.y=c+d/2,r.text=u,r.fill=i,r.fontStyle=o,r.fontWeight=s,r.fontSize=a,r.fontFamily=n,r.textAlign="center",r.textBaseline="middle"})}onLegendItemClick(t){const{legendItemName:e}=this.properties,{enabled:i,itemId:o,series:s}=t,a=e!=null&&e===t.legendItemName;(s.id===this.id||a)&&this.toggleSeriesItem(o,i)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:o,numVisibleItems:s}=t,{legendItemName:a}=this.properties,n=a!=null&&a===t.legendItemName;o.id===this.id||n?this.toggleSeriesItem(i,!0):e&&s===1?this.toggleSeriesItem(i,!0):this.toggleSeriesItem(i,!1)}resetAnimation(){}getLabelData(){return this.contextNodeData?.labelData??[]}getSeriesDomain(){return[NaN,NaN]}pickNodeClosestDatum({x:t,y:e}){let i=1/0,o;return this.datumSelection.each((s,a)=>{const n=s.distanceToPoint(t,e);n<i&&(i=n,o=a)}),o!=null?{datum:o,distance:i}:void 0}datumMidPoint(t){const{_previousDatumMidPoint:e}=this;if(e?.datum===t)return e.point;const i=t.projectedGeometry,o=i!=null?largestLineString(i):void 0,s=o!=null?lineStringCenter(o)?.point:void 0,a=s!=null?{x:s[0],y:s[1]}:void 0;return this._previousDatumMidPoint={datum:t,point:a},a}getLegendData(t){const{processedData:e,dataModel:i}=this;if(e==null||i==null)return[];const{title:o,legendItemName:s,idKey:a,idName:n,colorKey:r,colorName:l,colorRange:c,stroke:h,strokeWidth:d,strokeOpacity:u,lineDash:g,visible:y}=this.properties;if(t==="gradient"&&r!=null&&c!=null){const p=e.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:y,seriesId:this.id,colorName:l,colorRange:c,colorDomain:p}]}else return t==="category"?[{legendType:"category",id:this.id,itemId:s??o??n??a,seriesId:this.id,enabled:y,label:{text:s??o??n??a},symbols:[{marker:{fill:h,fillOpacity:u,stroke:void 0,strokeWidth:0,strokeOpacity:0,enabled:!1},line:{stroke:h,strokeOpacity:u,strokeWidth:d,lineDash:g}}],legendItemName:s}]:[]}getTooltipHtml(t){const{id:e,processedData:i,properties:o,ctx:{callbackCache:s}}=this;if(!i||!o.isValid())return import_ag_charts_community132._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const{legendItemName:a,idKey:n,idName:r,colorKey:l,colorName:c,sizeKey:h,sizeName:d,labelKey:u,labelName:g,itemStyler:y,tooltip:p,strokeOpacity:m,lineDash:f,lineDashOffset:v}=o,{datum:S,stroke:x,idValue:M,colorValue:T,sizeValue:b,labelValue:I,itemId:D}=t,N=sanitizeHtml5(o.title??a)??"",k=[];k.push(sanitizeHtml5((r!=null?`${r}: `:"")+M)),T!=null&&k.push(sanitizeHtml5((c??l)+": "+T)),b!=null&&k.push(sanitizeHtml5((d??h)+": "+b)),I!=null&&u!==n&&k.push(sanitizeHtml5((g??u)+": "+I));const _=k.join("<br>");let O;y&&(O=s.call(y,{highlighted:!1,seriesId:e,datum:S,idKey:n,sizeKey:h,colorKey:l,labelKey:u,stroke:x,strokeWidth:this.getStrokeWidth(t.strokeWidth??o.strokeWidth),strokeOpacity:m,lineDash:f,lineDashOffset:v}));const A=O?.stroke??x??o.stroke;return p.toTooltipHtml({title:N,content:_,backgroundColor:A},{seriesId:e,datum:S,idKey:n,title:N,color:A,itemId:D,sizeKey:h,colorKey:l,colorName:c,idName:r,labelKey:u,labelName:g,sizeName:d,...this.getModuleTooltipParams()})}computeFocusBounds(t){return findFocusedGeoGeometry(this,t)?.computeTransformedBBox()}};MapLineSeries.className="MapLineSeries",MapLineSeries.type="map-line",__decorateClass([Validate50(GEOJSON_OBJECT,{optional:!0,property:"topology"})],MapLineSeries.prototype,"_chartTopology",2);var{DEFAULT_DIVERGING_SERIES_COLOUR_RANGE,DEFAULT_FONT_FAMILY:DEFAULT_FONT_FAMILY2,DEFAULT_LABEL_COLOUR:DEFAULT_LABEL_COLOUR2,singleSeriesPaletteFactory}=import_ag_charts_community133._Theme,MapLineModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line",moduleFactory:t=>new MapLineSeries(t),tooltipDefaults:{range:"exact"},themeTemplate:{...MAP_THEME_DEFAULTS,series:{strokeWidth:1,maxStrokeWidth:3,lineDash:[0],lineDashOffset:0,label:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:DEFAULT_FONT_FAMILY2,color:DEFAULT_LABEL_COLOUR2}}},paletteFactory:t=>{const{takeColors:e,colorsCount:i,userPalette:o,themeTemplateParameters:s}=t,{fill:a}=singleSeriesPaletteFactory(t),n=s.get(DEFAULT_DIVERGING_SERIES_COLOUR_RANGE),{fills:r}=e(i);return{colorRange:o==="inbuilt"?n:[r[0],r[1]],stroke:a}}},import_ag_charts_community136=require("ag-charts-community"),import_ag_charts_community135=require("ag-charts-community");function polygonPointSearch(t,e,i){const o=polygonBbox(t[0],void 0);if(o==null)return;const s=(o.lon0+o.lon1)/2,a=(o.lat0+o.lat1)/2,n=Math.abs(o.lon1-o.lon0),r=Math.abs(o.lat1-o.lat0),l=polygonCentroid(t[0]),[c,h]=l,d=-polygonDistance(t,c,h);let u;const g=(M,T)=>{const I=Math.max(T-d,0);return M-.5*I},y=(M,T,b)=>{const{distance:I,maxDistance:D}=i(t,M,T,b),N=Math.hypot(c-M,h-T),k=Math.min(Math.max(c,M-b/2),M+b/2),_=Math.min(Math.max(h,T-b/2),T+b/2),O=Math.hypot(c-k,h-_),A=g(I,N),L=g(D,O);return{distance:I,maxDistance:D,value:A,maxValue:L,x:M,y:T,stride:b}},p=(M,T,b,I)=>{const D=y(T,b,I);D.maxDistance>=0&&M.push(D)},m=Math.min(n,r)/2;let f={value:y(s,a,m),next:null};for(;f!=null;){const M=f.value,{distance:T,value:b,maxValue:I,x:D,y:N,stride:k}=M;if(f=f.next,T>0&&(u==null||b>u.value)&&(u=M),u!=null&&I-u.value<=e)continue;const _=k/2,O=[];p(O,D-_,N-_,_),p(O,D+_,N-_,_),p(O,D-_,N+_,_),p(O,D+_,N+_,_),O.sort(labelPlacementCmp),f=insertManySorted(f,O,labelPlacementCmp)}if(u==null)return;const{distance:v,x:S,y:x}=u;return{x:S,y:x,distance:v}}var labelPlacementCmp=(t,e)=>e.maxValue-t.maxValue;function polygonMarkerCenter(t,e){const i=polygonPointSearch(t,e,(a,n,r,l)=>{const c=-polygonDistance(a,n,r),h=c+l*Math.SQRT2;return{distance:c,maxDistance:h}});if(i==null)return;const{x:o,y:s}=i;return[o,s]}function markerPositions(t,e){let i;switch(t.type){case"GeometryCollection":return t.geometries.flatMap(o=>markerPositions(o,e));case"MultiPoint":return t.coordinates;case"Point":return[t.coordinates];case"MultiPolygon":{const o=largestPolygon(t);i=o!=null?polygonMarkerCenter(o,e):void 0;break}case"Polygon":{const o=t.coordinates;i=o!=null?polygonMarkerCenter(o,e):void 0;break}case"MultiLineString":{const o=largestLineString(t);i=o!=null?lineStringCenter(o)?.point:void 0;break}case"LineString":{const o=t.coordinates;i=lineStringCenter(o)?.point;break}}return i!=null?[i]:[]}var import_ag_charts_community134=require("ag-charts-community"),{AND:AND9,ARRAY:ARRAY8,COLOR_STRING:COLOR_STRING14,COLOR_STRING_ARRAY:COLOR_STRING_ARRAY4,FUNCTION:FUNCTION10,NUMBER_ARRAY:NUMBER_ARRAY2,OBJECT:OBJECT20,POSITIVE_NUMBER:POSITIVE_NUMBER17,RATIO:RATIO19,STRING:STRING24,MARKER_SHAPE,Validate:Validate51,SeriesProperties:SeriesProperties4,SeriesTooltip:SeriesTooltip8}=import_ag_charts_community134._ModuleSupport,{Label:Label5,Circle}=import_ag_charts_community134._Scene,{Logger:Logger13}=import_ag_charts_community134._Util,MapMarkerSeriesLabel=class extends Label5{constructor(){super(...arguments),this.placement="bottom"}};__decorateClass([Validate51(STRING24)],MapMarkerSeriesLabel.prototype,"placement",2);var MapMarkerSeriesProperties=class extends SeriesProperties4{constructor(){super(...arguments),this.topology=void 0,this.idKey=void 0,this.topologyIdKey="name",this.idName=void 0,this.latitudeKey=void 0,this.latitudeName=void 0,this.longitudeKey=void 0,this.longitudeName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.shape=Circle,this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.label=new MapMarkerSeriesLabel,this.tooltip=new SeriesTooltip8}isValid(){const t=super.isValid(),e=this.idKey!=null,i=this.latitudeKey!=null&&this.longitudeKey!=null;return!e&&!i?(Logger13.warnOnce("Either both [topology] and [idKey] or both [latitudeKey] and [longitudeKey] must be set to render a map marker series."),!1):t}};__decorateClass([Validate51(GEOJSON_OBJECT,{optional:!0})],MapMarkerSeriesProperties.prototype,"topology",2),__decorateClass([Validate51(STRING24,{optional:!0})],MapMarkerSeriesProperties.prototype,"title",2),__decorateClass([Validate51(STRING24,{optional:!0})],MapMarkerSeriesProperties.prototype,"legendItemName",2),__decorateClass([Validate51(STRING24,{optional:!0})],MapMarkerSeriesProperties.prototype,"idKey",2),__decorateClass([Validate51(STRING24)],MapMarkerSeriesProperties.prototype,"topologyIdKey",2),__decorateClass([Validate51(STRING24,{optional:!0})],MapMarkerSeriesProperties.prototype,"idName",2),__decorateClass([Validate51(STRING24,{optional:!0})],MapMarkerSeriesProperties.prototype,"latitudeKey",2),__decorateClass([Validate51(STRING24,{optional:!0})],MapMarkerSeriesProperties.prototype,"latitudeName",2),__decorateClass([Validate51(STRING24,{optional:!0})],MapMarkerSeriesProperties.prototype,"longitudeKey",2),__decorateClass([Validate51(STRING24,{optional:!0})],MapMarkerSeriesProperties.prototype,"longitudeName",2),__decorateClass([Validate51(STRING24,{optional:!0})],MapMarkerSeriesProperties.prototype,"labelKey",2),__decorateClass([Validate51(STRING24,{optional:!0})],MapMarkerSeriesProperties.prototype,"labelName",2),__decorateClass([Validate51(STRING24,{optional:!0})],MapMarkerSeriesProperties.prototype,"sizeKey",2),__decorateClass([Validate51(STRING24,{optional:!0})],MapMarkerSeriesProperties.prototype,"sizeName",2),__decorateClass([Validate51(STRING24,{optional:!0})],MapMarkerSeriesProperties.prototype,"colorKey",2),__decorateClass([Validate51(STRING24,{optional:!0})],MapMarkerSeriesProperties.prototype,"colorName",2),__decorateClass([Validate51(AND9(COLOR_STRING_ARRAY4,ARRAY8.restrict({minLength:1})),{optional:!0})],MapMarkerSeriesProperties.prototype,"colorRange",2),__decorateClass([Validate51(MARKER_SHAPE)],MapMarkerSeriesProperties.prototype,"shape",2),__decorateClass([Validate51(POSITIVE_NUMBER17)],MapMarkerSeriesProperties.prototype,"size",2),__decorateClass([Validate51(POSITIVE_NUMBER17,{optional:!0})],MapMarkerSeriesProperties.prototype,"maxSize",2),__decorateClass([Validate51(NUMBER_ARRAY2,{optional:!0})],MapMarkerSeriesProperties.prototype,"sizeDomain",2),__decorateClass([Validate51(COLOR_STRING14,{optional:!0})],MapMarkerSeriesProperties.prototype,"fill",2),__decorateClass([Validate51(RATIO19)],MapMarkerSeriesProperties.prototype,"fillOpacity",2),__decorateClass([Validate51(COLOR_STRING14,{optional:!0})],MapMarkerSeriesProperties.prototype,"stroke",2),__decorateClass([Validate51(POSITIVE_NUMBER17)],MapMarkerSeriesProperties.prototype,"strokeWidth",2),__decorateClass([Validate51(RATIO19)],MapMarkerSeriesProperties.prototype,"strokeOpacity",2),__decorateClass([Validate51(FUNCTION10,{optional:!0})],MapMarkerSeriesProperties.prototype,"itemStyler",2),__decorateClass([Validate51(OBJECT20)],MapMarkerSeriesProperties.prototype,"label",2),__decorateClass([Validate51(OBJECT20)],MapMarkerSeriesProperties.prototype,"tooltip",2);var{CachedTextMeasurerPool:CachedTextMeasurerPool7,Validate:Validate52,fromToMotion:fromToMotion2,StateMachine:StateMachine8,getMissCount:getMissCount3,createDatumId:createDatumId5,DataModelSeries:DataModelSeries4,SeriesNodePickMode:SeriesNodePickMode7,Layers:Layers9,valueProperty:valueProperty9,computeMarkerFocusBounds}=import_ag_charts_community135._ModuleSupport,{ColorScale:ColorScale3,LinearScale:LinearScale4}=import_ag_charts_community135._Scale,{Group:Group10,Selection:Selection6,Text:Text8,getMarker}=import_ag_charts_community135._Scene,{sanitizeHtml:sanitizeHtml6,Logger:Logger14}=import_ag_charts_community135._Util,MapMarkerSeries=class extends DataModelSeries4{constructor(t){super({moduleCtx:t,contentGroupVirtual:!0,useLabelLayer:!0,pickModes:[SeriesNodePickMode7.EXACT_SHAPE_MATCH,SeriesNodePickMode7.NEAREST_NODE]}),this.properties=new MapMarkerSeriesProperties,this._chartTopology=void 0,this.colorScale=new ColorScale3,this.sizeScale=new LinearScale4,this.markerGroup=this.contentGroup.appendChild(new Group10({name:"markerGroup",layer:!0,isVirtual:!1,zIndex:Layers9.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("marker")})),this.labelSelection=Selection6.select(this.labelGroup,Text8,!1),this.markerSelection=Selection6.select(this.markerGroup,()=>this.markerFactory(),!1),this.highlightMarkerSelection=Selection6.select(this.highlightNode,()=>this.markerFactory()),this.animationState=new StateMachine8("empty",{empty:{update:{target:"ready",action:()=>this.animateMarkers()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.resetAllAnimation(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateMarkers()},resize:{target:"ready",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){const t=this.properties.latitudeKey!=null&&this.properties.longitudeKey!=null;return super.hasData&&(this.topology!=null||t)}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",t=>{this.onLegendItemClick(t)}),this.ctx.chartEventManager.addListener("legend-item-double-click",t=>{this.onLegendItemDoubleClick(t)}))}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}markerFactory(){const{shape:t}=this.properties,e=getMarker(t);return new e}async processData(t){if(this.data==null||!this.properties.isValid())return;const{data:e,topology:i,sizeScale:o,colorScale:s}=this,{topologyIdKey:a,idKey:n,latitudeKey:r,longitudeKey:l,sizeKey:c,colorKey:h,labelKey:d,sizeDomain:u,colorRange:g}=this.properties,y=new Map;i?.features.forEach(I=>{const D=I.properties?.[a];D!=null&&y.set(D,I)});const p=this.sizeScale.type,m=this.colorScale.type,f=this.scale?.type,v=r!=null&&l!=null,{dataModel:S,processedData:x}=await this.requestDataModel(t,e,{props:[...n!=null?[valueProperty9(n,f,{id:"idValue",includeProperty:!1}),valueProperty9(n,f,{id:"featureValue",includeProperty:!1,processor:()=>I=>y.get(I)})]:[],...v?[valueProperty9(r,f,{id:"latValue"}),valueProperty9(l,f,{id:"lonValue"})]:[],...d?[valueProperty9(d,"band",{id:"labelValue"})]:[],...c?[valueProperty9(c,p,{id:"sizeValue"})]:[],...h?[valueProperty9(h,m,{id:"colorValue"})]:[]]}),M=n!=null?S.resolveProcessedDataIndexById(this,"featureValue"):void 0,T=v?S.resolveProcessedDataIndexById(this,"latValue"):void 0,b=v?S.resolveProcessedDataIndexById(this,"lonValue"):void 0;if(this.topologyBounds=x.data.reduce((I,{values:D})=>{const k=(M!=null?D[M]:void 0)?.geometry;if(k!=null&&(I=geometryBbox(k,I)),T!=null&&b!=null){const _=D[b],O=D[T];I=extendBbox(I,_,O,_,O)}return I},void 0),c!=null){const I=S.resolveProcessedDataIndexById(this,"sizeValue"),D=x.domain.values[I]??[];o.domain=u??D}if(g!=null&&this.isColorScaleValid()){const I=S.resolveProcessedDataIndexById(this,"colorValue");s.domain=x.domain.values[I],s.range=g,s.update()}this.animationState.transition("updateData")}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const o=e.resolveProcessedDataIndexById(this,"colorValue"),s=i.data.length,a=getMissCount3(this,i.defs.values[o].missing);return!(s===0||s===a)}getLabelDatum(t,e,i,o,s,a){if(e==null)return;const{idKey:n,idName:r,latitudeKey:l,latitudeName:c,longitudeKey:h,longitudeName:d,sizeKey:u,sizeName:g,colorKey:y,colorName:p,labelKey:m,labelName:f,label:v}=this.properties,{placement:S}=v,x=this.getLabelText(v,{value:e,datum:t,idKey:n,idName:r,latitudeKey:l,latitudeName:c,longitudeKey:h,longitudeName:d,sizeKey:u,sizeName:g,colorKey:y,colorName:p,labelKey:m,labelName:f});if(x==null)return;const{width:M,height:T}=CachedTextMeasurerPool7.measureText(String(x),{font:a});return{point:{x:i,y:o,size:s},label:{width:M,height:T,text:x},marker:getMarker(this.properties.shape),placement:S}}async createNodeData(){const{id:t,dataModel:e,processedData:i,colorScale:o,sizeScale:s,properties:a,scale:n}=this,{idKey:r,latitudeKey:l,longitudeKey:c,sizeKey:h,colorKey:d,labelKey:u,label:g}=a;if(e==null||i==null||n==null)return;const y=this.isColorScaleValid(),p=l!=null&&c!=null,m=r!=null?e.resolveProcessedDataIndexById(this,"idValue"):void 0,f=r!=null?e.resolveProcessedDataIndexById(this,"featureValue"):void 0,v=p?e.resolveProcessedDataIndexById(this,"latValue"):void 0,S=p?e.resolveProcessedDataIndexById(this,"lonValue"):void 0,x=u!=null?e.resolveProcessedDataIndexById(this,"labelValue"):void 0,M=h!=null?e.resolveProcessedDataIndexById(this,"sizeValue"):void 0,T=d!=null?e.resolveProcessedDataIndexById(this,"colorValue"):void 0,b=a.maxSize??a.size;s.range=[Math.min(a.size,b),b];const I=g.getFont();let D;m!=null&&f!=null&&(D=new Map,i.data.forEach(({values:A})=>{const L=A[m],E=A[f]?.geometry,C=E!=null&&n!=null?projectGeometry(E,n):void 0;L!=null&&C!=null&&D.set(L,C)}));const N=[],k=[],_=[];i.data.forEach(({datum:A,values:L})=>{const E=m!=null?L[m]:void 0,C=S!=null?L[S]:void 0,R=v!=null?L[v]:void 0,P=T!=null?L[T]:void 0,w=M!=null?L[M]:void 0,z=x!=null?L[x]:void 0,B=y&&P!=null?o.convert(P):void 0,F=w!=null?s.convert(w,{clampMode:"clamped"}):a.size,W=E!=null?D?.get(E):void 0;if(E!=null&&projectGeometry==null&&_.push(E),C!=null&&R!=null){const[V,H]=n.convert([C,R]),U=this.getLabelDatum(A,z,V,H,F,I);U&&k.push(U),N.push({series:this,itemId:l,datum:A,index:-1,fill:B,idValue:E,lonValue:C,latValue:R,labelValue:z,sizeValue:w,colorValue:P,point:{x:V,y:H,size:F},midPoint:{x:V,y:H}})}else W!=null&&markerPositions(W,1).forEach(([V,H],U)=>{const K=this.getLabelDatum(A,z,V,H,F,I);K&&k.push(K),N.push({series:this,itemId:l,datum:A,index:U,fill:B,idValue:E,lonValue:C,latValue:R,labelValue:z,sizeValue:w,colorValue:P,point:{x:V,y:H,size:F},midPoint:{x:V,y:H}})})});const O=10;if(_.length>O){const A=_.length-O;_.length=O,_.push(`(+${A} more)`)}return _.length>0&&Logger14.warnOnce("some data items do not have matches in the provided topology",_),{itemId:t,nodeData:N,labelData:k}}async updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=await this.createNodeData(),this.nodeDataRefresh=!1)}checkScaleChange(){return this.previousScale===this.scale?!1:(this.previousScale=this.scale,!0)}async update({seriesRect:t}){const e=this.checkResize(t),i=this.checkScaleChange(),{labelSelection:o,markerSelection:s,highlightMarkerSelection:a}=this;await this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let n=this.ctx.highlightManager?.getActiveHighlight();n!=null&&(n.series!==this||n.datum==null)&&(n=void 0);const r=this.contextNodeData?.nodeData??[];this.labelSelection=await this.updateLabelSelection({labelSelection:o}),await this.updateLabelNodes({labelSelection:o}),this.markerSelection=await this.updateMarkerSelection({markerData:r,markerSelection:s}),await this.updateMarkerNodes({markerSelection:s,isHighlight:!1,highlightedDatum:n}),this.highlightMarkerSelection=await this.updateMarkerSelection({markerData:n!=null?[n]:[],markerSelection:a}),await this.updateMarkerNodes({markerSelection:a,isHighlight:!0,highlightedDatum:n}),(i||e)&&this.animationState.transition("resize"),this.animationState.transition("update")}async updateLabelSelection(t){const e=(this.isLabelEnabled()?this.chart?.placeLabels().get(this):void 0)??[];return t.labelSelection.update(e)}async updateLabelNodes(t){const{labelSelection:e}=t,{color:i,fontStyle:o,fontWeight:s,fontSize:a,fontFamily:n}=this.properties.label;e.each((r,{x:l,y:c,width:h,height:d,text:u})=>{r.visible=!0,r.x=l+h/2,r.y=c+d/2,r.text=u,r.fill=i,r.fontStyle=o,r.fontWeight=s,r.fontSize=a,r.fontFamily=n,r.textAlign="center",r.textBaseline="middle"})}async updateMarkerSelection(t){const{markerData:e,markerSelection:i}=t;return i.update(e,void 0,o=>createDatumId5([o.index,o.idValue,o.lonValue,o.latValue]))}async updateMarkerNodes(t){const{properties:e}=this,{markerSelection:i,isHighlight:o,highlightedDatum:s}=t,{fill:a,fillOpacity:n,stroke:r,strokeOpacity:l}=e,c=o?e.highlightStyle.item:void 0,h=this.getStrokeWidth(e.strokeWidth);i.each((d,u)=>{const{datum:g,point:y}=u,p=this.getMapMarkerStyle(u,o);d.size=p?.size??y.size,d.fill=c?.fill??p?.fill??u.fill??a,d.fillOpacity=c?.fillOpacity??p?.fillOpacity??n,d.stroke=c?.stroke??p?.stroke??r,d.strokeWidth=c?.strokeWidth??p?.strokeWidth??h,d.strokeOpacity=c?.strokeOpacity??p?.strokeOpacity??l,d.translationX=y.x,d.translationY=y.y,d.zIndex=!o&&s!=null&&g===s.datum?1:0})}onLegendItemClick(t){const{legendItemName:e}=this.properties,{enabled:i,itemId:o,series:s}=t,a=e!=null&&e===t.legendItemName;(s.id===this.id||a)&&this.toggleSeriesItem(o,i)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:o,numVisibleItems:s}=t,{legendItemName:a}=this.properties,n=a!=null&&a===t.legendItemName;o.id===this.id||n?this.toggleSeriesItem(i,!0):e&&s===1?this.toggleSeriesItem(i,!0):this.toggleSeriesItem(i,!1)}isProcessedDataAnimatable(){return!0}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"&&this.animationState.transition("skip")}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),this.ctx.animationManager.skipCurrentBatch(),this.labelSelection.cleanup(),this.markerSelection.cleanup(),this.highlightMarkerSelection.cleanup()}animateMarkers(){const{animationManager:t}=this.ctx,e=prepareMapMarkerAnimationFunctions();fromToMotion2(this.id,"markers",t,[this.markerSelection,this.highlightMarkerSelection],e)}getLabelData(){return this.contextNodeData?.labelData??[]}getSeriesDomain(){return[NaN,NaN]}pickNodeClosestDatum(t){const{x:e,y:i}=this.rootGroup.transformPoint(t.x,t.y);let o=1/0,s;return this.contextNodeData?.nodeData.forEach(a=>{const{x:n,y:r,size:l}=a.point,c=Math.max(Math.abs(n-e)-l,0),h=Math.max(Math.abs(r-i)-l,0),d=c*c+h*h;d<o&&(o=d,s=a)}),s!=null?{datum:s,distance:Math.sqrt(o)}:void 0}getLegendData(t){const{processedData:e,dataModel:i}=this;if(e==null||i==null)return[];const{title:o,legendItemName:s,idName:a,idKey:n,colorKey:r,colorName:l,colorRange:c,visible:h,shape:d,fill:u,stroke:g,fillOpacity:y,strokeOpacity:p,strokeWidth:m}=this.properties;if(t==="gradient"&&r!=null&&c!=null){const f=e.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:h,seriesId:this.id,colorName:l,colorRange:c,colorDomain:f}]}else return t==="category"?[{legendType:"category",id:this.id,itemId:s??o??a??n??this.id,seriesId:this.id,enabled:h,label:{text:s??o??a??n??this.id},symbols:[{marker:{shape:d,fill:u,fillOpacity:y,stroke:g,strokeWidth:m,strokeOpacity:p}}],legendItemName:s}]:[]}getTooltipHtml(t){const{id:e,processedData:i,ctx:{callbackCache:o},properties:s}=this;if(!i||!this.properties.isValid())return import_ag_charts_community135._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const{legendItemName:a,idKey:n,idName:r,latitudeKey:l,longitudeKey:c,sizeKey:h,sizeName:d,colorKey:u,colorName:g,labelKey:y,labelName:p,itemStyler:m,tooltip:f,latitudeName:v,longitudeName:S,shape:x,size:M,fillOpacity:T,stroke:b,strokeWidth:I,strokeOpacity:D}=s,{datum:N,fill:k,idValue:_,latValue:O,lonValue:A,sizeValue:L,colorValue:E,labelValue:C,itemId:R}=t,P=sanitizeHtml6(s.title??a)??"",w=[];_!=null&&w.push(sanitizeHtml6((r!=null?`${r}: `:"")+_)),E!=null&&w.push(sanitizeHtml6((g??u)+": "+E)),L!=null&&w.push(sanitizeHtml6((d??h)+": "+L)),C!=null&&(n==null||n!==y)&&w.push(sanitizeHtml6((p??y)+": "+C)),O!=null&&A!=null&&w.push(sanitizeHtml6(`${Math.abs(O).toFixed(4)}\xB0 ${O>=0?"N":"S"}, ${Math.abs(A).toFixed(4)}\xB0 ${O>=0?"W":"E"}`));const z=w.join("<br>");let B;m&&(B=o.call(m,{highlighted:!1,seriesId:e,datum:N,idKey:n,sizeKey:h,colorKey:u,labelKey:y,latitudeKey:l,longitudeKey:c,shape:x,size:M,fill:k,fillOpacity:T,stroke:b,strokeWidth:I,strokeOpacity:D}));const F=B?.fill??k??s.fill;return f.toTooltipHtml({title:P,content:z,backgroundColor:F},{seriesId:e,datum:N,idKey:n,latitudeKey:l,longitudeKey:c,title:P,color:F,colorKey:u,colorName:g,idName:r,itemId:R,labelKey:y,labelName:p,latitudeName:v,longitudeName:S,sizeKey:h,sizeName:d,...this.getModuleTooltipParams()})}getMapMarkerStyle(t,e){const{id:i,properties:o,ctx:{callbackCache:s}}=this,{datum:a,point:n}=t,{idKey:r,latitudeKey:l,longitudeKey:c,labelKey:h,sizeKey:d,colorKey:u,fill:g,fillOpacity:y,stroke:p,strokeOpacity:m,shape:f,itemStyler:v}=o,S=this.getStrokeWidth(o.strokeWidth);if(v!==void 0)return s.call(v,{seriesId:i,datum:a,size:n.size,idKey:r,latitudeKey:l,longitudeKey:c,labelKey:h,sizeKey:d,colorKey:u,fill:g,fillOpacity:y,stroke:p,strokeWidth:S,strokeOpacity:m,shape:f,highlighted:e})}getFormattedMarkerStyle(t){return{size:this.getMapMarkerStyle(t,!0)?.size??t.point.size}}computeFocusBounds(t){return computeMarkerFocusBounds(this,t)}};MapMarkerSeries.className="MapMarkerSeries",MapMarkerSeries.type="map-marker",__decorateClass([Validate52(GEOJSON_OBJECT,{optional:!0,property:"topology"})],MapMarkerSeries.prototype,"_chartTopology",2);var{DEFAULT_LABEL_COLOUR:DEFAULT_LABEL_COLOUR3,DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:DEFAULT_DIVERGING_SERIES_COLOUR_RANGE2,singleSeriesPaletteFactory:singleSeriesPaletteFactory2}=import_ag_charts_community136._Theme,MapMarkerModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-marker",moduleFactory:t=>new MapMarkerSeries(t),tooltipDefaults:{range:"exact"},themeTemplate:{...MAP_THEME_DEFAULTS,series:{shape:"circle",maxSize:30,fillOpacity:.5,label:{color:DEFAULT_LABEL_COLOUR3}}},paletteFactory:t=>{const{takeColors:e,colorsCount:i,userPalette:o,themeTemplateParameters:s}=t,{fill:a,stroke:n}=singleSeriesPaletteFactory2(t),r=s.get(DEFAULT_DIVERGING_SERIES_COLOUR_RANGE2),{fills:l}=e(i);return{fill:a,stroke:n,colorRange:o==="inbuilt"?r:[l[0],l[1]]}}},import_ag_charts_community139=require("ag-charts-community"),import_ag_charts_community138=require("ag-charts-community"),import_ag_charts_community137=require("ag-charts-community"),{COLOR_STRING:COLOR_STRING15,LINE_DASH:LINE_DASH11,OBJECT:OBJECT21,POSITIVE_NUMBER:POSITIVE_NUMBER18,RATIO:RATIO20,Validate:Validate53,SeriesProperties:SeriesProperties5,SeriesTooltip:SeriesTooltip9}=import_ag_charts_community137._ModuleSupport,MapShapeBackgroundSeriesProperties=class extends SeriesProperties5{constructor(){super(...arguments),this.topology=void 0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=new SeriesTooltip9}};__decorateClass([Validate53(GEOJSON_OBJECT,{optional:!0})],MapShapeBackgroundSeriesProperties.prototype,"topology",2),__decorateClass([Validate53(COLOR_STRING15)],MapShapeBackgroundSeriesProperties.prototype,"fill",2),__decorateClass([Validate53(RATIO20)],MapShapeBackgroundSeriesProperties.prototype,"fillOpacity",2),__decorateClass([Validate53(COLOR_STRING15)],MapShapeBackgroundSeriesProperties.prototype,"stroke",2),__decorateClass([Validate53(RATIO20)],MapShapeBackgroundSeriesProperties.prototype,"strokeOpacity",2),__decorateClass([Validate53(POSITIVE_NUMBER18)],MapShapeBackgroundSeriesProperties.prototype,"strokeWidth",2),__decorateClass([Validate53(LINE_DASH11)],MapShapeBackgroundSeriesProperties.prototype,"lineDash",2),__decorateClass([Validate53(POSITIVE_NUMBER18)],MapShapeBackgroundSeriesProperties.prototype,"lineDashOffset",2),__decorateClass([Validate53(OBJECT21)],MapShapeBackgroundSeriesProperties.prototype,"tooltip",2);var{createDatumId:createDatumId6,Series,SeriesNodePickMode:SeriesNodePickMode8,Validate:Validate54}=import_ag_charts_community138._ModuleSupport,{Selection:Selection7,Group:Group11,PointerEvents:PointerEvents3}=import_ag_charts_community138._Scene,{Logger:Logger15}=import_ag_charts_community138._Util,MapShapeBackgroundSeries=class extends Series{constructor(t){super({moduleCtx:t,contentGroupVirtual:!1,useLabelLayer:!0,pickModes:[SeriesNodePickMode8.EXACT_SHAPE_MATCH]}),this.properties=new MapShapeBackgroundSeriesProperties,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new Group11({name:"itemGroup"})),this.datumSelection=Selection7.select(this.itemGroup,()=>this.nodeFactory())}get topology(){return this.properties.topology??this._chartTopology}setOptionsData(){}setChartData(){}get hasData(){return!1}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}nodeFactory(){const t=new GeoGeometry;return t.renderMode=1,t.lineJoin="round",t.pointerEvents=PointerEvents3.None,t}async processData(){const{topology:t}=this;this.topologyBounds=t?.features.reduce((e,i)=>{const o=i.geometry;return o==null?e:geometryBbox(o,e)},void 0),t==null&&Logger15.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")}async createNodeData(){const{id:t,topology:e,scale:i}=this;if(e==null)return;const o=[],s=[];return e.features.forEach((a,n)=>{const{geometry:r}=a,l=r!=null&&i!=null?projectGeometry(r,i):void 0;l!=null&&o.push({series:this,itemId:n,datum:a,index:n,projectedGeometry:l})}),{itemId:t,nodeData:o,labelData:s}}async updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=await this.createNodeData(),this.nodeDataRefresh=!1)}async update(){const{datumSelection:t}=this;await this.updateSelections(),this.contentGroup.visible=this.visible;const{nodeData:e=[]}=this.contextNodeData??{};this.datumSelection=await this.updateDatumSelection({nodeData:e,datumSelection:t}),await this.updateDatumNodes({datumSelection:t})}async updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>createDatumId6(e.index))}async updateDatumNodes(t){const{properties:e}=this,{datumSelection:i}=t,{fill:o,fillOpacity:s,stroke:a,strokeOpacity:n,lineDash:r,lineDashOffset:l}=e,c=this.getStrokeWidth(e.strokeWidth);i.each((h,d)=>{const{projectedGeometry:u}=d;if(u==null){h.visible=!1,h.projectedGeometry=void 0;return}h.visible=!0,h.projectedGeometry=u,h.fill=o,h.fillOpacity=s,h.stroke=a,h.strokeWidth=c,h.strokeOpacity=n,h.lineDash=r,h.lineDashOffset=l})}resetAnimation(){}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(){return[]}getTooltipHtml(){return import_ag_charts_community138._ModuleSupport.EMPTY_TOOLTIP_CONTENT}pickFocus(t){}};MapShapeBackgroundSeries.className="MapShapeBackgroundSeries",MapShapeBackgroundSeries.type="map-shape-background",__decorateClass([Validate54(GEOJSON_OBJECT,{optional:!0,property:"topology"})],MapShapeBackgroundSeries.prototype,"_chartTopology",2);var{DEFAULT_BACKGROUND_COLOUR,DEFAULT_HIERARCHY_FILLS}=import_ag_charts_community139._Theme,MapShapeBackgroundModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape-background",moduleFactory:t=>new MapShapeBackgroundSeries(t),tooltipDefaults:{range:"exact"},themeTemplate:{...MAP_THEME_DEFAULTS,series:{stroke:DEFAULT_BACKGROUND_COLOUR,strokeWidth:1}},paletteFactory:({themeTemplateParameters:t})=>({fill:t.get(DEFAULT_HIERARCHY_FILLS)?.[1]})},import_ag_charts_community142=require("ag-charts-community"),import_ag_charts_community141=require("ag-charts-community");function preferredLabelCenter(t,{aspectRatio:e,precision:i}){const o=polygonPointSearch(t,i,(l,c,h,d)=>{const u=maxWidthOfRectConstrainedByCenterAndAspectRatioToPolygon(l,c,h,e),g=u+2*d*e,y=u*Math.SQRT2,p=g*Math.SQRT2;return{distance:y,maxDistance:p}});if(o==null)return;const{x:s,y:a,distance:n}=o,r=n/Math.SQRT2;return{x:s,y:a,maxWidth:r}}function maxWidthOfRectConstrainedByCenterAndAspectRatioToLineSegment(t,e,i,o,s){const[a,n]=t,[r,l]=e,c=1/s,h=r-a,d=l-n,[u,g]=n<=l?t:e,[y,p]=a<=r?t:e,[m,f]=n<=l?e:t,[v,S]=a<=r?e:t;let x=1/0;if(h!==0){const N=d/h;for(let k=0;k<=1;k+=1){const _=k===0?c:-c,O=(N*a-n-_*i+o)/(N-_);if(O>=y&&O<=v){const A=Math.abs(i-O)*2;x=Math.min(x,A)}}}else for(let N=0;N<=1;N+=1){const _=(N===0?c:-c)*(a-i)+o;if(_>=g&&_<=f){const A=Math.abs(o-_)*2*s;x=Math.min(x,A)}}const M=s,T=Math.abs((u-i)/(g-o)),b=Math.abs((m-i)/(f-o));if(f<o&&b<M){const k=Math.abs(o-f)*2*s;x=Math.min(x,k)}else if(g>o&&T<M){const k=Math.abs(o-g)*2*s;x=Math.min(x,k)}const I=Math.abs((p-o)/(y-i)),D=Math.abs((S-o)/(v-i));if(v<i&&D<c){const N=Math.abs(i-v)*2;x=Math.min(x,N)}else if(y>i&&I<c){const N=Math.abs(i-y)*2;x=Math.min(x,N)}return x}function maxWidthOfRectConstrainedByCenterAndAspectRatioToPolygon(t,e,i,o){let s=!1,a=1/0;for(const n of t){let r=n[n.length-1],[l,c]=r;for(const h of n){const[d,u]=h;u>i!=c>i&&e<(l-d)*(i-u)/(c-u)+d&&(s=!s);const g=maxWidthOfRectConstrainedByCenterAndAspectRatioToLineSegment(r,h,e,i,o);a=Math.min(a,g),r=h,l=d,c=u}}return(s?1:-1)*a}function applyX(t,e,i){i>=e&&(t.maxX=Math.min(t.maxX,i-e)),i<=e&&(t.minX=Math.max(t.minX,i-e))}function xExtentsOfRectConstrainedByCenterAndHeightToLineSegment(t,e,i,o,s,a){const n=s-a/2,r=s+a/2,[l,c]=e,[h,d]=i,u=h-l,g=d-c,[y,p]=l<=h?e:i,[m,f]=l<=h?i:e;if(u!==0){const v=g/u;for(let S=0;S<=1;S+=1){const M=((S===0?n:r)-c)/v+l;M>=y&&M<=m&&applyX(t,o,M)}}else Math.max(n,Math.min(c,d))<=Math.min(r,Math.max(c,d))&&applyX(t,o,l);return m<o&&f>=n&&f<=r?applyX(t,o,m):y>o&&p>=n&&p<=r&&applyX(t,o,y),t}function maxWidthInPolygonForRectOfHeight(t,e,i,o){const s={minX:-1/0,maxX:1/0};for(const r of t){let l=r[r.length-1];for(const c of r)xExtentsOfRectConstrainedByCenterAndHeightToLineSegment(s,l,c,e,i,o),l=c}const{minX:a,maxX:n}=s;return Number.isFinite(a)&&Number.isFinite(n)?{x:e+(a+n)/2,width:n-a}:{x:e,width:0}}var import_ag_charts_community140=require("ag-charts-community"),{AND:AND10,ARRAY:ARRAY9,COLOR_STRING:COLOR_STRING16,COLOR_STRING_ARRAY:COLOR_STRING_ARRAY5,FUNCTION:FUNCTION11,LINE_DASH:LINE_DASH12,OBJECT:OBJECT22,POSITIVE_NUMBER:POSITIVE_NUMBER19,RATIO:RATIO21,STRING:STRING25,Validate:Validate55,SeriesProperties:SeriesProperties6,SeriesTooltip:SeriesTooltip10}=import_ag_charts_community140._ModuleSupport,MapShapeSeriesProperties=class extends SeriesProperties6{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.idName=void 0,this.topologyIdKey="name",this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.padding=0,this.label=new AutoSizeableSecondaryLabel,this.tooltip=new SeriesTooltip10}};__decorateClass([Validate55(GEOJSON_OBJECT,{optional:!0})],MapShapeSeriesProperties.prototype,"topology",2),__decorateClass([Validate55(STRING25,{optional:!0})],MapShapeSeriesProperties.prototype,"title",2),__decorateClass([Validate55(STRING25,{optional:!0})],MapShapeSeriesProperties.prototype,"legendItemName",2),__decorateClass([Validate55(STRING25)],MapShapeSeriesProperties.prototype,"idKey",2),__decorateClass([Validate55(STRING25,{optional:!0})],MapShapeSeriesProperties.prototype,"idName",2),__decorateClass([Validate55(STRING25)],MapShapeSeriesProperties.prototype,"topologyIdKey",2),__decorateClass([Validate55(STRING25,{optional:!0})],MapShapeSeriesProperties.prototype,"labelKey",2),__decorateClass([Validate55(STRING25,{optional:!0})],MapShapeSeriesProperties.prototype,"labelName",2),__decorateClass([Validate55(STRING25,{optional:!0})],MapShapeSeriesProperties.prototype,"colorKey",2),__decorateClass([Validate55(STRING25,{optional:!0})],MapShapeSeriesProperties.prototype,"colorName",2),__decorateClass([Validate55(AND10(COLOR_STRING_ARRAY5,ARRAY9.restrict({minLength:1})),{optional:!0})],MapShapeSeriesProperties.prototype,"colorRange",2),__decorateClass([Validate55(COLOR_STRING16)],MapShapeSeriesProperties.prototype,"fill",2),__decorateClass([Validate55(RATIO21)],MapShapeSeriesProperties.prototype,"fillOpacity",2),__decorateClass([Validate55(COLOR_STRING16)],MapShapeSeriesProperties.prototype,"stroke",2),__decorateClass([Validate55(RATIO21)],MapShapeSeriesProperties.prototype,"strokeOpacity",2),__decorateClass([Validate55(POSITIVE_NUMBER19)],MapShapeSeriesProperties.prototype,"strokeWidth",2),__decorateClass([Validate55(LINE_DASH12)],MapShapeSeriesProperties.prototype,"lineDash",2),__decorateClass([Validate55(POSITIVE_NUMBER19)],MapShapeSeriesProperties.prototype,"lineDashOffset",2),__decorateClass([Validate55(POSITIVE_NUMBER19)],MapShapeSeriesProperties.prototype,"padding",2),__decorateClass([Validate55(FUNCTION11,{optional:!0})],MapShapeSeriesProperties.prototype,"itemStyler",2),__decorateClass([Validate55(OBJECT22)],MapShapeSeriesProperties.prototype,"label",2),__decorateClass([Validate55(OBJECT22)],MapShapeSeriesProperties.prototype,"tooltip",2);var{getMissCount:getMissCount4,createDatumId:createDatumId7,DataModelSeries:DataModelSeries5,SeriesNodePickMode:SeriesNodePickMode9,valueProperty:valueProperty10,Validate:Validate56,CachedTextMeasurerPool:CachedTextMeasurerPool8,TextUtils:TextUtils4}=import_ag_charts_community141._ModuleSupport,{ColorScale:ColorScale4}=import_ag_charts_community141._Scale,{Group:Group12,Selection:Selection8,Text:Text9,PointerEvents:PointerEvents4}=import_ag_charts_community141._Scene,{sanitizeHtml:sanitizeHtml7,Logger:Logger16}=import_ag_charts_community141._Util,fixedScale=import_ag_charts_community141._ModuleSupport.MercatorScale.fixedScale(),MapShapeSeries=class extends DataModelSeries5{constructor(t){super({moduleCtx:t,contentGroupVirtual:!1,useLabelLayer:!0,pickModes:[SeriesNodePickMode9.EXACT_SHAPE_MATCH,SeriesNodePickMode9.NEAREST_NODE]}),this.properties=new MapShapeSeriesProperties,this._chartTopology=void 0,this.colorScale=new ColorScale4,this.itemGroup=this.contentGroup.appendChild(new Group12({name:"itemGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new Group12({name:"itemLabelGroup"})),this.datumSelection=Selection8.select(this.itemGroup,()=>this.nodeFactory()),this.labelSelection=Selection8.select(this.itemLabelGroup,Text9),this.highlightDatumSelection=Selection8.select(this.highlightNode,()=>this.nodeFactory()),this.previousLabelLayouts=void 0,this._previousDatumMidPoint=void 0,this.itemLabelGroup.pointerEvents=PointerEvents4.None}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){return super.hasData&&this.topology!=null}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",t=>{this.onLegendItemClick(t)}),this.ctx.chartEventManager.addListener("legend-item-double-click",t=>{this.onLegendItemDoubleClick(t)}))}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}nodeFactory(){const t=new GeoGeometry;return t.renderMode=1,t.lineJoin="round",t}async processData(t){if(this.data==null||!this.properties.isValid())return;const{data:e,topology:i,colorScale:o}=this,{topologyIdKey:s,idKey:a,colorKey:n,labelKey:r,colorRange:l}=this.properties,c=new Map;i?.features.forEach(p=>{const m=p.properties?.[s];m==null||!containsType(p.geometry,1)||c.set(m,p)});const h=this.colorScale.type,d=this.scale?.type,{dataModel:u,processedData:g}=await this.requestDataModel(t,e,{props:[valueProperty10(a,d,{id:"idValue",includeProperty:!1}),valueProperty10(a,d,{id:"featureValue",includeProperty:!1,processor:()=>p=>c.get(p)}),...r?[valueProperty10(r,"band",{id:"labelValue"})]:[],...n?[valueProperty10(n,h,{id:"colorValue"})]:[]]}),y=u.resolveProcessedDataIndexById(this,"featureValue");if(this.topologyBounds=g.data.reduce((p,{values:m})=>{const v=m[y]?.geometry;return v==null?p:geometryBbox(v,p)},void 0),l!=null&&this.isColorScaleValid()){const p=u.resolveProcessedDataIndexById(this,"colorValue");o.domain=g.domain.values[p],o.range=l,o.update()}i==null&&Logger16.warnOnce("no topology was provided for [MapShapeSeries]; nothing will be rendered.")}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const o=e.resolveProcessedDataIndexById(this,"colorValue"),s=i.data.length,a=getMissCount4(this,i.defs.values[o].missing);return!(s===0||s===a)}getLabelLayout(t,e,i,o,s){if(e==null||o==null)return;const{idKey:a,idName:n,colorKey:r,colorName:l,labelKey:c,labelName:h,padding:d,label:u}=this.properties,g=this.getLabelText(u,{value:e,datum:t,idKey:a,idName:n,colorKey:r,colorName:l,labelKey:c,labelName:h});if(g==null)return;const y=CachedTextMeasurerPool8.measureText(String(g),{font:i}),p=g.split(`
`).length,m=(y.width+2*d)/(p*TextUtils4.getLineHeight(u.fontSize)+2*d);if(s?.geometry===o&&s?.labelText===g&&s?.aspectRatio===m)return s;const f=projectGeometry(o,fixedScale),v=largestPolygon(f);if(v==null)return;const S=preferredLabelCenter(v,{aspectRatio:m,precision:.001});if(S==null)return;const{x,y:M,maxWidth:T}=S;return{geometry:o,labelText:g,aspectRatio:m,x,y:M,maxWidth:T,fixedPolygon:v}}getLabelDatum(t,e){const{scale:i}=this;if(i==null)return;const{padding:o,label:s}=this.properties,{labelText:a,aspectRatio:n,x:r,y:l,maxWidth:c,fixedPolygon:h}=t,d={width:Math.ceil(c*e),height:Math.ceil(c*e/n),meta:r},u=formatSingleLabel(a,s,{padding:o},(x,M)=>{if(!M)return d;const T=maxWidthInPolygonForRectOfHeight(h,r,l,x/e);return{width:T.width*e,height:x,meta:T.x}});if(u==null)return;const[{text:g,fontSize:y,lineHeight:p,width:m},f]=u;if(g===TextUtils4.EllipsisChar)return;const v=m<d.width?r:f,S=this.scale.convert(fixedScale.invert([v,l]));return{x:S[0],y:S[1],text:g,fontSize:y,lineHeight:p}}async createNodeData(){const{id:t,dataModel:e,processedData:i,colorScale:o,properties:s,scale:a,previousLabelLayouts:n}=this,{idKey:r,colorKey:l,labelKey:c,label:h,fill:d}=s;if(e==null||i==null)return;const u=a!=null?(a.range[1][0]-a.range[0][0])/a.bounds.width:NaN,g=this.isColorScaleValid(),y=e.resolveProcessedDataIndexById(this,"idValue"),p=e.resolveProcessedDataIndexById(this,"featureValue"),m=c!=null?e.resolveProcessedDataIndexById(this,"labelValue"):void 0,f=l!=null?e.resolveProcessedDataIndexById(this,"colorValue"):void 0,v=h.getFont(),S=new Map;this.previousLabelLayouts=S;const x=[],M=[],T=[];i.data.forEach(({datum:I,values:D})=>{const N=D[y],k=f!=null?D[f]:void 0,_=m!=null?D[m]:void 0,O=D[p]?.geometry;O==null&&T.push(N);const A=g&&k!=null?o.convert(k):void 0,L=this.getLabelLayout(I,_,v,O,n?.get(N));L!=null&&S.set(N,L);const E=L!=null&&a!=null?this.getLabelDatum(L,u):void 0;E!=null&&M.push(E);const C=O!=null&&a!=null?projectGeometry(O,a):void 0;x.push({series:this,itemId:r,datum:I,idValue:N,colorValue:k,labelValue:_,fill:A??d,projectedGeometry:C})});const b=10;if(T.length>b){const I=T.length-b;T.length=b,T.push(`(+${I} more)`)}return T.length>0&&Logger16.warnOnce("some data items do not have matches in the provided topology",T),{itemId:t,nodeData:x,labelData:M}}async updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=await this.createNodeData(),this.nodeDataRefresh=!1)}async update(){const{datumSelection:t,labelSelection:e,highlightDatumSelection:i}=this;await this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let o=this.ctx.highlightManager?.getActiveHighlight();o!=null&&(o.series!==this||o.datum==null)&&(o=void 0);const s=this.contextNodeData?.nodeData??[],a=this.contextNodeData?.labelData??[];this.datumSelection=await this.updateDatumSelection({nodeData:s,datumSelection:t}),await this.updateDatumNodes({datumSelection:t,isHighlight:!1}),this.labelSelection=await this.updateLabelSelection({labelData:a,labelSelection:e}),await this.updateLabelNodes({labelSelection:e}),this.highlightDatumSelection=await this.updateDatumSelection({nodeData:o!=null?[o]:[],datumSelection:i}),await this.updateDatumNodes({datumSelection:i,isHighlight:!0})}async updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>createDatumId7(e.idValue))}async updateDatumNodes(t){const{id:e,properties:i,ctx:{callbackCache:o}}=this,{datumSelection:s,isHighlight:a}=t,{idKey:n,colorKey:r,labelKey:l,fillOpacity:c,stroke:h,strokeOpacity:d,lineDash:u,lineDashOffset:g,itemStyler:y}=i,p=a?i.highlightStyle.item:void 0,m=this.getStrokeWidth(i.strokeWidth);s.each((f,v)=>{const{projectedGeometry:S}=v;if(S==null){f.visible=!1,f.projectedGeometry=void 0;return}let x;y!=null&&(x=o.call(y,{seriesId:e,datum:v.datum,idKey:n,colorKey:r,labelKey:l,fill:v.fill,fillOpacity:c,strokeOpacity:d,stroke:h,strokeWidth:m,lineDash:u,lineDashOffset:g,highlighted:a})),f.visible=!0,f.projectedGeometry=S,f.fill=p?.fill??x?.fill??v.fill,f.fillOpacity=p?.fillOpacity??x?.fillOpacity??c,f.stroke=p?.stroke??x?.stroke??h,f.strokeWidth=p?.strokeWidth??x?.strokeWidth??m,f.strokeOpacity=p?.strokeOpacity??x?.strokeOpacity??d,f.lineDash=p?.lineDash??x?.lineDash??u,f.lineDashOffset=p?.lineDashOffset??x?.lineDashOffset??g})}async updateLabelSelection(t){const e=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(e)}async updateLabelNodes(t){const{labelSelection:e}=t,{color:i,fontStyle:o,fontWeight:s,fontFamily:a}=this.properties.label;e.each((n,{x:r,y:l,text:c,fontSize:h,lineHeight:d})=>{n.visible=!0,n.x=r,n.y=l,n.text=c,n.fill=i,n.fontStyle=o,n.fontWeight=s,n.fontSize=h,n.lineHeight=d,n.fontFamily=a,n.textAlign="center",n.textBaseline="middle"})}onLegendItemClick(t){const{legendItemName:e}=this.properties,{enabled:i,itemId:o,series:s}=t,a=e!=null&&e===t.legendItemName;(s.id===this.id||a)&&this.toggleSeriesItem(o,i)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:o,numVisibleItems:s}=t,{legendItemName:a}=this.properties,n=a!=null&&a===t.legendItemName;o.id===this.id||n?this.toggleSeriesItem(i,!0):e&&s===1?this.toggleSeriesItem(i,!0):this.toggleSeriesItem(i,!1)}resetAnimation(){}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}pickNodeClosestDatum({x:t,y:e}){let i=1/0,o;return this.datumSelection.each((s,a)=>{const n=s.distanceToPoint(t,e);n<i&&(i=n,o=a)}),o!=null?{datum:o,distance:i}:void 0}datumMidPoint(t){const{_previousDatumMidPoint:e}=this;if(e?.datum===t)return e.point;const i=t.projectedGeometry,o=i!=null?largestPolygon(i):void 0,s=o!=null?polygonMarkerCenter(o,2):void 0,a=s!=null?{x:s[0],y:s[1]}:void 0;return this._previousDatumMidPoint={datum:t,point:a},a}getLegendData(t){const{processedData:e,dataModel:i}=this;if(e==null||i==null)return[];const{title:o,legendItemName:s,idKey:a,idName:n,fill:r,fillOpacity:l,stroke:c,strokeWidth:h,strokeOpacity:d,colorKey:u,colorName:g,colorRange:y,visible:p}=this.properties;if(t==="gradient"&&u!=null&&y!=null){const m=e.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:p,seriesId:this.id,colorName:g,colorRange:y,colorDomain:m}]}else return t==="category"?[{legendType:"category",id:this.id,itemId:s??o??n??a,seriesId:this.id,enabled:p,label:{text:s??o??n??a},symbols:[{marker:{fill:r,fillOpacity:l,stroke:c,strokeWidth:h,strokeOpacity:d}}],legendItemName:s}]:[]}getTooltipHtml(t){const{id:e,processedData:i,ctx:{callbackCache:o},properties:s}=this;if(!i||!s.isValid())return import_ag_charts_community141._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const{legendItemName:a,idKey:n,idName:r,colorKey:l,colorName:c,labelKey:h,labelName:d,stroke:u,strokeWidth:g,strokeOpacity:y,fillOpacity:p,lineDash:m,lineDashOffset:f,itemStyler:v,tooltip:S}=s,{datum:x,fill:M,idValue:T,colorValue:b,labelValue:I,itemId:D}=t,N=sanitizeHtml7(s.title??a)??"",k=[];k.push(sanitizeHtml7((r!=null?`${r}: `:"")+T)),b!=null&&k.push(sanitizeHtml7((c??l)+": "+b)),I!=null&&h!==n&&k.push(sanitizeHtml7((d??h)+": "+I));const _=k.join("<br>");let O;v&&(O=o.call(v,{seriesId:e,datum:x,idKey:n,colorKey:l,labelKey:h,fill:M,stroke:u,strokeWidth:this.getStrokeWidth(g),highlighted:!1,fillOpacity:p,strokeOpacity:y,lineDash:m,lineDashOffset:f}));const A=O?.fill??M;return S.toTooltipHtml({title:N,content:_,backgroundColor:A},{seriesId:e,datum:x,idKey:n,title:N,color:A,colorKey:l,colorName:c,idName:r,itemId:D,labelKey:h,labelName:d,...this.getModuleTooltipParams()})}computeFocusBounds(t){return findFocusedGeoGeometry(this,t)}};MapShapeSeries.className="MapShapeSeries",MapShapeSeries.type="map-shape",__decorateClass([Validate56(GEOJSON_OBJECT,{optional:!0,property:"topology"})],MapShapeSeries.prototype,"_chartTopology",2);var{DEFAULT_INVERTED_LABEL_COLOUR,DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:DEFAULT_DIVERGING_SERIES_COLOUR_RANGE3,DEFAULT_BACKGROUND_COLOUR:DEFAULT_BACKGROUND_COLOUR2,singleSeriesPaletteFactory:singleSeriesPaletteFactory3}=import_ag_charts_community142._Theme,MapShapeModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape",moduleFactory:t=>new MapShapeSeries(t),tooltipDefaults:{range:"exact"},themeTemplate:{...MAP_THEME_DEFAULTS,series:{fillOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,padding:2,label:{color:DEFAULT_INVERTED_LABEL_COLOUR,fontWeight:"bold",overflowStrategy:"hide"}}},paletteFactory:t=>{const{takeColors:e,colorsCount:i,userPalette:o,themeTemplateParameters:s}=t,{fill:a}=singleSeriesPaletteFactory3(t),n=s.get(DEFAULT_DIVERGING_SERIES_COLOUR_RANGE3),{fills:r}=e(i);return{fill:a,stroke:s.get(DEFAULT_BACKGROUND_COLOUR2),colorRange:o==="inbuilt"?n:[r[0],r[1]]}}},import_ag_charts_community149=require("ag-charts-community"),import_ag_charts_community147=require("ag-charts-community"),import_ag_charts_community143=require("ag-charts-community"),{isDefined:isDefined3,ChartAxisDirection:ChartAxisDirection15,PolarAxis,diff:diff4,fixNumericExtent:fixNumericExtent4,groupAccumulativeValueProperty:groupAccumulativeValueProperty2,keyProperty:keyProperty5,mergeDefaults:mergeDefaults6,normaliseGroupTo,resetLabelFn,seriesLabelFadeInAnimation:seriesLabelFadeInAnimation2,seriesLabelFadeOutAnimation,valueProperty:valueProperty11,animationValidation:animationValidation4,isFiniteNumber:isFiniteNumber5,SeriesNodePickMode:SeriesNodePickMode10}=import_ag_charts_community143._ModuleSupport,{BandScale:BandScale3}=import_ag_charts_community143._Scale,{motion:motion3}=import_ag_charts_community143._Scene,{isNumber,normalizeAngle360:normalizeAngle3606,sanitizeHtml:sanitizeHtml8}=import_ag_charts_community143._Util,RadialColumnSeriesNodeEvent=class extends import_ag_charts_community143._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.angleKey=o.properties.angleKey,this.radiusKey=o.properties.radiusKey}},RadialColumnSeriesBase=class extends import_ag_charts_community143._ModuleSupport.PolarSeries{constructor(t,{animationResetFns:e}){super({moduleCtx:t,useLabelLayer:!0,canHaveAxes:!0,pickModes:[SeriesNodePickMode10.NEAREST_NODE,SeriesNodePickMode10.EXACT_SHAPE_MATCH],animationResetFns:{...e,label:resetLabelFn}}),this.NodeEvent=RadialColumnSeriesNodeEvent,this.groupScale=new BandScale3,this.circleCache={r:0,cx:0,cy:0}}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager?.addListener("legend-item-click",t=>this.onLegendItemClick(t)),this.ctx.chartEventManager?.addListener("legend-item-double-click",t=>this.onLegendItemDoubleClick(t)))}getSeriesDomain(t){const{axes:e,dataModel:i,processedData:o}=this;if(!o||!i)return[];if(t===ChartAxisDirection15.X)return i.getDomain(this,"angleValue","key",o);{const s=e[ChartAxisDirection15.Y],a=i.getDomain(this,"radiusValue-end","value",o),n=[a[0]>0?0:a[0],a[1]<0?0:a[1]];return fixNumericExtent4(n,s)}}async processData(t){const{angleKey:e,radiusKey:i,normalizedTo:o,visible:s}=this.properties,a=!this.ctx.animationManager.isSkipped();if(!this.properties.isValid()||!(s||a))return;const n=this.getStackId(),r=`${n}-trailing`,l=[];isDefined3(o)&&l.push(normaliseGroupTo([n,r],Math.abs(o),"range")),a&&this.processedData&&l.push(diff4(this.processedData)),a&&l.push(animationValidation4());const c=s||!a?{}:{forceValue:0},h=this.axes[ChartAxisDirection15.Y]?.scale.type,d=this.axes[ChartAxisDirection15.X]?.scale.type;await this.requestDataModel(t,this.data,{props:[keyProperty5(e,d,{id:"angleValue"}),valueProperty11(i,h,{id:"radiusValue-raw",invalidValue:null,...c}),...groupAccumulativeValueProperty2(i,"normal","current",{id:"radiusValue-end",rangeId:"radiusValue-range",invalidValue:null,groupId:n,separateNegative:!0,...c},h),...groupAccumulativeValueProperty2(i,"trailing","current",{id:"radiusValue-start",invalidValue:null,groupId:r,separateNegative:!0,...c},h),...l]}),this.animationState.transition("updateData")}didCircleChange(){const t=this.radius,e=this.centerX,i=this.centerY,o=this.circleCache;return t===o.r&&e===o.cx&&i===o.cy?!1:(this.circleCache={r:t,cx:e,cy:i},!0)}isRadiusAxisReversed(){return this.axes[ChartAxisDirection15.Y]?.isReversed()}async maybeRefreshNodeData(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:e=[]}=await this.createNodeData()??{};this.nodeData=e,this.nodeDataRefresh=!1}getAxisInnerRadius(){const t=this.axes[ChartAxisDirection15.Y];return t instanceof PolarAxis?this.radius*t.innerRadiusRatio:0}async createNodeData(){const{processedData:t,dataModel:e,groupScale:i}=this;if(!t||!e||!this.properties.isValid())return;const o=this.axes[ChartAxisDirection15.X],s=this.axes[ChartAxisDirection15.Y],a=o?.scale,n=s?.scale;if(!a||!n)return;const r=e.resolveProcessedDataIndexById(this,"radiusValue-start"),l=e.resolveProcessedDataIndexById(this,"radiusValue-end"),c=e.resolveProcessedDataIndexById(this,"radiusValue-range"),h=e.resolveProcessedDataIndexById(this,"radiusValue-raw");let d=0,u=0;o instanceof AngleCategoryAxis&&(d=o.groupPaddingInner,u=o.paddingInner);const y=(a.bandwidth??0)*(1-u),{index:p,visibleGroupCount:m}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);i.domain=Array.from({length:m}).map((O,A)=>String(A)),i.range=[-y/2,y/2],i.paddingInner=m>1?d:0;const f=this.isRadiusAxisReversed(),v=f?this.radius:this.getAxisInnerRadius(),S=f?this.getAxisInnerRadius():this.radius,x=S+v,{angleKey:M,radiusKey:T,angleName:b,radiusName:I,label:D}=this.properties,N=(O,A,L,E)=>{const C=this.getLabelText(D,{value:A,datum:O,angleKey:M,radiusKey:T,angleName:b,radiusName:I},R=>isFiniteNumber5(R)?R.toFixed(2):String(R));if(C)return{x:L,y:E,text:C,textAlign:"center",textBaseline:"middle"}},k=[],_={itemId:T,nodeData:k,labelData:k};return this.visible?(t.data.forEach((O,A,L)=>{const{datum:E,keys:C,values:R,aggValues:P}=O,w=C[0],z=R[h],B=z>=0&&!Object.is(z,-0),F=R[r],W=R[l],V=P?.[c][B?1:0]??0,H=B===f;if(F===void 0||W===void 0)return;let U,K;if(L.length===1)U=-.5*Math.PI,K=1.5*Math.PI;else{let ot=a.convert(w);m===1&&(ot-=i.bandwidth/2),U=normalizeAngle3606(ot+i.convert(String(p))),K=normalizeAngle3606(U+i.bandwidth)}const q=U+i.bandwidth/2,j=x-n.convert(F),Y=x-n.convert(W),X=(j+Y)/2,J=x-n.convert(0),Q=x-n.convert(V),Z=Math.cos(q)*X,G=Math.sin(q)*X,tt=this.properties.label.enabled?N(E,z,Z,G):void 0,it=this.getColumnWidth(U,K);k.push({series:this,datum:E,point:{x:Z,y:G,size:0},midPoint:{x:Z,y:G},label:tt,angleValue:w,radiusValue:z,negative:H,innerRadius:j,outerRadius:Y,stackInnerRadius:J,stackOuterRadius:Q,startAngle:U,endAngle:K,axisInnerRadius:v,axisOuterRadius:S,columnWidth:it,index:A})}),{itemId:T,nodeData:k,labelData:k}):_}getColumnWidth(t,e){return NaN}async update({seriesRect:t}){const e=this.checkResize(t);await this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),e&&this.animationState.transition("resize"),this.animationState.transition("update")}updateSectorSelection(t,e){let i=[];if(e){const y=this.ctx.highlightManager?.getActiveHighlight();y?.datum&&y.series===this&&(i=[y])}else i=this.nodeData;const{fill:o,fillOpacity:s,stroke:a,strokeOpacity:n,strokeWidth:r,lineDash:l,lineDashOffset:c,cornerRadius:h,angleKey:d,radiusKey:u}=mergeDefaults6(e?this.properties.highlightStyle.item:null,this.properties),g=y=>y.angleValue;t.update(i,void 0,g).each((y,p)=>{const m=this.properties.itemStyler?this.ctx.callbackCache.call(this.properties.itemStyler,{datum:p.datum,fill:o,fillOpacity:s,stroke:a,strokeWidth:r,strokeOpacity:n,lineDash:l,lineDashOffset:c,cornerRadius:h,highlighted:e,angleKey:d,radiusKey:u,seriesId:this.id}):void 0;this.updateItemPath(y,p,e,m),y.fill=m?.fill??o,y.fillOpacity=m?.fillOpacity??s,y.stroke=m?.stroke??a,y.strokeWidth=m?.strokeWidth??r,y.strokeOpacity=m?.strokeOpacity??n,y.lineDash=m?.lineDash??l,y.lineDashOffset=m?.lineDashOffset??c,y.cornerRadius=m?.cornerRadius??h,y.lineJoin="round"})}updateLabels(){const{label:t}=this.properties;this.labelSelection.update(this.nodeData).each((e,i)=>{t.enabled&&i.label?(e.x=i.label.x,e.y=i.label.y,e.fill=t.color,e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=i.label.text,e.textAlign=i.label.textAlign,e.textBaseline=i.label.textBaseline,e.visible=!0):e.visible=!1})}animateEmptyUpdateReady(){const{labelSelection:t}=this,e=this.getColumnTransitionFunctions();motion3.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],e),seriesLabelFadeInAnimation2(this,"labels",this.ctx.animationManager,t)}animateClearingUpdateEmpty(){const{itemSelection:t}=this,{animationManager:e}=this.ctx,i=this.getColumnTransitionFunctions();motion3.fromToMotion(this.id,"datums",e,[t],i),seriesLabelFadeOutAnimation(this,"labels",e,this.labelSelection)}getTooltipHtml(t){const{id:e,axes:i,dataModel:o}=this,{angleKey:s,radiusKey:a,angleName:n,radiusName:r,fill:l,fillOpacity:c,stroke:h,strokeWidth:d,strokeOpacity:u,lineDash:g,lineDashOffset:y,cornerRadius:p,itemStyler:m,tooltip:f}=this.properties,{angleValue:v,radiusValue:S,datum:x,itemId:M}=t,T=i[ChartAxisDirection15.X],b=i[ChartAxisDirection15.Y];if(!this.properties.isValid()||!(T&&b&&isNumber(S))||!o)return import_ag_charts_community143._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const I=T.formatDatum(v),D=b.formatDatum(S),N=sanitizeHtml8(r),k=sanitizeHtml8(`${I}: ${D}`),{fill:_}=(m&&this.ctx.callbackCache.call(m,{highlighted:!1,seriesId:e,datum:x,angleKey:s,radiusKey:a,fill:l,fillOpacity:c,stroke:h,strokeWidth:d,strokeOpacity:u,lineDash:g,lineDashOffset:y,cornerRadius:p}))??{fill:l};return f.toTooltipHtml({title:N,backgroundColor:l,content:k},{seriesId:e,datum:x,color:_,title:N,angleKey:s,radiusKey:a,angleName:n,radiusName:r,angleValue:v,itemId:M,radiusValue:S})}pickNodeClosestDatum(t){return this.pickNodeNearestDistantObject(t,this.itemSelection.nodes())}getLegendData(t){if(!this.data?.length||!this.properties.isValid()||t!=="category")return[];const{radiusKey:e,radiusName:i,fill:o,stroke:s,fillOpacity:a,strokeOpacity:n,strokeWidth:r,visible:l}=this.properties;return[{legendType:"category",id:this.id,itemId:e,seriesId:this.id,enabled:l,label:{text:i??e},symbols:[{marker:{fill:o??"rgba(0, 0, 0, 0)",stroke:s??"rgba(0, 0, 0, 0)",fillOpacity:a??1,strokeOpacity:n??1,strokeWidth:r}}]}]}onLegendItemClick(t){const{enabled:e,itemId:i,series:o}=t;o.id===this.id&&this.toggleSeriesItem(i,e)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:o,numVisibleItems:s}=t,n=o.id===this.id||e&&s===1;this.toggleSeriesItem(i,n)}computeLabelsBBox(){return null}},import_ag_charts_community144=require("ag-charts-community"),{Label:Label6}=import_ag_charts_community144._Scene,{SeriesProperties:SeriesProperties7,SeriesTooltip:SeriesTooltip11,Validate:Validate57,COLOR_STRING:COLOR_STRING17,DEGREE:DEGREE3,FUNCTION:FUNCTION12,LINE_DASH:LINE_DASH13,NUMBER:NUMBER12,OBJECT:OBJECT23,POSITIVE_NUMBER:POSITIVE_NUMBER20,RATIO:RATIO22,STRING:STRING26}=import_ag_charts_community144._ModuleSupport,RadialColumnSeriesBaseProperties=class extends SeriesProperties7{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.label=new Label6,this.tooltip=new SeriesTooltip11}};__decorateClass([Validate57(STRING26)],RadialColumnSeriesBaseProperties.prototype,"angleKey",2),__decorateClass([Validate57(STRING26,{optional:!0})],RadialColumnSeriesBaseProperties.prototype,"angleName",2),__decorateClass([Validate57(STRING26)],RadialColumnSeriesBaseProperties.prototype,"radiusKey",2),__decorateClass([Validate57(STRING26,{optional:!0})],RadialColumnSeriesBaseProperties.prototype,"radiusName",2),__decorateClass([Validate57(COLOR_STRING17)],RadialColumnSeriesBaseProperties.prototype,"fill",2),__decorateClass([Validate57(RATIO22)],RadialColumnSeriesBaseProperties.prototype,"fillOpacity",2),__decorateClass([Validate57(COLOR_STRING17)],RadialColumnSeriesBaseProperties.prototype,"stroke",2),__decorateClass([Validate57(POSITIVE_NUMBER20)],RadialColumnSeriesBaseProperties.prototype,"strokeWidth",2),__decorateClass([Validate57(RATIO22)],RadialColumnSeriesBaseProperties.prototype,"strokeOpacity",2),__decorateClass([Validate57(LINE_DASH13)],RadialColumnSeriesBaseProperties.prototype,"lineDash",2),__decorateClass([Validate57(POSITIVE_NUMBER20)],RadialColumnSeriesBaseProperties.prototype,"lineDashOffset",2),__decorateClass([Validate57(POSITIVE_NUMBER20)],RadialColumnSeriesBaseProperties.prototype,"cornerRadius",2),__decorateClass([Validate57(FUNCTION12,{optional:!0})],RadialColumnSeriesBaseProperties.prototype,"itemStyler",2),__decorateClass([Validate57(DEGREE3)],RadialColumnSeriesBaseProperties.prototype,"rotation",2),__decorateClass([Validate57(STRING26,{optional:!0})],RadialColumnSeriesBaseProperties.prototype,"stackGroup",2),__decorateClass([Validate57(NUMBER12,{optional:!0})],RadialColumnSeriesBaseProperties.prototype,"normalizedTo",2),__decorateClass([Validate57(OBJECT23)],RadialColumnSeriesBaseProperties.prototype,"label",2),__decorateClass([Validate57(OBJECT23)],RadialColumnSeriesBaseProperties.prototype,"tooltip",2);var import_ag_charts_community146=require("ag-charts-community"),import_ag_charts_community145=require("ag-charts-community"),{motion:motion4}=import_ag_charts_community145._Scene;function createAngleMotionCalculator(){const t={startAngle:new Map,endAngle:new Map},e=["startAngle","endAngle"],i=(n,r,l)=>{e.forEach(c=>{const h=t[c];let d=(l==="removed"||l==="updated"?n:r)[c],u=(l==="removed"?n:r)[c];isNaN(u)&&(u=n.previousDatum?.[c]??NaN);const g=d-u;Math.abs(g)>Math.PI&&(d-=Math.sign(g)*2*Math.PI),h.set(r,{from:d,to:u})})},o=(n,r)=>({startAngle:t.startAngle.get(n)[r],endAngle:t.endAngle.get(n)[r]});return{calculate:i,from:n=>o(n,"from"),to:n=>o(n,"to")}}function fixRadialColumnAnimationStatus(t,e,i){if(i==="updated"){if(t.previousDatum==null||isNaN(t.previousDatum.startAngle)||isNaN(t.previousDatum.endAngle))return"added";if(isNaN(e.startAngle)||isNaN(e.endAngle))return"removed"}return i==="added"&&t.previousDatum!=null?"updated":i}function prepareRadialColumnAnimationFunctions(t){const e=createAngleMotionCalculator();return{toFn:(s,a,n)=>{const{startAngle:r,endAngle:l}=e.to(a);let c,h,d,u,g;return n==="removed"?(c=s.innerRadius,h=s.innerRadius,d=s.columnWidth,u=s.axisInnerRadius,g=s.axisOuterRadius):(c=isNaN(a.innerRadius)?t:a.innerRadius,h=isNaN(a.outerRadius)?t:a.outerRadius,d=isNaN(a.columnWidth)?s.columnWidth:a.columnWidth,u=a.axisInnerRadius,g=a.axisOuterRadius),{innerRadius:c,outerRadius:h,columnWidth:d,axisInnerRadius:u,axisOuterRadius:g,startAngle:r,endAngle:l}},fromFn:(s,a,n)=>{n=fixRadialColumnAnimationStatus(s,a,n),e.calculate(s,a,n);const{startAngle:r,endAngle:l}=e.from(a);let c,h,d,u,g;n==="removed"||n==="updated"?(c=s.innerRadius,h=s.outerRadius,d=s.columnWidth,u=s.axisInnerRadius,g=s.axisOuterRadius):(c=t,h=t,d=a.columnWidth,u=a.axisInnerRadius,g=a.axisOuterRadius);const y=motion4.NODE_UPDATE_STATE_TO_PHASE_MAPPING[n];return{innerRadius:c,outerRadius:h,columnWidth:d,axisInnerRadius:u,axisOuterRadius:g,startAngle:r,endAngle:l,phase:y}}}}function resetRadialColumnSelectionFn(t,{innerRadius:e,outerRadius:i,columnWidth:o,axisInnerRadius:s,axisOuterRadius:a,startAngle:n,endAngle:r}){return{innerRadius:e,outerRadius:i,columnWidth:o,axisInnerRadius:s,axisOuterRadius:a,startAngle:n,endAngle:r}}var{SectorBox,motion:motion5}=import_ag_charts_community146._Scene;function getRadii(t){const{negative:e,innerRadius:i,outerRadius:o,stackInnerRadius:s,stackOuterRadius:a}=t;return{innerRadius:e?a:s,outerRadius:e?s:a,clipInnerRadius:e?o:i,clipOuterRadius:e?i:o}}function prepareNightingaleAnimationFunctions(t){const e=createAngleMotionCalculator();return{toFn:(s,a,n)=>{const{startAngle:r,endAngle:l}=e.to(a);let c,h,d;if(n==="removed")c=t,h=t,d=new SectorBox(r,l,c,h);else{let u,g;({innerRadius:c,outerRadius:h,clipInnerRadius:u,clipOuterRadius:g}=getRadii(a)),isNaN(c)&&(c=t),isNaN(h)&&(h=t),isNaN(u)&&(u=t),isNaN(g)&&(g=t),d=new SectorBox(r,l,u,g)}return{innerRadius:c,outerRadius:h,startAngle:r,endAngle:l,clipSector:d}},fromFn:(s,a,n)=>{n=fixRadialColumnAnimationStatus(s,a,n),e.calculate(s,a,n);const{startAngle:r,endAngle:l}=e.from(a);let c,h,d;n==="removed"||n==="updated"?(c=s.innerRadius,h=s.outerRadius,d=s.clipSector):(c=t,h=t),d??(d=new SectorBox(r,l,c,h));const u=motion5.NODE_UPDATE_STATE_TO_PHASE_MAPPING[n];return{innerRadius:c,outerRadius:h,startAngle:r,endAngle:l,clipSector:d,phase:u}}}}function resetNightingaleSelectionFn(t,e){const{startAngle:i,endAngle:o}=e,{innerRadius:s,outerRadius:a,clipInnerRadius:n,clipOuterRadius:r}=getRadii(e),l=new SectorBox(i,o,n,r);return{innerRadius:s,outerRadius:a,startAngle:i,endAngle:o,clipSector:l}}var{Sector:Sector4,SectorBox:SectorBox2}=import_ag_charts_community147._Scene,NightingaleSeries=class extends RadialColumnSeriesBase{constructor(t){super(t,{animationResetFns:{item:resetNightingaleSelectionFn}}),this.properties=new RadialColumnSeriesBaseProperties}getStackId(){return`nightingale-stack-${this.seriesGrouping?.groupIndex??this.id}-yValues`}nodeFactory(){return new Sector4}updateItemPath(t,e,i,o){const{negative:s}=e;if(t.centerX=0,t.centerY=0,t.startOuterCornerRadius=s?0:this.properties.cornerRadius,t.endOuterCornerRadius=s?0:this.properties.cornerRadius,t.startInnerCornerRadius=s?this.properties.cornerRadius:0,t.endInnerCornerRadius=s?this.properties.cornerRadius:0,i){const{startAngle:a,endAngle:n}=e,{innerRadius:r,outerRadius:l,clipInnerRadius:c,clipOuterRadius:h}=getRadii(e);t.innerRadius=r,t.outerRadius=l,t.startAngle=a,t.endAngle=n,t.clipSector=new SectorBox2(a,n,c,h)}}getColumnTransitionFunctions(){const t=this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius();return prepareNightingaleAnimationFunctions(t)}};NightingaleSeries.className="NightingaleSeries",NightingaleSeries.type="nightingale";var import_ag_charts_community148=require("ag-charts-community"),NIGHTINGALE_SERIES_THEME={series:{strokeWidth:1,label:{enabled:!1,fontSize:12,fontFamily:import_ag_charts_community148._Theme.DEFAULT_FONT_FAMILY,color:import_ag_charts_community148._Theme.DEFAULT_LABEL_COLOUR}},axes:{[import_ag_charts_community148._Theme.POLAR_AXIS_TYPE.ANGLE_CATEGORY]:{shape:import_ag_charts_community148._Theme.POLAR_AXIS_SHAPE.CIRCLE,groupPaddingInner:0,paddingInner:0,label:{padding:10}},[import_ag_charts_community148._Theme.POLAR_AXIS_TYPE.RADIUS_NUMBER]:{shape:import_ag_charts_community148._Theme.POLAR_AXIS_SHAPE.CIRCLE}}},NightingaleModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"nightingale",moduleFactory:t=>new NightingaleSeries(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:import_ag_charts_community149._Theme.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:import_ag_charts_community149._Theme.POLAR_AXIS_TYPE.RADIUS_NUMBER}],themeTemplate:NIGHTINGALE_SERIES_THEME,paletteFactory({takeColors:t,userPalette:e}){const{fills:[i],strokes:[o]}=t(1);return{fill:i,stroke:e!=="inbuilt"?o:import_ag_charts_community149._Theme.DEFAULT_POLAR_SERIES_STROKE}},stackable:!0,groupable:!0,stackedByDefault:!0},import_ag_charts_community153=require("ag-charts-community"),import_ag_charts_community152=require("ag-charts-community"),import_ag_charts_community150=require("ag-charts-community"),OhlcGroup=class extends CandlestickBaseGroup{constructor(){super(),this.append([new import_ag_charts_community150._Scene.Line({tag:0}),new import_ag_charts_community150._Scene.Line({tag:1}),new import_ag_charts_community150._Scene.Line({tag:2})])}updateCoordinates(){const{x:t,y:e,yBottom:i,yHigh:o,yLow:s,width:a,height:n,datum:{itemId:r}}=this,l=import_ag_charts_community150._Scene.Selection.select(this,import_ag_charts_community150._Scene.Rect),[c]=l.selectByTag(0),[h]=l.selectByTag(1),[d]=l.selectByTag(2);if(a===0||n===0){c.visible=!1,h.visible=!1,d.visible=!1;return}c.visible=!0,h.visible=!0,d.visible=!0;const u=a/2;c.setProperties({x1:Math.floor(t+u),x2:Math.floor(t+u),y1:o,y2:s});const g=r==="up",y=g?i:e,p=g?e:i;h.setProperties({x1:Math.floor(t),x2:Math.floor(t+u),y:Math.round(y)}),d.setProperties({x1:Math.floor(t+u),x2:Math.floor(t+a),y:Math.round(p)})}updateDatumStyles(t,e){const i=import_ag_charts_community150._Scene.Selection.select(this,import_ag_charts_community150._Scene.Rect),[o]=i.selectByTag(0),[s]=i.selectByTag(1),[a]=i.selectByTag(2);o.setProperties(e),s.setProperties(e),a.setProperties(e)}},import_ag_charts_community151=require("ag-charts-community"),{BaseProperties:BaseProperties19,Validate:Validate58,COLOR_STRING:COLOR_STRING18,FUNCTION:FUNCTION13,LINE_DASH:LINE_DASH14,OBJECT:OBJECT24,POSITIVE_NUMBER:POSITIVE_NUMBER21,RATIO:RATIO23}=import_ag_charts_community151._ModuleSupport,OhlcSeriesItem=class extends BaseProperties19{constructor(){super(...arguments),this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};__decorateClass([Validate58(COLOR_STRING18)],OhlcSeriesItem.prototype,"stroke",2),__decorateClass([Validate58(POSITIVE_NUMBER21)],OhlcSeriesItem.prototype,"strokeWidth",2),__decorateClass([Validate58(RATIO23)],OhlcSeriesItem.prototype,"strokeOpacity",2),__decorateClass([Validate58(LINE_DASH14)],OhlcSeriesItem.prototype,"lineDash",2),__decorateClass([Validate58(POSITIVE_NUMBER21)],OhlcSeriesItem.prototype,"lineDashOffset",2),__decorateClass([Validate58(FUNCTION13,{optional:!0})],OhlcSeriesItem.prototype,"itemStyler",2);var OhlcSeriesItems=class extends BaseProperties19{constructor(){super(...arguments),this.up=new OhlcSeriesItem,this.down=new OhlcSeriesItem}};__decorateClass([Validate58(OBJECT24)],OhlcSeriesItems.prototype,"up",2),__decorateClass([Validate58(OBJECT24)],OhlcSeriesItems.prototype,"down",2);var OhlcSeriesProperties=class extends CandlestickSeriesProperties{constructor(){super(...arguments),this.item=new OhlcSeriesItems}};__decorateClass([Validate58(OBJECT24)],OhlcSeriesProperties.prototype,"item",2),__decorateClass([Validate58(FUNCTION13,{optional:!0})],OhlcSeriesProperties.prototype,"itemStyler",2);var{mergeDefaults:mergeDefaults7}=import_ag_charts_community152._ModuleSupport,OhlcSeries=class extends OhlcSeriesBase{constructor(t){super(t,resetCandlestickSelectionsFn),this.properties=new OhlcSeriesProperties}async createNodeData(){const t=this.createBaseNodeData();if(!t)return;const e=t.nodeData.map(i=>{const{stroke:o,strokeWidth:s,strokeOpacity:a,lineDash:n,lineDashOffset:r}=this.getItemConfig(i.itemId);return{...i,stroke:o,strokeWidth:s,strokeOpacity:a,lineDash:n,lineDashOffset:r}});return{...t,nodeData:e}}getFormattedStyles(t,e=!1){const{id:i,ctx:{callbackCache:o}}=this,{xKey:s,openKey:a,closeKey:n,highKey:r,lowKey:l,itemStyler:c}=this.properties,{stroke:h,strokeWidth:d,strokeOpacity:u,lineDash:g,lineDashOffset:y}=this.getItemConfig(t.itemId);if(c){const p=o.call(c,{datum:t.datum,itemId:t.itemId,seriesId:i,highlighted:e,xKey:s,openKey:a,closeKey:n,highKey:r,lowKey:l,stroke:h,strokeWidth:d,strokeOpacity:u,lineDash:g,lineDashOffset:y});if(p)return mergeDefaults7(p,this.getSeriesStyles(t))}return this.getSeriesStyles(t)}nodeFactory(){return new OhlcGroup}getSeriesStyles(t){const{stroke:e,strokeWidth:i,strokeOpacity:o,lineDash:s,lineDashOffset:a}=t;return{stroke:e,strokeWidth:i,strokeOpacity:o,lineDash:s,lineDashOffset:a}}getActiveStyles(t,e){const i=this.getFormattedStyles(t,e);return e?mergeDefaults7(this.properties.highlightStyle.item,i):i}computeFocusBounds(t){return computeCandleFocusBounds(this,t)}};OhlcSeries.className="ohlc",OhlcSeries.type="ohlc";var OhlcModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"ohlc",moduleFactory:t=>new OhlcSeries(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:import_ag_charts_community153._Theme.CARTESIAN_AXIS_TYPE.NUMBER,position:import_ag_charts_community153._Theme.POSITION.LEFT},{type:import_ag_charts_community153._Theme.CARTESIAN_AXIS_TYPE.ORDINAL_TIME,position:import_ag_charts_community153._Theme.POSITION.BOTTOM}],themeTemplate:{animation:{enabled:!1},axes:{[import_ag_charts_community153._Theme.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{snap:!1}},[import_ag_charts_community153._Theme.CARTESIAN_AXIS_TYPE.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},groupable:!1,paletteFactory:({takeColors:t,colorsCount:e,userPalette:i,palette:o})=>{if(i==="user-indexed"){const{strokes:[s]}=t(e);return{item:{up:{stroke:s},down:{stroke:s}}}}return{item:{up:{stroke:o.up.stroke},down:{stroke:o.down.stroke}}}}},import_ag_charts_community159=require("ag-charts-community"),import_ag_charts_community154=require("ag-charts-community"),BASE_RADAR_SERIES_THEME={series:{label:{enabled:!1,fontSize:12,fontFamily:import_ag_charts_community154._Theme.DEFAULT_FONT_FAMILY,color:import_ag_charts_community154._Theme.DEFAULT_LABEL_COLOUR},marker:{enabled:!0,fillOpacity:1,shape:"circle",size:6,strokeOpacity:1,strokeWidth:0}},axes:{[import_ag_charts_community154._Theme.POLAR_AXIS_TYPE.ANGLE_CATEGORY]:{label:{padding:10}}}},RADAR_LINE_SERIES_THEME=import_ag_charts_community154._ModuleSupport.mergeDefaults({series:{strokeWidth:2}},BASE_RADAR_SERIES_THEME),RADAR_AREA_SERIES_THEME=import_ag_charts_community154._ModuleSupport.mergeDefaults({series:{fillOpacity:.8,strokeWidth:2,marker:{enabled:!1}}},BASE_RADAR_SERIES_THEME),import_ag_charts_community158=require("ag-charts-community"),import_ag_charts_community156=require("ag-charts-community"),import_ag_charts_community155=require("ag-charts-community"),{Label:Label7}=import_ag_charts_community155._Scene,{SeriesMarker,SeriesProperties:SeriesProperties8,SeriesTooltip:SeriesTooltip12,Validate:Validate59,BOOLEAN:BOOLEAN17,COLOR_STRING:COLOR_STRING19,DEGREE:DEGREE4,LINE_DASH:LINE_DASH15,OBJECT:OBJECT25,POSITIVE_NUMBER:POSITIVE_NUMBER22,RATIO:RATIO24,STRING:STRING27}=import_ag_charts_community155._ModuleSupport,RadarSeriesProperties=class extends SeriesProperties8{constructor(){super(...arguments),this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.marker=new SeriesMarker,this.label=new Label7,this.tooltip=new SeriesTooltip12,this.connectMissingData=!1}};__decorateClass([Validate59(STRING27)],RadarSeriesProperties.prototype,"angleKey",2),__decorateClass([Validate59(STRING27)],RadarSeriesProperties.prototype,"radiusKey",2),__decorateClass([Validate59(STRING27,{optional:!0})],RadarSeriesProperties.prototype,"angleName",2),__decorateClass([Validate59(STRING27,{optional:!0})],RadarSeriesProperties.prototype,"radiusName",2),__decorateClass([Validate59(COLOR_STRING19)],RadarSeriesProperties.prototype,"stroke",2),__decorateClass([Validate59(POSITIVE_NUMBER22)],RadarSeriesProperties.prototype,"strokeWidth",2),__decorateClass([Validate59(RATIO24)],RadarSeriesProperties.prototype,"strokeOpacity",2),__decorateClass([Validate59(LINE_DASH15)],RadarSeriesProperties.prototype,"lineDash",2),__decorateClass([Validate59(POSITIVE_NUMBER22)],RadarSeriesProperties.prototype,"lineDashOffset",2),__decorateClass([Validate59(DEGREE4)],RadarSeriesProperties.prototype,"rotation",2),__decorateClass([Validate59(OBJECT25)],RadarSeriesProperties.prototype,"marker",2),__decorateClass([Validate59(OBJECT25)],RadarSeriesProperties.prototype,"label",2),__decorateClass([Validate59(OBJECT25)],RadarSeriesProperties.prototype,"tooltip",2),__decorateClass([Validate59(BOOLEAN17)],RadarSeriesProperties.prototype,"connectMissingData",2);var{ChartAxisDirection:ChartAxisDirection16,PolarAxis:PolarAxis2,SeriesNodePickMode:SeriesNodePickMode11,valueProperty:valueProperty12,fixNumericExtent:fixNumericExtent5,seriesLabelFadeInAnimation:seriesLabelFadeInAnimation3,markerFadeInAnimation,resetMarkerFn,animationValidation:animationValidation5,isFiniteNumber:isFiniteNumber6,computeMarkerFocusBounds:computeMarkerFocusBounds2}=import_ag_charts_community156._ModuleSupport,{BBox:BBox9,Group:Group13,Path:Path7,PointerEvents:PointerEvents5,Selection:Selection9,Text:Text10,getMarker:getMarker2}=import_ag_charts_community156._Scene,{extent:extent3,isNumberEqual:isNumberEqual8,sanitizeHtml:sanitizeHtml9,toFixed}=import_ag_charts_community156._Util,RadarSeriesNodeEvent=class extends import_ag_charts_community156._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.angleKey=o.properties.angleKey,this.radiusKey=o.properties.radiusKey}},RadarSeries=class extends import_ag_charts_community156._ModuleSupport.PolarSeries{constructor(t){super({moduleCtx:t,useLabelLayer:!0,pickModes:[SeriesNodePickMode11.NEAREST_NODE,SeriesNodePickMode11.EXACT_SHAPE_MATCH],canHaveAxes:!0,animationResetFns:{item:resetMarkerFn}}),this.properties=new RadarSeriesProperties,this.NodeEvent=RadarSeriesNodeEvent,this.resetInvalidToZero=!1,this.circleCache={r:0,cx:0,cy:0};const e=new Group13;this.contentGroup.append(e),this.lineSelection=Selection9.select(e,Path7),e.zIndexSubOrder=[()=>this._declarationOrder,1]}nodeFactory(){const{shape:t}=this.properties.marker,e=getMarker2(t);return new e}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager?.addListener("legend-item-click",t=>this.onLegendItemClick(t)),this.ctx.chartEventManager?.addListener("legend-item-double-click",t=>this.onLegendItemDoubleClick(t)))}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];if(t===ChartAxisDirection16.X)return e.getDomain(this,"angleValue","value",i);{const o=e.getDomain(this,"radiusValue","value",i),s=extent3(o.length===0?o:[0].concat(o));return fixNumericExtent5(s)}}async processData(t){if(!this.properties.isValid())return;const{angleKey:e,radiusKey:i}=this.properties,o=[];this.ctx.animationManager.isSkipped()||o.push(animationValidation5());const s=this.axes[ChartAxisDirection16.Y]?.scale.type,a=this.axes[ChartAxisDirection16.X]?.scale.type;await this.requestDataModel(t,this.data,{props:[valueProperty12(e,a,{id:"angleValue"}),valueProperty12(i,s,{id:"radiusValue",invalidValue:void 0}),...o]}),this.animationState.transition("updateData")}didCircleChange(){const t=this.radius,e=this.centerX,i=this.centerY,o=this.circleCache;return t===o.r&&e===o.cx&&i===o.cy?!1:(this.circleCache={r:t,cx:e,cy:i},!0)}getAxisInnerRadius(){const t=this.axes[ChartAxisDirection16.Y];return t instanceof PolarAxis2?this.radius*t.innerRadiusRatio:0}async maybeRefreshNodeData(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:e=[]}=await this.createNodeData()??{};this.nodeData=e,this.nodeDataRefresh=!1}async createNodeData(){const{processedData:t,dataModel:e}=this;if(!t||!e||!this.properties.isValid())return;const{angleKey:i,radiusKey:o,angleName:s,radiusName:a,marker:n,label:r}=this.properties,l=this.axes[ChartAxisDirection16.X]?.scale,c=this.axes[ChartAxisDirection16.Y]?.scale;if(!l||!c)return;const h=e.resolveProcessedDataIndexById(this,"angleValue"),d=e.resolveProcessedDataIndexById(this,"radiusValue"),u=this.getAxisInnerRadius(),g=t.data.map(y=>{const{datum:p,values:m}=y,f=m[h],v=m[d],S=l.convert(f),x=this.radius+u-c.convert(v),M=Math.cos(S),T=Math.sin(S),b=M*x,I=T*x;let D;if(r.enabled){const N=this.getLabelText(r,{value:v,datum:p,angleKey:i,radiusKey:o,angleName:s,radiusName:a},k=>isFiniteNumber6(k)?k.toFixed(2):String(k));if(N){let k="right";isNumberEqual8(M,0)?k="center":M>0&&(k="left");let _="bottom";isNumberEqual8(T,0)?_="middle":T>0&&(_="top"),D={x:b+M*n.size,y:I+T*n.size,text:N,textAlign:k,textBaseline:_}}}return{series:this,datum:p,point:{x:b,y:I,size:n.size},midPoint:{x:b,y:I},label:D,angleValue:f,radiusValue:v,missing:!import_ag_charts_community156._Util.isNumber(S)||!import_ag_charts_community156._Util.isNumber(x)}});return{itemId:o,nodeData:g,labelData:g}}async update({seriesRect:t}){const e=this.checkResize(t),i=!this.ctx.animationManager.isSkipped(),{series:o}=this.ctx.highlightManager?.getActiveHighlight()??{};this.highlightGroup.visible=(i||this.visible)&&o===this,await this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updatePathSelections(),this.updateMarkerSelection(),this.updateMarkers(this.itemSelection,!1),this.updateMarkers(this.highlightSelection,!0),this.updateLabels(),e&&this.animationState.transition("resize"),this.animationState.transition("update")}updatePathSelections(){const t=this.visible?[!0]:[];this.lineSelection.update(t)}updateMarkerSelection(){this.properties.marker.isDirty()&&(this.itemSelection.clear(),this.itemSelection.cleanup(),this.itemSelection=Selection9.select(this.itemGroup,()=>this.nodeFactory(),!1)),this.itemSelection.update(this.properties.marker.enabled?this.nodeData:[])}getMarkerFill(t){return t?.fill??this.properties.marker.fill}updateMarkers(t,e){const{angleKey:i,radiusKey:o,marker:s,visible:a}=this.properties;let n=[];if(a&&s.shape&&s.enabled)if(e){const l=this.ctx.highlightManager?.getActiveHighlight();l?.datum&&(n=[l])}else n=this.nodeData;const r=e?this.properties.highlightStyle.item:void 0;t.update(n).each((l,c)=>{const h=this.getMarkerFill(r),d=r?.fillOpacity??this.properties.marker.fillOpacity,u=r?.stroke??s.stroke??this.properties.stroke,g=r?.strokeWidth??s.strokeWidth??this.properties.strokeWidth??1,y=r?.strokeOpacity??this.properties.marker.strokeOpacity,p=s.itemStyler?this.ctx.callbackCache.call(s.itemStyler,{datum:c.datum,angleKey:i,radiusKey:o,fill:h,fillOpacity:d,stroke:u,strokeWidth:g,strokeOpacity:y,shape:s.shape,size:s.size,highlighted:e,seriesId:this.id}):void 0;l.fill=p?.fill??h,l.stroke=p?.stroke??u,l.strokeWidth=p?.strokeWidth??g,l.fillOpacity=r?.fillOpacity??s.fillOpacity??1,l.strokeOpacity=s.strokeOpacity??this.properties.strokeOpacity??1,l.size=p?.size??s.size;const{x:m,y:f}=c.point;l.translationX=m,l.translationY=f,l.visible=a&&l.size>0&&!isNaN(m)&&!isNaN(f)})}updateLabels(){const{label:t}=this.properties;this.labelSelection.update(this.nodeData).each((e,i)=>{t.enabled&&i.label?(e.x=i.label.x,e.y=i.label.y,e.fill=t.color,e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=i.label.text,e.textAlign=i.label.textAlign,e.textBaseline=i.label.textBaseline,e.visible=!0):e.visible=!1})}getTooltipHtml(t){if(!this.properties.isValid())return import_ag_charts_community156._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const{id:e}=this,{angleKey:i,radiusKey:o,angleName:s,radiusName:a,marker:n,tooltip:r}=this.properties,{datum:l,angleValue:c,radiusValue:h,itemId:d}=t,u=typeof c=="number"?toFixed(c):String(c),g=typeof h=="number"?toFixed(h):String(h),y=sanitizeHtml9(a),p=sanitizeHtml9(`${u}: ${g}`),{itemStyler:m,fill:f,fillOpacity:v,stroke:S,strokeWidth:x=this.properties.strokeWidth,strokeOpacity:M,shape:T,size:b}=n,{fill:I}=(m&&this.ctx.callbackCache.call(m,{datum:l,angleKey:i,radiusKey:o,fill:f,fillOpacity:v,stroke:S,strokeWidth:x,strokeOpacity:M,shape:T,size:b,highlighted:!1,seriesId:e}))??{fill:f};return r.toTooltipHtml({title:y,content:p,backgroundColor:I},{datum:l,angleKey:i,angleName:s,radiusKey:o,radiusName:a,title:y,color:I,seriesId:e,itemId:d})}getLegendData(t){if(!this.data?.length||!this.properties.isValid()||t!=="category")return[];const{radiusKey:e,radiusName:i,stroke:o,strokeWidth:s,strokeOpacity:a,lineDash:n,visible:r,marker:l}=this.properties;return[{legendType:"category",id:this.id,itemId:e,seriesId:this.id,enabled:r,label:{text:i??e},symbols:[{marker:{shape:l.shape,fill:this.getMarkerFill()??l.stroke??o??"rgba(0, 0, 0, 0)",stroke:l.stroke??o??"rgba(0, 0, 0, 0)",fillOpacity:l.fillOpacity??1,strokeOpacity:l.strokeOpacity??a??1,strokeWidth:l.strokeWidth??0,enabled:l.enabled||s<=0},line:{stroke:o,strokeOpacity:a,strokeWidth:s,lineDash:n}}]}]}onLegendItemClick(t){const{enabled:e,itemId:i,series:o}=t;o.id===this.id&&this.toggleSeriesItem(i,e)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:o,numVisibleItems:s}=t,n=o.id===this.id||e&&s===1;this.toggleSeriesItem(i,n)}pickNodeClosestDatum(t){const{x:e,y:i}=t,{rootGroup:o,nodeData:s,centerX:a,centerY:n}=this,r=o.transformPoint(e,i),l=this.radius;if(Math.sqrt((e-a)**2+(i-n)**2)>l+this.properties.marker.size)return;let h=1/0,d;for(const u of s){const{point:{x:g=NaN,y=NaN}={}}=u;if(isNaN(g)||isNaN(y))continue;const p=Math.sqrt((r.x-g-a)**2+(r.y-y-n)**2);p<h&&(h=p,d=u)}if(d){const u=Math.max(h-(d.point?.size??0),0);return{datum:d,distance:u}}}async computeLabelsBBox(){const{label:t}=this.properties;await this.maybeRefreshNodeData();const e=[],i=new Text10;return this.nodeData.forEach(o=>{if(!t.enabled||!o.label)return;i.text=o.label.text,i.x=o.label.x,i.y=o.label.y,i.setFont(t),i.setAlign(o.label);const s=i.getBBox();e.push(s)}),e.length===0?null:BBox9.merge(e)}getLineNode(){return this.lineSelection?.at(0)}beforePathAnimation(){const t=this.getLineNode();t.fill=void 0,t.lineJoin="round",t.lineCap="round",t.pointerEvents=PointerEvents5.None,t.stroke=this.properties.stroke,t.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),t.strokeOpacity=this.properties.strokeOpacity,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset}getLinePoints(){const{nodeData:t,resetInvalidToZero:e}=this,{connectMissingData:i}=this.properties;if(t.length===0)return[];const o=this.axes[ChartAxisDirection16.Y],a=this.axes[ChartAxisDirection16.X]?.isReversed(),r=o?.isReversed()&&!a?[...t].reverse():t,l=[];let c=!1,h;return r.forEach((d,u)=>{let{x:g,y}=d.point;const p=isNaN(g)||isNaN(y);p||(h??(h=d)),p&&!i&&(g=0,y=0);const m=u===0||!e&&!i&&(p||c);l.push({x:g,y,moveTo:m}),c=p}),h!==void 0&&l.push({x:h.point.x,y:h.point.y,moveTo:!1}),l}animateSinglePath(t,e,i){const{path:o}=t;o.clear(!0);const s=this.getAxisInnerRadius(),a=this.axes[ChartAxisDirection16.Y],r=a?.isReversed()?this.radius+s-a?.scale.convert(0):s;e.forEach(l=>{const{x:c,y:h,arc:d,radius:u=0,startAngle:g=0,endAngle:y=0,moveTo:p}=l,m=Math.atan2(h,c),f=r*Math.cos(m),v=r*Math.sin(m),S=i,x=f*(1-S)+c*S,M=v*(1-S)+h*S;d?o.arc(c,h,u,g,y):p?o.moveTo(x,M):o.lineTo(x,M)}),t.checkPathDirty()}animatePaths(t){const e=this.getLinePoints();this.animateSinglePath(this.getLineNode(),e,t)}animateEmptyUpdateReady(){const{itemSelection:t,labelSelection:e}=this,{animationManager:i}=this.ctx;this.beforePathAnimation(),i.animate({id:`${this.id}_'path`,groupId:this.id,from:0,to:1,phase:"initial",collapsable:!1,onUpdate:o=>this.animatePaths(o),onStop:()=>this.animatePaths(1)}),markerFadeInAnimation(this,i,"added",t),seriesLabelFadeInAnimation3(this,"labels",i,e)}animateWaitingUpdateReady(t){super.animateWaitingUpdateReady(t),this.resetPaths()}animateReadyResize(t){super.animateReadyResize(t),this.resetPaths()}resetPaths(){const t=this.getLineNode();if(t){const{path:e}=t,i=this.getLinePoints();t.fill=void 0,t.stroke=this.properties.stroke,t.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),t.strokeOpacity=this.properties.strokeOpacity,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset,e.clear(!0),i.forEach(({x:o,y:s,moveTo:a})=>{a?e.moveTo(o,s):e.lineTo(o,s)}),t.checkPathDirty()}}getFormattedMarkerStyle(t){const{angleKey:e,radiusKey:i}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:t,angleKey:e,radiusKey:i,highlighted:!0})}computeFocusBounds(t){return computeMarkerFocusBounds2(this,t)}};RadarSeries.className="RadarSeries";var import_ag_charts_community157=require("ag-charts-community"),{RATIO:RATIO25,COLOR_STRING:COLOR_STRING20,Validate:Validate60}=import_ag_charts_community157._ModuleSupport,RadarAreaSeriesProperties=class extends RadarSeriesProperties{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1}};__decorateClass([Validate60(COLOR_STRING20)],RadarAreaSeriesProperties.prototype,"fill",2),__decorateClass([Validate60(RATIO25)],RadarAreaSeriesProperties.prototype,"fillOpacity",2);var{Group:Group14,Path:Path8,PointerEvents:PointerEvents6,Selection:Selection10}=import_ag_charts_community158._Scene,{ChartAxisDirection:ChartAxisDirection17}=import_ag_charts_community158._ModuleSupport,RadarAreaSeries=class extends RadarSeries{constructor(t){super(t),this.properties=new RadarAreaSeriesProperties,this.resetInvalidToZero=!0;const e=new Group14;e.zIndexSubOrder=[()=>this._declarationOrder,0],this.contentGroup.append(e),this.areaSelection=Selection10.select(e,Path8)}updatePathSelections(){const t=this.visible?[!0]:[];this.areaSelection.update(t),super.updatePathSelections()}getAreaNode(){return this.areaSelection.at(0)}getMarkerFill(t){return t?.fill??this.properties.marker.fill??this.properties.fill}beforePathAnimation(){super.beforePathAnimation();const t=this.getAreaNode();t.fill=this.properties.fill,t.fillOpacity=this.properties.fillOpacity,t.pointerEvents=PointerEvents6.None,t.stroke=void 0}animatePaths(t){super.animatePaths(t),this.animateSinglePath(this.getAreaNode(),this.getAreaPoints(),t)}getAreaPoints(){const t=this.getLinePoints(),e=n=>{const r=this.axes[n];return r instanceof import_ag_charts_community158._ModuleSupport.PolarAxis?r:void 0},i=e(ChartAxisDirection17.Y),o=e(ChartAxisDirection17.X);if(!i?.isReversed())return t;const{points:a=[]}=o?.getAxisLinePoints?.()??{};return t.concat(...a)}resetPaths(){super.resetPaths();const t=this.getAreaNode();if(t){const{path:e}=t,i=this.getAreaPoints();t.fill=this.properties.fill,t.fillOpacity=this.properties.fillOpacity,t.stroke=void 0,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset,t.lineJoin=t.lineCap="round",e.clear(!0),i.forEach(({x:o,y:s,moveTo:a,arc:n,radius:r=0,startAngle:l=0,endAngle:c=0})=>{n?e.arc(o,s,r,l,c):a?e.moveTo(o,s):e.lineTo(o,s)}),e.closePath(),t.checkPathDirty()}}};RadarAreaSeries.className="RadarAreaSeries",RadarAreaSeries.type="radar-area";var{markerPaletteFactory}=import_ag_charts_community159._ModuleSupport,RadarAreaModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-area",moduleFactory:t=>new RadarAreaSeries(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:import_ag_charts_community159._Theme.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:import_ag_charts_community159._Theme.POLAR_AXIS_TYPE.RADIUS_NUMBER}],themeTemplate:RADAR_AREA_SERIES_THEME,paletteFactory:t=>{const{marker:e}=markerPaletteFactory(t);return{stroke:e.stroke,fill:e.fill,marker:e}}},import_ag_charts_community160=require("ag-charts-community"),RadarLineSeries=class extends RadarSeries{updatePathSelections(){this.lineSelection.update(this.visible?[!0]:[])}};RadarLineSeries.className="RadarLineSeries",RadarLineSeries.type="radar-line";var RadarLineModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-line",moduleFactory:t=>new RadarLineSeries(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:import_ag_charts_community160._Theme.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:import_ag_charts_community160._Theme.POLAR_AXIS_TYPE.RADIUS_NUMBER}],themeTemplate:RADAR_LINE_SERIES_THEME,paletteFactory:({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{stroke:e,marker:{fill:e,stroke:i}}}},import_ag_charts_community165=require("ag-charts-community"),import_ag_charts_community163=require("ag-charts-community"),import_ag_charts_community161=require("ag-charts-community"),{Label:Label8}=import_ag_charts_community161._Scene,{SeriesProperties:SeriesProperties9,SeriesTooltip:SeriesTooltip13,Validate:Validate61,COLOR_STRING:COLOR_STRING21,DEGREE:DEGREE5,FUNCTION:FUNCTION14,LINE_DASH:LINE_DASH16,NUMBER:NUMBER13,OBJECT:OBJECT26,POSITIVE_NUMBER:POSITIVE_NUMBER23,RATIO:RATIO26,STRING:STRING28}=import_ag_charts_community161._ModuleSupport,RadialBarSeriesProperties=class extends SeriesProperties9{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.label=new Label8,this.tooltip=new SeriesTooltip13}};__decorateClass([Validate61(STRING28)],RadialBarSeriesProperties.prototype,"angleKey",2),__decorateClass([Validate61(STRING28)],RadialBarSeriesProperties.prototype,"radiusKey",2),__decorateClass([Validate61(STRING28,{optional:!0})],RadialBarSeriesProperties.prototype,"angleName",2),__decorateClass([Validate61(STRING28,{optional:!0})],RadialBarSeriesProperties.prototype,"radiusName",2),__decorateClass([Validate61(COLOR_STRING21)],RadialBarSeriesProperties.prototype,"fill",2),__decorateClass([Validate61(RATIO26)],RadialBarSeriesProperties.prototype,"fillOpacity",2),__decorateClass([Validate61(COLOR_STRING21)],RadialBarSeriesProperties.prototype,"stroke",2),__decorateClass([Validate61(POSITIVE_NUMBER23)],RadialBarSeriesProperties.prototype,"strokeWidth",2),__decorateClass([Validate61(RATIO26)],RadialBarSeriesProperties.prototype,"strokeOpacity",2),__decorateClass([Validate61(LINE_DASH16)],RadialBarSeriesProperties.prototype,"lineDash",2),__decorateClass([Validate61(POSITIVE_NUMBER23)],RadialBarSeriesProperties.prototype,"lineDashOffset",2),__decorateClass([Validate61(POSITIVE_NUMBER23)],RadialBarSeriesProperties.prototype,"cornerRadius",2),__decorateClass([Validate61(FUNCTION14,{optional:!0})],RadialBarSeriesProperties.prototype,"itemStyler",2),__decorateClass([Validate61(DEGREE5)],RadialBarSeriesProperties.prototype,"rotation",2),__decorateClass([Validate61(STRING28,{optional:!0})],RadialBarSeriesProperties.prototype,"stackGroup",2),__decorateClass([Validate61(NUMBER13,{optional:!0})],RadialBarSeriesProperties.prototype,"normalizedTo",2),__decorateClass([Validate61(OBJECT26)],RadialBarSeriesProperties.prototype,"label",2),__decorateClass([Validate61(OBJECT26)],RadialBarSeriesProperties.prototype,"tooltip",2);var import_ag_charts_community162=require("ag-charts-community"),{SectorBox:SectorBox3,motion:motion6}=import_ag_charts_community162._Scene;function fixRadialBarAnimationStatus(t,e,i){if(i==="updated"){if(t.previousDatum==null||isNaN(t.previousDatum.innerRadius)||isNaN(t.previousDatum.outerRadius))return"added";if(isNaN(e.innerRadius)||isNaN(e.outerRadius))return"removed"}return i==="added"&&t.previousDatum!=null?"updated":i}function prepareRadialBarSeriesAnimationFunctions(t){return{toFn:(o,s,a)=>{let n,r,l,c,h;return a==="removed"?(n=t,r=t,l=s.innerRadius,c=s.outerRadius,h=new SectorBox3(n,r,l,c)):(n=s.startAngle,r=s.endAngle,l=isNaN(s.innerRadius)?o.innerRadius:s.innerRadius,c=isNaN(s.outerRadius)?o.outerRadius:s.outerRadius,h=s.clipSector),{startAngle:n,endAngle:r,innerRadius:l,outerRadius:c,clipSector:h}},fromFn:(o,s,a)=>{a=fixRadialBarAnimationStatus(o,s,a);let n,r,l,c,h;a==="removed"||a==="updated"?(n=o.startAngle,r=o.endAngle,l=o.innerRadius,c=o.outerRadius,h=o.clipSector):(n=t,r=t,l=s.innerRadius,c=s.outerRadius),h??(h=new SectorBox3(n,r,l,c));const d=motion6.NODE_UPDATE_STATE_TO_PHASE_MAPPING[a];return{startAngle:n,endAngle:r,innerRadius:l,outerRadius:c,clipSector:h,phase:d}}}}function resetRadialBarSelectionsFn(t,e){return{centerX:0,centerY:0,innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle,clipSector:e.clipSector}}var{ChartAxisDirection:ChartAxisDirection18,PolarAxis:PolarAxis3,diff:diff5,isDefined:isDefined4,groupAccumulativeValueProperty:groupAccumulativeValueProperty3,keyProperty:keyProperty6,mergeDefaults:mergeDefaults8,normaliseGroupTo:normaliseGroupTo2,valueProperty:valueProperty13,fixNumericExtent:fixNumericExtent6,resetLabelFn:resetLabelFn2,seriesLabelFadeInAnimation:seriesLabelFadeInAnimation4,seriesLabelFadeOutAnimation:seriesLabelFadeOutAnimation2,animationValidation:animationValidation6,isFiniteNumber:isFiniteNumber7}=import_ag_charts_community163._ModuleSupport,{BandScale:BandScale4}=import_ag_charts_community163._Scale,{Sector:Sector5,SectorBox:SectorBox4,motion:motion7}=import_ag_charts_community163._Scene,{angleBetween:angleBetween4,isNumber:isNumber2,sanitizeHtml:sanitizeHtml10}=import_ag_charts_community163._Util,RadialBarSeriesNodeEvent=class extends import_ag_charts_community163._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.angleKey=o.properties.angleKey,this.radiusKey=o.properties.radiusKey}},RadialBarSeries=class extends import_ag_charts_community163._ModuleSupport.PolarSeries{constructor(t){super({moduleCtx:t,useLabelLayer:!0,canHaveAxes:!0,animationResetFns:{item:resetRadialBarSelectionsFn,label:resetLabelFn2}}),this.properties=new RadialBarSeriesProperties,this.NodeEvent=RadialBarSeriesNodeEvent,this.groupScale=new BandScale4,this.circleCache={r:0,cx:0,cy:0}}nodeFactory(){return new Sector5}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager?.addListener("legend-item-click",t=>this.onLegendItemClick(t)),this.ctx.chartEventManager?.addListener("legend-item-double-click",t=>this.onLegendItemDoubleClick(t)))}getSeriesDomain(t){const{axes:e,dataModel:i,processedData:o}=this;if(!o||!i)return[];if(t===ChartAxisDirection18.X){const s=e[ChartAxisDirection18.X],a=i.getDomain(this,"angleValue-end","value",o),n=[a[0]>0?0:a[0],a[1]<0?0:a[1]];return fixNumericExtent6(n,s)}else return i.getDomain(this,"radiusValue","key",o)}async processData(t){const{angleKey:e,radiusKey:i,normalizedTo:o,visible:s}=this.properties,a=!this.ctx.animationManager.isSkipped();if(!this.properties.isValid()||!(s||a))return;const n=this.getStackId(),r=`${n}-trailing`,l=[];isDefined4(o)&&l.push(normaliseGroupTo2([n,r],Math.abs(o),"range")),a&&(this.processedData&&l.push(diff5(this.processedData)),l.push(animationValidation6()));const c=this.visible||!a?{}:{forceValue:0},h=this.axes[ChartAxisDirection18.Y]?.scale.type,d=this.axes[ChartAxisDirection18.X]?.scale.type;await this.requestDataModel(t,this.data,{props:[keyProperty6(i,h,{id:"radiusValue"}),valueProperty13(e,d,{id:"angleValue-raw",invalidValue:null,...c}),...groupAccumulativeValueProperty3(e,"normal","current",{id:"angleValue-end",rangeId:"angleValue-range",invalidValue:null,groupId:n,separateNegative:!0,...c},d),...groupAccumulativeValueProperty3(e,"trailing","current",{id:"angleValue-start",invalidValue:null,groupId:r,separateNegative:!0,...c},d),...l]}),this.animationState.transition("updateData")}didCircleChange(){const t=this.radius,e=this.centerX,i=this.centerY,o=this.circleCache;return t===o.r&&e===o.cx&&i===o.cy?!1:(this.circleCache={r:t,cx:e,cy:i},!0)}async maybeRefreshNodeData(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:e=[]}=await this.createNodeData()??{};this.nodeData=e,this.nodeDataRefresh=!1}getAxisInnerRadius(){const t=this.axes[ChartAxisDirection18.Y];return t instanceof PolarAxis3?this.radius*t.innerRadiusRatio:0}async createNodeData(){const{processedData:t,dataModel:e}=this;if(!t||!e||!this.properties.isValid())return;const i=this.axes[ChartAxisDirection18.X],o=this.axes[ChartAxisDirection18.Y],s=i?.scale,a=o?.scale;if(!s||!a)return;const n=e.resolveProcessedDataIndexById(this,"angleValue-start"),r=e.resolveProcessedDataIndexById(this,"angleValue-end"),l=e.resolveProcessedDataIndexById(this,"angleValue-range"),c=e.resolveProcessedDataIndexById(this,"angleValue-raw");let h=0;o instanceof RadiusCategoryAxis&&(h=o.groupPaddingInner);const{groupScale:d}=this,{index:u,visibleGroupCount:g}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);d.domain=Array.from({length:g}).map((_,O)=>String(O)),d.range=[0,Math.abs(a.bandwidth??0)],d.paddingInner=g>1?h:0;const y=d.bandwidth>=1?d.bandwidth:d.rawBandwidth,p=i.isReversed(),m=o.isReversed(),f=m?this.radius:this.getAxisInnerRadius(),S=(m?this.getAxisInnerRadius():this.radius)+f,{angleKey:x,radiusKey:M,angleName:T,radiusName:b,label:I}=this.properties,D=(_,O,A,L)=>{const E=this.getLabelText(I,{value:O,datum:_,angleKey:x,radiusKey:M,angleName:T,radiusName:b},C=>isFiniteNumber7(C)?C.toFixed(2):String(C));if(E)return{x:A,y:L,text:E,textAlign:"center",textBaseline:"middle"}},N=[],k={itemId:M,nodeData:N,labelData:N};return this.visible&&t.data.forEach((_,O)=>{const{datum:A,keys:L,values:E,aggValues:C}=_,R=L[0],P=E[c],w=P>=0&&!Object.is(P,-0),z=E[n],B=E[r],F=C?.[l][w?1:0]??0,W=w===p;let V=s.convert(z,{clampMode:"clamped"}),H=s.convert(B,{clampMode:"clamped"}),U=s.convert(0,{clampMode:"clamped"}),K=s.convert(F,{clampMode:"clamped"});W&&([U,K]=[K,U],[V,H]=[H,V]);const j=S-a.convert(R)+d.convert(String(u)),Y=j+y,X=(j+Y)/2,J=V+angleBetween4(V,H)/2,Q=Math.cos(J)*X,Z=Math.sin(J)*X,G=this.properties.label.enabled?D(A,P,Q,Z):void 0,tt=new SectorBox4(V,H,j,Y);N.push({series:this,datum:A,point:{x:Q,y:Z,size:0},midPoint:{x:Q,y:Z},label:G,angleValue:P,radiusValue:R,innerRadius:j,outerRadius:Y,startAngle:U,endAngle:K,clipSector:tt,reversed:W,index:O})}),k}async update({seriesRect:t}){const e=this.checkResize(t);await this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),e&&this.animationState.transition("resize"),this.animationState.transition("update")}updateSectorSelection(t,e){let i=[];if(e){const y=this.ctx.highlightManager?.getActiveHighlight();y?.datum&&y.series===this&&(i=[y])}else i=this.nodeData;const{fill:o,fillOpacity:s,stroke:a,strokeOpacity:n,strokeWidth:r,lineDash:l,lineDashOffset:c,cornerRadius:h,angleKey:d,radiusKey:u}=mergeDefaults8(e?this.properties.highlightStyle.item:null,this.properties),g=y=>y.radiusValue;t.update(i,void 0,g).each((y,p)=>{const m=this.properties.itemStyler?this.ctx.callbackCache.call(this.properties.itemStyler,{seriesId:this.id,datum:p.datum,highlighted:e,angleKey:d,radiusKey:u,fill:o,fillOpacity:s,stroke:a,strokeWidth:r,strokeOpacity:n,lineDash:l,lineDashOffset:c,cornerRadius:h}):void 0;y.fill=m?.fill??o,y.fillOpacity=m?.fillOpacity??s,y.stroke=m?.stroke??a,y.strokeWidth=m?.strokeWidth??r,y.strokeOpacity=m?.strokeOpacity??n,y.lineDash=m?.lineDash??l,y.lineDashOffset=m?.lineDashOffset??c,y.lineJoin="round",y.inset=a!=null?(m?.strokeWidth??r)/2:0,y.startInnerCornerRadius=p.reversed?m?.cornerRadius??h:0,y.startOuterCornerRadius=p.reversed?m?.cornerRadius??h:0,y.endInnerCornerRadius=p.reversed?0:m?.cornerRadius??h,y.endOuterCornerRadius=p.reversed?0:m?.cornerRadius??h,e&&(y.startAngle=p.startAngle,y.endAngle=p.endAngle,y.clipSector=p.clipSector,y.innerRadius=p.innerRadius,y.outerRadius=p.outerRadius)})}updateLabels(){const{label:t}=this.properties;this.labelSelection.update(this.nodeData).each((e,i)=>{t.enabled&&i.label?(e.x=i.label.x,e.y=i.label.y,e.fill=t.color,e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=i.label.text,e.textAlign=i.label.textAlign,e.textBaseline=i.label.textBaseline,e.visible=!0):e.visible=!1})}getBarTransitionFunctions(){const t=this.axes[ChartAxisDirection18.X]?.scale;let e=0;if(!t)return prepareRadialBarSeriesAnimationFunctions(e);const i=Math.min(t.domain[0],t.domain[1]),o=Math.max(t.domain[0],t.domain[1]);return i<=0&&o>=0&&(e=t.convert(0)),prepareRadialBarSeriesAnimationFunctions(e)}animateEmptyUpdateReady(){const{labelSelection:t}=this,e=this.getBarTransitionFunctions();motion7.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],e),seriesLabelFadeInAnimation4(this,"labels",this.ctx.animationManager,t)}animateClearingUpdateEmpty(){const{itemSelection:t}=this,{animationManager:e}=this.ctx,i=this.getBarTransitionFunctions();motion7.fromToMotion(this.id,"datums",e,[t],i),seriesLabelFadeOutAnimation2(this,"labels",e,this.labelSelection)}getTooltipHtml(t){const{id:e,axes:i,dataModel:o}=this,{angleKey:s,angleName:a,radiusKey:n,radiusName:r,fill:l,fillOpacity:c,stroke:h,strokeWidth:d,strokeOpacity:u,lineDash:g,lineDashOffset:y,cornerRadius:p,itemStyler:m,tooltip:f}=this.properties,{angleValue:v,radiusValue:S,datum:x,itemId:M}=t,T=i[ChartAxisDirection18.X],b=i[ChartAxisDirection18.Y];if(!this.properties.isValid()||!(T&&b&&isNumber2(v))||!o)return import_ag_charts_community163._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const I=T.formatDatum(v),D=b.formatDatum(S),N=sanitizeHtml10(a),k=sanitizeHtml10(`${D}: ${I}`),{fill:_}=(m&&this.ctx.callbackCache.call(m,{highlighted:!1,seriesId:e,datum:x,angleKey:s,radiusKey:n,fill:l,fillOpacity:c,stroke:h,strokeWidth:d,strokeOpacity:u,lineDash:g,lineDashOffset:y,cornerRadius:p}))??{fill:l};return f.toTooltipHtml({title:N,backgroundColor:l,content:k},{seriesId:e,datum:x,color:_,title:N,angleKey:s,radiusKey:n,angleName:a,radiusName:r,angleValue:v,itemId:M,radiusValue:S})}pickNodeClosestDatum(t){return this.pickNodeNearestDistantObject(t,this.itemSelection.nodes())}getLegendData(t){if(!this.data?.length||!this.properties.isValid()||t!=="category")return[];const{angleKey:e,angleName:i,fill:o,stroke:s,fillOpacity:a,strokeOpacity:n,strokeWidth:r,visible:l}=this.properties;return[{legendType:"category",id:this.id,itemId:e,seriesId:this.id,enabled:l,label:{text:i??e},symbols:[{marker:{fill:o??"rgba(0, 0, 0, 0)",stroke:s??"rgba(0, 0, 0, 0)",fillOpacity:a??1,strokeOpacity:n??1,strokeWidth:r}}]}]}onLegendItemClick(t){const{enabled:e,itemId:i,series:o}=t;o.id===this.id&&this.toggleSeriesItem(i,e)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:o,numVisibleItems:s}=t,n=o.id===this.id||e&&s===1;this.toggleSeriesItem(i,n)}computeLabelsBBox(){return null}getStackId(){return`radialBar-stack-${this.seriesGrouping?.groupIndex??this.id}-xValues`}};RadialBarSeries.className="RadialBarSeries",RadialBarSeries.type="radial-bar";var import_ag_charts_community164=require("ag-charts-community"),RADIAL_BAR_SERIES_THEME={series:{strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:import_ag_charts_community164._Theme.DEFAULT_FONT_FAMILY,color:import_ag_charts_community164._Theme.DEFAULT_INVERTED_LABEL_COLOUR}},axes:{[import_ag_charts_community164._Theme.POLAR_AXIS_TYPE.RADIUS_CATEGORY]:{innerRadiusRatio:.2,groupPaddingInner:.2,paddingInner:.2,paddingOuter:.1}}},RadialBarModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-bar",moduleFactory:t=>new RadialBarSeries(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:import_ag_charts_community165._Theme.POLAR_AXIS_TYPE.ANGLE_NUMBER},{type:import_ag_charts_community165._Theme.POLAR_AXIS_TYPE.RADIUS_CATEGORY}],themeTemplate:RADIAL_BAR_SERIES_THEME,paletteFactory:({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}},stackable:!0,groupable:!0},import_ag_charts_community169=require("ag-charts-community"),import_ag_charts_community167=require("ag-charts-community"),import_ag_charts_community166=require("ag-charts-community"),{Validate:Validate62,RATIO:RATIO27}=import_ag_charts_community166._ModuleSupport,RadialColumnSeriesProperties=class extends RadialColumnSeriesBaseProperties{};__decorateClass([Validate62(RATIO27,{optional:!0})],RadialColumnSeriesProperties.prototype,"columnWidthRatio",2),__decorateClass([Validate62(RATIO27,{optional:!0})],RadialColumnSeriesProperties.prototype,"maxColumnWidthRatio",2);var{ChartAxisDirection:ChartAxisDirection19,PolarAxis:PolarAxis4}=import_ag_charts_community167._ModuleSupport,{RadialColumnShape,getRadialColumnWidth}=import_ag_charts_community167._Scene,RadialColumnSeries=class extends RadialColumnSeriesBase{constructor(t){super(t,{animationResetFns:{item:resetRadialColumnSelectionFn}}),this.properties=new RadialColumnSeriesProperties}getStackId(){return`radarColumn-stack-${this.seriesGrouping?.groupIndex??this.id}-yValues`}nodeFactory(){return new RadialColumnShape}getColumnTransitionFunctions(){const t=this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius();return prepareRadialColumnAnimationFunctions(t)}isRadiusAxisCircle(){const t=this.axes[ChartAxisDirection19.Y];return t instanceof PolarAxis4?t.shape==="circle":!1}updateItemPath(t,e,i){t.isBeveled=this.isRadiusAxisCircle(),t.isRadiusAxisReversed=this.isRadiusAxisReversed(),i&&(t.innerRadius=e.innerRadius,t.outerRadius=e.outerRadius,t.startAngle=e.startAngle,t.endAngle=e.endAngle,t.columnWidth=e.columnWidth,t.axisInnerRadius=e.axisInnerRadius,t.axisOuterRadius=e.axisOuterRadius)}getColumnWidth(t,e){const{columnWidthRatio:i=.5,maxColumnWidthRatio:o=.5}=this.properties;return getRadialColumnWidth(t,e,this.radius,i,o)}};RadialColumnSeries.className="RadialColumnSeries",RadialColumnSeries.type="radial-column";var import_ag_charts_community168=require("ag-charts-community"),RADIAL_COLUMN_SERIES_THEME={series:{columnWidthRatio:.5,maxColumnWidthRatio:.5,strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:import_ag_charts_community168._Theme.DEFAULT_FONT_FAMILY,color:import_ag_charts_community168._Theme.DEFAULT_LABEL_COLOUR}},axes:{[import_ag_charts_community168._Theme.POLAR_AXIS_TYPE.ANGLE_CATEGORY]:{shape:import_ag_charts_community168._Theme.POLAR_AXIS_SHAPE.CIRCLE,groupPaddingInner:0,paddingInner:0,label:{padding:10}},[import_ag_charts_community168._Theme.POLAR_AXIS_TYPE.RADIUS_NUMBER]:{shape:import_ag_charts_community168._Theme.POLAR_AXIS_SHAPE.CIRCLE,innerRadiusRatio:.5}}},RadialColumnModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-column",moduleFactory:t=>new RadialColumnSeries(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:import_ag_charts_community169._Theme.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:import_ag_charts_community169._Theme.POLAR_AXIS_TYPE.RADIUS_NUMBER}],themeTemplate:RADIAL_COLUMN_SERIES_THEME,paletteFactory:({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}},stackable:!0,groupable:!0},import_ag_charts_community173=require("ag-charts-community"),import_ag_charts_community171=require("ag-charts-community"),import_ag_charts_community170=require("ag-charts-community"),{DropShadow,Label:Label9}=import_ag_charts_community170._Scene,{CartesianSeriesProperties:CartesianSeriesProperties2,InterpolationProperties,SeriesMarker:SeriesMarker2,SeriesTooltip:SeriesTooltip14,Validate:Validate63,BOOLEAN:BOOLEAN18,COLOR_STRING:COLOR_STRING22,LINE_DASH:LINE_DASH17,OBJECT:OBJECT27,PLACEMENT,POSITIVE_NUMBER:POSITIVE_NUMBER24,RATIO:RATIO28,STRING:STRING29}=import_ag_charts_community170._ModuleSupport,RangeAreaSeriesLabel=class extends Label9{constructor(){super(...arguments),this.placement="outside",this.padding=6}};__decorateClass([Validate63(PLACEMENT)],RangeAreaSeriesLabel.prototype,"placement",2),__decorateClass([Validate63(POSITIVE_NUMBER24)],RangeAreaSeriesLabel.prototype,"padding",2);var RangeAreaProperties=class extends CartesianSeriesProperties2{constructor(){super(...arguments),this.fill="#99CCFF",this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new InterpolationProperties,this.shadow=new DropShadow().set({enabled:!1}),this.marker=new SeriesMarker2,this.label=new RangeAreaSeriesLabel,this.tooltip=new SeriesTooltip14,this.connectMissingData=!1}};__decorateClass([Validate63(STRING29)],RangeAreaProperties.prototype,"xKey",2),__decorateClass([Validate63(STRING29)],RangeAreaProperties.prototype,"yLowKey",2),__decorateClass([Validate63(STRING29)],RangeAreaProperties.prototype,"yHighKey",2),__decorateClass([Validate63(STRING29,{optional:!0})],RangeAreaProperties.prototype,"xName",2),__decorateClass([Validate63(STRING29,{optional:!0})],RangeAreaProperties.prototype,"yName",2),__decorateClass([Validate63(STRING29,{optional:!0})],RangeAreaProperties.prototype,"yLowName",2),__decorateClass([Validate63(STRING29,{optional:!0})],RangeAreaProperties.prototype,"yHighName",2),__decorateClass([Validate63(COLOR_STRING22)],RangeAreaProperties.prototype,"fill",2),__decorateClass([Validate63(RATIO28)],RangeAreaProperties.prototype,"fillOpacity",2),__decorateClass([Validate63(COLOR_STRING22)],RangeAreaProperties.prototype,"stroke",2),__decorateClass([Validate63(POSITIVE_NUMBER24)],RangeAreaProperties.prototype,"strokeWidth",2),__decorateClass([Validate63(RATIO28)],RangeAreaProperties.prototype,"strokeOpacity",2),__decorateClass([Validate63(LINE_DASH17)],RangeAreaProperties.prototype,"lineDash",2),__decorateClass([Validate63(POSITIVE_NUMBER24)],RangeAreaProperties.prototype,"lineDashOffset",2),__decorateClass([Validate63(OBJECT27)],RangeAreaProperties.prototype,"interpolation",2),__decorateClass([Validate63(OBJECT27)],RangeAreaProperties.prototype,"shadow",2),__decorateClass([Validate63(OBJECT27)],RangeAreaProperties.prototype,"marker",2),__decorateClass([Validate63(OBJECT27)],RangeAreaProperties.prototype,"label",2),__decorateClass([Validate63(OBJECT27)],RangeAreaProperties.prototype,"tooltip",2),__decorateClass([Validate63(BOOLEAN18)],RangeAreaProperties.prototype,"connectMissingData",2);var{valueProperty:valueProperty14,keyProperty:keyProperty7,ChartAxisDirection:ChartAxisDirection20,mergeDefaults:mergeDefaults9,updateLabelNode,fixNumericExtent:fixNumericExtent7,AreaSeriesTag,buildResetPathFn,resetLabelFn:resetLabelFn3,resetMarkerFn:resetMarkerFn2,resetMarkerPositionFn,pathSwipeInAnimation,resetMotion,markerSwipeScaleInAnimation,seriesLabelFadeInAnimation:seriesLabelFadeInAnimation5,animationValidation:animationValidation7,diff:diff6,updateClipPath,isFiniteNumber:isFiniteNumber8,computeMarkerFocusBounds:computeMarkerFocusBounds3,plotPath,pathRanges,pathRangePoints,pathRangePointsReverse}=import_ag_charts_community171._ModuleSupport,{getMarker:getMarker3,PointerEvents:PointerEvents7}=import_ag_charts_community171._Scene,{sanitizeHtml:sanitizeHtml11,extent:extent4}=import_ag_charts_community171._Util,RangeAreaSeriesNodeEvent=class extends import_ag_charts_community171._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.xKey=o.properties.xKey,this.yLowKey=o.properties.yLowKey,this.yHighKey=o.properties.yHighKey}},RangeAreaSeries=class extends import_ag_charts_community171._ModuleSupport.CartesianSeries{constructor(t){super({moduleCtx:t,hasMarkers:!0,pathsPerSeries:["fill","stroke"],directionKeys:{[ChartAxisDirection20.X]:["xKey"],[ChartAxisDirection20.Y]:["yLowKey","yHighKey"]},directionNames:{[ChartAxisDirection20.X]:["xName"],[ChartAxisDirection20.Y]:["yLowName","yHighName","yName"]},animationResetFns:{path:buildResetPathFn({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:resetLabelFn3,marker:(e,i)=>({...resetMarkerFn2(e),...resetMarkerPositionFn(e,i)})}}),this.properties=new RangeAreaProperties,this.NodeEvent=RangeAreaSeriesNodeEvent}async processData(t){if(!this.properties.isValid()||!this.visible)return;const{xKey:e,yLowKey:i,yHighKey:o}=this.properties,s=this.axes[ChartAxisDirection20.X]?.scale,a=this.axes[ChartAxisDirection20.Y]?.scale,{xScaleType:n,yScaleType:r}=this.getScaleInformation({xScale:s,yScale:a}),l=[],c=!this.ctx.animationManager.isSkipped();!this.ctx.animationManager.isSkipped()&&this.processedData&&l.push(diff6(this.processedData)),c&&l.push(animationValidation7()),await this.requestDataModel(t,this.data,{props:[keyProperty7(e,n,{id:"xValue"}),valueProperty14(i,r,{id:"yLowValue",invalidValue:void 0}),valueProperty14(o,r,{id:"yHighValue",invalidValue:void 0}),...l]}),this.animationState.transition("updateData")}getSeriesDomain(t){const{processedData:e,dataModel:i,axes:o}=this;if(!(e&&i))return[];const{domain:{keys:[s],values:a}}=e;if(t===ChartAxisDirection20.X){const n=i.resolveProcessedDataDefById(this,"xValue"),r=o[ChartAxisDirection20.X];return n?.def.type==="key"&&n.def.valueType==="category"?s:fixNumericExtent7(extent4(s),r)}else{const n=i.resolveProcessedDataIndexById(this,"yLowValue"),r=a[n],l=i.resolveProcessedDataIndexById(this,"yHighValue"),c=a[l],h=[r[0]>c[0]?c[0]:r[0],c[1]<r[1]?r[1]:c[1]];return fixNumericExtent7(h)}}async createNodeData(){const{data:t,dataModel:e,axes:i,visible:o}=this,s=i[ChartAxisDirection20.X],a=i[ChartAxisDirection20.Y];if(!(t&&o&&s&&a&&e))return;const n=s.scale,r=a.scale,{xKey:l,yLowKey:c,yHighKey:h,connectMissingData:d,marker:u}=this.properties,g=`${c}-${h}`,y=(n.bandwidth??0)/2,p=e.resolveProcessedDataDefsByIds(this,["xValue","yHighValue","yLowValue"]),m=(k,_,O,A)=>{const L=n.convert(k)+y,E=r.convert(_),C=r.convert(O),{size:R}=u;return[{point:{x:L,y:E,moveTo:A},size:R,itemId:"high",yValue:_,xValue:k,enabled:!0},{point:{x:L,y:C,moveTo:A},size:R,itemId:"low",yValue:O,xValue:k,enabled:!1}]},f=[],v=[],S={itemId:g,highPoints:[],lowPoints:[]},x={itemId:g,highPoints:[],lowPoints:[]},M={itemId:g,labelData:f,nodeData:v,fillData:x,strokeData:S,scales:this.calculateScaling(),visible:this.visible};if(!this.visible)return M;const T=x.highPoints,b=x.lowPoints,I=S.highPoints,D=S.lowPoints;let N=!0;return this.processedData?.data.forEach(({keys:k,datum:_,values:O},A)=>{const L=e.resolveProcessedDataDefsValues(p,{keys:k,values:O}),{xValue:E,yHighValue:C,yLowValue:R}=L,w=C==null||R==null?[]:m(E,C,R,!1),z=R>C;w.forEach(({point:{x:H,y:U},enabled:K,size:q,itemId:j="",yValue:Y})=>{v.push({index:A,series:this,itemId:j,datum:_,midPoint:{x:H,y:U},yHighValue:C,yLowValue:R,xValue:E,xKey:l,yLowKey:c,yHighKey:h,point:{x:H,y:U,size:q},enabled:K});const X=this.createLabelData({point:{x:H,y:U},value:Y,yLowValue:R,yHighValue:C,itemId:j,inverted:z,datum:_,series:this});f.push(X)});const B=E!=null,F=C!=null&&R!=null,[W,V]=m(E,C??0,R??0,N);B&&F?(T.push(W),b.push(V),I.push(W),D.push(V),N=!1):d||(N=!0)}),M}createLabelData({point:t,value:e,itemId:i,inverted:o,datum:s,series:a}){const{xKey:n,yLowKey:r,yHighKey:l,xName:c,yName:h,yLowName:d,yHighName:u,label:g}=this.properties,{placement:y,padding:p=10}=g;let m=i;o&&(m=i==="low"?"high":"low");const f=y==="outside"&&m==="high"||y==="inside"&&m==="low"?-1:1;return{x:t.x,y:t.y+p*f,series:a,itemId:i,datum:s,text:this.getLabelText(g,{value:e,datum:s,itemId:i,xKey:n,yLowKey:r,yHighKey:l,xName:c,yLowName:d,yHighName:u,yName:h},v=>isFiniteNumber8(v)?v.toFixed(2):String(v)),textAlign:"center",textBaseline:f===-1?"bottom":"top"}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:t}=this.properties.marker,e=getMarker3(t);return new e}async updatePathNodes(t){const{opacity:e,visible:i}=t,[o,s]=t.paths,a=this.getStrokeWidth(this.properties.strokeWidth);s.setProperties({tag:AreaSeriesTag.Stroke,fill:void 0,lineJoin:s.lineCap="round",pointerEvents:PointerEvents7.None,stroke:this.properties.stroke,strokeWidth:a,strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:e,visible:i}),o.setProperties({tag:AreaSeriesTag.Fill,stroke:void 0,lineJoin:"round",pointerEvents:PointerEvents7.None,fill:this.properties.fill,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,strokeOpacity:this.properties.strokeOpacity,fillShadow:this.properties.shadow,strokeWidth:a,opacity:e,visible:i}),updateClipPath(this,s),updateClipPath(this,o)}async updatePaths(t){this.updateAreaPaths(t.paths,t.contextData)}updateAreaPaths(t,e){this.updateFillPath(t,e),this.updateStrokePath(t,e)}updateFillPath(t,e){const{interpolation:i}=this.properties,{fillData:o}=e,[s]=t;s.path.clear();for(const a of pathRanges(o.highPoints))plotPath(pathRangePoints(o.highPoints,a),s,i),plotPath(pathRangePointsReverse(o.lowPoints,a),s,i,!0),s.path.closePath();s.checkPathDirty()}updateStrokePath(t,e){const{interpolation:i}=this.properties,{strokeData:o}=e,[,s]=t;s.path.clear(!0);for(const a of pathRanges(o.highPoints))plotPath(pathRangePoints(o.highPoints,a),s,i),plotPath(pathRangePoints(o.lowPoints,a),s,i);s.checkPathDirty()}async updateMarkerSelection(t){const{nodeData:e,markerSelection:i}=t;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?e:[])}async updateMarkerNodes(t){const{markerSelection:e,isHighlight:i}=t,{xKey:o,yLowKey:s,yHighKey:a,marker:n,fill:r,stroke:l,strokeWidth:c,fillOpacity:h,strokeOpacity:d}=this.properties,u=mergeDefaults9(i&&this.properties.highlightStyle.item,n.getStyle(),{fill:r,fillOpacity:h,stroke:l,strokeWidth:c,strokeOpacity:d});e.each((g,y)=>{this.updateMarkerStyle(g,n,{datum:y,highlighted:i,xKey:o,yHighKey:a,yLowKey:s},u)}),i||this.properties.marker.markClean()}async updateLabelSelection(t){const{labelData:e,labelSelection:i}=t;return i.update(e,o=>{o.tag=AreaSeriesTag.Label,o.pointerEvents=PointerEvents7.None})}async updateLabelNodes(t){t.labelSelection.each((e,i)=>{updateLabelNode(e,this.properties.label,i)})}getHighlightLabelData(t,e){const i=t.filter(o=>o.datum===e.datum);return i.length>0?i:void 0}getHighlightData(t,e){const i=t.filter(o=>o.datum===e.datum);return i.length>0?i:void 0}getTooltipHtml(t){const e=this.axes[ChartAxisDirection20.X],i=this.axes[ChartAxisDirection20.Y];if(!this.properties.isValid()||!e||!i)return import_ag_charts_community171._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const{id:o}=this,{xKey:s,yLowKey:a,yHighKey:n,xName:r,yName:l,yLowName:c,yHighName:h,fill:d,tooltip:u}=this.properties,{datum:g,itemId:y,xValue:p,yLowValue:m,yHighValue:f}=t,v=d??"gray",S=sanitizeHtml11(e.formatDatum(p)),x=sanitizeHtml11(i.formatDatum(m)),M=sanitizeHtml11(i.formatDatum(f)),T=r??s,b=c??a,I=h??n,D=sanitizeHtml11(l),N=l?`<b>${sanitizeHtml11(T)}</b>: ${S}<br><b>${sanitizeHtml11(b)}</b>: ${x}<br><b>${sanitizeHtml11(I)}</b>: ${M}<br>`:`${S}: ${x} - ${M}`;return u.toTooltipHtml({title:D,content:N,backgroundColor:v},{seriesId:o,itemId:y,datum:g,xKey:s,yLowKey:a,yHighKey:n,xName:r,yLowName:c,yHighName:h,yName:l,color:v,title:D,yHighValue:f,yLowValue:m})}getLegendData(t){if(t!=="category")return[];const{yLowKey:e,yHighKey:i,yName:o,yLowName:s,yHighName:a,fill:n,stroke:r,strokeWidth:l,strokeOpacity:c,lineDash:h,visible:d,marker:u}=this.properties,g=o??`${s??e} - ${a??i}`;return[{legendType:"category",id:this.id,itemId:`${e}-${i}`,seriesId:this.id,enabled:d,label:{text:`${g}`},symbols:[{marker:{shape:u.shape,fill:u.fill??n,stroke:u.stroke??r,fillOpacity:u.fillOpacity,strokeOpacity:u.strokeOpacity,strokeWidth:u.strokeWidth},line:{stroke:r,strokeOpacity:c,strokeWidth:l,lineDash:h}}]}]}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}nodeFactory(){return new import_ag_charts_community171._Scene.Group}animateEmptyUpdateReady(t){const{markerSelection:e,labelSelection:i,contextData:o,paths:s}=t,{animationManager:a}=this.ctx;this.updateAreaPaths(s,o),pathSwipeInAnimation(this,a,...s),resetMotion([e],resetMarkerPositionFn),markerSwipeScaleInAnimation(this,a,e),seriesLabelFadeInAnimation5(this,"labels",a,i)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateAreaPaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){const{contextData:e,paths:i}=t;super.animateWaitingUpdateReady(t),this.updateAreaPaths(i,e)}getFormattedMarkerStyle(t){const{xKey:e,yLowKey:i,yHighKey:o}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:t,xKey:e,yLowKey:i,yHighKey:o,highlighted:!0})}computeFocusBounds(t){const e=computeMarkerFocusBounds3(this,t),i=computeMarkerFocusBounds3(this,{...t,datumIndex:t.datumIndex+1});if(e&&i)return import_ag_charts_community171._Scene.BBox.merge([e,i])}};RangeAreaSeries.className="RangeAreaSeries",RangeAreaSeries.type="range-area";var import_ag_charts_community172=require("ag-charts-community"),RANGE_AREA_SERIES_THEME={series:{fillOpacity:.7,nodeClickRange:"nearest",marker:{enabled:!1,size:6,strokeWidth:2},label:{enabled:!1,placement:"outside",padding:10,fontSize:12,fontFamily:import_ag_charts_community172._Theme.DEFAULT_FONT_FAMILY,color:import_ag_charts_community172._Theme.DEFAULT_LABEL_COLOUR},interpolation:{type:"linear",tension:1,position:"end"}},axes:{[import_ag_charts_community172._Theme.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0}}}},{markerPaletteFactory:markerPaletteFactory2}=import_ag_charts_community173._ModuleSupport,RangeAreaModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-area",moduleFactory:t=>new RangeAreaSeries(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:import_ag_charts_community173._Theme.CARTESIAN_AXIS_TYPE.NUMBER,position:import_ag_charts_community173._Theme.POSITION.LEFT},{type:import_ag_charts_community173._Theme.CARTESIAN_AXIS_TYPE.CATEGORY,position:import_ag_charts_community173._Theme.POSITION.BOTTOM}],themeTemplate:RANGE_AREA_SERIES_THEME,paletteFactory:t=>{const{marker:e}=markerPaletteFactory2(t);return{fill:e.fill,stroke:e.stroke,marker:e}}},import_ag_charts_community177=require("ag-charts-community"),import_ag_charts_community175=require("ag-charts-community"),import_ag_charts_community174=require("ag-charts-community"),{DropShadow:DropShadow2,Label:Label10}=import_ag_charts_community174._Scene,{AbstractBarSeriesProperties:AbstractBarSeriesProperties4,SeriesTooltip:SeriesTooltip15,Validate:Validate64,COLOR_STRING:COLOR_STRING23,FUNCTION:FUNCTION15,LINE_DASH:LINE_DASH18,OBJECT:OBJECT28,PLACEMENT:PLACEMENT2,POSITIVE_NUMBER:POSITIVE_NUMBER25,RATIO:RATIO29,STRING:STRING30}=import_ag_charts_community174._ModuleSupport,RangeBarSeriesLabel=class extends Label10{constructor(){super(...arguments),this.placement="inside",this.padding=6}};__decorateClass([Validate64(PLACEMENT2)],RangeBarSeriesLabel.prototype,"placement",2),__decorateClass([Validate64(POSITIVE_NUMBER25)],RangeBarSeriesLabel.prototype,"padding",2);var RangeBarProperties=class extends AbstractBarSeriesProperties4{constructor(){super(...arguments),this.fill="#99CCFF",this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.shadow=new DropShadow2().set({enabled:!1}),this.label=new RangeBarSeriesLabel,this.tooltip=new SeriesTooltip15}};__decorateClass([Validate64(STRING30)],RangeBarProperties.prototype,"xKey",2),__decorateClass([Validate64(STRING30)],RangeBarProperties.prototype,"yLowKey",2),__decorateClass([Validate64(STRING30)],RangeBarProperties.prototype,"yHighKey",2),__decorateClass([Validate64(STRING30,{optional:!0})],RangeBarProperties.prototype,"xName",2),__decorateClass([Validate64(STRING30,{optional:!0})],RangeBarProperties.prototype,"yName",2),__decorateClass([Validate64(STRING30,{optional:!0})],RangeBarProperties.prototype,"yLowName",2),__decorateClass([Validate64(STRING30,{optional:!0})],RangeBarProperties.prototype,"yHighName",2),__decorateClass([Validate64(COLOR_STRING23)],RangeBarProperties.prototype,"fill",2),__decorateClass([Validate64(RATIO29)],RangeBarProperties.prototype,"fillOpacity",2),__decorateClass([Validate64(COLOR_STRING23)],RangeBarProperties.prototype,"stroke",2),__decorateClass([Validate64(POSITIVE_NUMBER25)],RangeBarProperties.prototype,"strokeWidth",2),__decorateClass([Validate64(RATIO29)],RangeBarProperties.prototype,"strokeOpacity",2),__decorateClass([Validate64(LINE_DASH18)],RangeBarProperties.prototype,"lineDash",2),__decorateClass([Validate64(POSITIVE_NUMBER25)],RangeBarProperties.prototype,"lineDashOffset",2),__decorateClass([Validate64(POSITIVE_NUMBER25)],RangeBarProperties.prototype,"cornerRadius",2),__decorateClass([Validate64(FUNCTION15,{optional:!0})],RangeBarProperties.prototype,"itemStyler",2),__decorateClass([Validate64(OBJECT28)],RangeBarProperties.prototype,"shadow",2),__decorateClass([Validate64(OBJECT28)],RangeBarProperties.prototype,"label",2),__decorateClass([Validate64(OBJECT28)],RangeBarProperties.prototype,"tooltip",2);var{SeriesNodePickMode:SeriesNodePickMode12,valueProperty:valueProperty15,keyProperty:keyProperty8,ChartAxisDirection:ChartAxisDirection21,getRectConfig,updateRect,checkCrisp,updateLabelNode:updateLabelNode2,SMALLEST_KEY_INTERVAL:SMALLEST_KEY_INTERVAL3,LARGEST_KEY_INTERVAL,diff:diff7,prepareBarAnimationFunctions:prepareBarAnimationFunctions2,midpointStartingBarPosition,resetBarSelectionsFn:resetBarSelectionsFn2,fixNumericExtent:fixNumericExtent8,seriesLabelFadeInAnimation:seriesLabelFadeInAnimation6,resetLabelFn:resetLabelFn4,animationValidation:animationValidation8,createDatumId:createDatumId8,isFiniteNumber:isFiniteNumber9,computeBarFocusBounds:computeBarFocusBounds5}=import_ag_charts_community175._ModuleSupport,{Rect:Rect4,PointerEvents:PointerEvents8,motion:motion8}=import_ag_charts_community175._Scene,{sanitizeHtml:sanitizeHtml12,isNumber:isNumber3,extent:extent5}=import_ag_charts_community175._Util,{ContinuousScale:ContinuousScale3}=import_ag_charts_community175._Scale,RangeBarSeriesNodeEvent=class extends import_ag_charts_community175._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.xKey=o.properties.xKey,this.yLowKey=o.properties.yLowKey,this.yHighKey=o.properties.yHighKey}},RangeBarSeries=class extends import_ag_charts_community175._ModuleSupport.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[SeriesNodePickMode12.NEAREST_BY_MAIN_AXIS_FIRST,SeriesNodePickMode12.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,directionKeys:{x:["xKey"],y:["yLowKey","yHighKey"]},directionNames:{x:["xName"],y:["yLowName","yHighName","yName"]},datumSelectionGarbageCollection:!1,animationResetFns:{datum:resetBarSelectionsFn2,label:resetLabelFn4}}),this.properties=new RangeBarProperties,this.NodeEvent=RangeBarSeriesNodeEvent}async processData(t){if(!this.properties.isValid())return;const{xKey:e,yLowKey:i,yHighKey:o}=this.properties,s=this.getCategoryAxis()?.scale,a=this.getValueAxis()?.scale,{isContinuousX:n,xScaleType:r,yScaleType:l}=this.getScaleInformation({xScale:s,yScale:a}),c=[];this.ctx.animationManager.isSkipped()||(this.processedData&&c.push(diff7(this.processedData)),c.push(animationValidation8()));const h=this.visible?{}:{forceValue:0},{processedData:d}=await this.requestDataModel(t,this.data,{props:[keyProperty8(e,r,{id:"xValue"}),valueProperty15(i,l,{id:"yLowValue",...h}),valueProperty15(o,l,{id:"yHighValue",...h}),...n?[SMALLEST_KEY_INTERVAL3,LARGEST_KEY_INTERVAL]:[],...c],groupByKeys:!0});this.smallestDataInterval=d.reduced?.smallestKeyInterval,this.largestDataInterval=d.reduced?.largestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(t){const{processedData:e,dataModel:i,smallestDataInterval:o}=this;if(!(e&&i))return[];const{domain:{keys:[s],values:a}}=e;if(t===this.getCategoryDirection()){const n=i.resolveProcessedDataDefById(this,"xValue");if(n?.def.type==="key"&&n?.def.valueType==="category")return s;const r=isFiniteNumber9(o)?o:0,l=extent5(s)??[NaN,NaN],c=this.getCategoryAxis(),h=l[0]+-r,d=l[1]+r;return fixNumericExtent8([h,d],c)}else{const n=i.resolveProcessedDataIndexById(this,"yLowValue"),r=a[n],l=i.resolveProcessedDataIndexById(this,"yHighValue"),c=a[l],h=[r[0]>c[0]?c[0]:r[0],c[1]<r[1]?r[1]:c[1]];return fixNumericExtent8(h)}}async createNodeData(){const{data:t,dataModel:e,groupScale:i,processedData:o,properties:{visible:s}}=this,a=this.getCategoryAxis(),n=this.getValueAxis();if(!(t&&a&&n&&e))return;const r=a.scale,l=n.scale,c=this.getBarDirection()===ChartAxisDirection21.X,{xKey:h,yLowKey:d,yHighKey:u,fill:g,stroke:y,strokeWidth:p}=this.properties,m=`${d}-${u}`,f={itemId:m,nodeData:[],labelData:[],scales:this.calculateScaling(),visible:this.visible};if(!s)return f;const v=e.resolveProcessedDataIndexById(this,"yLowValue"),S=e.resolveProcessedDataIndexById(this,"yHighValue"),x=e.resolveProcessedDataIndexById(this,"xValue"),{barWidth:M,groupIndex:T}=this.updateGroupScale(a),b=ContinuousScale3.is(r)?M*-.5:0;return o?.data.forEach(({keys:I,datum:D,values:N},k)=>{N.forEach((_,O)=>{const A=I[x],L=Math.round(r.convert(A))+i.convert(String(T))+b,E=_[v],C=_[S];if(!import_ag_charts_community175._Util.isNumber(C)||!import_ag_charts_community175._Util.isNumber(E))return;const R=Math.min(E,C),P=Math.max(E,C),w=Math.round(l.convert(R)),B=Math.round(l.convert(P)),F=w,W=Math.max(p,Math.abs(F-B)),V={x:c?Math.min(B,F):L,y:c?L:Math.min(B,F),width:c?W:M,height:c?M:W},H={x:V.x+V.width/2,y:V.y+V.height/2},U=this.createLabelData({rect:V,barAlongX:c,yLowValue:R,yHighValue:P,datum:D[O],series:this}),K={index:k,valueIndex:O,series:this,itemId:m,datum:D[O],xValue:A,yLowValue:E,yHighValue:C,yLowKey:d,yHighKey:u,xKey:h,x:V.x,y:V.y,width:V.width,height:V.height,midPoint:H,fill:g,stroke:y,strokeWidth:p,opacity:1,labels:U};f.nodeData.push(K),f.labelData.push(...U)})}),f}createLabelData({rect:t,barAlongX:e,yLowValue:i,yHighValue:o,datum:s,series:a}){const{xKey:n,yLowKey:r,yHighKey:l,xName:c,yLowName:h,yHighName:d,yName:u,label:g}=this.properties,y={datum:s,xKey:n,yLowKey:r,yHighKey:l,xName:c,yLowName:h,yHighName:d,yName:u},{placement:p,padding:m}=g,v=m*(p==="outside"?1:-1),S={x:t.x+(e?-v:t.width/2),y:t.y+(e?t.height/2:t.height+v),textAlign:e?"left":"center",textBaseline:e?"middle":"bottom",text:this.getLabelText(g,{itemId:"low",value:i,...y},M=>isFiniteNumber9(M)?M.toFixed(2):String(M)),itemId:"low",datum:s,series:a},x={x:t.x+(e?t.width+v:t.width/2),y:t.y+(e?t.height/2:-v),textAlign:e?"right":"center",textBaseline:e?"middle":"top",text:this.getLabelText(g,{itemId:"high",value:o,...y},M=>isNumber3(M)?M.toFixed(2):""),itemId:"high",datum:s,series:a};return p==="outside"&&(S.textAlign=e?"right":"center",S.textBaseline=e?"middle":"top",x.textAlign=e?"left":"center",x.textBaseline=e?"middle":"bottom"),[S,x]}nodeFactory(){return new Rect4}async updateDatumSelection(t){const{nodeData:e,datumSelection:i}=t,o=e??[];return i.update(o,void 0,s=>this.getDatumId(s))}async updateDatumNodes(t){const{datumSelection:e,isHighlight:i}=t,{id:o,ctx:s}=this,{yLowKey:a,yHighKey:n,highlightStyle:{item:r}}=this.properties,l=this.axes[ChartAxisDirection21.X],c=checkCrisp(l?.scale,l?.visibleRange,this.smallestDataInterval,this.largestDataInterval),h=this.getCategoryDirection()===ChartAxisDirection21.X;e.each((d,u)=>{const{fillOpacity:g,strokeOpacity:y,strokeWidth:p,lineDash:m,lineDashOffset:f,itemStyler:v,shadow:S}=this.properties,x={fill:u.fill,stroke:u.stroke,fillOpacity:g,strokeOpacity:y,lineDash:m,lineDashOffset:f,fillShadow:S,strokeWidth:this.getStrokeWidth(p),cornerRadius:this.properties.cornerRadius},M=h?u.width>0:u.height>0,T=getRectConfig({datum:u,isHighlighted:i,style:x,highlightStyle:r,itemStyler:v,seriesId:o,ctx:s,yLowKey:a,yHighKey:n});T.crisp=c,T.visible=M,updateRect(d,T)})}getHighlightLabelData(t,e){const i=t.filter(o=>o.datum===e.datum);return i.length>0?i:void 0}async updateLabelSelection(t){const e=this.properties.label.enabled?t.labelData:[];return t.labelSelection.update(e,i=>{i.pointerEvents=PointerEvents8.None})}async updateLabelNodes(t){t.labelSelection.each((e,i)=>{updateLabelNode2(e,this.properties.label,i)})}getTooltipHtml(t){const{id:e,ctx:{callbackCache:i}}=this,o=this.getCategoryAxis(),s=this.getValueAxis();if(!this.properties.isValid()||!o||!s)return import_ag_charts_community175._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const{xKey:a,yLowKey:n,yHighKey:r,xName:l,yLowName:c,yHighName:h,yName:d,fill:u,strokeWidth:g,itemStyler:y,tooltip:p,fillOpacity:m,stroke:f,strokeOpacity:v,lineDash:S,lineDashOffset:x,cornerRadius:M}=this.properties,{datum:T,xValue:b,yLowValue:I,yHighValue:D}=t;let N;y&&(N=i.call(y,{highlighted:!1,seriesId:e,datum:T,xKey:a,yLowKey:n,yHighKey:r,fill:u,fillOpacity:m,stroke:f,strokeWidth:g,strokeOpacity:v,lineDash:S,lineDashOffset:x,cornerRadius:M}));const k=N?.fill??u??"gray",_=sanitizeHtml12(o.formatDatum(b)),O=sanitizeHtml12(s.formatDatum(I)),A=sanitizeHtml12(s.formatDatum(D)),L=l??a,E=c??n,C=h??r,R=sanitizeHtml12(d),P=d?`<b>${sanitizeHtml12(L)}</b>: ${_}<br><b>${sanitizeHtml12(E)}</b>: ${O}<br><b>${sanitizeHtml12(C)}</b>: ${A}<br>`:`${_}: ${O} - ${A}`,w={title:R,content:P,backgroundColor:k};return p.toTooltipHtml(w,{itemId:void 0,datum:T,xKey:a,xName:l,yLowKey:n,yLowName:c,yHighKey:r,yHighName:h,yName:d,color:k,seriesId:e,title:R})}getLegendData(t){const{id:e,visible:i}=this;if(t!=="category")return[];const{fill:o,stroke:s,strokeWidth:a,fillOpacity:n,strokeOpacity:r,yName:l,yLowName:c,yHighName:h,yLowKey:d,yHighKey:u}=this.properties,g=l??`${c??d} - ${h??u}`;return[{legendType:"category",id:e,itemId:`${d}-${u}`,seriesId:e,enabled:i,label:{text:`${g}`},symbols:[{marker:{fill:o,stroke:s,fillOpacity:n,strokeOpacity:r,strokeWidth:a}}]}]}animateEmptyUpdateReady({datumSelection:t,labelSelection:e}){const i=prepareBarAnimationFunctions2(midpointStartingBarPosition(this.isVertical(),"normal"));motion8.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],i),seriesLabelFadeInAnimation6(this,"labels",this.ctx.animationManager,e)}animateWaitingUpdateReady(t){const{datumSelection:e,labelSelection:i}=t,{processedData:o}=this,s=o?.reduced?.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const a=prepareBarAnimationFunctions2(midpointStartingBarPosition(this.isVertical(),"fade"));motion8.fromToMotion(this.id,"datums",this.ctx.animationManager,[e],a,(n,r)=>createDatumId8(r.xValue,r.valueIndex),s),seriesLabelFadeInAnimation6(this,"labels",this.ctx.animationManager,i)}getDatumId(t){return`${t.xValue}-${t.valueIndex}`}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}computeFocusBounds({datumIndex:t,seriesRect:e}){return computeBarFocusBounds5(this.contextNodeData?.nodeData[t],this.contentGroup,e)}};RangeBarSeries.className="RangeBarSeries",RangeBarSeries.type="range-bar";var import_ag_charts_community176=require("ag-charts-community"),RANGE_BAR_SERIES_THEME={series:{direction:"vertical",strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:import_ag_charts_community176._Theme.DEFAULT_FONT_FAMILY,color:import_ag_charts_community176._Theme.DEFAULT_INSIDE_SERIES_LABEL_COLOUR,placement:"inside"}},axes:{[import_ag_charts_community176._Theme.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0}}}},RangeBarModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-bar",moduleFactory:t=>new RangeBarSeries(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:import_ag_charts_community177._Theme.CARTESIAN_AXIS_TYPE.CATEGORY,position:import_ag_charts_community177._Theme.POSITION.BOTTOM},{type:import_ag_charts_community177._Theme.CARTESIAN_AXIS_TYPE.NUMBER,position:import_ag_charts_community177._Theme.POSITION.LEFT}],themeTemplate:RANGE_BAR_SERIES_THEME,paletteFactory:({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}},groupable:!0,swapDefaultAxesCondition:({direction:t})=>t==="horizontal"},import_ag_charts_community181=require("ag-charts-community"),import_ag_charts_community180=require("ag-charts-community");function sortNodesByY(t){t.nodes.sort((e,i)=>Math.round((e.datum.y-i.datum.y)*100)/100||-(e.datum.size-i.datum.size))}function justifyNodesAcrossColumn({nodes:t,size:e},{seriesRectHeight:i,nodeSpacing:o,sizeScale:s}){const a=i*e*s;let r=(i-(a+o*(t.length-1)))/2;t.forEach(({datum:l})=>{const c=i*l.size*s;l.y=r,l.height=c,r+=c+o})}function separateNodesInColumn(t,e){const{nodes:i}=t,{seriesRectHeight:o,nodeSpacing:s}=e;sortNodesByY(t);let a=0,n=0;for(let c=0;c<i.length;c+=1){const{datum:h}=i[c],d=Math.max(n-h.y,0);h.y+=d,a+=d,n=h.y+h.height+s}if(n-s<o)return a>0;let l=o;for(let c=i.length-1;c>=0;c-=1){const{datum:h}=i[c],d=h.y+h.height,u=Math.min(l-d,0);h.y+=u,a+=u,l=h.y-s}return!0}function hasCrossOver(t,e,i,o,s,a,n,r){const l=(i-t)/(o-e),c=(n-s)/(r-a),h=((a-e)*(l*c)+t*c-s*l)/(c-l);return t<i?h>t&&h<Math.min(i,n):h<t&&h>Math.max(i,n)}function removeColumnCrossoversInDirection(t,e){let i=!1;const o=t.nodes.filter(a=>e(a).length===1);let s=!0;for(let a=0;s&&a<o.length;a+=1){s=!1;for(let n=0;n<o.length-1;n+=1){const{datum:r}=o[n],l=e(o[n])[0].node.datum,{datum:c}=o[n+1],h=e(o[n+1])[0].node.datum;if(!(hasCrossOver(r.x,r.y,l.x,l.y,c.x,c.y,h.x,h.y)||hasCrossOver(r.x,r.y+r.height/2,l.x,l.y+l.height/2,c.x,c.y+c.height/2,h.x,h.y+h.height/2)||hasCrossOver(r.x,r.y+r.height,l.x,l.y+l.height,c.x,c.y+c.height,h.x,h.y+h.height)))continue;const u=o[n];o[n]=o[n+1],o[n+1]=u;const g=r.y;r.y=c.y+c.height-r.height,c.y=g,i=!0,s=!0}}return i}function removeColumnCrossovers(t){let e=!1;return sortNodesByY(t),e=removeColumnCrossoversInDirection(t,i=>i.linksBefore)||e,e=removeColumnCrossoversInDirection(t,i=>i.linksAfter)||e,e}function weightedNodeY(t){if(t.length===0)return;let e=0,i=0;for(const{node:{datum:o}}of t)e+=o.y*o.size,i+=o.size;return e/i}function layoutColumn(t,e,i,o){return t.nodes.forEach(({datum:s,linksBefore:a,linksAfter:n})=>{const r=o===1?a:n,l=o===1?n:a,c=weightedNodeY(r);if(c!=null){const h=l.length!==0?i:1;s.y=s.y+(c-s.y)*h}}),separateNodesInColumn(t,e)}function layoutColumnsForward(t,e,i){let o=!1;for(let s=0;s<t.length;s+=1)o=layoutColumn(t[s],e,i,1)||o;return o}function layoutColumnsBackwards(t,e,i){let o=!1;for(let s=t.length-1;s>=0;s-=1)o=layoutColumn(t[s],e,i,-1)||o;return o}function removeColumnsCrossovers(t){let e=!1;for(let i=t.length-1;i>=0;i-=1)e=removeColumnCrossovers(t[i])||e;return e}function layoutColumns(t,e){t.forEach(o=>{justifyNodesAcrossColumn(o,e)});let i=!1;for(let o=0;o<6;o+=1){const s=layoutColumnsForward(t,e,1);i=layoutColumnsBackwards(t,e,.5);const a=removeColumnsCrossovers(t);if(!s&&!i&&!a)break}i&&(layoutColumnsForward(t,e,1),removeColumnsCrossovers(t))}var import_ag_charts_community178=require("ag-charts-community"),{BBox:BBox10,Path:Path9,ScenePathChangeDetection:ScenePathChangeDetection3,splitBezier}=import_ag_charts_community178._Scene;function offsetTrivialCubicBezier(t,e,i,o,s,a,n,r,l,c){let h,d;if(s!==i&&l!==n){const T=-(o-e)/(s-i),b=-(r-a)/(l-n);h=(n-i+T*e-b*a)/(T-b),d=T*(h-e)+i}else if(s===i&&l!==n)h=e,d=-(r-a)/(l-n)*(h-r)+l;else if(s!==i&&l===n)h=r,d=-(o-e)/(s-i)*(h-e)+i;else throw new Error("Offsetting flat bezier curve");const u=Math.hypot(i-d,e-h),g=(u+c)/u,y=Math.hypot(l-d,r-h),p=(y+c)/y,m=h+(o-h)*g,f=d+(s-d)*g,v=h+(a-h)*p,S=d+(n-d)*p,x=h+(r-h)*p,M=d+(l-d)*p;t.cubicCurveTo(m,f,v,S,x,M)}var SankeyLink=class extends Path9{constructor(){super(...arguments),this.x1=0,this.x2=0,this.y1=0,this.y2=0,this.height=0,this.inset=0}computeBBox(){const t=Math.min(this.x1,this.x2),e=Math.max(this.x1,this.x2)-t,i=Math.min(this.y1,this.y2),o=Math.max(this.y1,this.y2)-i+this.height;return new BBox10(t,i,e,o)}updatePath(){const{path:t,inset:e}=this;t.clear();const i=this.x1+e,o=this.x2-e,s=this.y1+e,a=this.y2+e,n=this.height-2*e;if(n<0||i>o)return;const r=i,l=s+n/2,c=(i+o)/2,h=s+n/2,d=(i+o)/2,u=a+n/2,g=o,y=a+n/2;if(t.moveTo(r,l-n/2),Math.abs(this.y2-this.y1)<1||this.x2-this.x1<this.height*Math.SQRT2)t.cubicCurveTo(c,h-n/2,d,u-n/2,g,y-n/2),t.lineTo(g,y+n/2),t.cubicCurveTo(d,u+n/2,c,h+n/2,r,l+n/2);else{const[p,m]=splitBezier(r,l,c,h,d,u,g,y,.5),f=(a>s?1:-1)*n/2;offsetTrivialCubicBezier(t,p[0].x,p[0].y,p[1].x,p[1].y,p[2].x,p[2].y,p[3].x,p[3].y,f),offsetTrivialCubicBezier(t,m[0].x,m[0].y,m[1].x,m[1].y,m[2].x,m[2].y,m[3].x,m[3].y,-f),t.lineTo(g,y+n/2),offsetTrivialCubicBezier(t,m[3].x,m[3].y,m[2].x,m[2].y,m[1].x,m[1].y,m[0].x,m[0].y,f),offsetTrivialCubicBezier(t,p[3].x,p[3].y,p[2].x,p[2].y,p[1].x,p[1].y,p[0].x,p[0].y,-f)}t.closePath()}};__decorateClass([ScenePathChangeDetection3()],SankeyLink.prototype,"x1",2),__decorateClass([ScenePathChangeDetection3()],SankeyLink.prototype,"x2",2),__decorateClass([ScenePathChangeDetection3()],SankeyLink.prototype,"y1",2),__decorateClass([ScenePathChangeDetection3()],SankeyLink.prototype,"y2",2),__decorateClass([ScenePathChangeDetection3()],SankeyLink.prototype,"height",2),__decorateClass([ScenePathChangeDetection3()],SankeyLink.prototype,"inset",2);var import_ag_charts_community179=require("ag-charts-community"),{BaseProperties:BaseProperties20,SeriesTooltip:SeriesTooltip16,SeriesProperties:SeriesProperties10,ARRAY:ARRAY10,COLOR_STRING:COLOR_STRING24,COLOR_STRING_ARRAY:COLOR_STRING_ARRAY6,FUNCTION:FUNCTION16,LINE_DASH:LINE_DASH19,OBJECT:OBJECT29,POSITIVE_NUMBER:POSITIVE_NUMBER26,RATIO:RATIO30,STRING:STRING31,UNION:UNION7,Validate:Validate65}=import_ag_charts_community179._ModuleSupport,{Label:Label11}=import_ag_charts_community179._Scene,ALIGNMENT=UNION7(["left","right","center","justify"],"a justification value"),SankeySeriesLabelProperties=class extends Label11{constructor(){super(...arguments),this.spacing=1}};__decorateClass([Validate65(POSITIVE_NUMBER26)],SankeySeriesLabelProperties.prototype,"spacing",2);var SankeySeriesLinkProperties=class extends BaseProperties20{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};__decorateClass([Validate65(COLOR_STRING24,{optional:!0})],SankeySeriesLinkProperties.prototype,"fill",2),__decorateClass([Validate65(RATIO30)],SankeySeriesLinkProperties.prototype,"fillOpacity",2),__decorateClass([Validate65(COLOR_STRING24,{optional:!0})],SankeySeriesLinkProperties.prototype,"stroke",2),__decorateClass([Validate65(RATIO30)],SankeySeriesLinkProperties.prototype,"strokeOpacity",2),__decorateClass([Validate65(POSITIVE_NUMBER26)],SankeySeriesLinkProperties.prototype,"strokeWidth",2),__decorateClass([Validate65(LINE_DASH19)],SankeySeriesLinkProperties.prototype,"lineDash",2),__decorateClass([Validate65(POSITIVE_NUMBER26)],SankeySeriesLinkProperties.prototype,"lineDashOffset",2),__decorateClass([Validate65(FUNCTION16,{optional:!0})],SankeySeriesLinkProperties.prototype,"itemStyler",2);var SankeySeriesNodeProperties=class extends BaseProperties20{constructor(){super(...arguments),this.spacing=1,this.width=1,this.alignment="justify",this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};__decorateClass([Validate65(POSITIVE_NUMBER26)],SankeySeriesNodeProperties.prototype,"spacing",2),__decorateClass([Validate65(POSITIVE_NUMBER26)],SankeySeriesNodeProperties.prototype,"width",2),__decorateClass([Validate65(ALIGNMENT)],SankeySeriesNodeProperties.prototype,"alignment",2),__decorateClass([Validate65(COLOR_STRING24,{optional:!0})],SankeySeriesNodeProperties.prototype,"fill",2),__decorateClass([Validate65(RATIO30)],SankeySeriesNodeProperties.prototype,"fillOpacity",2),__decorateClass([Validate65(COLOR_STRING24,{optional:!0})],SankeySeriesNodeProperties.prototype,"stroke",2),__decorateClass([Validate65(RATIO30)],SankeySeriesNodeProperties.prototype,"strokeOpacity",2),__decorateClass([Validate65(POSITIVE_NUMBER26)],SankeySeriesNodeProperties.prototype,"strokeWidth",2),__decorateClass([Validate65(LINE_DASH19)],SankeySeriesNodeProperties.prototype,"lineDash",2),__decorateClass([Validate65(POSITIVE_NUMBER26)],SankeySeriesNodeProperties.prototype,"lineDashOffset",2),__decorateClass([Validate65(FUNCTION16,{optional:!0})],SankeySeriesNodeProperties.prototype,"itemStyler",2);var SankeySeriesProperties=class extends SeriesProperties10{constructor(){super(...arguments),this.nodes=void 0,this.idKey="",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.sizeKey=void 0,this.sizeName=void 0,this.fills=[],this.strokes=[],this.label=new SankeySeriesLabelProperties,this.link=new SankeySeriesLinkProperties,this.node=new SankeySeriesNodeProperties,this.tooltip=new SeriesTooltip16}};__decorateClass([Validate65(ARRAY10,{optional:!0})],SankeySeriesProperties.prototype,"nodes",2),__decorateClass([Validate65(STRING31)],SankeySeriesProperties.prototype,"fromKey",2),__decorateClass([Validate65(STRING31)],SankeySeriesProperties.prototype,"toKey",2),__decorateClass([Validate65(STRING31)],SankeySeriesProperties.prototype,"idKey",2),__decorateClass([Validate65(STRING31,{optional:!0})],SankeySeriesProperties.prototype,"idName",2),__decorateClass([Validate65(STRING31,{optional:!0})],SankeySeriesProperties.prototype,"labelKey",2),__decorateClass([Validate65(STRING31,{optional:!0})],SankeySeriesProperties.prototype,"labelName",2),__decorateClass([Validate65(STRING31,{optional:!0})],SankeySeriesProperties.prototype,"sizeKey",2),__decorateClass([Validate65(STRING31,{optional:!0})],SankeySeriesProperties.prototype,"sizeName",2),__decorateClass([Validate65(COLOR_STRING_ARRAY6)],SankeySeriesProperties.prototype,"fills",2),__decorateClass([Validate65(COLOR_STRING_ARRAY6)],SankeySeriesProperties.prototype,"strokes",2),__decorateClass([Validate65(OBJECT29)],SankeySeriesProperties.prototype,"label",2),__decorateClass([Validate65(OBJECT29)],SankeySeriesProperties.prototype,"link",2),__decorateClass([Validate65(OBJECT29)],SankeySeriesProperties.prototype,"node",2),__decorateClass([Validate65(OBJECT29)],SankeySeriesProperties.prototype,"tooltip",2);var{SeriesNodePickMode:SeriesNodePickMode13,CachedTextMeasurerPool:CachedTextMeasurerPool9,TextWrapper:TextWrapper7,createDatumId:createDatumId9,EMPTY_TOOLTIP_CONTENT:EMPTY_TOOLTIP_CONTENT2}=import_ag_charts_community180._ModuleSupport,{sanitizeHtml:sanitizeHtml13}=import_ag_charts_community180._Util,{Rect:Rect5,Text:Text11,BBox:BBox11}=import_ag_charts_community180._Scene,SankeySeries=class extends FlowProportionSeries{constructor(t){super({moduleCtx:t,contentGroupVirtual:!1,pickModes:[SeriesNodePickMode13.NEAREST_NODE,SeriesNodePickMode13.EXACT_SHAPE_MATCH]}),this.properties=new SankeySeriesProperties}isLabelEnabled(){return(this.properties.labelKey!=null||this.nodes==null)&&this.properties.label.enabled}linkFactory(){return new SankeyLink}nodeFactory(){return new Rect5}async createNodeData(){const{id:t,_nodeDataDependencies:{seriesRectWidth:e,seriesRectHeight:i}={seriesRectWidth:0,seriesRectHeight:0}}=this,{fromKey:o,toKey:s,sizeKey:a,label:{spacing:n},node:{spacing:r,width:l,alignment:c}}=this.properties,h=b=>String(b),{nodeGraph:d,links:u,maxPathLength:g}=this.getNodeGraph(b=>{const I=this.getLabelText(this.properties.label,{datum:b.datum,value:b.label,fromKey:o,toKey:s,sizeKey:a},h);return{...b,label:I,size:0,x:NaN,y:NaN,width:l,height:NaN}},b=>({...b,x1:NaN,x2:NaN,y1:NaN,y2:NaN,height:NaN}),{includeCircularReferences:!1}),y=d,p=this.isLabelEnabled()?(e-l)*(1-g/(g+1)):0,m=(e-l-2*p)/(g-1),f=[];for(let b=0;b<g;b+=1){const I=p+b*m;f.push({index:b,size:0,nodes:[],x:I})}y.forEach(b=>{const{datum:I,linksBefore:D,linksAfter:N,maxPathLengthBefore:k,maxPathLengthAfter:_}=b,O=Math.max(D.reduce((L,{link:E})=>L+E.size,0),N.reduce((L,{link:E})=>L+E.size,0));if(D.length===0&&N.length===0||O===0){b.columnIndex=-1;return}let A;switch(c){case"left":A=f[k];break;case"right":A=f[g-1-_];break;case"center":{if(D.length!==0)A=f[k];else if(N.length!==0){const L=N.reduce((E,C)=>Math.min(E,C.node.maxPathLengthBefore),g)-1;A=f[L]}else A=f[0];break}case"justify":{A=N.length===0?f[g-1]:f[k];break}}I.x=A.x,I.size=O,A.nodes.push(b),A.size+=O,b.columnIndex=A.index}),y.forEach(b=>{let I=1/0,D=0;b.linksAfter.forEach(N=>{const k=N.node,{columnIndex:_}=k;_<I?(I=_,D=k.datum.size):_===I&&(D=Math.max(D,k.datum.size))}),b.closestColumnIndex=I,b.maxSizeOfClosestNodesAfter=D});const v=f.reduce((b,{size:I,nodes:D})=>{const N=(1-(D.length-1)*(r/i))/I;return Math.min(b,N)},1/0);for(let b=f.length-1;b>=0;b-=1)f[b].nodes.sort((D,N)=>D.closestColumnIndex-N.closestColumnIndex||D.maxSizeOfClosestNodesAfter-N.maxSizeOfClosestNodesAfter||D.datum.size-N.datum.size);layoutColumns(f,{seriesRectHeight:i,nodeSpacing:r,sizeScale:v}),y.forEach(({datum:b,linksBefore:I,linksAfter:D})=>{const N=b.y+b.height,k=A=>A.sort((L,E)=>{const C=L.node.datum,R=E.node.datum,P=C.y+C.height,w=R.y+R.height,z=Math.atan2(C.y-b.y,Math.abs(C.x-b.x))-Math.atan2(R.y-b.y,Math.abs(R.x-b.x)),B=Math.atan2(P-N,Math.abs(C.x-b.x))-Math.atan2(w-N,Math.abs(R.x-b.x));return z+B});let _=b.y;k(I).forEach(({link:A})=>{A.y2=_,_+=A.size*i*v});let O=b.y;k(D).forEach(({link:A})=>{A.y1=O,O+=A.size*i*v})});const S=[],x=[],{fontSize:M}=this.properties.label,T=this.properties.label.getFont();return f.forEach((b,I)=>{const D=I===0,N=I===f.length-1;let k=-1/0;b.nodes.sort((_,O)=>_.datum.y-O.datum.y),b.nodes.forEach(({datum:_})=>{if(_.midPoint={x:_.x+_.width/2,y:_.y+_.height/2},S.push(_),_.label==null)return;const O=D?_.x-n:_.x+_.width+n,A=_.y+_.height/2;let L;if(!D&&!N){const P=A-M*Text11.defaultLineHeightRatio,w=A+M*Text11.defaultLineHeightRatio;let z=e;y.forEach(({datum:F})=>{F.x>_.x&&Math.max(F.y,P)<=Math.min(F.y+F.height,w)&&(z=Math.min(z,F.x-n))});const B=z-_.x-2*n;L=TextWrapper7.wrapText(_.label,{maxWidth:B,maxHeight:_.height,font:this.properties.label,textWrap:"never",overflow:"hide"})}if(L==null||L===""){const P=D||N?n:n*2;L=TextWrapper7.wrapText(_.label,{maxWidth:m-P,maxHeight:_.height,font:this.properties.label,textWrap:"never"})}if(L==="")return;const{height:E}=CachedTextMeasurerPool9.measureText(L,{font:T,textAlign:"left",textBaseline:"middle"}),C=A-E/2,R=A+E/2;C>=k&&(x.push({x:O,y:A,leading:D,text:L}),k=R)})}),u.forEach(b=>{const{fromNode:I,toNode:D,size:N}=b;b.height=i*N*v,b.x1=I.x+l,b.x2=D.x,b.midPoint={x:(b.x1+b.x2)/2,y:(b.y1+b.y2)/2+b.height/2},S.push(b)}),{itemId:t,nodeData:S,labelData:x}}async updateLabelSelection(t){const e=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(e)}async updateLabelNodes(t){const{labelSelection:e}=t,{color:i,fontStyle:o,fontWeight:s,fontSize:a,fontFamily:n}=this.properties.label;e.each((r,{x:l,y:c,leading:h,text:d})=>{r.visible=!0,r.x=l,r.y=c,r.text=d,r.fill=i,r.fontStyle=o,r.fontWeight=s,r.fontSize=a,r.fontFamily=n,r.textAlign=h?"right":"left",r.textBaseline="middle"})}async updateNodeSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>createDatumId9([e.type,e.id]))}async updateNodeNodes(t){const{datumSelection:e,isHighlight:i}=t,{id:o,properties:s,ctx:{callbackCache:a}}=this,{fromKey:n,toKey:r,sizeKey:l}=this.properties,{fill:c,fillOpacity:h,stroke:d,strokeOpacity:u,lineDash:g,lineDashOffset:y,itemStyler:p}=this.properties.node,m=i?s.highlightStyle.item:void 0,f=this.getStrokeWidth(s.node.strokeWidth);e.each((v,S)=>{const x=c??S.fill,M=d??S.stroke;let T;if(p!=null){const{label:b,size:I}=S;T=a.call(p,{seriesId:o,datum:S.datum,label:b,size:I,fromKey:n,toKey:r,sizeKey:l,fill:x,fillOpacity:h,strokeOpacity:u,stroke:M,strokeWidth:f,lineDash:g,lineDashOffset:y,highlighted:i})}v.x=S.x,v.y=S.y,v.width=S.width,v.height=S.height,v.fill=m?.fill??T?.fill??x,v.fillOpacity=m?.fillOpacity??T?.fillOpacity??h,v.stroke=m?.stroke??T?.stroke??M,v.strokeOpacity=m?.strokeOpacity??T?.strokeOpacity??u,v.strokeWidth=m?.strokeWidth??T?.strokeWidth??f,v.lineDash=m?.lineDash??T?.lineDash??g,v.lineDashOffset=m?.lineDashOffset??T?.lineDashOffset??y})}async updateLinkSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>createDatumId9([e.type,e.index,e.fromNode.id,e.toNode.id]))}async updateLinkNodes(t){const{datumSelection:e,isHighlight:i}=t,{id:o,properties:s,ctx:{callbackCache:a}}=this,{fromKey:n,toKey:r,sizeKey:l}=s,{fill:c,fillOpacity:h,stroke:d,strokeOpacity:u,lineDash:g,lineDashOffset:y,itemStyler:p}=s.link,m=i?s.highlightStyle.item:void 0,f=this.getStrokeWidth(s.link.strokeWidth);e.each((v,S)=>{const x=c??S.fromNode.fill,M=d??S.fromNode.stroke;let T;p!=null&&(T=a.call(p,{seriesId:o,datum:S.datum,fromKey:n,toKey:r,sizeKey:l,fill:x,fillOpacity:h,strokeOpacity:u,stroke:M,strokeWidth:f,lineDash:g,lineDashOffset:y,highlighted:i})),v.x1=S.x1,v.y1=S.y1,v.x2=S.x2,v.y2=S.y2,v.height=S.height,v.fill=m?.fill??T?.fill??x,v.fillOpacity=m?.fillOpacity??T?.fillOpacity??h,v.stroke=m?.stroke??T?.stroke??M,v.strokeOpacity=m?.strokeOpacity??T?.strokeOpacity??u,v.strokeWidth=Math.min(m?.strokeWidth??T?.strokeWidth??f,S.height/2),v.lineDash=m?.lineDash??T?.lineDash??g,v.lineDashOffset=m?.lineDashOffset??T?.lineDashOffset??y,v.inset=v.strokeWidth/2})}getTooltipHtml(t){const{id:e,processedData:i,ctx:{callbackCache:o},properties:s}=this;if(!i||!s.isValid())return EMPTY_TOOLTIP_CONTENT2;const{fromKey:a,toKey:n,sizeKey:r,sizeName:l,tooltip:c}=s,{datum:h,itemId:d}=t;let u;const g=[];let y;if(t.type===0){const{fillOpacity:f,strokeOpacity:v,strokeWidth:S,lineDash:x,lineDashOffset:M,itemStyler:T}=s.link,{fromNode:b,toNode:I,size:D}=t;u=`${b.label??b.id} - ${I.label??I.id}`,r!=null&&g.push(sanitizeHtml13(`${l??r}: `+D)),y=s.link.fill??b.fill;const N=s.link.stroke??b.stroke;let k;T!=null&&(k=o.call(T,{seriesId:e,datum:h.datum,fromKey:a,toKey:n,sizeKey:r,fill:y,fillOpacity:f,strokeOpacity:v,stroke:N,strokeWidth:S,lineDash:x,lineDashOffset:M,highlighted:!0})),y=k?.fill??y}else{const{fillOpacity:f,strokeOpacity:v,strokeWidth:S,lineDash:x,lineDashOffset:M,itemStyler:T}=s.node,{id:b,label:I,size:D}=t;u=I??b,r!=null&&g.push(sanitizeHtml13(`${l??r}: `+D)),y=s.link.fill??h.fill;const N=s.link.stroke??h.stroke;let k;T!=null&&(k=o.call(T,{seriesId:e,datum:h.datum,label:I,size:D,fromKey:a,toKey:n,sizeKey:r,fill:y,fillOpacity:f,strokeOpacity:v,stroke:N,strokeWidth:S,lineDash:x,lineDashOffset:M,highlighted:!0})),y=k?.fill??y}const p=g.join("<br>"),m=y;return c.toTooltipHtml({title:u,content:p,backgroundColor:m},{seriesId:e,datum:h,title:u,color:m,itemId:d,fromKey:a,toKey:n,sizeKey:r,sizeName:l,...this.getModuleTooltipParams()})}getLabelData(){return[]}computeFocusBounds({datumIndex:t,seriesRect:e}){const i=this.contextNodeData?.nodeData[t];if(i?.type===1){const{x:o,y:s,width:a,height:n}=i,r=new BBox11(o,s,a,n);return this.contentGroup.inverseTransformBBox(r).clip(e)}else if(i?.type===0){for(const o of this.linkSelection)if(o.datum===i)return o.node;return}}};SankeySeries.className="SankeySeries",SankeySeries.type="sankey";var{DEFAULT_FONT_FAMILY:DEFAULT_FONT_FAMILY3,DEFAULT_LABEL_COLOUR:DEFAULT_LABEL_COLOUR4}=import_ag_charts_community181._Theme,SankeyModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["flow-proportion"],solo:!0,identifier:"sankey",moduleFactory:t=>new SankeySeries(t),tooltipDefaults:{range:"exact"},themeTemplate:{seriesArea:{padding:{top:10,bottom:10}},series:{highlightStyle:{series:{dimOpacity:.2}},label:{fontFamily:DEFAULT_FONT_FAMILY3,color:DEFAULT_LABEL_COLOUR4,fontSize:12,spacing:10},node:{spacing:20,width:10,strokeWidth:0},link:{fillOpacity:.5,strokeWidth:0}},legend:{enabled:!1,toggleSeries:!1}},paletteFactory({takeColors:t,colorsCount:e}){return t(e)}},import_ag_charts_community184=require("ag-charts-community"),import_ag_charts_community183=require("ag-charts-community"),import_ag_charts_community182=require("ag-charts-community"),{HierarchySeriesProperties,HighlightStyle,SeriesTooltip:SeriesTooltip17,Validate:Validate66,COLOR_STRING:COLOR_STRING25,FUNCTION:FUNCTION17,NUMBER:NUMBER14,OBJECT:OBJECT30,POSITIVE_NUMBER:POSITIVE_NUMBER27,RATIO:RATIO31,STRING:STRING32}=import_ag_charts_community182._ModuleSupport,SunburstSeriesTileHighlightStyle=class extends HighlightStyle{constructor(){super(...arguments),this.label=new AutoSizedLabel,this.secondaryLabel=new AutoSizedLabel}};__decorateClass([Validate66(STRING32,{optional:!0})],SunburstSeriesTileHighlightStyle.prototype,"fill",2),__decorateClass([Validate66(RATIO31,{optional:!0})],SunburstSeriesTileHighlightStyle.prototype,"fillOpacity",2),__decorateClass([Validate66(COLOR_STRING25,{optional:!0})],SunburstSeriesTileHighlightStyle.prototype,"stroke",2),__decorateClass([Validate66(POSITIVE_NUMBER27,{optional:!0})],SunburstSeriesTileHighlightStyle.prototype,"strokeWidth",2),__decorateClass([Validate66(RATIO31,{optional:!0})],SunburstSeriesTileHighlightStyle.prototype,"strokeOpacity",2),__decorateClass([Validate66(OBJECT30)],SunburstSeriesTileHighlightStyle.prototype,"label",2),__decorateClass([Validate66(OBJECT30)],SunburstSeriesTileHighlightStyle.prototype,"secondaryLabel",2);var SunburstSeriesProperties=class extends HierarchySeriesProperties{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=0,this.strokeOpacity=1,this.cornerRadius=0,this.highlightStyle=new SunburstSeriesTileHighlightStyle,this.label=new AutoSizedLabel,this.secondaryLabel=new AutoSizeableSecondaryLabel,this.tooltip=new SeriesTooltip17}};__decorateClass([Validate66(STRING32,{optional:!0})],SunburstSeriesProperties.prototype,"sizeName",2),__decorateClass([Validate66(STRING32,{optional:!0})],SunburstSeriesProperties.prototype,"labelKey",2),__decorateClass([Validate66(STRING32,{optional:!0})],SunburstSeriesProperties.prototype,"secondaryLabelKey",2),__decorateClass([Validate66(RATIO31)],SunburstSeriesProperties.prototype,"fillOpacity",2),__decorateClass([Validate66(POSITIVE_NUMBER27)],SunburstSeriesProperties.prototype,"strokeWidth",2),__decorateClass([Validate66(RATIO31)],SunburstSeriesProperties.prototype,"strokeOpacity",2),__decorateClass([Validate66(POSITIVE_NUMBER27)],SunburstSeriesProperties.prototype,"cornerRadius",2),__decorateClass([Validate66(NUMBER14,{optional:!0})],SunburstSeriesProperties.prototype,"sectorSpacing",2),__decorateClass([Validate66(NUMBER14,{optional:!0})],SunburstSeriesProperties.prototype,"padding",2),__decorateClass([Validate66(FUNCTION17,{optional:!0})],SunburstSeriesProperties.prototype,"itemStyler",2),__decorateClass([Validate66(OBJECT30)],SunburstSeriesProperties.prototype,"highlightStyle",2),__decorateClass([Validate66(OBJECT30)],SunburstSeriesProperties.prototype,"label",2),__decorateClass([Validate66(OBJECT30)],SunburstSeriesProperties.prototype,"secondaryLabel",2),__decorateClass([Validate66(OBJECT30)],SunburstSeriesProperties.prototype,"tooltip",2);var{fromToMotion:fromToMotion3}=import_ag_charts_community183._ModuleSupport,{Sector:Sector6,Group:Group15,Selection:Selection11,Text:Text12}=import_ag_charts_community183._Scene,{sanitizeHtml:sanitizeHtml14}=import_ag_charts_community183._Util,getAngleData=(t,e=0,i=2*Math.PI/t.sumSize,o=Array.from(t,()=>{}))=>{let s=e;for(const a of t.children){const n=s,r=s+a.sumSize*i;o[a.index]={start:n,end:r},getAngleData(a,n,i,o),s=r}return o},SunburstSeries=class extends import_ag_charts_community183._ModuleSupport.HierarchySeries{constructor(){super(...arguments),this.properties=new SunburstSeriesProperties,this.groupSelection=Selection11.select(this.contentGroup,Group15),this.highlightSelection=Selection11.select(this.highlightGroup,Group15),this.angleData=[]}async processData(){const{childrenKey:t,colorKey:e,colorName:i,labelKey:o,secondaryLabelKey:s,sizeKey:a,sizeName:n}=this.properties;await super.processData(),this.angleData=getAngleData(this.rootNode);const r=l=>typeof l=="number"?l.toFixed(2):typeof l=="string"?l:"";this.labelData=Array.from(this.rootNode,({datum:l,depth:c})=>{let h;if(l!=null&&c!=null&&o!=null){const u=l[o];h=this.getLabelText(this.properties.label,{depth:c,datum:l,childrenKey:t,colorKey:e,colorName:i,labelKey:o,secondaryLabelKey:s,sizeKey:a,sizeName:n,value:u},r)}h===""&&(h=void 0);let d;if(l!=null&&c!=null&&s!=null){const u=l[s];d=this.getLabelText(this.properties.secondaryLabel,{depth:c,datum:l,childrenKey:t,colorKey:e,colorName:i,labelKey:o,secondaryLabelKey:s,sizeKey:a,sizeName:n,value:u},r)}return d===""&&(d=void 0),h!=null||d!=null?{label:h,secondaryLabel:d}:void 0})}async updateSelections(){if(!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{chart:t}=this;if(t==null||t.seriesRect==null)return;const i=Array.from(this.rootNode),o=s=>{s.append([new Sector6,new Text12({tag:0}),new Text12({tag:1})])};this.groupSelection.update(i,o,s=>this.getDatumId(s)),this.highlightSelection.update(i,o,s=>this.getDatumId(s))}async updateNodes(){const{chart:t,data:e,maxDepth:i,labelData:o}=this;if(t==null||e==null||o==null)return;const{width:s,height:a}=t.seriesRect,{sectorSpacing:n=0,padding:r=0,cornerRadius:l,highlightStyle:c}=this.properties;this.contentGroup.translationX=s/2,this.contentGroup.translationY=a/2,this.highlightGroup.translationX=s/2,this.highlightGroup.translationY=a/2;const h=n*.5,u=Math.min(s,a)/2/(i+1),g=-Math.PI/2,y=this.ctx.highlightManager?.getActiveHighlight();new Text12().setFont(this.properties.label),this.rootNode.walk(S=>{const x=this.angleData[S.index];if(S.depth!=null&&x!=null){const M=x.end-x.start,T=(S.depth+.5)*u;S.midPoint.x=Math.cos(M)*T,S.midPoint.y=Math.sin(M)*T}});const m=(S,x,M)=>{const{depth:T}=S,b=this.angleData[S.index];if(T==null||b==null){x.visible=!1;return}x.visible=!0;let I,D,N,k,_;M&&(I=c.fill,D=c.fillOpacity,N=c.stroke,k=c.strokeWidth,_=c.strokeOpacity);const O=this.getSectorFormat(S,M),A=O?.fill??I??S.fill,L=O?.fillOpacity??D??this.properties.fillOpacity,E=O?.stroke??N??S.stroke,C=O?.strokeWidth??k??this.properties.strokeWidth,R=O?.strokeOpacity??_??this.properties.strokeOpacity;x.fill=A,x.fillOpacity=L,x.stroke=E,x.strokeWidth=C,x.strokeOpacity=R,x.centerX=0,x.centerY=0,x.innerRadius=T*u,x.outerRadius=(T+1)*u,x.startAngle=b.start+g,x.endAngle=b.end+g,x.inset=h+C*.5,x.cornerRadius=l};this.groupSelection.selectByClass(Sector6).forEach(S=>{m(S.datum,S,!1)}),this.highlightSelection.selectByClass(Sector6).forEach(S=>{const x=S.datum,M=y===x;S.visible=M,S.visible&&m(S.datum,S,M)});const f=Array.from(this.rootNode,(S,x)=>{const{depth:M}=S,T=o[x],b=this.angleData[x];if(M==null||b==null)return;const I=M*u+h,D=(M+1)*u-h,N=I>h?h/I:h,k=D>h?h/D:h,_=b.start+N,A=b.end+N-_,L=b.start+k,C=b.end+k-L,R=j=>{if(M===0&&S.parent?.sumSize===S.sumSize)return{width:2*Math.sqrt(D**2-(j*.5)**2),height:j,meta:0};const X=j,J=2*Math.sqrt(D**2-(I+X)**2),Q=A<Math.PI?2*I*Math.tan(A*.5):1/0,Z=Math.min(J,Q),G=Math.PI/4;let tt,it;return M===0?(tt=j,it=Math.sqrt(D**2-(tt/2)**2)-j/(2*Math.tan(C*.5))):import_ag_charts_community183._Util.normalizeAngle360(A)<G?(tt=2*I*Math.tan(A*.5),it=Math.sqrt(D**2-(tt/2)**2)-I):(it=0,tt=0),Z>=it?{width:Z,height:X,meta:1}:{width:it,height:tt,meta:2}},P=formatLabels(T?.label,this.properties.label,T?.secondaryLabel,this.properties.secondaryLabel,{padding:r},R);if(P==null)return;const{width:w,height:z,meta:B,label:F,secondaryLabel:W}=P,V=g+(b.start+b.end)/2,H=Math.sin(V)>=0,U=Math.cos(V)>=0,K=(H?3:12)&(U?6:9);let q;switch(B){case 0:q=0;break;case 1:{const Y=D-(u-z)*.58,X=Math.sqrt((D-r)**2-(w/2)**2);q=Math.min(Y,X);break}case 2:if(M===0){const j=z/(2*Math.tan(A*.5))+w*.5,Y=Math.sqrt(D**2-(z*.5)**2)-w*.5;q=(j+Y)*.5}else q=(I+D)*.5;break}return{width:w,height:z,labelPlacement:B,circleQuarter:K,radius:q,theta:V,label:F,secondaryLabel:W}}),v=(S,x,M,T)=>{const{index:b,depth:I}=S,D=f?.[b],N=M===0?this.properties.label:this.properties.secondaryLabel,k=M===0?D?.label:D?.secondaryLabel;if(I==null||D==null||k==null){x.visible=!1;return}const{height:_,labelPlacement:O,circleQuarter:A,radius:L,theta:E}=D;let C;switch(T&&(C=(M===0?this.properties.highlightStyle.label:this.properties.highlightStyle.secondaryLabel).color),x.text=k.text,x.fontSize=k.fontSize,x.lineHeight=k.lineHeight,x.fontStyle=N.fontStyle,x.fontFamily=N.fontFamily,x.fontWeight=N.fontWeight,x.fill=C??N.color,O){case 0:x.textAlign="center",x.textBaseline="top",x.translationX=0,x.translationY=(M===0?0:_-k.height)-_*.5,x.rotation=0;break;case 1:{const R=(A&3)!==0,P=M===0==!R?L:L-(_-k.height);x.textAlign="center",x.textBaseline=R?"bottom":"top",x.translationX=Math.cos(E)*P,x.translationY=Math.sin(E)*P,x.rotation=R?E-Math.PI*.5:E+Math.PI*.5;break}case 2:{const R=(A&6)!==0,P=M===0==!R?(_-k.height)*.5:(k.height-_)*.5;x.textAlign="center",x.textBaseline="middle",x.translationX=Math.cos(E)*L+Math.cos(E+Math.PI/2)*P,x.translationY=Math.sin(E)*L+Math.sin(E+Math.PI/2)*P,x.rotation=R?E:E+Math.PI;break}}x.visible=!0};this.groupSelection.selectByClass(Text12).forEach(S=>{v(S.datum,S,S.tag,!1)}),this.highlightSelection.selectByClass(Text12).forEach(S=>{const x=S.datum,M=y===x;S.visible=M,S.visible&&v(S.datum,S,S.tag,M)})}getSectorFormat(t,e){const{datum:i,fill:o,stroke:s,depth:a}=t,{ctx:{callbackCache:n},properties:{itemStyler:r}}=this;if(!r||i==null||a==null)return{};const{colorKey:l,childrenKey:c,labelKey:h,secondaryLabelKey:d,sizeKey:u,strokeWidth:g,fillOpacity:y,strokeOpacity:p}=this.properties;return n.call(r,{seriesId:this.id,highlighted:e,datum:i,depth:a,colorKey:l,childrenKey:c,labelKey:h,secondaryLabelKey:d,sizeKey:u,fill:o,fillOpacity:y,stroke:s,strokeWidth:g,strokeOpacity:p})}getTooltipHtml(t){const{id:e}=this,{tooltip:i,colorKey:o,colorName:s=o,labelKey:a,secondaryLabelKey:n,sizeKey:r,sizeName:l=r,childrenKey:c}=this.properties,{datum:h,depth:d}=t;if(h==null||d==null)return import_ag_charts_community183._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const u=a!=null?h[a]:void 0,y=this.getSectorFormat(t,!1)?.fill??t.fill;if(!i.renderer&&!u)return import_ag_charts_community183._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const p=[],m=n!=null?h[n]:void 0;m!=null&&n!==o&&n!==r&&p.push(sanitizeHtml14(m));const f=r!=null?h[r]:void 0;f!=null&&p.push(`${l}: ${sanitizeHtml14(f)}`);const v=o!=null?h[o]:void 0;v!=null&&p.push(`${s}: ${sanitizeHtml14(v)}`);const S=p.join("<br>"),x={title:u,color:this.properties.label.color,backgroundColor:y,content:S};return i.toTooltipHtml(x,{depth:d,datum:h,colorKey:o,labelKey:a,secondaryLabelKey:n,sizeKey:r,title:u,color:y,seriesId:e,childrenKey:c,colorName:s,itemId:void 0,sizeName:l})}async createNodeData(){}pickNodeClosestDatum(t){return this.pickNodeNearestDistantObject(t,this.groupSelection.selectByClass(Sector6))}animateEmptyUpdateReady({datumSelections:t}){fromToMotion3(this.id,"nodes",this.ctx.animationManager,t,{toFn(e,i,o){return{scalingX:1,scalingY:1}},fromFn(e,i,o){return o==="unknown"&&i!=null&&e.previousDatum==null?{scalingX:0,scalingY:0}:{scalingX:1,scalingY:1}}})}computeFocusBounds(t){let e;for(const{node:i,datum:o}of this.groupSelection)o===t&&(e=import_ag_charts_community183._Scene.Selection.selectByClass(i,import_ag_charts_community183._Scene.Sector)[0]);return e}};SunburstSeries.className="SunburstSeries",SunburstSeries.type="sunburst";var{DEFAULT_INSIDE_SERIES_LABEL_COLOUR}=import_ag_charts_community184._Theme,SunburstModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"sunburst",moduleFactory:t=>new SunburstSeries(t),tooltipDefaults:{range:"exact"},solo:!0,themeTemplate:{series:{label:{fontSize:14,minimumFontSize:9,color:DEFAULT_INSIDE_SERIES_LABEL_COLOUR,overflowStrategy:"ellipsis",wrapping:"never",spacing:2},secondaryLabel:{fontSize:8,minimumFontSize:7,color:DEFAULT_INSIDE_SERIES_LABEL_COLOUR,overflowStrategy:"ellipsis",wrapping:"never"},sectorSpacing:2,padding:3,highlightStyle:{label:{color:DEFAULT_INSIDE_SERIES_LABEL_COLOUR},secondaryLabel:{color:DEFAULT_INSIDE_SERIES_LABEL_COLOUR},stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}},gradientLegend:{enabled:!0}},paletteFactory:({takeColors:t,colorsCount:e,themeTemplateParameters:i})=>{const{fills:o,strokes:s}=t(e),a=i.get(import_ag_charts_community184._Theme.DEFAULT_DIVERGING_SERIES_COLOUR_RANGE);return{fills:o,strokes:s,colorRange:a}}},import_ag_charts_community187=require("ag-charts-community"),import_ag_charts_community186=require("ag-charts-community"),import_ag_charts_community185=require("ag-charts-community"),{Label:Label12}=import_ag_charts_community185._Scene,{BaseProperties:BaseProperties21,HierarchySeriesProperties:HierarchySeriesProperties2,HighlightStyle:HighlightStyle2,SeriesTooltip:SeriesTooltip18,Validate:Validate67,BOOLEAN:BOOLEAN19,COLOR_STRING:COLOR_STRING26,FUNCTION:FUNCTION18,NUMBER:NUMBER15,OBJECT:OBJECT31,POSITIVE_NUMBER:POSITIVE_NUMBER28,RATIO:RATIO32,STRING:STRING33,STRING_ARRAY,TEXT_ALIGN:TEXT_ALIGN3,VERTICAL_ALIGN:VERTICAL_ALIGN2}=import_ag_charts_community185._ModuleSupport,TreemapGroupLabel=class extends Label12{constructor(){super(...arguments),this.spacing=0}};__decorateClass([Validate67(NUMBER15)],TreemapGroupLabel.prototype,"spacing",2);var TreemapSeriesGroup=class extends BaseProperties21{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.gap=0,this.padding=0,this.interactive=!0,this.label=new TreemapGroupLabel}};__decorateClass([Validate67(STRING33,{optional:!0})],TreemapSeriesGroup.prototype,"fill",2),__decorateClass([Validate67(RATIO32)],TreemapSeriesGroup.prototype,"fillOpacity",2),__decorateClass([Validate67(COLOR_STRING26,{optional:!0})],TreemapSeriesGroup.prototype,"stroke",2),__decorateClass([Validate67(POSITIVE_NUMBER28)],TreemapSeriesGroup.prototype,"strokeWidth",2),__decorateClass([Validate67(RATIO32)],TreemapSeriesGroup.prototype,"strokeOpacity",2),__decorateClass([Validate67(POSITIVE_NUMBER28)],TreemapSeriesGroup.prototype,"cornerRadius",2),__decorateClass([Validate67(TEXT_ALIGN3)],TreemapSeriesGroup.prototype,"textAlign",2),__decorateClass([Validate67(POSITIVE_NUMBER28)],TreemapSeriesGroup.prototype,"gap",2),__decorateClass([Validate67(POSITIVE_NUMBER28)],TreemapSeriesGroup.prototype,"padding",2),__decorateClass([Validate67(BOOLEAN19)],TreemapSeriesGroup.prototype,"interactive",2),__decorateClass([Validate67(OBJECT31)],TreemapSeriesGroup.prototype,"label",2);var TreemapSeriesTile=class extends BaseProperties21{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.verticalAlign="middle",this.gap=0,this.padding=0,this.label=new AutoSizedLabel,this.secondaryLabel=new AutoSizeableSecondaryLabel}};__decorateClass([Validate67(STRING33,{optional:!0})],TreemapSeriesTile.prototype,"fill",2),__decorateClass([Validate67(RATIO32)],TreemapSeriesTile.prototype,"fillOpacity",2),__decorateClass([Validate67(COLOR_STRING26,{optional:!0})],TreemapSeriesTile.prototype,"stroke",2),__decorateClass([Validate67(POSITIVE_NUMBER28,{optional:!0})],TreemapSeriesTile.prototype,"strokeWidth",2),__decorateClass([Validate67(RATIO32)],TreemapSeriesTile.prototype,"strokeOpacity",2),__decorateClass([Validate67(POSITIVE_NUMBER28)],TreemapSeriesTile.prototype,"cornerRadius",2),__decorateClass([Validate67(TEXT_ALIGN3)],TreemapSeriesTile.prototype,"textAlign",2),__decorateClass([Validate67(VERTICAL_ALIGN2)],TreemapSeriesTile.prototype,"verticalAlign",2),__decorateClass([Validate67(POSITIVE_NUMBER28)],TreemapSeriesTile.prototype,"gap",2),__decorateClass([Validate67(POSITIVE_NUMBER28)],TreemapSeriesTile.prototype,"padding",2),__decorateClass([Validate67(OBJECT31)],TreemapSeriesTile.prototype,"label",2),__decorateClass([Validate67(OBJECT31)],TreemapSeriesTile.prototype,"secondaryLabel",2);var TreemapSeriesGroupHighlightStyle=class extends BaseProperties21{constructor(){super(...arguments),this.label=new AutoSizedLabel}};__decorateClass([Validate67(STRING33,{optional:!0})],TreemapSeriesGroupHighlightStyle.prototype,"fill",2),__decorateClass([Validate67(RATIO32,{optional:!0})],TreemapSeriesGroupHighlightStyle.prototype,"fillOpacity",2),__decorateClass([Validate67(COLOR_STRING26,{optional:!0})],TreemapSeriesGroupHighlightStyle.prototype,"stroke",2),__decorateClass([Validate67(POSITIVE_NUMBER28,{optional:!0})],TreemapSeriesGroupHighlightStyle.prototype,"strokeWidth",2),__decorateClass([Validate67(RATIO32,{optional:!0})],TreemapSeriesGroupHighlightStyle.prototype,"strokeOpacity",2),__decorateClass([Validate67(OBJECT31)],TreemapSeriesGroupHighlightStyle.prototype,"label",2);var TreemapSeriesTileHighlightStyle=class extends BaseProperties21{constructor(){super(...arguments),this.label=new AutoSizedLabel,this.secondaryLabel=new AutoSizeableSecondaryLabel}};__decorateClass([Validate67(STRING33,{optional:!0})],TreemapSeriesTileHighlightStyle.prototype,"fill",2),__decorateClass([Validate67(RATIO32,{optional:!0})],TreemapSeriesTileHighlightStyle.prototype,"fillOpacity",2),__decorateClass([Validate67(COLOR_STRING26,{optional:!0})],TreemapSeriesTileHighlightStyle.prototype,"stroke",2),__decorateClass([Validate67(POSITIVE_NUMBER28,{optional:!0})],TreemapSeriesTileHighlightStyle.prototype,"strokeWidth",2),__decorateClass([Validate67(RATIO32,{optional:!0})],TreemapSeriesTileHighlightStyle.prototype,"strokeOpacity",2),__decorateClass([Validate67(OBJECT31)],TreemapSeriesTileHighlightStyle.prototype,"label",2),__decorateClass([Validate67(OBJECT31)],TreemapSeriesTileHighlightStyle.prototype,"secondaryLabel",2);var TreemapSeriesHighlightStyle=class extends HighlightStyle2{constructor(){super(...arguments),this.group=new TreemapSeriesGroupHighlightStyle,this.tile=new TreemapSeriesTileHighlightStyle}};__decorateClass([Validate67(OBJECT31)],TreemapSeriesHighlightStyle.prototype,"group",2),__decorateClass([Validate67(OBJECT31)],TreemapSeriesHighlightStyle.prototype,"tile",2);var TreemapSeriesProperties=class extends HierarchySeriesProperties2{constructor(){super(...arguments),this.highlightStyle=new TreemapSeriesHighlightStyle,this.tooltip=new SeriesTooltip18,this.group=new TreemapSeriesGroup,this.tile=new TreemapSeriesTile,this.undocumentedGroupFills=[],this.undocumentedGroupStrokes=[]}};__decorateClass([Validate67(STRING33,{optional:!0})],TreemapSeriesProperties.prototype,"sizeName",2),__decorateClass([Validate67(STRING33,{optional:!0})],TreemapSeriesProperties.prototype,"labelKey",2),__decorateClass([Validate67(STRING33,{optional:!0})],TreemapSeriesProperties.prototype,"secondaryLabelKey",2),__decorateClass([Validate67(FUNCTION18,{optional:!0})],TreemapSeriesProperties.prototype,"itemStyler",2),__decorateClass([Validate67(OBJECT31)],TreemapSeriesProperties.prototype,"highlightStyle",2),__decorateClass([Validate67(OBJECT31)],TreemapSeriesProperties.prototype,"tooltip",2),__decorateClass([Validate67(OBJECT31)],TreemapSeriesProperties.prototype,"group",2),__decorateClass([Validate67(OBJECT31)],TreemapSeriesProperties.prototype,"tile",2),__decorateClass([Validate67(STRING_ARRAY)],TreemapSeriesProperties.prototype,"undocumentedGroupFills",2),__decorateClass([Validate67(STRING_ARRAY)],TreemapSeriesProperties.prototype,"undocumentedGroupStrokes",2);var{TextUtils:TextUtils5,TextWrapper:TextWrapper8}=import_ag_charts_community186._ModuleSupport,{Rect:Rect6,Group:Group16,BBox:BBox12,Selection:Selection12,Text:Text13}=import_ag_charts_community186._Scene,{Color:Color7,Logger:Logger17,clamp:clamp5,isEqual:isEqual2,sanitizeHtml:sanitizeHtml15}=import_ag_charts_community186._Util,tempText=new Text13;function getTextSize(t,e){const{fontStyle:i,fontWeight:o,fontSize:s,fontFamily:a}=e;tempText.setProperties({text:t,fontStyle:i,fontWeight:o,fontSize:s,fontFamily:a,textAlign:"left",textBaseline:"top"});const{width:n,height:r}=tempText.getBBox();return{width:n,height:r}}function validateColor(t){if(typeof t=="string"&&!Color7.validColorString(t)){const e="black";return Logger17.warnOnce(`invalid Treemap tile colour string "${t}". Affected treemap tiles will be coloured ${e}.`),e}return t}function nodeSize(t){return t.children.length>0?t.sumSize-t.size:t.size}var textAlignFactors2={left:0,center:.5,right:1},verticalAlignFactors2={top:0,middle:.5,bottom:1},DistantGroup=class extends import_ag_charts_community186._Scene.Group{distanceSquared(t,e){return this.getBBox().distanceSquared(t,e)}},TreemapSeries=class extends import_ag_charts_community186._ModuleSupport.HierarchySeries{constructor(){super(...arguments),this.properties=new TreemapSeriesProperties,this.groupSelection=Selection12.select(this.contentGroup,DistantGroup),this.highlightSelection=Selection12.select(this.highlightGroup,Group16)}groupTitleHeight(t,e){const i=this.labelData?.[t.index]?.label,{label:o}=this.properties.group,s=3;if(i!=null){if(o.fontSize>e.width/s||o.fontSize>e.height/s)return;{const{height:a}=getTextSize(i,o);return Math.max(a,o.fontSize)}}}getNodePadding(t,e){if(t.index===0)return{top:0,right:0,bottom:0,left:0};if(t.children.length===0){const{padding:n}=this.properties.tile;return{top:n,right:n,bottom:n,left:n}}const{label:{spacing:i},padding:o}=this.properties.group,s=this.groupTitleHeight(t,e),a=s!=null?s+i:0;return{top:o+a,right:o,bottom:o,left:o}}async processData(){await super.processData();const{childrenKey:t,colorKey:e,colorName:i,labelKey:o,secondaryLabelKey:s,sizeKey:a,sizeName:n,tile:r,group:l}=this.properties;if(!this.data?.length){this.labelData=void 0;return}const c=h=>typeof h=="number"?h.toFixed(2):typeof h=="string"?h:"";this.labelData=Array.from(this.rootNode,({datum:h,depth:d,children:u})=>{const g=u.length===0,y=g?r.label:l.label;let p;if(h!=null&&d!=null&&o!=null){const f=h[o];p=this.getLabelText(y,{depth:d,datum:h,childrenKey:t,colorKey:e,colorName:i,labelKey:o,secondaryLabelKey:s,sizeKey:a,sizeName:n,value:f},c)}p===""&&(p=void 0);let m;if(g&&h!=null&&d!=null&&s!=null){const f=h[s];m=this.getLabelText(r.secondaryLabel,{depth:d,datum:h,childrenKey:t,colorKey:e,colorName:i,labelKey:o,secondaryLabelKey:s,sizeKey:a,sizeName:n,value:f},c)}return m===""&&(m=void 0),p!=null||m!=null?{label:p,secondaryLabel:m}:void 0})}sortChildren({children:t}){const e=Array.from(t,(o,s)=>s).filter(o=>nodeSize(t[o])>0).sort((o,s)=>nodeSize(t[s])-nodeSize(t[o]));return{sortedChildrenIndices:e,childAt:o=>{const s=e[o];return t[s]}}}squarify(t,e,i,o){const{index:s,datum:a,children:n}=t;if(e.width<=0||e.height<=0){i[s]=void 0,o[s]=void 0;return}const r=a!=null?this.getNodePadding(t,e):{top:0,right:0,bottom:0,left:0};i[s]=s===0?void 0:e,o[s]=s===0?void 0:r;const{sortedChildrenIndices:l,childAt:c}=this.sortChildren(t),h=l.every(I=>n[I].children.length===0),d=1,u=e.width-r.left-r.right,g=e.height-r.top-r.bottom;if(u<=0||g<=0)return;const y=l.length;let p=0,m=0,f=1/0,v=l.reduce((I,D)=>I+nodeSize(n[D]),0);const S=new BBox12(e.x+r.left,e.y+r.top,u,g),x=S.clone();let M=0;for(;M<y;){const I=nodeSize(c(M)),D=nodeSize(c(m)),N=x.width<x.height;p+=I;const k=N?x.height:x.width,_=N?x.width:x.height,O=_*D/p;let A=k*p/v;const L=Math.max(O,A)/Math.min(O,A),E=Math.abs(d-L);if(E<f){f=E,M++;continue}p-=I,A=k*p/v;let C=N?x.x:x.y;for(let R=m;R<M;R++){const P=c(R),w=nodeSize(P),z=N?C:x.x,B=N?x.y:C,F=_*w/p,W=N?F:A,V=N?A:F,H=new BBox12(z,B,W,V);this.applyGap(S,H,h),this.squarify(P,H,i,o),v-=w,C+=F}N?(x.y+=A,x.height-=A):(x.x+=A,x.width-=A),m=M,p=0,f=1/0}const T=x.width<x.height;let b=T?x.x:x.y;for(let I=m;I<y;I++){const D=c(I),N=T?b:x.x,k=T?x.y:b,_=nodeSize(D)/v,O=x.width*(T?_:1),A=x.height*(T?1:_),L=new BBox12(N,k,O,A);this.applyGap(S,L,h),this.squarify(D,L,i,o),b+=T?O:A}}applyGap(t,e,i){const o=i?this.properties.tile.gap*.5:this.properties.group.gap*.5,s=l=>({left:l.x,top:l.y,right:l.x+l.width,bottom:l.y+l.height}),a=s(t),n=s(e);["top","right","bottom","left"].forEach(l=>{isEqual2(a[l],n[l])||e.shrink(o,l)})}async createNodeData(){}async updateSelections(){if(!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{seriesRect:t}=this.chart??{};if(!t)return;const e=Array.from(this.rootNode),i=o=>{o.append([new Rect6,new Text13({tag:0}),new Text13({tag:1})])};this.groupSelection.update(e,i,o=>this.getDatumId(o)),this.highlightSelection.update(e,i,o=>this.getDatumId(o))}getTileFormat(t,e){const{datum:i,depth:o,children:s}=t,{colorKey:a,childrenKey:n,labelKey:r,secondaryLabelKey:l,sizeKey:c,tile:h,group:d,itemStyler:u}=this.properties;if(!u||i==null||o==null)return{};const g=s.length===0,y=this.getNodeFill(t),p=this.getNodeStroke(t),m=g?h.strokeWidth:d.strokeWidth;return this.ctx.callbackCache.call(u,{seriesId:this.id,highlighted:e,datum:i,depth:o,colorKey:a,childrenKey:n,labelKey:r,secondaryLabelKey:l,sizeKey:c,fill:y,fillOpacity:1,stroke:p,strokeWidth:m,strokeOpacity:1})}getNodeFill(t){if(t.children.length===0)return this.properties.tile.fill??t.fill;const{undocumentedGroupFills:i}=this.properties,o=i[Math.min(t.depth??0,i.length)];return this.properties.group.fill??o}getNodeStroke(t){if(t.children.length===0)return this.properties.tile.stroke??t.stroke;const{undocumentedGroupStrokes:i}=this.properties,o=i[Math.min(t.depth??0,i.length)];return this.properties.group.stroke??o}async updateNodes(){const{rootNode:t,data:e}=this,{highlightStyle:i,tile:o,group:s}=this.properties,{seriesRect:a}=this.chart??{};if(!a||!e)return;const{width:n,height:r}=a,l=Array.from(this.rootNode,()=>{}),c=Array.from(this.rootNode,()=>{});this.squarify(t,new BBox12(0,0,n,r),l,c);let h=this.ctx.highlightManager?.getActiveHighlight();h!=null&&!this.properties.group.interactive&&h.children.length!==0&&(h=void 0),this.updateNodeMidPoint(l);const d=(y,p,m)=>{const f=l[y.index];if(f==null){p.visible=!1;return}const v=y.children.length===0;let S,x,M,T,b;if(m){const{tile:C,group:R}=i;S=v?C.fill:R.fill,x=v?C.fillOpacity:R.fillOpacity,M=v?C.stroke:R.stroke,T=v?C.strokeWidth:R.strokeWidth,b=v?C.strokeOpacity:R.strokeOpacity}const I=this.getTileFormat(y,m),D=I?.fill??S??this.getNodeFill(y),N=I?.fillOpacity??x??(v?o.fillOpacity:s.fillOpacity),k=I?.stroke??M??this.getNodeStroke(y),_=I?.strokeWidth??T??(v?o.strokeWidth:s.strokeWidth),O=I?.strokeOpacity??b??(v?o.strokeOpacity:s.strokeOpacity);p.crisp=!0,p.fill=validateColor(D),p.fillOpacity=N,p.stroke=validateColor(k),p.strokeWidth=_,p.strokeOpacity=O,p.cornerRadius=v?o.cornerRadius:s.cornerRadius;const A=y.parent?.children.every(C=>C.children.length===0),L=y.parent!=null?l[y.parent.index]:void 0,E=y.parent!=null?c[y.parent.index]:void 0;A===!0&&L!=null&&E!=null?(p.clipBBox=f,p.x=L.x+E.left,p.y=L.y+E.top,p.width=L.width-(E.left+E.right),p.height=L.height-(E.top+E.bottom)):(p.clipBBox=void 0,p.x=f.x,p.y=f.y,p.width=f.width,p.height=f.height),p.visible=!0};this.groupSelection.selectByClass(Rect6).forEach(y=>d(y.datum,y,!1)),this.highlightSelection.selectByClass(Rect6).forEach(y=>{const p=y.datum===h;y.visible=p||(h?.contains(y.datum)??!1),y.visible&&d(y.datum,y,p)});const u=Array.from(this.rootNode,y=>{const{index:p,children:m}=y,f=l[p],v=this.labelData?.[p];if(!(f==null||v==null))if(m.length===0){const S={width:f.width,height:f.height,meta:null},x=formatLabels(v.label,this.properties.tile.label,v.secondaryLabel,this.properties.tile.secondaryLabel,{padding:o.padding},()=>S);if(x==null)return;const{height:M,label:T,secondaryLabel:b}=x,{textAlign:I,verticalAlign:D,padding:N}=o,k=textAlignFactors2[I]??.5,_=f.x+N+(f.width-2*N)*k,O=verticalAlignFactors2[D]??.5,A=f.y+N+M*.5+(f.height-2*N-M)*O;return{label:T!=null?{text:T.text,fontSize:T.fontSize,lineHeight:T.lineHeight,style:this.properties.tile.label,x:_,y:A-(M-T.height)*.5}:void 0,secondaryLabel:b!=null?{text:b.text,fontSize:b.fontSize,lineHeight:b.fontSize,style:this.properties.tile.secondaryLabel,x:_,y:A+(M-b.height)*.5}:void 0,verticalAlign:"middle",textAlign:I}}else{if(v?.label==null)return;{const{padding:S,textAlign:x}=s,M=this.groupTitleHeight(y,f);if(M==null)return;const T=f.width-2*S,b=TextWrapper8.wrapText(v.label,{maxWidth:f.width-2*S,font:s.label,textWrap:"never"}),I=textAlignFactors2[x]??.5;return{label:{text:b,fontSize:s.label.fontSize,lineHeight:TextUtils5.getLineHeight(s.label.fontSize),style:this.properties.group.label,x:f.x+S+T*I,y:f.y+S+M*.5},secondaryLabel:void 0,verticalAlign:"middle",textAlign:x}}}}),g=(y,p,m,f)=>{const v=y.children.length===0,S=u[y.index],x=m===0?S?.label:S?.secondaryLabel;if(S==null||x==null){p.visible=!1;return}let M;if(f){const{tile:T,group:b}=i;M=T.secondaryLabel.color,v?m===0&&(M=T.label.color):M=b.label.color}p.text=x.text,p.fontSize=x.fontSize,p.lineHeight=x.lineHeight,p.fontStyle=x.style.fontStyle,p.fontFamily=x.style.fontFamily,p.fontWeight=x.style.fontWeight,p.fill=M??x.style.color,p.textAlign=S.textAlign,p.textBaseline=S.verticalAlign,p.x=x.x,p.y=x.y,p.visible=!0};this.groupSelection.selectByClass(Text13).forEach(y=>{g(y.datum,y,y.tag,!1)}),this.highlightSelection.selectByClass(Text13).forEach(y=>{const p=y.datum===h;y.visible=p||(h?.contains(y.datum)??!1),y.visible&&g(y.datum,y,y.tag,p)})}updateNodeMidPoint(t){this.rootNode.walk(e=>{const i=t[e.index];i!=null&&(e.midPoint.x=i.x+i.width/2,e.midPoint.y=i.y)})}pickNodeClosestDatum(t){const e=this.pickNodeExactShape(t);return e!==void 0?e:this.pickNodeNearestDistantObject(t,this.groupSelection.nodes())}getTooltipHtml(t){const{datum:e,depth:i}=t,{id:o}=this,{tooltip:s,colorKey:a,colorName:n=a,labelKey:r,secondaryLabelKey:l,sizeKey:c,sizeName:h=c,childrenKey:d}=this.properties,u=t.children.length===0,g=u||this.properties.group.interactive;if(e==null||i==null||!g)return import_ag_charts_community186._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const y=r!=null?e[r]:void 0,m=this.getTileFormat(t,!1)?.fill??this.getNodeFill(t);if(!s.renderer&&!y)return import_ag_charts_community186._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const f=[],v=l!=null?e[l]:void 0;v!=null&&l!==a&&l!==c&&f.push(sanitizeHtml15(v));const S=c!=null?e[c]:void 0;S!=null&&f.push(`${h}: ${sanitizeHtml15(S)}`);const x=a!=null?e[a]:void 0;x!=null&&f.push(`${n}: ${sanitizeHtml15(x)}`);const M=f.join("<br>"),T={title:y,color:u?this.properties.tile.label.color:this.properties.group.label.color,backgroundColor:m,content:M};return s.toTooltipHtml(T,{depth:i,datum:e,colorKey:a,labelKey:r,secondaryLabelKey:l,sizeKey:c,title:y,color:m,seriesId:o,childrenKey:d,colorName:n,itemId:void 0,sizeName:h})}pickFocus(t){const{focusPath:e}=this;(e.length<2||this.focusSorted==null)&&(e.length=1,this.focusSorted=this.sortChildren(e[0].nodeDatum),e.push({nodeDatum:this.focusSorted.childAt(0),childIndex:0}));const{datumIndexDelta:i,otherIndexDelta:o}=t,s=e[e.length-1];if(o===1){if(s.nodeDatum.children.length>0){this.focusSorted=this.sortChildren(s.nodeDatum);const n={nodeDatum:this.focusSorted.childAt(0),childIndex:0};return e.push(n),this.computeFocusOutputs(n)}}else if(i!==0){const n=s.childIndex+i,r=(s.nodeDatum.parent?.children.length??1)-1;return s.childIndex=clamp5(0,n,r),s.nodeDatum=this.focusSorted.childAt(s.childIndex),this.computeFocusOutputs(s)}const a=super.pickFocus(t);return o<0&&(this.focusSorted=this.sortChildren(e[e.length-1].nodeDatum.parent)),a}computeFocusBounds(t){return this.groupSelection.selectByClass(Rect6)[t.index]?.computeTransformedBBox()}};TreemapSeries.className="TreemapSeries",TreemapSeries.type="treemap";var{DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:DEFAULT_DIVERGING_SERIES_COLOUR_RANGE4,DEFAULT_FONT_FAMILY:DEFAULT_FONT_FAMILY4,DEFAULT_HIERARCHY_FILLS:DEFAULT_HIERARCHY_FILLS2,DEFAULT_HIERARCHY_STROKES:DEFAULT_HIERARCHY_STROKES2,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:DEFAULT_INSIDE_SERIES_LABEL_COLOUR2,DEFAULT_LABEL_COLOUR:DEFAULT_LABEL_COLOUR5,FONT_WEIGHT:FONT_WEIGHT3}=import_ag_charts_community187._Theme,TreemapModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"treemap",moduleFactory:t=>new TreemapSeries(t),tooltipDefaults:{range:"exact"},solo:!0,themeTemplate:{series:{group:{label:{enabled:!0,color:DEFAULT_LABEL_COLOUR5,fontStyle:void 0,fontWeight:FONT_WEIGHT3.NORMAL,fontSize:12,fontFamily:DEFAULT_FONT_FAMILY4,spacing:4},fill:void 0,stroke:void 0,strokeWidth:1,padding:4,gap:2,textAlign:"left"},tile:{label:{enabled:!0,color:DEFAULT_INSIDE_SERIES_LABEL_COLOUR2,fontStyle:void 0,fontWeight:FONT_WEIGHT3.NORMAL,fontSize:18,minimumFontSize:10,fontFamily:DEFAULT_FONT_FAMILY4,wrapping:"on-space",overflowStrategy:"ellipsis",spacing:2},secondaryLabel:{enabled:!0,color:DEFAULT_INSIDE_SERIES_LABEL_COLOUR2,fontStyle:void 0,fontWeight:void 0,fontSize:12,minimumFontSize:10,fontFamily:DEFAULT_FONT_FAMILY4,wrapping:"never",overflowStrategy:"ellipsis"},fill:void 0,stroke:void 0,strokeWidth:0,padding:3,gap:1},highlightStyle:{group:{label:{color:DEFAULT_LABEL_COLOUR5},fill:void 0,stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},tile:{label:{color:DEFAULT_INSIDE_SERIES_LABEL_COLOUR2},secondaryLabel:{color:DEFAULT_INSIDE_SERIES_LABEL_COLOUR2},fill:void 0,stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}}},gradientLegend:{enabled:!0}},paletteFactory:({takeColors:t,colorsCount:e,themeTemplateParameters:i})=>{const{fills:o,strokes:s}=t(e),a=i.get(DEFAULT_DIVERGING_SERIES_COLOUR_RANGE4),n=i.get(DEFAULT_HIERARCHY_FILLS2),r=i.get(DEFAULT_HIERARCHY_STROKES2);return{fills:o,strokes:s,colorRange:a,undocumentedGroupFills:n,undocumentedGroupStrokes:r}}},import_ag_charts_community191=require("ag-charts-community"),import_ag_charts_community189=require("ag-charts-community"),import_ag_charts_community188=require("ag-charts-community"),{DropShadow:DropShadow3,Label:Label13}=import_ag_charts_community188._Scene,{AbstractBarSeriesProperties:AbstractBarSeriesProperties5,BaseProperties:BaseProperties22,PropertiesArray:PropertiesArray3,SeriesTooltip:SeriesTooltip19,Validate:Validate68,BOOLEAN:BOOLEAN20,COLOR_STRING:COLOR_STRING27,FUNCTION:FUNCTION19,LINE_DASH:LINE_DASH20,NUMBER:NUMBER16,OBJECT:OBJECT32,OBJECT_ARRAY,POSITIVE_NUMBER:POSITIVE_NUMBER29,RATIO:RATIO33,STRING:STRING34,UNION:UNION8}=import_ag_charts_community188._ModuleSupport,WaterfallSeriesTotal=class extends BaseProperties22{};__decorateClass([Validate68(UNION8(["subtotal","total"],"a total type"))],WaterfallSeriesTotal.prototype,"totalType",2),__decorateClass([Validate68(NUMBER16)],WaterfallSeriesTotal.prototype,"index",2),__decorateClass([Validate68(STRING34)],WaterfallSeriesTotal.prototype,"axisLabel",2);var WaterfallSeriesItemTooltip=class extends BaseProperties22{};__decorateClass([Validate68(FUNCTION19,{optional:!0})],WaterfallSeriesItemTooltip.prototype,"renderer",2);var WaterfallSeriesLabel=class extends Label13{constructor(){super(...arguments),this.placement="end",this.padding=6}};__decorateClass([Validate68(UNION8(["start","end","inside"],"a placement"))],WaterfallSeriesLabel.prototype,"placement",2),__decorateClass([Validate68(POSITIVE_NUMBER29)],WaterfallSeriesLabel.prototype,"padding",2);var WaterfallSeriesItem=class extends BaseProperties22{constructor(){super(...arguments),this.fill="#c16068",this.stroke="#c16068",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=1,this.cornerRadius=0,this.shadow=new DropShadow3().set({enabled:!1}),this.label=new WaterfallSeriesLabel,this.tooltip=new WaterfallSeriesItemTooltip}};__decorateClass([Validate68(STRING34,{optional:!0})],WaterfallSeriesItem.prototype,"name",2),__decorateClass([Validate68(COLOR_STRING27)],WaterfallSeriesItem.prototype,"fill",2),__decorateClass([Validate68(COLOR_STRING27)],WaterfallSeriesItem.prototype,"stroke",2),__decorateClass([Validate68(RATIO33)],WaterfallSeriesItem.prototype,"fillOpacity",2),__decorateClass([Validate68(RATIO33)],WaterfallSeriesItem.prototype,"strokeOpacity",2),__decorateClass([Validate68(LINE_DASH20)],WaterfallSeriesItem.prototype,"lineDash",2),__decorateClass([Validate68(POSITIVE_NUMBER29)],WaterfallSeriesItem.prototype,"lineDashOffset",2),__decorateClass([Validate68(POSITIVE_NUMBER29)],WaterfallSeriesItem.prototype,"strokeWidth",2),__decorateClass([Validate68(POSITIVE_NUMBER29)],WaterfallSeriesItem.prototype,"cornerRadius",2),__decorateClass([Validate68(FUNCTION19,{optional:!0})],WaterfallSeriesItem.prototype,"itemStyler",2),__decorateClass([Validate68(OBJECT32)],WaterfallSeriesItem.prototype,"shadow",2),__decorateClass([Validate68(OBJECT32)],WaterfallSeriesItem.prototype,"label",2),__decorateClass([Validate68(OBJECT32)],WaterfallSeriesItem.prototype,"tooltip",2);var WaterfallSeriesConnectorLine=class extends BaseProperties22{constructor(){super(...arguments),this.enabled=!0,this.stroke="black",this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2}};__decorateClass([Validate68(BOOLEAN20)],WaterfallSeriesConnectorLine.prototype,"enabled",2),__decorateClass([Validate68(COLOR_STRING27)],WaterfallSeriesConnectorLine.prototype,"stroke",2),__decorateClass([Validate68(RATIO33)],WaterfallSeriesConnectorLine.prototype,"strokeOpacity",2),__decorateClass([Validate68(LINE_DASH20)],WaterfallSeriesConnectorLine.prototype,"lineDash",2),__decorateClass([Validate68(POSITIVE_NUMBER29)],WaterfallSeriesConnectorLine.prototype,"lineDashOffset",2),__decorateClass([Validate68(POSITIVE_NUMBER29)],WaterfallSeriesConnectorLine.prototype,"strokeWidth",2);var WaterfallSeriesItems=class extends BaseProperties22{constructor(){super(...arguments),this.positive=new WaterfallSeriesItem,this.negative=new WaterfallSeriesItem,this.total=new WaterfallSeriesItem}};__decorateClass([Validate68(OBJECT32)],WaterfallSeriesItems.prototype,"positive",2),__decorateClass([Validate68(OBJECT32)],WaterfallSeriesItems.prototype,"negative",2),__decorateClass([Validate68(OBJECT32)],WaterfallSeriesItems.prototype,"total",2);var WaterfallSeriesProperties=class extends AbstractBarSeriesProperties5{constructor(){super(...arguments),this.item=new WaterfallSeriesItems,this.totals=new PropertiesArray3(WaterfallSeriesTotal),this.line=new WaterfallSeriesConnectorLine,this.tooltip=new SeriesTooltip19}};__decorateClass([Validate68(STRING34)],WaterfallSeriesProperties.prototype,"xKey",2),__decorateClass([Validate68(STRING34)],WaterfallSeriesProperties.prototype,"yKey",2),__decorateClass([Validate68(STRING34,{optional:!0})],WaterfallSeriesProperties.prototype,"xName",2),__decorateClass([Validate68(STRING34,{optional:!0})],WaterfallSeriesProperties.prototype,"yName",2),__decorateClass([Validate68(OBJECT32)],WaterfallSeriesProperties.prototype,"item",2),__decorateClass([Validate68(OBJECT_ARRAY)],WaterfallSeriesProperties.prototype,"totals",2),__decorateClass([Validate68(OBJECT32)],WaterfallSeriesProperties.prototype,"line",2),__decorateClass([Validate68(OBJECT32)],WaterfallSeriesProperties.prototype,"tooltip",2);var{adjustLabelPlacement,SeriesNodePickMode:SeriesNodePickMode14,fixNumericExtent:fixNumericExtent9,valueProperty:valueProperty16,keyProperty:keyProperty9,accumulativeValueProperty,trailingAccumulatedValueProperty,ChartAxisDirection:ChartAxisDirection22,getRectConfig:getRectConfig2,updateRect:updateRect2,checkCrisp:checkCrisp2,updateLabelNode:updateLabelNode3,prepareBarAnimationFunctions:prepareBarAnimationFunctions3,collapsedStartingBarPosition:collapsedStartingBarPosition2,resetBarSelectionsFn:resetBarSelectionsFn3,seriesLabelFadeInAnimation:seriesLabelFadeInAnimation7,resetLabelFn:resetLabelFn5,animationValidation:animationValidation9,DEFAULT_CARTESIAN_DIRECTION_KEYS:DEFAULT_CARTESIAN_DIRECTION_KEYS2,DEFAULT_CARTESIAN_DIRECTION_NAMES:DEFAULT_CARTESIAN_DIRECTION_NAMES2,isFiniteNumber:isFiniteNumber10,computeBarFocusBounds:computeBarFocusBounds6}=import_ag_charts_community189._ModuleSupport,{Rect:Rect7,motion:motion9}=import_ag_charts_community189._Scene,{sanitizeHtml:sanitizeHtml16,isContinuous}=import_ag_charts_community189._Util,{ContinuousScale:ContinuousScale4}=import_ag_charts_community189._Scale,WaterfallSeries=class extends import_ag_charts_community189._ModuleSupport.AbstractBarSeries{constructor(t){super({moduleCtx:t,directionKeys:DEFAULT_CARTESIAN_DIRECTION_KEYS2,directionNames:DEFAULT_CARTESIAN_DIRECTION_NAMES2,pickModes:[SeriesNodePickMode14.NEAREST_NODE,SeriesNodePickMode14.EXACT_SHAPE_MATCH],pathsPerSeries:["connector"],hasHighlightedLabels:!0,pathsZIndexSubOrderOffset:[-1,-1],animationResetFns:{datum:resetBarSelectionsFn3,label:resetLabelFn5}}),this.properties=new WaterfallSeriesProperties,this.seriesItemTypes=new Set(["positive","negative","total"])}async processData(t){const{xKey:e,yKey:i,totals:o}=this.properties,{data:s=[]}=this;if(!this.properties.isValid()||!this.visible)return;const a=v=>isContinuous(v)&&Number(v)>=0,n=v=>isContinuous(v)&&Number(v)<0,r=v=>v==="total"||v==="subtotal",l={missingValue:void 0,invalidValue:void 0},c=[],h=o.reduce((v,S)=>{const x=v.get(S.index);return x?x.push(S):v.set(S.index,[S]),v},new Map);s.forEach((v,S)=>{c.push(v),h.get(S)?.forEach(x=>c.push({...x.toJson(),[e]:x.axisLabel}))});const d=[];this.ctx.animationManager.isSkipped()||d.push(animationValidation9());const u=this.getCategoryAxis()?.scale,g=this.getValueAxis()?.scale,{isContinuousX:y,xScaleType:p,yScaleType:m}=this.getScaleInformation({xScale:u,yScale:g}),{processedData:f}=await this.requestDataModel(t,c,{props:[keyProperty9(e,p,{id:"xValue"}),accumulativeValueProperty(i,m,{...l,id:"yCurrent"}),accumulativeValueProperty(i,m,{...l,missingValue:0,id:"yCurrentTotal"}),accumulativeValueProperty(i,m,{...l,id:"yCurrentPositive",validation:a}),accumulativeValueProperty(i,m,{...l,id:"yCurrentNegative",validation:n}),trailingAccumulatedValueProperty(i,m,{...l,id:"yPrevious"}),valueProperty16(i,m,{id:"yRaw"}),valueProperty16("totalType","band",{id:"totalTypeValue",missingValue:void 0,validation:r}),...y?[import_ag_charts_community189._ModuleSupport.SMALLEST_KEY_INTERVAL,import_ag_charts_community189._ModuleSupport.LARGEST_KEY_INTERVAL]:[],...d]});this.smallestDataInterval=f.reduced?.smallestKeyInterval,this.largestDataInterval=f.reduced?.largestKeyInterval,this.updateSeriesItemTypes(),this.animationState.transition("updateData")}getSeriesDomain(t){const{processedData:e,dataModel:i,smallestDataInterval:o}=this;if(!e||!i)return[];const{keys:[s],values:a}=e.domain,n=i.resolveProcessedDataDefById(this,"xValue");if(t===this.getCategoryDirection()){if(n?.def.type==="key"&&n?.def.valueType==="category")return s;const r=isFiniteNumber10(o)?o:0,l=import_ag_charts_community189._ModuleSupport.extent(s)??[NaN,NaN],c=this.getCategoryAxis(),h=!!c?.isReversed(),d=t===ChartAxisDirection22.Y,u=h===d?0:-r,g=h===d?r:0,y=l[0]+u,p=l[1]+g;return fixNumericExtent9([y,p],c)}else{const r=i.resolveProcessedDataIndexById(this,"yCurrent"),l=a[r],c=[Math.min(0,l[0]),Math.max(0,l[1])];return fixNumericExtent9(c)}}async createNodeData(){const{data:t,dataModel:e,smallestDataInterval:i}=this,{line:o}=this.properties,s=this.getCategoryAxis(),a=this.getValueAxis();if(!(t&&s&&a&&e))return;const n=s.scale,r=a.scale,l=s.isReversed(),c=this.getBarDirection()===ChartAxisDirection22.X,h=(ContinuousScale4.is(n)?n.calcBandwidth(i):n.bandwidth)??10;if(this.processedData?.type!=="ungrouped")return;const d={itemId:this.properties.yKey,nodeData:[],labelData:[],pointData:[],scales:this.calculateScaling(),visible:this.visible};if(!this.visible)return d;const u=e.resolveProcessedDataIndexById(this,"yRaw"),g=e.resolveProcessedDataIndexById(this,"xValue"),y=e.resolveProcessedDataIndexById(this,"totalTypeValue"),p=[],m=e.resolveProcessedDataIndexById(this,"yCurrent"),f=e.resolveProcessedDataIndexById(this,"yPrevious"),v=e.resolveProcessedDataIndexById(this,"yCurrentTotal");function S(k,_,O){return k||_?{cumulativeValue:O[v],trailingValue:_?M:0}:{cumulativeValue:O[m],trailingValue:O[f]}}function x(k,_,O,A,L){return k?A:_?(A??0)-(L??0):O}let M=0;const{xKey:T,yKey:b,xName:I,yName:D}=this.properties;this.processedData?.data.forEach(({keys:k,datum:_,values:O},A)=>{const L=O[y],E=this.isSubtotal(L),C=this.isTotal(L),R=C||E,P=k[g],w=Math.round(n.convert(P)),z=O[u],{cumulativeValue:B,trailingValue:F}=S(C,E,O);R&&(M=B??0);const W=Math.round(r.convert(B)),V=Math.round(r.convert(F)),H=x(C,E,z,B,F),U=(H??0)>=0,K=this.getSeriesItemType(U,L),{fill:q,stroke:j,strokeWidth:Y,label:X}=this.getItemConfig(K),J=U?W:V,Q=U?V:W,Z=Math.max(Y,Math.abs(Q-J)),G={x:c?Math.min(J,Q):w,y:c?w:Math.min(J,Q),width:c?Z:h,height:c?h:Z},tt={x:G.x+G.width/2,y:G.y+G.height/2},it=R?W:V,ot=Math.floor(o.strokeWidth)%2/2,gt=l?W:it,yt=l?it:W;let st,at;c?(st={x:gt+ot,y:G.y},at={x:yt+ot,y:G.y+G.height}):(st={x:G.x,y:gt+ot},at={x:G.x+G.width,y:yt+ot});const vt={x:l?at.x:st.x,y:l?at.y:st.y,x2:l?st.x:at.x,y2:l?st.y:at.y,size:0};p.push(vt);const bt=this.getLabelText(X,{itemId:K==="subtotal"?"total":K,value:H,datum:_,xKey:T,yKey:b,xName:I,yName:D},dt=>isFiniteNumber10(dt)?dt.toFixed(2):String(dt)),mt={index:A,series:this,itemId:K,datum:_,cumulativeValue:B??0,xValue:P,yValue:H,yKey:b,xKey:T,x:G.x,y:G.y,width:G.width,height:G.height,midPoint:tt,fill:q,stroke:j,strokeWidth:Y,opacity:1,label:{text:bt,...adjustLabelPlacement({isPositive:(H??-1)>=0,isVertical:!c,placement:X.placement,padding:X.padding,rect:G})}};d.nodeData.push(mt),d.labelData.push(mt)});const N=this.properties.line.enabled;return m!==void 0&&N&&(d.pointData=p),d}updateSeriesItemTypes(){const{dataModel:t,seriesItemTypes:e,processedData:i}=this;if(!t||!i)return;e.clear();const o=t.resolveProcessedDataIndexById(this,"yCurrentPositive"),s=t.resolveProcessedDataIndexById(this,"yCurrentNegative"),a=t.resolveProcessedDataIndexById(this,"totalTypeValue"),n=i.domain.values[o]??[],r=i.domain.values[s]??[];n.length>0&&e.add("positive"),r.length>0&&e.add("negative");const l=i?.domain.values[a];l&&l.forEach(c=>{(c==="total"||c==="subtotal")&&e.add("total")})}isSubtotal(t){return t==="subtotal"}isTotal(t){return t==="total"}nodeFactory(){return new Rect7}getSeriesItemType(t,e){return e??(t?"positive":"negative")}getItemConfig(t){switch(t){case"positive":return this.properties.item.positive;case"negative":return this.properties.item.negative;case"subtotal":case"total":return this.properties.item.total}}async updateDatumSelection(t){const{nodeData:e,datumSelection:i}=t,o=e??[];return i.update(o)}async updateDatumNodes(t){const{datumSelection:e,isHighlight:i}=t,{id:o,ctx:s}=this,{yKey:a,highlightStyle:{item:n}}=this.properties,r=this.getCategoryAxis(),l=checkCrisp2(r?.scale,r?.visibleRange,this.smallestDataInterval,this.largestDataInterval),c=this.getCategoryDirection()===ChartAxisDirection22.X;e.each((h,d)=>{const u=d.itemId,{fillOpacity:g,strokeOpacity:y,strokeWidth:p,lineDash:m,lineDashOffset:f,cornerRadius:v,itemStyler:S,shadow:x}=this.getItemConfig(u),M={fill:d.fill,stroke:d.stroke,fillOpacity:g,strokeOpacity:y,lineDash:m,lineDashOffset:f,fillShadow:x,strokeWidth:this.getStrokeWidth(p),cornerRadius:v},T=c?d.width>0:d.height>0,b=getRectConfig2({datum:d,isHighlighted:i,style:M,highlightStyle:n,itemStyler:S,seriesId:o,itemId:d.itemId,ctx:s,value:d.yValue,yKey:a});b.crisp=l,b.visible=T,updateRect2(h,b)})}async updateLabelSelection(t){const{labelData:e,labelSelection:i}=t;if(e.length===0)return i.update([]);const o=e[0].itemId,{label:s}=this.getItemConfig(o),a=s.enabled?e:[];return i.update(a)}async updateLabelNodes(t){t.labelSelection.each((e,i)=>{updateLabelNode3(e,this.getItemConfig(i.itemId).label,i.label)})}getTooltipHtml(t){const e=this.getCategoryAxis(),i=this.getValueAxis();if(!this.properties.isValid()||!e||!i)return import_ag_charts_community189._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const{id:o}=this,{xKey:s,yKey:a,xName:n,yName:r,tooltip:l}=this.properties,{datum:c,itemId:h,xValue:d,yValue:u}=t,{fill:g,fillOpacity:y,stroke:p,strokeWidth:m,strokeOpacity:f,lineDash:v=[],lineDashOffset:S,cornerRadius:x,name:M,itemStyler:T}=this.getItemConfig(h);let b;T&&(b=this.ctx.callbackCache.call(T,{datum:c,xKey:s,yKey:a,fill:g,fillOpacity:y,stroke:p,strokeWidth:m,strokeOpacity:f,lineDash:v,lineDashOffset:S,cornerRadius:x,highlighted:!1,seriesId:o,itemId:t.itemId}));const I=b?.fill??g??"gray",D=sanitizeHtml16(e.formatDatum(d)),N=sanitizeHtml16(i.formatDatum(u)),k=this.isTotal(h),_=this.isSubtotal(h);let O;k?O="Total":_?O="Subtotal":O=M??r??a;const A=sanitizeHtml16(r),L=`<b>${sanitizeHtml16(n??s)}</b>: ${D}<br/><b>${sanitizeHtml16(O)}</b>: ${N}`;return l.toTooltipHtml({title:A,content:L,backgroundColor:I},{seriesId:o,itemId:h,datum:c,xKey:s,yKey:a,xName:n,yName:r,color:I,title:A})}getLegendData(t){if(t!=="category")return[];const{id:e,seriesItemTypes:i}=this,o=[],s=a=>a.charAt(0).toUpperCase()+a.substring(1);return i.forEach(a=>{const{fill:n,stroke:r,fillOpacity:l,strokeOpacity:c,strokeWidth:h,name:d}=this.getItemConfig(a);o.push({legendType:"category",id:e,itemId:a,seriesId:e,enabled:!0,label:{text:d??s(a)},symbols:[{marker:{fill:n,stroke:r,fillOpacity:l,strokeOpacity:c,strokeWidth:h}}]})}),o}toggleSeriesItem(){}animateEmptyUpdateReady({datumSelection:t,labelSelection:e,contextData:i,paths:o}){const s=prepareBarAnimationFunctions3(collapsedStartingBarPosition2(this.isVertical(),this.axes,"normal"));motion9.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],s),seriesLabelFadeInAnimation7(this,"labels",this.ctx.animationManager,e);const{pointData:a}=i;if(!a)return;const[n]=o;this.isVertical()?this.animateConnectorLinesVertical(n,a):this.animateConnectorLinesHorizontal(n,a)}animateConnectorLinesHorizontal(t,e){const{path:i}=t;this.updateLineNode(t);const o=this.getValueAxis(),s=o?.isReversed(),a=s?(c,h)=>c<h:(c,h)=>c>h,n=o?.scale.convert(0),r=e.reduce((c,h)=>(a(h.x,c)&&(c=h.x),c),s?1/0:0),l=(c,h,d,u,g)=>(c-h)/(d-h)*(g-u)+u;this.ctx.animationManager.animate({id:`${this.id}_connectors`,groupId:this.id,phase:"initial",from:n,to:r,ease:import_ag_charts_community189._ModuleSupport.Motion.easeOut,collapsable:!1,onUpdate(c){i.clear(!0),e.forEach((h,d)=>{const u=l(c,n,r,n,h.x),g=l(c,n,r,n,h.x2);d!==0&&i.lineTo(u,h.y),i.moveTo(g,h.y2)}),t.checkPathDirty()}})}animateConnectorLinesVertical(t,e){const{path:i}=t;this.updateLineNode(t);const o=this.getValueAxis(),s=o?.isReversed(),a=s?(c,h)=>c>h:(c,h)=>c<h,n=o?.scale.convert(0),r=e.reduce((c,h)=>(a(h.y,c)&&(c=h.y),c),s?0:1/0),l=(c,h,d,u,g)=>(c-h)/(d-h)*(g-u)+u;this.ctx.animationManager.animate({id:`${this.id}_connectors`,groupId:this.id,phase:"initial",from:n,to:r,ease:import_ag_charts_community189._ModuleSupport.Motion.easeOut,collapsable:!1,onUpdate(c){i.clear(!0),e.forEach((h,d)=>{const u=l(c,n,r,n,h.y),g=l(c,n,r,n,h.y2);d!==0&&i.lineTo(h.x,u),i.moveTo(h.x2,g)}),t.checkPathDirty()}})}animateReadyResize(t){super.animateReadyResize(t),this.resetConnectorLinesPath(t)}async updatePaths(t){this.resetConnectorLinesPath({contextData:t.contextData,paths:t.paths})}resetConnectorLinesPath({contextData:t,paths:e}){if(e.length===0)return;const[i]=e;this.updateLineNode(i);const{path:o}=i;o.clear(!0);const{pointData:s}=t;s&&(s.forEach((a,n)=>{n!==0&&o.lineTo(a.x,a.y),o.moveTo(a.x2,a.y2)}),i.checkPathDirty())}updateLineNode(t){const{stroke:e,strokeWidth:i,strokeOpacity:o,lineDash:s,lineDashOffset:a}=this.properties.line;t.setProperties({fill:void 0,stroke:e,strokeWidth:this.getStrokeWidth(i),strokeOpacity:o,lineDash:s,lineDashOffset:a,lineJoin:"round",pointerEvents:import_ag_charts_community189._Scene.PointerEvents.None})}isLabelEnabled(){const{positive:t,negative:e,total:i}=this.properties.item;return t.label.enabled||e.label.enabled||i.label.enabled}onDataChange(){}computeFocusBounds({datumIndex:t,seriesRect:e}){return computeBarFocusBounds6(this.contextNodeData?.nodeData[t],this.contentGroup,e)}};WaterfallSeries.className="WaterfallSeries",WaterfallSeries.type="waterfall";var import_ag_charts_community190=require("ag-charts-community"),itemTheme={strokeWidth:0,label:{enabled:!1,fontStyle:void 0,fontWeight:import_ag_charts_community190._Theme.FONT_WEIGHT.NORMAL,fontSize:12,fontFamily:import_ag_charts_community190._Theme.DEFAULT_FONT_FAMILY,color:import_ag_charts_community190._Theme.DEFAULT_LABEL_COLOUR,formatter:void 0,placement:"end"}},WATERFALL_SERIES_THEME={series:{item:{positive:itemTheme,negative:itemTheme,total:itemTheme},line:{stroke:import_ag_charts_community190._Theme.PALETTE_NEUTRAL_STROKE,strokeOpacity:1,lineDash:[0],lineDashOffset:0,strokeWidth:2}},legend:{enabled:!0,toggleSeries:!1}},WaterfallModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"waterfall",solo:!0,moduleFactory:t=>new WaterfallSeries(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:import_ag_charts_community191._Theme.CARTESIAN_AXIS_TYPE.CATEGORY,position:import_ag_charts_community191._Theme.POSITION.BOTTOM},{type:import_ag_charts_community191._Theme.CARTESIAN_AXIS_TYPE.NUMBER,position:import_ag_charts_community191._Theme.POSITION.LEFT}],themeTemplate:WATERFALL_SERIES_THEME,swapDefaultAxesCondition:({direction:t})=>t==="horizontal",paletteFactory:({takeColors:t,colorsCount:e,userPalette:i,palette:o})=>{if(i==="user-indexed"){const{fills:s,strokes:a}=t(e);return{line:{stroke:o.neutral.stroke},item:{positive:{fill:s[0],stroke:a[0]},negative:{fill:s[1],stroke:a[1]},total:{fill:s[2],stroke:a[2]}}}}return{line:{stroke:o.neutral.stroke},item:{positive:{fill:o.altUp.fill,stroke:o.altUp.stroke,label:{color:import_ag_charts_community191._Theme.DEFAULT_LABEL_COLOUR}},negative:{fill:o.altDown.fill,stroke:o.altDown.stroke,label:{color:import_ag_charts_community191._Theme.DEFAULT_LABEL_COLOUR}},total:{fill:o.neutral.fill,stroke:o.neutral.stroke,label:{color:import_ag_charts_community191._Theme.DEFAULT_LABEL_COLOUR}}}}}},styles_default=`.ag-watermark{position:absolute;bottom:20px;right:25px;font-weight:700;font-family:Impact,sans-serif;font-size:19px;opacity:.7;animation:1s ease-out 3s ag-watermark-fadeout;color:#9b9b9b;pointer-events:none;&:before{content:"";display:block;height:40px;width:170px;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=);background-repeat:no-repeat;background-size:170px 40px}>span{padding-left:.7rem}}@keyframes ag-watermark-fadeout{0%{opacity:.5}to{opacity:0}}.ag-charts-popover{position:absolute;display:grid;grid:auto-flow auto / 1fr;column-gap:12px;min-width:200px;border:var(--ag-charts-popover-border);border-radius:4px;background:var(--ag-charts-popover-background-color);color:var(--ag-charts-popover-foreground-color);font:var(--ag-charts-popover-font-size-small) var(--ag-charts-font-family);overflow:hidden;z-index:var(--ag-charts-layer-ui-overlay);--item-padding: 6px 12px}.ag-charts-popover:has(.ag-charts-popover__icon){grid:auto-flow auto / auto 1fr}.ag-charts-popover__row{display:grid;grid-column:1 / -1;grid-template-columns:subgrid;align-items:center;padding:var(--item-padding)}.ag-charts-popover__row:not(.ag-charts-popover__row--active){cursor:pointer}.ag-charts-popover__row:focus{background:var(--ag-charts-popover-hover-color)}.ag-charts-popover__row--active{background:var(--ag-charts-popover-active-background-color);color:var(--ag-charts-popover-active-color)}.ag-charts-popover__label{grid-column:-1 / span 1}.ag-charts-color-picker{position:absolute;display:flex;flex-direction:column;width:190px;padding:8px;border:var(--ag-charts-toolbar-border);color:var(--ag-charts-toolbar-foreground-color);background:var(--ag-charts-toolbar-background-color);border-radius:4px;z-index:var(--ag-charts-layer-ui-overlay);--h: 0;--s: 0;--v: 0;--a: 0;--color: #000;--color-a: #000;--thumb-size: 18px;--inner-width: 172px;--track-height: 12px;--palette-height: 136px;--checker: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="4" height="4"><rect x="0" y="0" width="4" height="4" fill="%23fff"/><path d="M0 0H2V4H4V2H0Z" fill="%23b2b2b2"/></svg>')}.ag-charts-color-picker__palette{position:relative;width:100%;height:var(--palette-height);margin-bottom:8px;background:linear-gradient(to bottom,#0000,#000),linear-gradient(to right,#fff,#fff0) hsl(var(--h),100%,50%);border-radius:6px;box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__palette:after{content:"";position:absolute;display:block;top:calc(var(--thumb-size) * -.5 + (1 - var(--v)) * 100%);left:calc(var(--thumb-size) * -.5 + var(--s) * 100%);background:var(--color);width:var(--thumb-size);height:var(--thumb-size);border-radius:99px;box-shadow:var(--box-shadow);--box-shadow: inset 0 0 0 3px white, inset 0 0 1px 3px #0006, 0 0 5px #00000038}.ag-charts-color-picker__palette:focus-visible:after{outline:var(--ag-charts-focus-border);box-shadow:var(--box-shadow),0 0 0 2px #fff8,var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__hue-input,.ag-charts-color-picker__alpha-input{-webkit-appearance:none;display:block;position:relative;padding:0;margin:0 calc(var(--inset) * -1);border:0;height:var(--thumb-size);width:auto;background:transparent;--inset: calc((var(--thumb-size) - var(--track-height)) / 2)}.ag-charts-color-picker__hue-input::-webkit-slider-thumb,.ag-charts-color-picker__alpha-input::-webkit-slider-thumb{-webkit-appearance:none;width:var(--thumb-size);height:var(--thumb-size);border-radius:99px;box-shadow:var(--box-shadow);--box-shadow: inset 0 0 0 3px white, inset 0 0 1px 3px #0006, 0 0 5px #00000038;transform:translateZ(0)}.ag-charts-color-picker__hue-input::-webkit-slider-thumb{background:hsl(var(--h),100%,50%)}.ag-charts-color-picker__alpha-input::-webkit-slider-thumb{background:transparent}.ag-charts-color-picker__alpha-input--opaque::-webkit-slider-thumb{background:var(--color)}.ag-charts-color-picker__hue-input:focus-visible::-webkit-slider-thumb,.ag-charts-color-picker__alpha-input:focus-visible::-webkit-slider-thumb{outline:var(--ag-charts-focus-border);box-shadow:var(--box-shadow),var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__hue-input:before,.ag-charts-color-picker__alpha-input:before{position:absolute;content:"";display:block;top:calc(50% - var(--track-height) / 2);left:var(--inset);right:var(--inset);height:var(--track-height);border-radius:99px;box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__hue-input{margin-bottom:4px}.ag-charts-color-picker__hue-input:before{background:linear-gradient(to right,red,red calc((100% - var(--track-height)) * 0 / 6 + var(--track-height) / 2),#ff0 calc((100% - var(--track-height)) * 1 / 6 + var(--track-height) / 2),#0f0 calc((100% - var(--track-height)) * 2 / 6 + var(--track-height) / 2),#0ff calc((100% - var(--track-height)) * 3 / 6 + var(--track-height) / 2),#00f calc((100% - var(--track-height)) * 4 / 6 + var(--track-height) / 2),#f0f calc((100% - var(--track-height)) * 5 / 6 + var(--track-height) / 2),red calc((100% - var(--track-height)) * 6 / 6 + var(--track-height) / 2))}.ag-charts-color-picker__alpha-input{margin-bottom:7px}.ag-charts-color-picker__alpha-input:before{background:linear-gradient(to right,transparent,var(--color)),var(--checker) top left / 4px 4px}.ag-charts-color-picker__color-field{display:flex;border:var(--ag-charts-border);background:var(--ag-charts-background-color);border-radius:4px;overflow:hidden}.ag-charts-color-picker__color-field:has(:focus-visible){border-color:var(--ag-charts-active-color);box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__color-label{width:16px;height:16px;margin:7px 0 7px 7px;color:transparent;background:linear-gradient(to right,var(--color-a),var(--color-a)),var(--checker) top left / 4px 4px;border-radius:2px;box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__color-input{flex:1;min-width:0;padding:7px 7px 7px 8px;border:0;margin:0;color:inherit;background:transparent;font-variant:tabular-nums}.ag-charts-color-picker__color-input:focus-visible{border:none;outline:none}.ag-charts-annotations__axis-button-wrapper{position:absolute;left:0;top:0;user-select:none;font:16px Verdana,sans-serif;overflow:hidden;white-space:nowrap;z-index:var(--ag-charts-layer-annotations);box-sizing:border-box}.ag-charts-annotations__axis-button-wrapper--hidden{display:none}.ag-charts-annotations__axis-button{cursor:pointer;border:none;border-radius:2px;padding:0;line-height:16px;background-color:var(--ag-charts-axis-label-background-color);color:var(--ag-charts-axis-label-color)}.ag-charts-annotations__axis-button:hover{opacity:.8;color:var(--ag-charts-axis-label-color)}.annotations__text-size{width:34px;min-width:0;border-top-left-radius:0;border-top-right-radius:0;--item-padding: 4px 8px}.ag-chart-context-menu{background:#f8f8f8;border:1px solid #babfc7;border-radius:5px;box-shadow:0 1px 4px 1px #babfc766;color:#181d1f;font:13px Verdana,sans-serif;transition:transform .1s ease;white-space:nowrap;z-index:var(--ag-charts-layer-ui-overlay)}.ag-chart-context-menu.ag-charts-dark-context-menu{color:#fff;background:#15181c}.ag-chart-context-menu__cover{position:fixed;left:0;top:0}.ag-chart-context-menu__menu{display:flex;flex-direction:column;padding:.5em 0}.ag-chart-context-menu__menu:focus{outline:none}.ag-chart-context-menu__item{background:none;border:none;box-sizing:border-box;font:inherit;padding:.5em 1em;text-align:left;-webkit-appearance:none;-moz-appearance:none}.ag-chart-context-menu__item.ag-charts-dark-context-menu{color:#fff}.ag-chart-context-menu__item:hover,.ag-chart-context-menu__item:hover.ag-charts-dark-context-menu{background:#2196f31a}.ag-chart-context-menu__item:active{background:#2196f333}.ag-chart-context-menu__item:active.ag-charts-dark-context-menu{background:#2196f31a}.ag-chart-context-menu__item[aria-disabled=true]{border:none;opacity:.5;text-align:left}.ag-chart-context-menu__item[aria-disabled=true]:hover{background:inherit;cursor:inherit}.ag-chart-context-menu__divider{margin:5px 0;background:#babfc7;height:1px}.ag-chart-context-menu__divider.ag-charts-dark-context-menu{background:#2196f31a}.ag-crosshair-label{position:absolute;left:0;top:0;user-select:none;pointer-events:none;font:12px Verdana,sans-serif;overflow:hidden;white-space:nowrap;z-index:var(--ag-charts-layer-crosshair);box-sizing:border-box}.ag-crosshair-label-content{padding:0 8px;border-radius:2px;line-height:20px;background-color:var(--ag-charts-axis-label-background-color);color:var(--ag-charts-axis-label-color)}.ag-crosshair-label-hidden{top:-10000px!important}.ag-charts-text-input{position:absolute}.ag-charts-text-input__textarea{display:block;height:100%;width:100%;border:0;background:none;line-height:1.38;transform:translateY(.09em)}.ag-charts-text-input__textarea[placeholder]:empty:before{content:attr(placeholder);color:var(--ag-charts-text-annotations-placeholder);font-weight:400}.ag-charts-text-input__textarea[placeholder]:not(:empty):before{content:""}
`;function setupEnterpriseModules(){import_ag_charts_community192._ModuleSupport.moduleRegistry.register(AngleCategoryAxisModule,AngleNumberAxisModule,AnimationModule,AnnotationsModule,BackgroundModule,ForegroundModule,BoxPlotModule,CandlestickModule,ChordModule,OhlcModule,BulletModule,ChartToolbarModule,ContextMenuModule,CrosshairModule,DataSourceModule,ErrorBarsModule,MapLineModule,MapLineBackgroundModule,MapMarkerModule,MapShapeModule,MapShapeBackgroundModule,NavigatorModule,StatusBarModule,GradientLegendModule,HeatmapModule,NightingaleModule,OrdinalTimeAxisModule,RadarAreaModule,RadarLineModule,RadialBarModule,RadialColumnModule,RadiusCategoryAxisModule,RadiusNumberAxisModule,RangeBarModule,RangeAreaModule,SankeyModule,SunburstModule,SyncModule,TreemapModule,WaterfallModule,ZoomModule),import_ag_charts_community192._ModuleSupport.enterpriseModule.isEnterprise=!0,import_ag_charts_community192._ModuleSupport.enterpriseModule.styles=styles_default,import_ag_charts_community192._ModuleSupport.enterpriseModule.licenseManager=t=>new LicenseManager(t.container?.ownerDocument??(typeof document>"u"?void 0:document)),import_ag_charts_community192._ModuleSupport.enterpriseModule.injectWatermark=injectWatermark}__reExport(main_exports,require("ag-charts-community"),module.exports),setupEnterpriseModules();
